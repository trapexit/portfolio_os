##src/examples/Graphics/3DO_Orbit/orbit.c::examples/3doorbit##
3doorbit - Demonstrates incorporating moving animations and sound effects.

  Synopsis

    3doorbit

  Description

    Demonstrates loading a background image, several animations, and some
    sound effects, and shows how you can integrate them.

    The 3DO logo spins around and spirals back into place.

  Associated Files

    orbit.c, orbit.h, orbiterror.h

  Location

    examples/Graphics/3DO_Orbit

##src/examples/Graphics/aaplayer/aaplayer.c::examples/aaplayer##
aaplayer - Loads and plays back an anti-aliased animation, using timer
    mechanisms.

  Synopsis

    aaplayer <imagefile> <animfile>

  Description

    Demonstrates loading and playing an anti-aliased animation and a
    background image. Allows the user to change the animation's frame rate,
    and the four corners of the animation's cels, and to toggle displaying the
    matte cel.

  Arguments

    imagefile                    Name of 3DO image.

    animfile                     Name of 3DO cel or animation.

  Associated Files

    aaplayer.c, aaplayer.h, aaerror.h

  Location

    examples/Graphics/aaplayer

##src/examples/NVRAM/Access/access.c::examples/access##
access - Demonstrates how to use Access for simple user-interface
    displays.

  Synopsis

    access

  Description

    Demonstrates how to use Access to display simple user-interface prompts.
    It creates a screen, and brings up Access displays in sequence.

  Associated Files

    access.c

  Location

    examples/NVRAM/access

##src/examples/FileSystem/allocate.c::examples/allocate##
allocate - Allocates blocks for a file.

  Synopsis

    allocate <file> <bytecount>

  Description

    Demonstrates how to allocate blocks of storage for a file.

  Arguments

    file                         Name of the file for which to allocate
                                 blocks.

    byte count                   Number of bytes to allocate.

  Associated Files

    allocate.c

  Location

    $c/allocate

    examples/FileSystem

##src/filesystem/allocate.c::examples/allocate##
allocate - Allocates blocks for a file.

  Synopsis

    allocate <file> <bytecount>

  Description

    Demonstrates how to allocate blocks of storage for a file.

  Arguments

    file                         Name of the file for which to allocate
                                 blocks.

    byte count                   Number of bytes to allocate.

  Associated Files

    allocate.c

  Location

    $c/allocate

    examples/FileSystem

##src/examples/Kernel/allocmem.c::examples/allocmem##
allocmem - Demonstrates how to allocate a block of memory and return it.

  Synopsis

    allocmem

  Description

    Demonstrates how to use AllocMem() and FreeMem() to allocate and free
    memory.

  Associated Files

    allocmem.c

  Location

    examples/Kernel

##src/examples/Graphics/Slideshow/animationvdl.c::examples/animationvdl##
animationvdl - Manipulates an animation against a background image.

  Synopsis

    animationvdl <imageName> <animName>

  Description

    Moves and distorts cels against a background image.

    The program loads a background image and an animation and enters a loop in
    which each cel of the animation is displayed against the background image
    and manipulated in response to control pad input.

  Arguments

    imageName                    Filename of image to use as background.

    animName                     Filename of animation to display in
                                 foreground

  Associated Files

    animationvdl.make

    The data files are:seafloor.img Default image filenamefish.animDefault
    animation filename

  Location

    examples/Graphics/Slideshow

##src/examples/Graphics/AnimSample/animsample.c::examples/animsample##
animsample - Loads and displays an animation and a background.

  Synopsis

    animsample <imagefile> <animfile>

  Description

    Demonstrates loading and displaying an animation and a background image.

    The program allows the user to change the animation's frame rate, the four
    corners of the animation's cels, and the P-mode.

  Arguments

    imagefile                    Name of 3DO image.

    animfile                     Name of 3DO cel or animation.

  Associated Files

    animsample.c, animsample.h, animerror.h

  Location

    examples/Animsample

##src/examples/C++/Application_Class/appltest.cp::examples/appltest##
appltest - ??

  Format

    appltest

  Description

    Simple exercise of the application class.  the app created
    listens for control pad input and prints out the button presses
    C button exits.

  Associated Files

    appltest.cp, capplication.h, capplication.cp

  Location

    Examples/C++/Application_Class

##src/examples/Audio/beep.c::examples/beep##
beep - Simple beep demonstration.

  Synopsis

    beep

  Description

    Plays synthetic waveform for 2 seconds. This demonstrates loading,
    connecting and playing instruments. It also demonstrates use of the audio
    timer for time delays.

  Associated Files

    beep.c

  Location

    Examples/Audio

##src/examples/Graphics/3DO_Bounce/bounce.c::examples/bounce##
bounce - Interactive component animation with sound.

  Synopsis

    bounce

  Description

    This is a small demo program where each of the elements of the 3DO logo
    bounce around a 3D room. The logo elements distort upon contact with the
    walls and floor. Shadows of the logo elements follow along with the
    objects. The room can be lit at two different levels.

    The code which supports the generation of sound is bracketed with: #if
    ENABLE_SOUND... #endif.

  Associated Files

    bounce.c, bounce.make, bounce.h, bounce_sound.c, bounce_sound.hThe data
    files are:BounceFolder/Art/wallo.img     wall, light on image
    BounceFolder/Art/wallf.img     wall, light off image
    BounceFolder/Art/globe.anim    globe animationBounceFolder/Art/globes.cel
      globe shadow celBounceFolder/Art/tv.anim tv animation
    BounceFolder/Art/tvs.animtv shadow animationBounceFolder/Art/cube.celcube
    celBounceFolder/Art/cubes.cel     cube shadow celBounceFolder/Art/ball.cel
    ball celBounceFolder/Art/balls.cel     ball shadow cel
    BounceFolder/Sound/bird.aiff  ball-tv collision sound
    BounceFolder/Sound/3do.aiff    ball-globe collision sound
    BounceFolder/Sound/interactive.aiff tv-cube collision sound
    BounceFolder/Sound/multiplayer.aiff  cube-globe collision sound
    BounceFolder/Sound/ballbnce.aiff     ball bounce sound
    BounceFolder/Sound/tvbnce.aiff tv bounce sound
    BounceFolder/Sound/cubebnce.aiff    cube bounce sound
    BounceFolder/Sound/globebnce.aiff    globe bounce sound

    If PAL video is being displayed, the folder PalBounceFolder is used
    instead of BounceFolder.

  Location

    examples/3DObounce

##src/examples/EventBroker/Control_Port_Peripherals/bs_example.c::examples/bs_example##
bs_example - Peripheral example program.

  Synopsis

    bs_example

  Description

    This demonstration program lets you move a cel (a cloud) around the screen
    with a joystick and leave an image of it on the screen when you press the
    trigger. You can also distort the cel and clear the screen. The program
    supports control pad, joystick, and mouse interaction.

    This example illustrates how to use the broker shell peripheral
    interaction utilities.

    The connection/configuration/disconnection routines can be used as-is in
    final code.

    The data interaction/processing is less efficient than it could be for the
    sake of modularity, comprehensibility, and flexibility. If you unpack the
    BS_NiceWaitEvent() and BS_ProcessXxxData() routines and perform that
    processing in a more direct way performance will improve. You should also
    eliminate any debouncing checks that you don't use.

    Joystick controls Stickmove in x and yZ zoom in/out U/D/L/R switchdeform
    cel Triggerleave copy of cel on screen Aclear screen B recalibrate stick
    (to recalibrate, hit B with stick in neutral position and move the stick
    and z throttle to the limits of travel) Cquit RightShiftswitch to mouse

    Mouse controls LeftButtonleave copy of cel on screen MiddleButtonclear
    screen Movementmove cel in x and y

    Pad 1 controls (used with mouse): RightButtonswitch to joystick D Pad
    distort cel C Buttonquit RightShifttoggle mouse edge conditions between
    bound & wrap

    Pad 2 controls (only if there are 2 pads and no mouse): D Padmove cel A
    Buttonleave copy of cel on screen B Buttonclear screen C Buttonswitch to
    joystick control RightShifttoggle movement speed between high & low

  Caveats

    Lightgun support is not yet included in this example.

  Associated Files

    cloud.cel

  Location

    examples/EventBroker/Control_Port_Peripherals

##src/examples/Audio/capture_audio.c::examples/capture_audio##
capture_audio - Record the output from the DSPP to a host file.

  Synopsis

    capture_audio [<num frames>] [<dest file>]

  Description

    Captures the output from the DSP into a file on the development station's
    filesystem. It can be used to check the sound output of a program at
    important points.

    Once the output from the DSP has been captured, you can load it into
    SoundHack and edit it as follows:

    1. From the File menu in SoundHack, choose Open Any.

    2. Select the file that was captured with capture_audio.

    3. Use the Header Change command and set the captured file's header to a
    rate of 44100, with 2 channels, and a format of 16-bit Linear.

    4. Select Save As command and save the sound file as a 16-bit AIFF format
    file.

    You can then load the AIFF file you created and listen to the captured
    sounds.

  Arguments

    num frames                    Number of sample frames to capture.
                                 Defaults to 10000.

    dest file                    Name of the file to save the captured frames
                                 to. Defaults to capture.raw.

  Caveats

    This program adds an instrument at priority 0. Because the execution order
    of equal priority instruments depends isn't as predictable as those of
    differing priority, this program may not be able to capture from other
    instruments at priority 0.

  Associated Files

    capture_audio.c

  Location

    examples/Audio

##src/examples/Audio/Coal_River/CoalRiver.c::examples/coalriver##
CoalRiver - Plays a MIDI file using Juggler and Score toolbox.

  Synopsis

    CoalRiver

  Description

    This program plays a MIDI file using Juggler and Score toolbox from the
    music.lib and audio folio, and demonstrates special MIDI interpreter
    functions.

    The CoalRiver.pimap file references some AIFF samples which were included
    in the AIFF Samples folder. It is necessary to copy the AIFF Samples
    folder into the remote folder to use them in this program. To let this
    program know about the locations of the samples, use this command in the
    Debugger Terminal window:alias samples <sample path>

    Then, the CoalRiver.pimap file will reference the appropriate samples.

  Caveats

    No attempt was made to reduce the size of the samples. Most real-world
    titles use fewer or smaller samples.

  Associated Files

    CoalRiver.c                  Source code.

    CoalRiver.imag               Background image which contains program
                                 instructions.

    CoalRiver.mf                 MIDI format song. Music by John Byrd.

    CoalRiver.pimap              PIMap file to load.

  Location

    examples/Audio/CoalRiver

##src/examples/Graphics/ColorEcho/colorecho.c::examples/colorecho##
colorecho - Shows interesting visual effects in tune with audio.

  Synopsis

    colorecho [-g] [-m]

  Description

    Displays graphic patterns which are created by drawing a zoomed and
    rotated image of the screen back into the screen. This is similar to the
    effect achieved by pointing a television camera at a monitor showing the
    image from the camera: You see an image of the monitor on the monitor. The
    monitor image contains the same image and so on. This recursive feedback
    can generate fractal patterns in real time.

  Arguments

    -g                           Start without waiting for a button press.

    -m                           Never enter Auto mode.

  Associated Files

    colorecho_tools.c

  Location

    examples/Graphics/colorecho

##src/examples/Miscellaneous/Compression/compression.c::examples/compression##
compression - Demonstrates use of the compression folio.

  Synopsis

    compression

  Description

    Simple program demonstrating how to use the compression routines supplied
    by compression folio. The program loads itself into a memory buffer,
    compresses the data, decompresses it, and compares the original data with
    the decompressed data to make sure the compression and decompression
    processes worked successfully.

  Associated Files

    compression.c

  Location

    examples/Miscellaneous/Compression

##src/examples/EventBroker/EventBroker_Tests/cpdump.c::examples/cpdump##
cpdump - Queries the event broker and prints out a summary of what's
    connected to the control port.

  Synopsis

    cpdump

  Description

    Sends three messages to the event broker (EB_DescribePods, EB_GetFocus,
    and EB_GetListeners) and prints out the values that the event broker
    returns for these messages.

  Associated Files

    cpdump.c

  Location

    $c/cpdump

    examples/EventBroker

##src/input/cpdump.c::examples/cpdump##
cpdump - Queries the event broker and prints out a summary of what's
    connected to the control port.

  Synopsis

    cpdump

  Description

    Sends three messages to the event broker (EB_DescribePods, EB_GetFocus,
    and EB_GetListeners) and prints out the values that the event broker
    returns for these messages.

  Associated Files

    cpdump.c

  Location

    $c/cpdump

    examples/EventBroker

##src/examples/ExamplesLib/controlpad.c::examples/docontrolpad##
DoControlPad - Queries the specified control pad and de-bounces specified
    key presses.

  Synopsis

    int32 DoControlPad (int32 whichPad, uint32 *pButton,int32 continuousBits)

  Description

    Queries the state of the specified control pad, and de-bounces the keys,
    based upon which keys the user is interested in receiving continuous data
    on button presses, or discrete data.

    This function fills pButton with the current state of the control pad.
    That is, it returns values defined in event.h:

    ControlUp ControlDownControlLeft ControlRightControlA ControlB ControlC
    ControlStart ControlX ControlLeftShift ControlRightShift

  Arguments

    whichPad                     Index of the control pad to query

    pButton                      Pointer to a uint32, in which the state of
                                 the requested control pad is returned.

    continuousBits               Events from event.h for which the user would
                                 like to get a continuous stream of event
                                 states.

  Return Value

    Returns 0 if successful or a negative error code if an error occurs.

  Caveats

    This function is neither multi-thread or multi-task capable or safe. You
    should call this from the task or thread which has already called
    InitControlPad(). This is because of system restrictions on item ownership
    and using items. InitControlPad() and InitEventUtility() create message
    ports and message items, which only the task which has created them can
    use. Hence, DoControlPad() can only be called by that same task. Other
    tasks or threads which attempt this, will get errors due to not owning the
    appropriate message ports and messages.

    To make this multi-thread capable, you would need to spawn off a thread
    that communicates directly with the event broker, and with all the other
    tasks that will consume event information.

  Associated Files

    controlpad.c, controlpad.h

  Location

    examples/ExamplesLib

  See Also

    InitControlPad(), KillControlPad()

##src/examples/Audio/DrumBox/drumbox.c::examples/drumbox##
drumbox - Simple single-pattern drum machine.

  Synopsis

    effectshandler

  Description

    Utility code for basic management of mixers and sound effects.

    Typical usage scenario:

    During program initialization:

    * Open the audio folio.

    * Call ehInitEffectsHandler() to allocate and initialize the effects
      handler.

    * Call ehNewMixerInfo() to load a mixer and initialize a mixerInfo
      structure.

    * Call ehLoadSoundEffect() to load a sample as a sound effect and initialize
      a sampleInfo structure.

    * Optionally call ehSetChannelLevels() for each sound effect.

    As needed during execution:

    *  Call ehSetChannelLevels() for a given sound effect to adjust its player's
      output levels. Issue calls which control the sound effects player
      instrument (the SampleInfo's si_Player structure member).

    During program termination:

    * Call ehDisposeSampleInfo() for each sound effect.

    * Call ehDisposeMixerInfo() for the mixer.

    * Call ehKillEffectsHandler(). Close the audio folio.

    Depending on program requirements, you may want to load one or more sound
    effects and assemble their player apparati but not immediately connect
    them to a mixer. This is accomplished by calling ehNewSampleInfo() and
    ehSetupSamplePlayer(). When you want to connect the player to the mixer,
    call ehConnectSamplePlayer().

  Caveats

    This program is not a complete sound management facility.

  Associated Files

    effectshandler.c effectshandler.h

  Location

    examples/ExamplesLib

##src/examples/ExamplesLib/effectshandler.c::examples/effectshandler##
effectshandler - Utility code for mixers and sound effects.

  Description

    Utility code for basic management of mixers and sound effects.

    Typical usage scenario:

      During program initialization:
        Open the audio folio.
        Call ehNewMixerInfo() to load a mixer and initialize a
          mixerInfo struct.
        Call ehLoadSoundEffect() to load a sample as a sound effect and
          initialize a sampleInfo struct.
        Optionally call ehSetChannelLevels() for each sound effect.

      As needed during execution:
        Call ehSetChannelLevels() for a given sound effect to adjust
          its player's output levels.
        Issue calls which control the sound effect's player instrument
          ( the SampleInfo's si_Player struct member ).

      During program termination:
        Call ehDisposeSampleInfo() for each sound effect.
        Call ehDisposeMixerInfo() for the mixer.
        Close the audio folio.

    Depending on program requirements, you may want to load one or more
    sound effects and assemble their player apparati but not immediately
    connect them to a mixer.  This is accomplished by calling
    ehNewSampleInfo() and ehSetupSamplePlayer().  When you want to
    connect the player to the mixer, call ehConnectSamplePlayer().

  Caveats

    This does not purport to be a complete sound management facility.
    It is intended to handle mono sound effects, although if a stereo
    sample is encountered, it connects the left output to the mixer rather
    than returning an error (a diagnostic message is printed to the debug
    terminal, however).

  Associated Files

    effectshandler.c effectshandler.h

  Location

    Examples/ExampleLib

##src/examples/EventBroker/EventBroker_Tests/focus.c::examples/focus##
focus - Talks to the event broker and switches
        the focus to a different listener.

  Synopsis

    focus [listener]

  Description

    Lets you view the current focus holder, or change it.

  Arguments

    listener                     Name or hexadecimal address of a message
                                 port to which the focus should be diverted.
                                 If this is not specified, the program lists
                                 the current focus holder.

  Associated Files

    focus.c

  Location

    $c/focus

    examples/EventBroker/Event_Broker_Tests

##src/input/focus.c::examples/focus##
focus - Talks to the event broker and switches
        the focus to a different listener.

  Synopsis

    focus [listener]

  Description

    Lets you view the current focus holder, or change it.

  Arguments

    listener                     Name or hexadecimal address of a message
                                 port to which the focus should be diverted.
                                 If this is not specified, the program lists
                                 the current focus holder.

  Associated Files

    focus.c

  Location

    $c/focus

    examples/EventBroker/Event_Broker_Tests

##src/examples/Fonts/Font_Library_Example/fontlibexample.c::examples/fontlibexample##
fontlibexample - Exercises the font and text libraries.

  Synopsis

    fontlibexample <fontfilename>

  Description

    Loads a font and a background cel and runs through several test routines,
    namely:

    * Draw a multi-line block of text against the background

    * Draw several lines of text

    * Create a text cel, setup multiple colors, update it, and display it

    * Erase the text cel and refill it using multiple UpdateTextCel() calls

    * Move a text cel around the screen

    * Cycle the colors in the text cel

  Arguments

    fontfilename                 Name of font in which to display text.

  Caveats

    This is a simple validation exercise of the font and text library routines
    and is not intended to indicate proper usage within a title.

  Associated Files

    fontlibexample.c

  Location

    examples/Fonts/Font_Library_Example

##src/examples/Fonts/FontViewer/fontviewer.c::examples/fontviewer##
fontviewer - Displays and manipulates a font.

  Synopsis

    fontviewer <fontFilename> [-b <backgroundcel>] [-t <textfilename>]

  Description

    Simple viewer program for anti-aliased fonts created by 3DO FontWriter.

    The arrow keys let you scroll around the displayed font cel. The A button
    forces a reload of the font from disk, so that you can work on a font,
    save a new version of it, and just hit A to view the results without
    having to stop/restart the program. The C button toggles between x1 and x2
    magnification of the displayed font. The B button toggles the background
    cel (if any) on and off.

  Arguments

    fontFilename                 Name of font in which text is displayed

    backgroundcel                Background cel against which text is
                                 displayed

    textfilename                 Name of file containing text to display

  Associated Files

    fontviewer.c, fontviewer.make

  Location

    examples/Fonts/FontViewer

##src/examples/C++/Hello_World/helloworld.cp::examples/helloworld##
helloworld - ???

  Format

    helloworld

  Description

    Basic C++ program to print "hello world".

  Associated Files

    helloworld.cp

  Location

    Examples/C++/Hello_World

##src/examples/ExamplesLib/controlpad.c::examples/initcontrolpad##
InitControlPad - Connects a task to the event broker for control pad
    interaction.

  Synopsis

    int32 InitControlPad (int32 nPads)

  Description

    Initializes global static resources needed for interfacing with the event
    broker. Uses some high-level convenience functions rather than opting for
    the low-level method of communicating with the event broker. See other
    source files for examples of that level of programming.

    The function creates an array in which to keep the past states of all the
    control pads.

  Arguments

    nPads                        Number of control pads to monitor.

  Return Value

    Returns 0 if successful or a negative error code if an error occurs.

  Caveats

    This function is neither multi-thread or multi-task capable or safe. You
    should call this function ONCE AND ONLY ONCE as an initialization routine,
    before calling DoControlPad(). Doing otherwise could cause undesirable
    effects.

    The main task needs to call KillControlPad() prior to exiting.

  Associated Files

    controlpad.c, controlpad.h

  Location

    examples/ExamplesLib

  See Also

    DoControlPad(), KillControlPad()

##src/examples/C++/Instruments/instrumenttest.cp::examples/instrumenttest##
instrumenttest - ??

  Format

    instrumenttest

  Description

    ??

  Caveats

    ??

  Associated Files

    intrumenttest.cp, cinstrument.cp, cinstrument.h

  Location

    Examples/C++/Instruments

##src/examples/EventBroker/Joystick/joystick_example.c::examples/joystick_example##
joystick_example - Demonstrates programming for joystick.

  Synopsis

    joystick_example

  Description

    Demonstrates simple interaction with the joystick using data filtering and
    calibration. Lets you move a cel (a cloud) around the screen with the
    joystick and leaves a still of it on screen when you press the trigger.

    Joytick controls Stick move in x and y Zzoom in/out U/D/L/R switchdistort
    cel Triggerleave copy of cel on screen Aclear screen Brecalibrate stick
    (to recalibrate, hit B with stick in neutral position and move the stick
    and z throttle to the limits of travel) Cquit

  Caveats

    This is a simplified version of the broker shell example that just does
    joystick interaction.

  Associated Files

    joystick_example.c, cloud.cel

  Location

    examples/EventBroker/Joystick

##src/examples/Jumpstart/Jumpstart2/Jumpstart_Animation/jsanimation.c::examples/jsanimation##
jsanimation - Demonstrates how to play an animation (a Jumpstart program).

  Synopsis

    jsanimation

  Description

    Example for displaying a cel at a random position, waiting for control pad
    input, and playing an explosion animation.

  Associated Files

    jsanimation.c, jsanimation.make

  Location

    examples/Jumpstart/Jumpstart2/jumpstartanimation

    The data files are:JSData/Art/sky.imgsky imageJSData/Art/jsufo.celUFO cel
    JSData/Art/boom.animexplosion animation

##src/examples/Jumpstart/Jumpstart2/Jumpstart_Slideshow/jsbasicslideshow.c::examples/jsbasicslideshow##
jsbasicslideshow - Demonstrates a basic slideshow (a Jumpstart program).

  Synopsis

    jsbasicslideshow <scriptfilename> [-a <n>]

  Description

    Basic slideshow which loads and displays image files.

    Outline of functionality:

    * Read a list of image filenames

    * Load a pair of buffers with the first two images in the list

    * Show the first image in the list

    * Respond to control pad input: Right and down arrows mean show next image
      in list Left and up arrows mean show previous image in list Start button
      means quit the program B button means show the other buffer C button means
      toggle automatic display mode

  Arguments

    scriptfilename               Name of file listing images to display, one
                                 name per line.

    -a                           Set auto-show mode, displaying each image
                                 for n seconds.

  Associated Files

    jsbasicslideshow.c, jsbasicslideshow.make, jsbasicslideshow.h.

  Location

    examples/Jumpstart/Jumpstart2/jsslideshow

##src/examples/Jumpstart/Jumpstart2/Jumpstart_Interactive_Music/jsinteractivemusic.c::examples/jsinteractivemusic##
jsinteractivemusic - Starts background music as
##src/examples/Jumpstart/Jumpstart2/Jumpstart_Interactive_Sound/jsinteractivesound.c::examples/jsinteractivesound##
jsinteractivesound - Demonstrates using sound effects (a Jumpstart
    program).

  Synopsis

    jsinteractivesound

  Description

    UFO game with a sound-effect.

  Associated Files

    jsinteractivesound.make

  Location

    examples/Jumpstart/Jumpstart2/jsinteractivesound

##src/examples/Jumpstart/Jumpstart2/Jumpstart_Interactive_Music/jsintmusicthread.c::examples/jsintmusicthread##
jsintmusicthread - Demonstrates starting background music as a thread (a
##src/examples/Jumpstart/Jumpstart2/Jumpstart_Move_Cel/jsmovecel.c::examples/jsmovecel##
jsmovecel - Demonstrates moving and distorting cels (a Jumpstart program).

  Synopsis

    jsmovecel <imagename> <celname>

  Description

    Moves and distorts cels against a background image.

    The program loads a background image and a cel, and enters a loop in which
    the cel is displayed against the background image as it is moved and
    distorted in response to input from the control pad.

  Arguments

    imagename                    Filename of the image to display as the
                                 background.

    celname                      Filename of the cel to display in the
                                 foreground.

  Associated Files

    jsmovecel.make, controlpad.h, controlpad.c

  Location

    examples/Jumpstart/Jumpstart2/jsmovecel

##src/examples/Jumpstart/Jumpstart2/Jumpstart_Interactive_Music/jsplaybgndmusic.c::examples/jsplaybgndmusic##
jsplaybgndmusic - Plays an audio loop as a separate background task.

  Synopsis

    jsplaybgndmusic

  Description

    Plays an audio loop as a separate background task.

    Opens the audio folio (because each task must open the folios it uses),
    opens the sound file, and enters a loop in which the sound is played (by
    the inner loop) and restarted when it finishes.

  Associated Files

    jsplaybgndmusic.c, jsplaybgndmusic.make

  Location

    examples/Jumpstart/Jumpstart2/jsinteractivemusic

##src/examples/Jumpstart/Jumpstart2/Jumpstart_Show_Cel/jsshowcel.c::examples/jsshowcel##
jsshowcel - Demonstrates how to display cels (a Jumpstart program).

  Synopsis

    jsshowcel

  Description

    Displays a cel against a background image.

  Associated Files

    jsshowcel.make

  Location

    examples/Jumpstart/Jumpstart2/jsshowcel

##src/examples/Jumpstart/Jumpstart2/Jumpstart_Slideshow/jsslideshowvdl.c::examples/jsslideshowvdl##
jsslideshowvdl - Loads and displays image files which may contain custom
    VDLs (a Jumpstart program).

  Synopsis

    jsslideshowvdl <scriptfilename> [-a <n>]

  Description

    Slideshow which loads and displays image files which may contain custom
    VDLs.

    Outline of functionality:

    * Read a list of image filenames

    * Load a pair of buffers with the first two images in the list

    * Show the first image in the list

    * Respond to control pad input:

    * Right and down arrowsshow next image in list

    * Left and up arrowsshow previous image in list

    * Start buttonquit the program

    * B buttonshow the other buffer

    * C buttontoggle automatic display mode

  Arguments

    scriptfilename               Name of file listing images to display, one
                                 name per line.

    -a [n]                       Set auto-show mode, displaying each image
                                 for n seconds.

  Associated Files

    jsslideshowvdl.make, jsvdlslideshow.h

    Data file: JSData/ImageList   List of image files to load and display.
    Each listed filename must resolve to a valid path.

  Location

    examples/Jumpstart/Jumpstart2/jsslideshow

##src/examples/Fonts/Kanji_FontViewer/kanjifontviewer.c::examples/kanjifontviewer##
kanjifontviewer - Displays and manipulates Kanji fonts

  Synopsis

    kanjifontviewer

  Description

    Display and manipulate a Kanji font.

  Associated Files

    kanjifontviewer.make, ktextbox.h, ktextbox.c, ktextboxerror.h,
    timehelper.h, timehelper.c

  Location

    examples/Fonts/KanjiFontViewer

##src/examples/ExamplesLib/controlpad.c::examples/killcontrolpad##
KillControlPad - Disconnects the task from the event broker and frees
    resources.

  Synopsis

    int32 KillControlPad (void)

  Description

    Deletes all resources that were created for interacting with the event
    broker. These resources include the array of previous button states, and
    the message ports, messages, etc., created by InitEventUtility().

  Return Value

    Returns 0 if successful or a negative error code if an error occurs.

  Caveats

    This function MUST be called upon the main tasks completion. It should be
    called ONCE and ONLY ONCE per initialization. It must be called by the
    same task that called InitControlPad().

  Associated Files

    controlpad.c, controlpad.h

  Location

    examples/ExampleLib

  See Also

    InitControlPad(), KillControlPad()

##src/examples/EventBroker/LightGun/lightgundemo.c::examples/lightgundemo##
lightgundemo - Simple example program which uses lightgun.c functions.

  Synopsis

    lightgundemo

  Description

    Displays a static image and uses the convenience routines in lightgun.c to
    handle lightgun and control pad events. Prints coordinates to the Debugger
    Terminal window after every gun shot pointed at the screen.

    The program also calibrates itself on a target in the upper left hand
    corner.

  Associated Files

    lightgun.c, lightgun.h, lightgundemo.c

  Location

    examples/EventBroker/LightGun

##src/examples/C++/Linked_Lists/listtest.cp::examples/listtest##
listtest - ???

  Format

    listtest

  Description

    Simple example to exercise the C++ linked list classes defined
    in list.cp

  Associated Files

    listtest.c, clist.h, clist.cp

  Location

    Examples/C++/Linked_Lists

##src/examples/EventBroker/EventBroker_Tests/lookie.c::examples/lookie##
lookie - Connects to the event broker and reports any events that occur.

  Synopsis

    lookie [focus | hybrid]

  Description

    Connects to the event broker and requests to be informed about every
    event. Whenever any event occurs, the important data from the event is
    displayed in the Debugger Terminal window.

  Arguments

    focus                        Makes lookie a focus listener.

    hybrid                       Makes lookie a hybrid listener.

  Associated Files

    lookie.c

  Location

    examples/EventBroker/Event_Broker_Tests

##src/input/lookie.c::examples/lookie##
lookie - Connects to the event broker and reports any events that occur.

  Synopsis

    lookie [focus | hybrid]

  Description

    Connects to the event broker and requests to be informed about every
    event. Whenever any event occurs, the important data from the event is
    displayed in the Debugger Terminal window.

  Arguments

    focus                        Makes lookie a focus listener.

    hybrid                       Makes lookie a hybrid listener.

  Associated Files

    lookie.c

  Location

    examples/EventBroker/Event_Broker_Tests

##src/examples/Graphics/lrex/lrex.c::examples/lrex##
lrex - Demonstrates subcel extraction from an image.

  Synopsis

    lrex <imagefile>

  Description

    Demonstrates how to extract a cel from a frame buffer or bitmap image,
    that can then be redrawn into the frame buffer. Can be used for things
    like breaking up a static or dynamic image (like the video in Mystery
    Matinee in Twisted) and reorganizing it.

    Subcel extraction from a frame buffer (bitmap) is slightly different from
    extraction from another cel. This program handles extraction from bitmaps
    only.

    The extraction can easily be done with the appropriate call to the Lib3DO
    functions (CreateLRFormCel), but this example shows how to do it long
    hand.

    When extracting from bitmaps, pay attention to the order in which the
    pixels are represented.

    The program is based on animsample and aaplayer. The user can manipulate
    the extracted cel.

  Caveats

    In performing the cel manipulation, the source for the cel may end up
    pointing to garbage. This is especially likely if the program is
    distorting the cel near the edge of the extracting bitmap.

  Arguments

    imagefile                    Name of 3DO image file.

  Associated Files

    lrex.c, lrexerror.h, lrex.h

  Location

    examples/Graphics/lrex

##src/examples/FileSystem/ls.c::examples/ls##
ls - Displays the contents of a directory.

  Synopsis

    ls [dir1] [dir2] [dir3]...

  Description

    Demonstrates how to scan a directory to determine its contents.

  Arguments

    dir1...                      Name of the directories to list. You can
                                 specify an arbitrary number of directory
                                 names. If no name is specified, the
                                 directory in which the ls program is located
                                 is displayed.

  Associated Files

    ls.c

  Location

    $c/ls

    examples/FileSystem

##src/filesystem/ls.c::examples/ls##
ls - Displays the contents of a directory.

  Synopsis

    ls [dir1] [dir2] [dir3]...

  Description

    Demonstrates how to scan a directory to determine its contents.

  Arguments

    dir1...                      Name of the directories to list. You can
                                 specify an arbitrary number of directory
                                 names. If no name is specified, the
                                 directory in which the ls program is located
                                 is displayed.

  Associated Files

    ls.c

  Location

    $c/ls

    examples/FileSystem

##src/examples/EventBroker/EventBroker_Tests/luckie.c::examples/luckie##
luckie - Uses the event broker to read events from the first control pad.

  Synopsis

    luckie [anything]

  Description

    Uses the event broker to monitor and report activity for the first control
    pad plugged in to the control port.

  Arguments

    anything                     If you supply no arguments to this program,
                                 it asks GetControlPad() to put the task to
                                 sleep when waiting for an event. If you
                                 supply an argument, GetControlPad() will not
                                 put the task to sleep, and the program will
                                 poll the control pad.

  Associated Files

    luckie.c

  Location

    examples/EventBroker/Event_Broker_Tests

##src/input/luckie.c::examples/luckie##
luckie - Uses the event broker to read events from the first control pad.

  Synopsis

    luckie [anything]

  Description

    Uses the event broker to monitor and report activity for the first control
    pad plugged in to the control port.

  Arguments

    anything                     If you supply no arguments to this program,
                                 it asks GetControlPad() to put the task to
                                 sleep when waiting for an event. If you
                                 supply an argument, GetControlPad() will not
                                 put the task to sleep, and the program will
                                 poll the control pad.

  Associated Files

    luckie.c

  Location

    examples/EventBroker/Event_Broker_Tests

##src/examples/EventBroker/EventBroker_Tests/maus.c::examples/maus##
maus - Uses the event broker to read events from the first mouse.

  Synopsis

    maus [anything]

  Description

    Uses the event broker to monitor and report activity for the first mouse
    plugged in to the control port.

  Arguments

    anything                     If you supply no arguments to this program,
                                 it asks GetMouse() to put the task to sleep
                                 when waiting for an event. If you supply an
                                 argument, GetMouse() will not put the task
                                 to sleep, and the program will poll the
                                 mouse.

  Associated Files

    maus.c

  Location

    examples/EventBroker/Event_Broker_Tests

##src/input/maus.c::examples/maus##
maus - Uses the event broker to read events from the first mouse.

  Synopsis

    maus [anything]

  Description

    Uses the event broker to monitor and report activity for the first mouse
    plugged in to the control port.

  Arguments

    anything                     If you supply no arguments to this program,
                                 it asks GetMouse() to put the task to sleep
                                 when waiting for an event. If you supply an
                                 argument, GetMouse() will not put the task
                                 to sleep, and the program will poll the
                                 mouse.

  Associated Files

    maus.c

  Location

    examples/EventBroker/Event_Broker_Tests

##src/examples/Kernel/memdebug.c::examples/memdebug##
memdebug - Demonstrates the memory debugging subsystem.

  Synopsis

    memdebug

  Description

    This program demonstrates the features of the memory debugging subsystem.

    The memory debugging subsystem helps you make sure that your application
    is freeing all of its memory, not stomping on innocent memory areas, and
    generally doing illegal things to the Portfolio memory manager. As it
    detects errors and illegal operations, it displays information in the
    Debugger Terminal window.

    For more information about the memory debugging subsystem, refer to the
    documentation for the CreateMemDebug() function.

  Caveats

    This program intentionally does a some illegal things. Don't do this in
    your programs!

  Associated Files

    memdebug.c

  Location

    examples/Kernel

##src/examples/Miscellaneous/Menu/menu.c::examples/menu##
menu - Displays a list of programs and lets the user launch one.

  Synopsis

    menu [program list]

  Description

    This program displays a list of programs on the screen, lets the user pick
    one, and runs it. After the selected program completes, the list of
    programs is displayed again and the user can make another selection.

    When the list is on screen, the user can press the up and down arrows on
    the control pad to change the selected program, press A to select a
    program to run, and presses Stop to exit.

    During startup, this program reads a file which defines the list of
    programs to display on screen. Every line in this file defines a program,
    using the following format:

    ["] label ["] cmd-line label the string that represents this program in
    the screen display. Surround this string with quotes (") if it contains
    any spaces. cmd-line used as a command-line. Whenever the user selects the
    entry, this command-line is executed as is.

    Within the program list, empty lines are ignored. A semicolon indicates
    the start of a comment. Any text following a semicolon is ignored until
    the end of the line. Linefeed or a carriage return indicate the end of a
    line.

  Arguments

    program list                 Name of a file containing a list of programs
                                 to run. If this argument is not supplied,
                                 the default name of menu.script is assumed.

  Associated Files

    menu.c, gfxutils.h, gfxutils.c, programlist.h, programlist.c

  Location

    examples/Miscellaneous/menu

##src/examples/Audio/minmax_audio.c::examples/minmax_audio##
minmax_audio - Measures the maximum and minimum output from the DSP.

  Synopsis

    minmax_audio

  Description

    Samples the output of the DSP and returns its maximum and minimum output
    values. You can use minmax_audio to check that your program outputs are
    reasonable, non-clipping levels of audio.

    The program creates instances of probes from the instruments minimum.dsp
    and maximum.dsp. The probes are queried with ReadProbe() every five
    seconds, or 5*240 audio ticks.

    In Opera hardware, the DSP implementation is 16-bit; therefore, the output
    for the left and right channels range from 32767 to -32768.

  Caveats

    The loudness of audio is often subjective. Check the loudness of your
    program by first playing a standard audio CD on a development station, and
    adjusting the volume of your sound system to a reasonable level. The 3DO
    program should then produce sounds at a similar volume.

  Associated Files

    minmax_audio.c

  Location

    examples/Audio

##src/examples/Kernel/msgpassing.c::examples/msgpassing##
msgpassing - Demonstrates sending and receiving messages between two
    threads.

  Synopsis

    msgpassing

  Description

    Demonstrates how to send messages between threads or tasks.

    The main() routine of the program creates a message port where it can
    receive messages. It then spawns a thread. This thread creates its own
    message port, and a message. The thread then sends the message to the
    parent message port. Once the parent receives the message, it passes it on
    to the thread.

  Associated Files

    msgpassing.c

  Location

    examples/Kernel

##src/examples/NVRAM/File_Management/nvram.c::examples/nvram##
nvram - Demonstrate how to save files to nvram and other writable devices.

  Synopsis

    nvram

  Description

    Demonstrates how to save data to a file in NVRAM or to any other writable
    device.

    The SaveDataFile() function takes a name, a data pointer, and a size
    indicator, and creates a file of that name and size, containing the
    supplied data.

    Writing data to a file requires a bit of finesse. Data can only be written
    in blocks, not bytes. If the data being written is not a multiple of the
    target device's blocksize, the last chunk of data must be copied to a
    buffer which is the size of a block, and the block can then be written.

  Associated Files

    nvram.c

  Location

    examples/Nvram

##src/examples/Graphics/Performance_Test/perftest.c::examples/perftest##
perftest - Displays bouncing 16-bit uncoded cels over an image background.

  Synopsis

    perftest

  Description

    Perftest can give the developer an idea of how adding cels can affect
    performance. The control pad has the following functions:

    * A ButtonAdd a 16-bit uncoded cel (bouncing ball).

    * B ButtonToggle between using one or two cel engines.

    * C ButtonRemove a 16-bit uncoded cel (bouncing ball).

  Caveats

    The cels used in this example are expensive to render and not well-suited
    for titles attempting to maximize performance.

    The example contains a large amount of code which has been marked with
    #ifdef and may be difficult to follow at times.

  Associated Files

    perftest.c, sprite.h, sprite.c

  Location

    examples/Graphics/Performance_Test

##src/examples/Audio/playsample.c::examples/playsample##
playsample - Plays an AIFF sample in memory using the control pad.

  Synopsis

    playsample [<sample file> [<rate>]]

  Description

    This program shows how to load an AIFF sample file and play it using the
    control pad. Use the A button to start the sample, the B button to release
    the sample, and the C button to stop the sample. The X button quits the
    program.

  Arguments

    sample file                  Name of a compatible AIFF sample file.
                                 Defaults to sinewave.aiff.

    rate                         Proportion of 44,100 Hz for the sample rate
                                 expressed as a 1.15 fraction. Unity is
                                 32768, which is the default. Examples: 16384
                                 for 22,050 Hz, 65535 for nearly 88,200 Hz.

  Associated Files

    playsample.c

  Location

    examples/Audio

##src/examples/Audio/playsoundfile.c::examples/playsoundfile##
playsoundfile - Plays AIFF sound files from disk.

  Synopsis

    playsoundfile <sample file>...

  Description

    Calls SoundFilePlayer routines to play one or more AIFF files.

  Arguments

     sample file                 Name of an AIFF file to play.

  Associated Files

    playsoundfile.c

  Location

    examples/Audio

  See Also

    spoolsoundfile, tsp_spoolsoundfile

##src/examples/ExamplesLib/controlpad.c::examples/returnpreviouscontrolpad##
ReturnPreviousControlPad - Returns the state of the control pad as it is
    remembered.

  Synopsis

    int32 ReturnPreviousControlPad (int32 whichPad)

  Description

    Returns the state of the specified control pad as it is remembered from
    the last time DoControlPad() was called and a new state for the control
    pad existed.

  Arguments

    whichPad                     Index of the control pad to query.

  Return Value

    Returns 0 if successful or a negative error code if an error occurs.

  Caveats

    This function is neither multi-thread or multi-task capable or safe.

    Because of system restrictions on item ownership and using items, you
    should call this function from the task or thread which called
    InitControlPad().

    InitControlPad() and InitEventUtility() create message ports and message
    items which only the task which has created them can use. Hence,
    DoControlPad() can only be called by that same task. If other tasks or
    threads attempt this errors result because those tasks or threads do not
    own the appropriate message ports and messages.

    To make this function multi-thread capable, you would need to spawn a
    thread that communicates directly with the event broker, and with all the
    other tasks that will consume event information.

  Associated Files

    controlpad.c, controlpad.h

  Location

    examples/Exampleslib

  See Also

    InitControlPad(), KillControlPad()

##src/examples/C++/Sample_App/sampleappl.cp::examples/sampleappl##
sampleappl - ???

  Format

    sampleappl [arg1] [arg2]...

  Description

    ALPHA DESCRIPTION -- WILL BE FILLED LATER

  Arguments

    arg1			arg1 description

    arg2			arg2 description

  Associated Files

    Alpha autodoc header -- more description to be added later

  Location

    Examples/C++/Sample_App

##src/examples/C++/Drawing/shapetest.cp::examples/shapetest##
shapetest - ??

  Synopsis

    shapetest

  Description

    ??

  Caveats

    ??

  Associated Files

    ??

  Location

    Examples/C++/Drawing

##src/examples/Kernel/signals.c::examples/signals##
signals - Demonstrates how to use signals.

  Synopsis

    signals

  Description

    Demonstrates the use of threads and signals.

    The main() routine launches two threads. These threads sit in a loop and
    count. After a given number of iterations through their loop, they send a
    signal to the parent task. When the parent task gets a signal, it wakes up
    and prints the current counters of the threads to show how much they were
    able to count.

  Associated Files

    signals.c

  Location

    examples/Kernel

##src/examples/Audio/simple_envelope.c::examples/simple_envelope##
simple_envelope - Simple audio envelope example.

  Synopsis

    simple_envelope

  Description

    Simple demonstration of an envelope used to ramp amplitude of a sawtooth
    waveform. A 3-point envelope is used to provide a ramp up to a specified
    amplitude at the start of the sound and a ramp down when the sound is to
    be stopped. Using envelopes is one technique to avoid audio pops at the
    start and end of sounds.

  Associated Files

    simple_envelope.c

  Location

    examples/Audio

##src/examples/Graphics/Slideshow/slideshow.c::examples/slideshow##
slideshow - Slideshow program which displays NTSC or PAL images.

  Synopsis

    slideshow <imagelist> [-a <n>]

  Description

    Slideshow which loads and displays NTSC or PAL image files which may
    contain custom VDLs.

    Outline of functionality:

    * Read a list of image filenames

    * Load a pair of buffers with the first two images in the list

    * Show the first image in the list

    * Respond to control pad input

    * Right and down arrows mean show next image in list

    * Left and up arrows mean show previous image in list

    * Start button means quit the program

    * B button means show the other buffer

    * C button means toggle automatic display mode

  Arguments

    imagelist                    Name of file listing NTSC or PAL images to
                                 display, one name per line.

    -a                           Set auto-show mode, displaying each image
                                 for n seconds.

  Associated Files

    slideshow.make, slideshow.h

  Location

    examples/Graphics/Slideshow

##src/examples/Graphics/Slideshow_24bit/slideshow24.c::examples/slideshow24##
slideshow24 - Version of slideshow that supports displays of 24-bit 3DO
    images.

  Synopsis

    slideshow24 <imagelist> [-a <n>]

  Description

    Loads and displays image files which may contain custom VDLs. This version
    has been modified to support 24-bit images. These modifications are
    preceded by **** 24-BIT ***** comments.

    Outline of functionality:

    * Read a list of image filenames

    * Load a pair of buffers with the first two images in the list

    * Show the first image in the list

    * Respond to control pad input

    * Right and down arrows mean show next image in list

    * Left and up arrows mean show previous image in list

    * Start button means quit the program

    * B button means show the other buffer

    * C button means toggle automatic display mode

    This program is designed to demonstrate image quality differences between
    standard CLUT images, custom CLUT images, and 24-bit images. The program
    determines the image type and submits any custom VDLs.

  Arguments

    imagelist                    Name of file listing 24-bit image names, one
                                 name per line.

    -a                           Set auto-show mode, displaying each image
                                 for n seconds

  Caveats

    Current implementation causes the screen to flash as you switch between
    16-bit and 24-bit images.

  Associated Files

    slideshow24.c, slideshow24.make, slideshow24.h, loadfile24.h, loadfile24
    .c, vdl24util.c,vdl24util.h

  Location

    examples/Graphics/Slideshow_24bit

##src/examples/C++/Sounds/soundtest.cp::examples/soundtest##
soundtest - ???

  Format

    soundtest

  Description

    Simple program to test the CSound class.
    creates an instance (from a UFO FX file)
    Loops the sound a few times, plays it manually, deletes it
    then exits.

  Caveats

    This example uses the old audio sound file player

  Associated Files

    soundtest.cp, csound.h, csound.cp

  Location

    Examples/C++/Sounds

##src/examples/Audio/spoolsoundfile.c::examples/spoolsoundfile##
spoolsoundfile - Plays an AIFF sound file from a thread using the original
    sound file player.

  Synopsis

     spoolsoundfile <sound file> [<num repeats>]

  Description

    Plays an AIFF sound file using a thread to manage playback.

    This example creates a background thread that runs independently from the
    foreground task. You can communicate with it via signals. This could be
    built into a fancier soundfile server using messages.

    This example uses the original Sound File Player in music.lib. See
    tsp_spoolsoundfile for an example using the Advanced Sound Player to do
    the same thing.

  Arguments

    sound file                   Name of an AIFF file to play.

    num repeats                  Number of times to repeat the sound file.
                                 Defaults to 1.

  Associated Files

    spoolsoundfile.c

  Location

    examples/Audio

  See Also

    playsoundfile, tsp_spoolsoundfile

##src/examples/NVRAM/Storage_Tuner/st.c::examples/storagetuner##
storagetuner - NVRAM management tool which can delete files.

  Synopsis

    storagetuner

  Description

    Storagetuner is an example program which can easily be dropped into your
    title's code to allow end users to delete files in NVRAM. This gives your
    title a user-friendly way of making space for saving scores or states.
    Several titles have already used this mechanism so consumers are starting
    to accept it as a standard.

    Feel free to modify the art work provided to give the storagetuner a feel
    that more closely approximates your own title.

  Associated Files

    st.c, st.h, stlists.c, stlists.h, stmem.c, stmem.h, storagetuner.h,

  Location

    examples/Nvram

##src/examples/C++/Strings/strtest.cp::examples/strtest##
strtest - ???

  Format

    strtest

  Description

    Simple program to demonstrate the usage of the C string
    class and its methods (that are defined in cstring.cp)
    the class is rather over-engineered, but exists as such
    to give some exercise to the compiler and to show some
    basic C++ techniques.

  Associated Files

    cstring.cp, cstring.h, strtest.cp

  Location

    Examples/C++/Strings

##src/examples/Graphics/symanim/symanim.c::examples/symanim##
symanim - Demonstrates playing animations with optional rotation and
    scaling.

  Synopsis

    symanim

  Description

    This program animates the 3 components of the 3DO logo on top of a
    background display. While the program is running, the user can do the
    following:

    * A buttonAdds a set of 3 components to the animation.

    * B buttonStarts rotating the components in 2D. Pressing the button starts
      3D rotation. Pressing the button again stops rotation.

    * C buttonStarts to rapidly resize the components from large to small and
      back. Pressing the button again stops this.

    * P buttonPauses and unpauses the animation.

    * X buttonExits the program.

    The program adapts to NTSC vs. PAL automatically. Upon startup, the
    program loads in an image file to use as a backdrop. It also loads three
    ANIM files to use for the three components of the 3DO logo. Different
    versions of the pictures are loaded depending on whether the display is
    NTSC or PAL.

    Once all components are loaded, a screen group with two screens is
    created. The two screens are used for double-buffering. Throughout the
    animation, we use a SPORT transfer to copy the backdrop image from its
    buffer into the screen buffer that is not currently displayed. We then
    render the current set of components onto the screen buffer. Once all this
    is completed, we swap screen buffers, which makes the rendering visible.
    The cycle starts again with the newly hidden screen buffer.

  Associated Files

    symanim.c, sprite.c, sprite.h

  Location

    examples/Graphics/symanim

##src/examples/Audio/ta_attach.c::examples/ta_attach##
ta_attach - Experiments with sample attachments.

  Synopsis

    ta_attach

  Description

    Creates a pair of software-generated samples and attaches them to a sample
    player instrument. The attachments are then linked to one another using
    LinkAttachment() such that they play in a loop.

    This demonstrates how multiple attachments can be linked together to form
    a queue of sample buffers to play and how a client can receive
    notification of when each sample buffer has finished playing. This is the
    technique that the Sound Spooler uses to queue sound buffers for playback.

  Associated Files

    ta_attach.c

  Location

    examples/Audio

  See Also

    ta_spool, ssplCreateSoundSpooler(), LinkAttachments()

##src/examples/Audio/ta_customdelay.c::examples/ta_customdelay##
ta_customdelay - Demonstrates a delay line attachment.

  Synopsis

    ta_customdelay [<sample file> [<delay ticks>]]

  Description

    Demonstrates how to create and use a delay line to get real-time echo
    effects in your program. Loads the specified AIFF file and plays it into a
    delay line. By tweaking the knobs on the output mixer, you can control the
    mix of delay sound versus original sound, and the speed at which the echo
    will die down.

  Arguments

    sample file                  Name of an AIFF file to play.

    delay ticks                  Amount of time, in audio clock ticks, to
                                 hold each note. Defaults to 240 ticks.

  Caveats

    SleepAudioTicks() is an inefficient way to delay a program, and it is used
    in this program's PlayPitchNote() function. Avoid or rewrite the
    PlayPitchNote() function for performance-critical code.

  Associated Files

    ta_customdelay.c

  Location

    examples/Audio

##src/examples/Audio/ta_envelope.c::examples/ta_envelope##
ta_envelope - Tests various envelope options by passing test index.

  Synopsis

    ta_envelope [<test code>]

  Description

    Demonstrates creating, attaching, and modifying two envelopes which are
    attached to sawtooth instruments.

    * Button A starts and releases voice A.

    * Button B starts and releases voice B.

    * Button C toggles the states of voices A and B.

    * Control Up and Control Down change the time scaling of the envelope.

  Arguments

     test code                   Integer from 1 to 13, indicating the
                                 number of the test. See the source code for
                                 what each test actually does. Defaults to 1.

  Associated Files

    ta_envelope.c

  Location

    examples/Audio

##src/examples/Audio/ta_pitchnotes.c::examples/ta_pitchnotes##
ta_pitchnotes - Plays a sample at different MIDI pitches.

  Synopsis

    ta_pitchnotes [<sample file> [<duration>]]

  Description

    This program loads and plays the AIFF sample file at several different
    pitches. It does this by selecting a MIDI note number, which the audio
    folio maps to a frequency.

  Arguments

    sample file                  Name of a sample to be played. The sample
                                 should be compatible with sampler.dsp
                                 (16-bit monophonic).

    duration                     Duration of each note, in audio ticks.
                                 Defaults to 240.

  Caveats

    Because this sample program uses SleepaudioTicks(), the notes are not
    necessarily rhythmic. Use the juggler to play rhythmic scores.

  Associated Files

    ta_pitchnotes.c

  Location

    examples/Audio

##src/examples/Audio/ta_spool.c::examples/ta_spool##
ta_spool - Demonstrates the music.lib sound spooler.

  Synopsis

    ta_spool

  Description

    Uses the music.lib sound spooler to fill buffers, parse information in the
    buffers, signal our task when a buffer has been exhausted, and refill the
    buffers. Use this sample code as a basis for developing your own routines
    for playing large sampled files, or handling other kinds of buffered data.

    When you press one of the buttons, the following events take place:

    * Button Asimulates a hold on data delivery. The application continues to
      consume information in its buffers.

    * Button Bstops the playback function. Releasing it restarts playback.
      Holding down either shift button causes the spooler to be aborted instead
      of merely stopped.

    * Button Centers one-shot mode. Each C button press starts a ssplPlayData()
       sequence. Press the play button returns to normal mode.

    * Start Buttonpauses the playback function. Releasing it lets the
      application continue.

    * Stop (X) Buttonquit.

  Associated Files

    ta_spool.c

  Location

    examples/Audio

  See Also

    ssplCreateSpooler(), tsp_spoolsoundfile

##src/examples/Audio/ta_sweeps.c::examples/ta_sweeps##
ta_sweeps - Demonstrates tweaking knobs.

  Synopsis

    ta_sweeps

  Description

    This program quickly modulates the amplitude and frequency of a sawtooth
    instrument via tweaking the control knobs repeatedly.

    Sweep the frequency smoothly as fast as possible to test Knob speed.

  Caveats

    This specific sound effect could have been performed entirely within the
    DSP, freeing up the main processor for other purposes. See the
    documentation for sawenvsvfenv.dsp.

  Associated Files

    ta_sweeps.c

  Location

    examples/Audio

  See Also

    sawenvsvfenv.dsp

##src/examples/Audio/ta_timer.c::examples/ta_timer##
ta_timer - Demonstrates use of the audio timer.

  Synopsis

    ta_timer

  Description

    This program shows how to examine and change the rate of the audio clock.
    It demonstrates use of cues to signal your task at a specific time. It
    also demonstrates how the audio folio deals with bad audio rate values.

    Pressing A from the main menu runs the audio clock at successively faster
    rates, using SleepAudioTime().

    Pressing B from the main menu uses SignalAtTime() in conjunction with cues
    to wait. While using this method, you can press A or B to abort one of two
    cues prematurely.

    Pressing C from the main menu feeds illegal values to SetAudioRate().

  Associated Files

    ta_timer.c

  Location

    examples/Audio

##src/examples/Audio/ta_tuning.c::examples/ta_tuning##
ta_tuning - Demonstrates custom tuning a DSP instrument.

  Synopsis

    ta_tuning

  Description

    Demonstrates how to create a tuning table, how to create a tuning, and how
    to apply a tuning to an instrument.

  Associated Files

    ta_tuning.c

  Location

    examples/Audio

##src/examples/Audio/ta_tweakknobs.c::examples/ta_tweakknobs##
ta_tweakknobs - Tweaks the knobs available on an instrument.

  Synopsis

    ta_tweakknobs <dsp instrument>

  Description

    Finds the names of all knobs on an instrument and tweaks them to NUMSTEPS
    * (number of knobs) possible permutations. The program demonstrates how to
    find and tweak knobs on an instrument, and is useful for testing
    instrument templates.

    Similar functionality is implemented in the Aria tool.

  Arguments

     dsp instrument              Name of an DSP instrument to tweak. (e.g.
                                 sawtooth.dsp).

  Associated Files

    ta_tweakknobs.c

  Location

    examples/Audio

##src/examples/Kernel/timerread.c::examples/timerread##
timerread - Demonstrates how to use the timer device to read the current
    system time.

  Synopsis

    timerread

  Description

    This program demonstrates how to use the timer device to read the current
    system time.

    The program does the following:

    * Opens the timer device

    * Creates an IOReq

    * Initializes an IOInfo structure

    * Calls DoIO() to perform the read operation

    * Prints out the current time

    * Cleans up

    Note that Portfolio provides convenience routines to make using the timer
    device easier. For example, CreateTimerIOReq() and DeleteTimerIOReq().
    This example intends to show how in general one can communicate with
    devices in the Portfolio environment. For more information on the timer
    convenience routines, see the timer device documentation.

  Associated Files

    timerread.c

  Location

    examples/Kernel

##src/examples/Kernel/timersleep.c::examples/timersleep##
timersleep - Demonstrates how to use the timer device to wait for an
    amount of time specified on the command-line.

  Synopsis

    timersleep <num seconds> <num microseconds>

  Description

    This program demonstrates how to use the timer device to wait for a
    certain amount of time.

    The program does the following:

    * Parses the command-line arguments

    * Opens the timer device

    * Creates an IOReq

    * Initializes an IOInfo structure

    * Calls DoIO() to perform the wait operation

    * Cleans up

    Note that Portfolio provides convenience routines to make using the timer
    device easier. For example, CreateTimerIOReq(), DeleteTimerIOReq(), and
    WaitTime(). This example intends to show how in general one can
    communicate with devices in the Portfolio environment. For more
    information on the timer convenience routines, see the timer device
    documentation.

  Arguments

    num seconds                  Number of seconds to wait.

    num microseconds             Number of microseconds to wait.

  Associated Files

    timersleep.c

  Location

    examples/Kernel

##src/examples/Audio/Juggler/tj_canon.c::examples/tj_canon##
tj_canon - Uses the juggler to create and play a semi-random canon.

  Synopsis

    tj_canon <PIMap>

  Description

    This program shows how to create and play a simple canon using the juggler
    and score-playing routines.

    It creates a single melodic line, and stores it as a sequence to be
    repeated from 1 to NUMLINES times.

  Arguments

    PIMap                        Name of a PIMap to use. This PIMap should
                                 have an instrument defined for program
                                 number 1.

  Associated Files

    tj_canon.c

  Location

    examples/Audio/Juggler

##src/examples/Audio/Juggler/tj_multi.c::examples/tj_multi##
tj_multi - Uses the juggler to play a collection.

  Synopsis

    tj_multi

  Description

    This program tests the juggler using non-musical events and software-based
    "timing." It constructs two synthetic sequences based on the TestData data
    structure, and creates a collection based on these two sequences. It then
    "plays" the collection via a simple print function, processed at the time
    of each event in each sequence.

  Associated Files

    tj_multi.c

  Location

    examples/Audio/Juggler

##src/examples/Audio/Juggler/tj_simple.c::examples/tj_simple##
tj_simple - Uses the juggler to play two sequences.

  Synopsis

    tj_simple

  Description

    This program tests the juggler using non-musical events and software-based
    "timing." It constructs two synthetic sequences based on the TestData data
    structure. It then "plays" the sequences via a simple print function,
    processed at the time of each event in each sequence.

  Associated Files

    tj_simple.c

  Location

    examples/Audio/Juggler

##src/examples/Audio/tsc_soundfx.c::examples/tsc_soundfx##
tsc_soundfx - Uses the score player as a sound effects manager.

  Synopsis

    tsc_soundfx

  Description

    Demonstrate use of ScoreContext as a simple sound effects manager. This
    gives you dynamic voice allocation, and a simple MIDI-like interface.

    To run this program:

    1) Install the sample library from the recent 3DO tools disk as
    documented.

    If you don't have the sample library, edit this program to use your own
    samples. Search for .aiff.

    2) Run the program, follow printed instructions.

    The idea behind this program is that one can use the virtual MIDI routines
    in the music library as a simple sound effects manager. You can assign
    samples to channels, and then pay those samples using StartScoreNote().
    This will take advantage of the voice allocation, automatic mixer
    connections, and other management code already used for playing scores.
    You do not have to play sequences or load MIDI files to do this.

    You can load your samples based on a PIMap text file using the LoadPIMap()
    routine. This is documented in the manual under score playing. You may
    also load the samples yourself and put them in the PIMap which will give
    you more control. This example program shows you how to do that. Samples
    are assigned to Program Numbers at this step.

    Assigning program numbers to channels is accomplished by calling
    ChangeScoreProgram(). Once you have assigned a program to a channel, you
    can play the sound by calling: StartScoreNote (scon, Channel, Note,
    Velocity);

    Channel selects the sound. Note determines the pitch and may also be used
    to select parts of a multisample, e.g. a drum kit. Velocity controls
    loudness. The voice allocation occurs during this call.

  Implementation

    This example was revised to take advantage of a change made for music.lib
    V22 to permit playing multiple voices per MIDI node, which greatly
    facilitates sound effects playback.

  Associated Files

    $samples

  Location

    examples/Audio

  Notes

    1) Prior to music.lib V22, if you wanted to get multiple voices on a given
    channel, you had to use different note values. The allocator would only
    assign one voice to any given note number, regardless of MaxVoices.
    music.lib V22 supports having more than one voice per note number. Earlier
    versions of this example demonstrated a way around this by using a
    different note for each voice on a channel. Since this trick is no longer
    necessary and is somewhat less than straightforward, this example has been
    modified to take advantage of the V22 feature of multiple voices per
    notes.

    2) Prior to music.lib V24, you needed to be careful when assigning high
    priorities. Higher priority instruments never got stolen for lower
    priority instruments in that scheme. Thus you could clog up the DSPP if
    you have a high priority instrument with MaxVoices>1 and are also trying
    to play lower priority instruments. Starting with music.lib V24, higher
    priority instruments can be stolen by lower priority instruments if the
    higher priority instruments are stopped. As in the original voice stealing
    algorithm, voices do not get stolen from higher priority instruments if
    they are still playing at all (started or released).

    3) Samples that are attached to an InsTemplate are deleted when the
    Template is deleted. You can detach the sample first by calling
    DeleteAttachment() if you don't want this to happen.

    4) You can share the ScoreContext with code that plays a score as long as
    you don't overlap the channels or program numbers. You might restrict
    scores to channels 0-7 and programs 0-19. You could then use channels 8-15
    and programs 20-39 for sound effects. The advantage of this is that they
    share the same voice allocation and thus resources will be shared between
    them. If desired, you could instead use separate independent
    ScoreContexts.

  See Also

    CreateScoreContext()

##src/examples/Audio/Advanced_Sound_Player/tsp_algorithmic.c::examples/tsp_algorithmic##
tsp_algorithmic - Advanced sound player example showing algorithmic
    sequencing of sound playback.

  Synopsis

    tsp_algorithmic

  Description

    Assume you have two short sounds in memory and one long sound file with
    the following markers: BEGINbeginning segment (attack) Looploop segment
    (sustain) First Ending1st ending segment (gap) Second Ending2nd ending
    segment (release, end) END

    Given this, algorithmically play the following sequence of sounds: Segment
    What you should hearlong sound beginning segmentattack long sound loop
    segmentsustain long sound 1st ending segmentgap long sound loop segment
    sustainlong sound 2nd ending segmentrelease, end short sound 1<blast>long
    sound loop segment sustain long sound 1st ending segmentgap long sound
    loop segmentsustain long sound 2nd ending segmentrelease, end short sound
    2<honk>

    The technique used to implement this sequence involves the use of static
    branches, where one segment always leads into another, (e.g. after playing
    the 1st ending always go back to the loop segment), and decision functions
    where a conditional branching is required (e.g. from the end of the loop
    segment either go to the 1st or 2nd ending).

    This also demonstrates using sounds spooled from disc and played directly
    from memory.

  Associated Files

    tsp_algorithmic.c

    $samples, words.aiff

  Location

    examples/Audio/Advanced_Sound_Player

  See Also

    spCreatePlayer(), tsp_switcher, tsp_rooms

##src/examples/Audio/Advanced_Sound_Player/tsp_rooms.c::examples/tsp_rooms##
tsp_rooms - Room-sensitive soundtrack example using advanced sound player.

  Synopsis

    tsp_rooms

  Description

    Creates a thread to playback a sound track based on a global room variable
    gRoom.

    The parent task, tsp_rooms, gets control port events and updates gRoom as
    follows:

    * A Enter room A.

    * BEnter room B.

    * C  Enter room C.

    * X (Stop)Exit nicely.

    * Shift-XStop immediately.

    The soundtrack thread, Soundtrack, uses the advanced sound player to play
    a unique sound file for each room. When the main task changes rooms, the
    soundtrack thread adapts the soundtrack to the change in room at a
    musically convenient location.

    The way this is done is that each room's soundfile is designed so it can
    play in a loop. In addition to this, the end of each sound file, and
    additional optional marked locations within the sound file, must be
    musically sensible locations to transition to the beginning of any of the
    other room's sound files. When playback reaches the next marked position
    in, or the end of, the current room's sound, a default decision function
    is called to check to see if the main task changed room. If the room is
    still the same, then the current sound continues to play, or loops if at
    the end.

    If the room has changed, the SPPlayer is instructed to begin playing the
    sound for the new room.

    Note that the soundtrack adapts to room changes by the main task instead
    of making a sharp transition as soon as the room changes. It is possible
    for the main task to make several room changes before the soundtrack
    thread discovers that the room has changed at all. This results in smooth
    soundtrack transitions that occur at seemingly random locations, which is
    far less likely to become annoying to a game player than a soundtrack that
    predictably changes the instant the player crosses a given threshold.

  Associated Files

    tsp_rooms.c, $samples, words.aiff

  Location

    examples/Audio/Advanced_Sound_Player

  See Also

    spCreatePlayer(), tsp_switcher, tsp_algorithmic

##src/examples/Audio/Advanced_Sound_Player/tsp_spoolsoundfile.c::examples/tsp_spoolsoundfile##
tsp_spoolsoundfile - Plays an AIFF sound file from a thread using the
    advanced sound player.

  Synopsis

    tsp_spoolsoundfile <sound file> [<num repeats>]

  Description

    Plays an AIFF sound file using a thread to manage playback.

    This is a variation on the original SpoolSoundfile program that used the
    original sound file playersee CreateSoundFilePlayer(). This version uses
    the Advanced Sound Player (see spCreatePlayer()), which supports looping
    sound file playback.

  Arguments

    sound file                   Name of an AIFF file to play.

    num repeats                  Optional number of times to repeat the sound
                                 file. Defaults to 1.

  Caveats

    Calls ScanSample() to get information used to pick a sample player which
    prevents playing AIFF files with sustain or release loops (see
    ScanSample()Caveats).

  Associated Files

    tsp_spoolsoundfile.c

  Location

    examples/Audio/Advanced_Sound_Player

  See Also

    spCreatePlayer(), spoolsoundfile, tsp_algorithmic, tsp_rooms

##src/examples/Audio/Advanced_Sound_Player/tsp_switcher.c::examples/tsp_switcher##
tsp_switcher - Advanced sound player example that switches between sounds
    based on control pad input.

  Synopsis

    tsp_switcher

  Description

    Loops one of three sound files off of disc. The user can select a
    different sound to loop by pressing the A, B, or C buttons on the control
    pad. The last button pressed corresponds to the sound being played.

    This program demonstrates how one might use the advanced sound player as
    an engine for doing environmentally-sensitive soundtrack playback. Note
    that the sound being played doesn't change to the newly selected one until
    the end of the current sound is reached. This demonstrates, for example
    how a score might be made to change at the next musically sensible point.
    See tsp_rooms for another way to do this.

    Control pad operation:

    * ASelect sound #1.

    * BSelect sound #2.

    * CSelect sound #3.

    * XStop, quit when done playing.

    * Shift-XQuit immediately.

    * StartToggle pause on/off.

  Associated Files

    tsp_switcher.c,

    $samples

  Location

    examples/Audio/Advanced_Sound_Player

  See Also

    spCreatePlayer(), tsp_rooms, tsp_algorithmic

##src/examples/FileSystem/type.c::examples/type##
type - Type a file's content to the output terminal.

  Synopsis

     type <file1> [file2] [file3]...

  Description

    Demonstrates how to read a file and send its contents to the Debugger
    Terminal window using the byte stream routines.

  Arguments

    file1                        Name of the file to type. You can specify an
                                 arbitrary number of file names, and they
                                 will all get typed out.

  Associated Files

    type.c

  Location

    $c/type examples/FileSystem

##src/filesystem/type.c::examples/type##
type - Type a file's content to the output terminal.

  Synopsis

     type <file1> [file2] [file3]...

  Description

    Demonstrates how to read a file and send its contents to the Debugger
    Terminal window using the byte stream routines.

  Arguments

    file1                        Name of the file to type. You can specify an
                                 arbitrary number of file names, and they
                                 will all get typed out.

  Associated Files

    type.c

  Location

    $c/type examples/FileSystem

##src/examples/Jumpstart/UFO/ufo.c::examples/ufo##
ufo - A basic player/target game.

  Synopsis

    ufo

  Description

    Demonstrates the programming of a basic player/target game which is
    controlled via the control pad.

  Associated Files

    ufo.c, ufo.make, playbgndmusic.c, playbgndmusic.make

  Location

    examples/Jumpstart/Ufo

##src/examples/Kernel/UserFolio/simplemath_folio.c::examples/userfolio##
userfolio - Demonstrates how to create a folio and a link library to
    accompany it.

  Description

    This is an example of a simple demand-loaded folio.

    Folios are a convenient way to package functionality. They are loaded into
    memory by the kernel when they are needed, and removed when no one is
    using them. The code within folios is shared by all users of the folio.

    If you have some functionality that is needed by multiple modules in your
    title, it is best to encapsulate the functionality in a folio. The folio
    can remain in memory while different sections of the title get loaded into
    memory.

    simplemath_folio.c is the code needed to create a simple folio, containing
    two routines. AddNumber() adds two numbers together while SubNumber() does
    a substraction.

    simplemath_lib.c is the link library that is used to interface to the
    folio. It provides OpenSimpleMathFolio() and CloseSimpleMathFolio() which
    let clients gain access to the folio. It provides simple stubs for
    AddNumber() and SubNumber(). These stubs let a client get the right
    address and jump into the folio for execution of the code. The link
    library also has a few convenience routines, which are routines that add
    simple functionality on top of what the folio provides.

    To use this folio, it must be called simplemath.folio, and be put in the
    $app/folios directory.

  Associated Files

    simplemath.h, simplemath_folio.c, simplemath_lib.c

##src/examples/FileSystem/walker.c::examples/walker##
walker - Recursively displays the contents of a directory, and all nested
    directories.

  Synopsis

    walker <dir1> [dir2] [dir3]...

  Description

    This program demonstrates how to scan a directory, and recursively scan
    any directories it contains.

  Arguments

    dir1                         Name of the directory to list. You can
                                 specify an arbitrary number of directory
                                 names, and they will all get listed. If no
                                 name is specified, then the current
                                 directory in which the ls program is located
                                 will get displayed.

  Associated Files

    walker.c

  Location

    $c/Walker

    examples/FileSystem

##src/filesystem/Walker.c::examples/walker##
walker - Recursively displays the contents of a directory, and all nested
    directories.

  Synopsis

    walker <dir1> [dir2] [dir3]...

  Description

    This program demonstrates how to scan a directory, and recursively scan
    any directories it contains.

  Arguments

    dir1                         Name of the directory to list. You can
                                 specify an arbitrary number of directory
                                 names, and they will all get listed. If no
                                 name is specified, then the current
                                 directory in which the ls program is located
                                 will get displayed.

  Associated Files

    walker.c

  Location

    $c/Walker

    examples/FileSystem

##src/graphics/autodocs.c::gpg/graphics/addscreengroup##
AddScreenGroup -  Adds a screen group to the display.

  Synopsis

    Err AddScreenGroup (Item screenGroup,
			TagArg *targs)

    Err AddScreenGroupVA (Item screenGroup,
			  uint32 targs, ...)

  Description

    This function adds the specified screenGroup to the graphics folio's
    display mechanism.  After this call, the screens of the group can be made
    visible with a call to DisplayScreen().  This function returns zero if
    the group was added to the display, or an error code (a negative value) if
    an error occurs.

  Arguments

    screenGroup                  Item number of the screenGroup to be
                                 added.

    targs                        Pointer to an array of tag arguments.
                                 These values control the initial display
                                 configuration of the group.  The last
                                 element of the array must be the value
                                 TAG_END.  For a list of tag arguments for
                                 screen group items, see the "Portfolio
                                 Items" chapter in the Operating System
                                 Programmer's Guide.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

    GRAFFERR_SGINUSE will be returned if AddScreenGroup() is called for a
    screenGroup that has already been added with the AddScreenGroup()
    call.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DisplayScreen(), RemoveScreenGroup()

##src/graphics/autodocs.c::gpg/graphics/clonevrampages##
CloneVRAMPages - Copies a single page of VRAM to other contiguous
                 pages of VRAM.

  Synopsis

    Err CloneVRAMPages (Item ioreq,
			void *dest,
			void *src,
			uint32 numpages,
			uint32 mask)

  Description

    This function is a convenience call for SPORT device transfers.  It
    copies the specified src VRAM page to a number of VRAM pages, starting at
    the specified dest address and specified numPages number of pages.  The
    mask argument controls which bits of the destination will be modified by
    bits of the source.

    This function uses the SPORT device to do the transfer.  It doesn't
    return until the transfer is completed.  That is, there is an implicit
    wait for the next VBlank to occur, as SPORT transfers take place only
    during vertical blank.

  Arguments

    ioreq                        Item number of the I/O request.

    dest                         Pointer to the first byte of the
                                 first page of the destination VRAM.

    src                          Pointer to the first byte of the page
                                 of source VRAM.

    numpages                     Number of destination pages to
                                 receive the copy of the source page.

    mask                         Write mask, which controls which bits
                                 of the source are copied to the destination.

  Return Value

    The function returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Notes

    The use of a mask value of other than all ones (0xFFFFFFFF) is
    discouraged.  Future systems may be unable to support this
    feature in a performance-conscious manner.

  Implementation

    Convenience call implemented in graphics.lib V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    CopyVRAMPages(), SetVRAMPages(), SetVRAMPagesDefer(),
    CopyVRAMPagesDefer(), CloneVRAMPagesDefer(), GetVRAMIOReq(),
    GetPageSize()

##src/graphics/autodocs.c::gpg/graphics/clonevrampagesdefer##
CloneVRAMPagesDefer - Copies one page of VRAM to a contiguous range of
                      VRAM pages asynchronously.

  Synopsis

    Err CloneVRAMPagesDefer (Item ioreq,
			     void *dest,
			     void *src,
                             uint32 numpages,
			     uint32 mask)

  Description

    This function is a convenience call for SPORT device transfers.  It
    copies the specified src VRAM page to a number of VRAM pages, starting at
    the specified dest address and specified numPages number of pages.  The
    mask argument controls which bits of the destination will be modified by
    bits of the source.

    This function uses the SPORT device to do the transfer.  It does not wait
    for the transfer to complete, but returns immediately.  This allows the
    application to continue its work while the SPORT I/O request is in the
    queue.  When using a deferred request such as this, you should use
    WaitIO() when you want to wait until the I/O request completes.

  Arguments

    ioreq                        Item number of the I/O request.

    dest                         Pointer to the first byte of
                                 the first page of the destination VRAM.

    src                          Pointer to the first byte of the page
                                 of source VRAM.

    numpages                     Number of destination pages to
                                 receive the copy of the source page.

    mask                         Write mask, which controls which bits
                                 of the source are copied to the destination.

  Return Value

    The function returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Notes

    The use of a mask value of other than all ones (0xFFFFFFFF) is
    discouraged.  Future systems may be unable to support this
    feature in a performance-conscious manner.

  Implementation

    Convenience call implemented in graphics.lib V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    CopyVRAMPages(), SetVRAMPages(), SetVRAMPagesDefer(),
    CopyVRAMPagesDefer(), CloneVRAMPages(), GetVRAMIOReq(),
    GetPageSize()

##src/graphics/autodocs.c::gpg/graphics/closegraphicsfolio##
CloseGraphicsFolio - Closes the graphics folio.

  Synopsis

    Err CloseGraphicsFolio (void)

  Description

    This function terminates access to the graphics folio, freeing any
    resources allocated by calling OpenGraphicsFolio().

    Once the graphics folio is closed, the task should no longer call
    any functions from the folio.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Convenience call implemented in graphics.lib V21.

  Associated Files

    graphics.h, graphics.lib

  See Also

    OpenGraphicsFolio()

##src/graphics/autodocs.c::gpg/graphics/copyvrampages##
CopyVRAMPages -  Copies a contiguous number of VRAM pages  to a VRAM
                 destination.

  Synopsis

    Err CopyVRAMPages (Item ioreq,
		       void *dest,
		       void *src,
                       uint32 numpages,
		       uint32 mask)

  Description

    This function is a convenience call for SPORT device transfers.  It
    copies the specified numpages number of pages from the specified src VRAM
    pages to the specified dest VRAM pages.  The mask argument controls which
    bits of the destination will be modified by bits of the source.

    This function uses the SPORT device to do the transfer.  It doesn't
    return until the transfer is completed.  That is, there is an implicit
    wait for the next VBlank to occur, as SPORT transfers take place only
    during vertical blank.

  Arguments

    ioreq                        Input: Item number of the I/O request.

    dest                         Pointer to the VRAM buffer to
                                 receive the copy.

    src                          Pointer to the VRAM buffer that's
                                 the source of the copy.

    numpages                     Number of VRAM pages to be copied.

    mask                         Write mask, which controls which bits
                                 of the source get copied to the destination.

  Return Value

    The function returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Notes

    The use of a mask value of other than all ones (0xFFFFFFFF) is
    discouraged.  Future systems may be unable to support this
    feature in a performance-conscious manner.

  Implementation

    Convenience call implemented in graphics.lib V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    CloneVRAMPages(), SetVRAMPages(), SetVRAMPagesDefer(),
    CopyVRAMPagesDefer(), CloneVRAMPagesDefer(), GetVRAMIOReq(),
    GetPageSize()

##src/graphics/autodocs.c::gpg/graphics/copyvrampagesdefer##
CopyVRAMPagesDefer - Copies a contiguous number of VRAM pages to a VRAM
                     destination.

  Synopsis

    Err CopyVRAMPagesDefer (Item ioreq,
			    void *dest,
			    void *src,
                            uint32 numpages,
			    uint32 mask)

  Description

    This function is a convenience call for SPORT device transfers.  It
    copies the specified numpages number of pages from the specified src VRAM
    pages to the specified dest VRAM pages.  The mask argument controls which
    bits of the destination will be modified by bits of the source.

    This function uses the SPORT device to do the transfer.  It does not wait
    for the transfer to complete, but returns immediately.  This allows the
    application to continue its work while the SPORT I/O request is in the
    queue.  When using a deferred request such as this, you should use
    WaitIO() when you want to wait until the I/O request completes.

  Arguments

    ioreq                        Item number of the I/O request.

    dest                         Pointer to the VRAM buffer to
                                 receive the copy.

    src                          Pointer to the VRAM buffer that's
                                 the source of the copy.

    numpages                     Number of VRAM pages to be copied.

    mask                         Write mask, which controls which bits
                                 of the source are copied to the destination.

  Return Value

    The function returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Notes

    The use of a mask value of other than all ones (0xFFFFFFFF) is
    discouraged.  Future systems may be unable to support this
    feature in a performance-conscious manner.

  Implementation

    Convenience call implemented in graphics.lib V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    CloneVRAMPages(), SetVRAMPages(), SetVRAMPagesDefer(), CopyVRAMPages(),
    CloneVRAMPagesDefer(), GetVRAMIOReq(), GetPageSize()

##src/graphics/autodocs.c::gpg/graphics/createbitmap##
CreateBitmap - Creates a bitmap.

  Synopsis

    Item CreateBitmap (TagArg *args)

    Item CreateBitmapVA (uint32 args, ...)

  Description

    This macro creates a bitmap item having the characteristics
    specified by the tag arguments.

  Tag Arguments

    The following tags must be present:

    * CBM_TAG_DONE - Marks the end of the tag argument list.

    * CBM_TAG_WIDTH - Sets the bitmap width, in pixels.

    * CBM_TAG_HEIGHT - Specifies the bitmap height, in pixels.

    * CBM_TAG_BUFFER - Specifies the starting address of the bitmap
      buffer.

    The following tags are optional:

    * CBM_TAG_CLIPWIDTH - Specifies the width of the clipping region
      (default:  the value of CBM_TAG_WIDTH)

    * CBM_TAG_CLIPHEIGHT - Specifies the height of the clipping region
      (default: the value of CBM_TAG_HEIGHT)

    * CBM_TAG_CLIPX - Specifies the left edge of the clipping region
      (default: 0)

    * CBM_TAG_CLIPY - Specifies the top edge of the clipping region
      (default: 0)

    * CBM_TAG_WATCHDOGCTR - Specifies the timeout value (in sec) (default:
      1000000)

    * CBM_TAG_CECONTROL - Specifies the CEControl register to be loaded
      into hardware when this bitmap is used (default:
      (B15POS_PDC | B0POS_PPMP | CFBDSUB | CFBDLSB_CFBD0 | PDCLSB_PDC0) )

  Arguments

    args                         Pointer to an array of tag arguments
                                 for the bitmap.  The last element of the
                                 array must be the value TAG_END.  For a list
                                 of tag arguments for bitmaps, see the
                                 "Portfolio Items" chapter in the
                                 Operating System Programmer's Guide.

  Return Value

    The function returns the item number of the new bitmap or an error number
    (a negative value) if an error occurs.

    GRAFERR_BUFWIDTH will be returned if the specified width of the bitmap
    buffer is not valid.

    GRAFERR_BADBITMAPSPEC will be returned if there is an error in the bitmap
    specification not covered by some other error code.

    GRAFERR_NOWRITEACCESS will be returned if the memory specified by the
    bitmap buffer is not writable by the calling task.

    GRAFERR_BADCLIP will be returned if illegal clip values (for instance,
    larger than the size of the bitmap area) are specified.

  Notes

    CBM_TAG_CLIPX and CBM_TAG_CLIPY have the effect of moving the
    origin of the bitmap coordinate system to the specified
    location.

  Implementation

    Macro implemented in graphics.h V20.

  Associated File

    graphics.h

  See Also

    CreateItem(), DeleteBitmap(), DeleteItem()

##src/graphics/autodocs.c::gpg/graphics/createscreengroup##
CreateScreenGroup - Creates a screen group and all its screens, bitmaps,
                    buffers, and VDLs.

  Synopsis

    Item CreateScreenGroup (Item *screenItemArray,
			    TagArg *targs)

    Item CreateScreenGroupVA (Item *screenItemArray,
			      uint32 targs, ...)

  Description

    This function is the workhorse of the graphics display architecture.  It
    creates a complete display environment, with all the associated components
    and data structures, based on the specifications made in the targs
    argument.  The function returns two pieces:  It returns the item number
    of a newly created ScreenGroup structure, and it fills out the specified
    screenItemArray with item numbers for the screen structures that have been
    created.

    The tag args supplied as an argument to the function allow the programmer
    to set all of the parameters that control the creation of the screen
    group.  However, the programmer doesn't need to specify all of the tag
    args.  Each possible tag arg has an associated default value, which is
    used if the tag arg is not supplied.  In fact, if the programmer specifies
    a tag arg array with no entries, or specifies NULL as the targs argument,
    the defaults are sufficient to create a simple single-buffer screen group.

    Note:  Only one bitmap per screen is supported.

  Tag Arguments

    Here are the tag args that can be passed to CreateScreenGroup():

    * CSG_TAG_SCREENCOUNT - This tag arg allows you to define how many screens
      will be created for the new screen group.  Typically, you will create two
      screens in order to create double-buffered displays.  But you may want a
      screen group with only a single screen, to show a static display for
      instance.  Or you may want to create a stereoscope display with three or
      four screens in the group.  If you don't specify a screen count, the
      default number is one.

    * CSG_TAG_SCREENHEIGHT - You use this tag arg to
      specify the actual height of your screen's frame buffer.  This may be
      different from the display height of the screen, which is the height of
      the visible portion of your screen.  The default width is that
      reported by calling QueryGraphics() with the tag
      QUERYGRAF_TAG_DEFAULTHEIGHT.

    * CSG_TAG_DISPLAYHEIGHT - You use this tag arg to specify the
      display height of your screen.  The display height is the visible portion
      of the screen.  You may create a screen that's taller than the display
      height.  The display height must always be equal to or less than the
      screen height.  The default is that reported by calling
      QueryGraphics() with the tag QUERYGRAF_TAG_DEFAULTHEIGHT.

    * CSG_TAG_BITMAPCOUNT - This tag arg allows you to specify how many bitmaps
      each screen will have.  Each screen within a screen group has to have the
      same number and configuration of bitmaps.  The count specified by this tag
      arg is the bitmap count per screen, not the total bitmap count.  The default
      bitmap count per screen is one.

    * CSG_TAG_BITMAPWIDTH_ARRAY - In a screen
      with multiple bitmaps, each bitmap can have its own width.  If you want to
      specify a unique width per bitmap, or if you want your bitmaps to have a
      width that's other than the system's default width, you use this
      tag arg to supply the pointer to a table of widths.The elements of the
      array are interpreted as int32 values.  There must be one entry for each
      bitmap of a single screen.  If you don't specify a bitmap width array,
      then all bitmaps will be of the width reported by calling
      QueryGraphics() with the tag QUERYGRAF_TAG_DEFAULTWIDTH.

    * CSG_TAG_BITMAPHEIGHT_ARRAY - In a screen with multiple bitmaps, each bitmap
      can have its own height.  If you want to specify a unique height per
      bitmap, you use this tag arg to supply the pointer to a table of heights.
      The elements of the array are interpreted as int32 values.  There must be
      one entry for each bitmap of a single screen.  If you have only one bitmap
      per screen, you don't need to specify a height for that bitmap; the
      default is to use the height reported by calling
      QueryGraphics() with the tag QUERYGRAF_TAG_DEFAULTHEIGHT.  If
      you have more than one bitmap per screen, you must specify a
      bitmap width array.

    * CSG_TAG_BITMAPBUF_ARRAY - Normally, the system will allocate your frame buffers for you.  However, you may wish to
      have specific preallocated frame buffers associated with the screens of
      your display.  You can designate your own buffers using this tag arg.
      Paired with this tag arg is the pointer to an array of buffer pointers.The
      elements in the array are interpreted as pointers to the starting
      addresses of your frame buffers.  There must be an entry for every bitmap
      in every screen.  For example, if you have two screens and each screen has
      three bitmaps, then the bitmap buffer array must have six entries.If you
      don't specify a bitmap buffer array, the default action is for the
      system to allocate the appropriate frame buffers for you.  Even if you
      choose to have the system allocate buffers for you, you can use the
      CSG_TAG_SPORTBITS tag arg to specify SPORT access details.

    * CSG_TAG_SPORTBITS - This tag arg allows the programmer to take SPORT
      transfers into consideration when setting up the bitmap frame buffers.
      SPORT transfers have certain memory requirements and restrictions, all of
      which are handled by using the correct flag bits when allocating frame
      buffer memory; for instance, a call to GetBankBits() is usually required
      to make sure that SPORT memory transfers occur in the same bank of memory.
      You get to specify flag bits that are to be used when allocating frame
      buffer buffers with this tag arg.Not only does this tag arg allow you to
      control memory allocations, but the presence of this tag arg implies that
      all normal SPORT care (page alignment, page size adjustment) should be
      taken when making the allocation.If this tag arg is used but the
      associated value is null, this designates that any buffers allocated by
      the system need to all be in the same bank of memory, though any bank will
      do.If this tag arg is absent, the default is to presume that SPORT
      transfers don't have to be considered when allocating frame buffers.

    * CSG_TAG_VDLTYPE -  Every screen needs a VDL.  The graphics folio supports
      several types of VDLs.  You can supply your own VDL, or you can choose to
      have the system construct one for you.  If you supply your own, you have
      to specify the type of VDL you are supplying.  If you choose to have the
      system construct a VDL for you, you may wish to specify the type of VDL to
      be built (rather than just accepting the default).

      The types of VDLs supported by the system include:

      * VDLTYPE_SIMPLE - The simple VDL has one entry, which points to the
        frame buffer and has CLUT and display control words.  This type of VDL
        is the default.

      * VDLTYPE_FULL -This VDL has an entry for every line of the display, which
        entry includes a buffer address and a full CLUT.

      * VDLTYPE_COLOR - With this VDL, there is an entry for every line of the
        display, which entry has the space for a full CLUT.  The color VDL does
        not allow line-by-line modifications of the buffer address.  This type of
        VDL is not yet supported.

      * VDLTYPE_ADDRESS - This VDL provides an entry for every line of the display,
        which entry has a buffer address.  This allows line-by-line control over
        the data that will be displayed on any given line.  The address VDL does
        not allow line-by-line CLUT modifications.  This type of VDL is not yet
        supported.

      * VDLTYPE_DYNAMIC - The dynamic VDL can be modified with wild abandon.  It
        can grow and shrink dynamically.  This type of VDL gives the programmer
        maximum flexibility, but it requires a great amount of processing overhead
        and so it's the least attractive type of VDL in that regard.

      If you don't specify a VDL type, the default type is VDLTYPE_SIMPLE.

    * CSG_TAG_VDLPTR_ARRAY - If you want to specify your own VDLs to go with your own bitmaps, you may do so
      using this tag arg.  Paired with this tag arg is a pointer to an array of
      VDLs.  This tag argument is used in conjunction with
      CSG_TAG_VDLLENGTH_ARRAY, and is an optional tag argument.The elements of
      the array are interpreted as pointers to VDLs.  You must specify a VDL for
      each screen you want created.You specify the type of VDLs you're
      providing by using the tag arg CSG_TAG_VDLTYPE.  If you don't specify
      one of those tag args, you get the normal default type for the tag arg.If
      you don't specify an array of VDLs, the system will create the VDLs
      for you.

    * CSG_TAG_VDLLENGTH_ARRAY - This tag is used in conjunction with
      CSG_TAG_VDLPTR_ARRAY to specify your own VDLs to go with your own bitmaps.
      Each submitted VDL in the VDL array must have a corresponding LENGTH
      associated with it, as VDL list proofing is in effect.  (This is the
      length in words.)   This is an optional tag argument.  If you choose to
      submit a VDL list of your own, rather than using one of the defaults, then
      the VDL list must be fully filled in at the time you call
      CreateScreenGroup.

    * CSG_TAG_DISPLAYTYPE - Specifies what kind of display you want
      the system to build for you (e.g. "Narrow" PAL or normal PAL).
      The default display type is the one reported by calling
      QueryGraphics() with the tag QUERYGRAF_TAG_DEFAULTDISPLAYTYPE.

    * CSG_TAG_DONE -  Put this tag arg at the end of the list
      to terminate the list.

  Arguments

    screenItemArray              Pointer to an array of Item
                                 fields.  The array is filled in by
                                 CreateScreenGroup() if the call is
                                 successful.

    targs                        A pointer to an array of tag
                                 arguments.  The last element of the array
                                 must be the value TAG_END.  If there are no
                                 tag arguments, this argument must be NULL.

  Return Value

    The function returns the item number of the newly created screen group or
    an error number (a negative value) if an error occurs.

    GRAFERR_NOMEM will be returned if any memory allocation attempted on the
    behalf of the task fails.

    GRAFERR_VDLWIDTH will be returned if an illegal width is specified for the
    VDL.

  Caveats

    Multiple bitmaps per Screen are not yet supported.

    Only VDLs of type VDLTYPE_FULL are currently supported.

    SPORT-conscious bitmap buffer allocation is not yet done
    "automatically."  You must supply a value from GetBankBits() to
    take advantage of this feature.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    AddScreenGroup(), DeleteScreenGroup(), RemoveScreenGroup()

##src/graphics/autodocs.c::gpg/graphics/createvblioreq##
CreateVBLIOReq - Returns an I/O request for use with WaitVBL()
                 and WaitVBLDefer().

  Synopsis

    Item CreateVBLIOReq (void)

  Description

    This function is a convenience call for the vbl timer. This
    function creates and returns an I/O request that is suitable for
    use with WaitVBL() and WaitVBLDefer().

  Return Value

    This function returns the item number of the I/O request or an error code
    (a negative value) if an error occurs.

  Implementation

    Macro implemented in graphics.h V24.

  Associated Files

    graphics.h

  See Also

    DeleteVBLIOReq()

##src/graphics/autodocs.c::gpg/graphics/createvramioreq##
CreateVRAMIOReq - Returns an I/O request for use with SPORT transfer
                  functions.

  Synopsis

    Item CreateVRAMIOReq (void)

  Description

    This function is a convenience call for SPORT device transfers.  This
    function creates and returns an I/O request that is suitable for use with
    the SPORT transfer functions.

  Return Value

    This function returns the item number of the I/O request or an error code
    (a negative value) if an error occurs.

  Implementation

    Macro implemented in graphics.h V24.

  Associated Files

    graphics.h, graphics.lib

  See Also

    CloneVRAMPages(), SetVRAMPages(), SetVRAMPagesDefer(),
    CopyVRAMPagesDefer(), CloneVRAMPagesDefer(), CopyVRAMPages(),
    DeleteVRAMIOReq()

##src/graphics/autodocs.c::gpg/graphics/deletebitmap##
DeleteBitmap - Deletes a bitmap item.

  Synopsis

    Err DeleteBitmap (Item bitmap)

  Description

    This macro deletes a bitmap item created by CreateBitmap().

  Arguments

    bitmap                       The bitmap Item to delete, as obtained
                                 from CreateBitmap().

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Macro implemented in graphics.h V21.

  Associated File

    graphics.h

  See Also

    CreateBitmap(), DeleteItem()

##src/graphics/autodocs.c::gpg/graphics/deletescreengroup##
DeleteScreenGroup - Deletes a screen group and its associated data
                    structures.

  Synopsis

    Err DeleteScreenGroup (Item screenGroupItem)

  Description

    This folio routine undoes what CreateScreenGroup() does.  In releases
    previous to 1.3, DeleteScreenGroup() was #define'd to
    DeleteItem(), which was insufficient.

    DeleteScreenGroup() will free memory for Bitmap Items if and only if the
    memory was allocated by a CreateScreenGroup() call.  Screen and VDL
    Items associated with the ScreenGroup Item will be deleted.

  Arguments

    screenGroupItem              The item number of a ScreenGroup
                                 structure.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Caveats

    Tons.  Mostly to do with how the system decides what it's
    responsible for freeing.  For example, if you
    CreateScreenGroup() a default Screen, then SetVDL() a custom
    VDL, DeleteScreenGroup() will attempt to delete your custom VDL
    (leaving the original hanging around).

    In general, if you get clever with VDLs and Bitmaps, don't
    assume DeleteScreenGroup() will be as clever as you.  Unwind
    all your modifications before calling DeleteScreenGroup().

    DeleteScreenGroup() may get smarter in the future.

  Implementation

    Folio call implemented in graphics.lib V21.

  Associated Files

    graphics.h, graphics.lib

  See Also

    CreateScreenGroup()

##src/graphics/autodocs.c::gpg/graphics/deletevblioreq##
DeleteVBLIOReq - Delete an I/O request created by
                 CreateVBLIOReq().

  Synopsis

    Err DeleteVBLIOReq (Item ioreq)

  Description

    This macro deletes a VBL timer I/O request item created by
    CreateVBLIOReq().

  Arguments

    ioreq                       The item number of the I/O request to
                                delete.

  Return Value

    The macro returns 0 if the I/O request was successfully deleted or
    an error code (a negative value) if an error occurs.

  Implementation

    Macro implemented in graphics.h V24.

  Associated Files

    graphics.h

  See Also

    CreateVBLIOReq()

##src/graphics/autodocs.c::gpg/graphics/deletevdl##
DeleteVDL - Deletes a VDL and all its associated data structures.

  Synopsis

    Err DeleteVDL (Item vdlItem)

  Description

    This macro is a convenience call to DeleteItem().  It deletes a VDL that
    was created with a call to SubmitVDL().  Any data structures and buffers
    allocated by SubmitVDL() are freed too.

    After the call to this macro, the VDL item number becomes invalid.  If the
    VDL is currently being used in a screen that's being displayed, the
    screen will go black.

  Arguments

    vdlItem                      The item number of a VDL structure.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Macro implemented in graphics.h V20.

  Associated File

    graphics.h

  Caveats

    DeleteScreenGroup() will not delete VDLs that were created with the
    initial CreateScreenGroup() call if new VDLs have been attached to the
    screens with SetVDL() calls.  If a new VDL has been attached to a screen
    in the ScreenGroup being deleted with the DeleteScreenGroup call, then the
    new VDL will be deleted as well.

  See Also

    DeleteItem(), SetVDL(), SubmitVDL()

##src/graphics/autodocs.c::gpg/graphics/deletevramioreq##
DeleteVRAMIOReq - Delete an I/O request created by
                  CreateVRAMIOReq().

  Synopsis

    Err DeleteVRAMIOReq (Item ioreq)

  Description

    This macro deletes a SPORT I/O request item created by
    CreateVRAMIOReq().

  Arguments

    ioreq                       The item number of the I/O request to
                                delete.

  Return Value

    The macro returns 0 if the I/O request was successfully deleted or
    an error code (a negative value) if an error occurs.

  Implementation

    Macro implemented in graphics.h V24.

  Associated Files

    graphics.h

  See Also

    CreateVRAMIOReq()

##src/graphics/autodocs.c::gpg/graphics/disablehavg##
DisableHAVG - Disables horizontal averaging.

  Synopsis

    Err DisableHAVG (Item screenItem)

  Description

    This function disables horizontal averaging of the specified screen.
    Vertical averaging is left undisturbed.

  Arguments

    screenItem                   Item number of the Screen whose
                                 display is to be modified.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DisableVAVG(), EnableHAVG(), EnableVAVG()

##src/graphics/autodocs.c::gpg/graphics/disablevavg##
DisableVAVG - Disables vertical averaging.

  Synopsis

    Err DisableVAVG (Item screenItem)

  Description

    This function disables vertical averaging of the specified screen.
    Horizontal averaging is left undisturbed.

  Arguments

    screenItem                   Item number of the screen whose
                                 display is to be modified.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DisableHAVG(), EnableHAVG(), EnableVAVG()

##src/graphics/overlay.c::gpg/graphics/displayoverlay##
DisplayOverlay - Display a Bitmap overlaying all Screens.

  Synopsis

    Item DisplayOverlay (Item bitmap, int32 topedge);

  Description

    This routine creates and installs an Overlay into the prevailing
    display.  This is used to present information of a critical
    nature to the user.  The underlying Screen and application
    driving it continue to operate normally.

    The specified Bitmap is spliced into the prevailing display; its
    top edge will be at the location specified by 'topedge'.
    DisplayOverlay() will return an Item representing the Overlay,
    or an error if anything went wrong.  The specified Bitmap will
    remain in front of all other Screens until the Overlay is
    removed via DeleteItem().

    Only one Overlay may be active at a time; the most recent Bitmap
    supplied to DisplayOverlay() is the one displayed.

    The top edge of the Bitmap must be >= 0, and the bottom edge
    must be no lower than the total height of the prevailing display
    mode (NTSC or PAL).  The Overlay will not be created if these
    bounds are violated.

  Note

    It is strongly recommended that this facility be used only to
    display information of a time-critical and transient nature to
    the user.  Using this facility for the purposes of permanently
    installing a static graphic (like a flight control panel) is
    expressly discouraged.

    It is anticipated that, one day, maybe, possibly, overlays will
    be translucent.  In anticipation of this eventuality, you are
    encouraged to observe the following rendering rules:

    Imagery that is to be translucent should be rendered with the
    high bit (bit 15) clear.  Imagery that is to be opaque (like
    text) should be rendered with the high bit set.  (Think of it as
    an alpha channel bit.)

  Arguments

    bitmap	Item number of the Bitmap to be displayed.

    topedge	Y-position where the top edge of the Bitmap is to
    		appear.

  Result

    Item	An Item representing the Overlay, or a negative
    		error code.

  Implementation

    Folio call implemented in graphics folio V22.

  Associated Files

    graphics.h		ANSI Prototype

    graphics.lib	ARM Link Library

  Caveats

    Currently, if the top edge is zero, it is silently bumped to
    one.  This simplifies stuff internally.  This behavior will
    change in the future.

    The internal nature of the Overlay shall forever remain private.
    This is because its implementation is going to change in the
    future.  If you attempt to rely on any characteristics of an
    Overlay Item that aren't documented here, YOUR APPLICATION WILL
    BREAK.

    The CLUT used for the Overlay is the standard ascending color
    set; it cannot be changed.

    All sub-positioning and anti-aliasing features are turned OFF in
    the Overlay region; they cannot be changed.

    Due to a hardware weirdness, the top and bottom lines
    of the Overlay may appear unusual if vertical averaging is
    enabled in the underlying Screen.  This is especially true of
    pseudo-24-bit displays.

  See Also

    CreateItem(), CreateScreenGroup(), DeleteItem()

##src/graphics/autodocs.c::gpg/graphics/displayscreen##
DisplayScreen - Displays the bitmap(s) of the specified screen (or
                screens).

  Synopsis

    Err DisplayScreen (Item screenItem0,
		       Item screenItem1)

  Description

    This function causes the bitmap(s) of the specified screen (or screens)
    to be displayed.  The screenItem0 argument specifies the screen to be
    added to the display.  For a stereoscopic or interlaced display, the
    screenItem1 argument can specify a second screen structure to be displayed
    in the odd field of the video frame.

    The second argument can be NULL, or the same as the first, to specify a
    simple single-screen display.

  Arguments

    screenItem0                  Item number of the screen that is to
                                 be added to the display.

    screenItem1                  Optional item number of the screen
                                 that is to be added to the second (the odd)
                                 field of the display frame.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

    GRAFERR_NOTOWNER will be returned if the screen item(s) specified are not
    owned by the current task and have not been opened with OpenItem() calls.

    GRAFERR_SGNOTINUSE will be returned if AddScreenGroup() has not been
    called for the ScreenGroup containing the specified screen(s).

    GRAFERR_MIXEDSCREENS will be returned if the specified screen items belong
    to different ScreenGroups.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    AddScreenGroup(), DisplayScreen(), ModifyVDL(), SetVDL(),
    SubmitVDL()

##src/graphics/autodocs.c::gpg/graphics/drawcels##
DrawCels - Draws a list of cels (one or more) to the buffer of a bitmap.

  Synopsis

    Err DrawCels (Item bitmapItem,
		  CCB *ccb)

  Description

    This function sets up the cel engine according to parameters in the
    bitmapItem, and then submits to the cel hardware the list of cels
    specified by the ccb argument.  On return, the cels have been rendered.

  Arguments

    bitmapItem                   Item number of a bitmap structure.

    ccb                          Pointer to the first of one or
                                 more CCB structures.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

    GRAFERR_CELTIMEOUT will be returned if the cel engine times out during the
    rendering process.  The most likely cause of a cel engine time-out is a
    bad cel or CCB data being passed to the cel engine.

  Implementation

    Folio call implemented in graphics folio V20.
    Became a SWI in graphics folio V24.

  Associated Files

    graphics.h, graphics.lib

  Notes

    DrawCels() operates faster when the task or thread calling it
    is the owner of the bitmap, as opposed to simply having called
    OpenItem() on the bitmap.

  See Also

    DrawScreenCels()

##src/graphics/autodocs.c::gpg/graphics/drawchar##
DrawChar - Draws a text character to a console's window.

  Synopsis

    Err DrawChar (GrafCon *gcon,
		  Item bitmapItem,
		  uint32 character)

  Description

    This function plots the specified text character to the window of the
    console.  The pen position in the GrafCon is updated based on the width or
    height of the rendered character.

    The fonts flag, FONT_VERTICAL, controls whether the height or width of the
    rendered character is modified.  If the current FONT_VERTICAL fonts flag
    is set, then the height is modified; if the flag is clear, then the width
    is modified.

  Arguments

    gcon                         A pointer to a GrafCon
                                 structure for pen position information.

    bitmapItem                   An item number for the bitmap to
                                 receive the rendering.

    character                    The text character to be printed to
                                 the console's window.  The character
                                 argument is unsigned 32-bit to allow for
                                 international character sets.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DrawText8()

##src/graphics/autodocs.c::gpg/graphics/drawscreencels##
DrawScreenCels - Draws a list of cels (one or more) to the bitmaps of a
                 screen.

  Synopsis

    Err DrawScreenCels (Item screenItem,
			CCB *ccb)

  Description

    This function traverses the list of bitmaps associated with the screen
    specified by the screenItem argument, calling DrawCels() for each bitmap.
    On return, all cels have been rendered into all bitmaps of the screen.

  Arguments

    screenItem                   Item number of a screen structure.

    ccb                          Pointer to the first of one or
                                 more CCB structures.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.
    Became a SWI in graphics folio V24.

  Associated Files

    graphics.h, graphics.lib

  Notes

    DrawScreenCels() operates faster when the task or thread calling it
    is the owner of the bitmap, as opposed to simply having called
    OpenItem() on the bitmap.

  See Also

    DrawCels()

##src/graphics/autodocs.c::gpg/graphics/drawtext16##
DrawText16 - Draws a text character to a console's window.

  Synopsis

    Err DrawText16 (GrafCon *gcon,
		    Item bitmapItem,
		    uint16 *text)

  Description

    This function plots the specified text string to the window of the
    console.  It accepts a 16-bit null-terminated text string and calls
    DrawChar() to plot each text character.

    This function is the same as DrawText8(), except that the characters are
    16 bits wide.

  Arguments

    gcon                         A pointer to a GrafCon
                                 structure for pen position information.

    bitmapItem                   An item number for the bitmap to
                                 receive the rendering.

    text                         A 16-bit null-terminated text string
                                 to be printed to the console's window.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DrawChar(), DrawText8()

##src/graphics/autodocs.c::gpg/graphics/drawtext8##
DrawText8 - Draws a text character to a console's window.

  Synopsis

    Err DrawText8 (GrafCon *gcon,
		   Item bitmapItem,
		   uint8 *text)

  Description

    This function plots the specified text string to the window of the
    console.  It accepts an 8-bit null-terminated text string and calls
    DrawChar() to plot each text character.

  Arguments

    gcon                         A pointer to a GrafCon
                                 structure for pen position information.

    bitmapItem                   An item number for the bitmap to
                                 receive the rendering.

    text                         An 8-bit null-terminated text string
                                 to be printed to the console's window.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DrawChar(), DrawText16()

##src/graphics/autodocs.c::gpg/graphics/drawto##
DrawTo - Draws a line from the GrafCon's current position to a
         specified position.

  Synopsis

    Err DrawTo (Item bitmapItem,
		GrafCon *grafcon,
		Coord x,
		Coord y)

  Description

    The function draws a line from the current pen position to the specified
    x and y coordinates.  On completion, the endpoint becomes the new current
    pen position.

    Note that this function draws a line that includes both the start and end
    points.  This function uses the cel hardware.

  Arguments

    bitmapItem                   The item number of the bitmap.

    grafcon                      Pointer to a GrafCon
                                 structure.

    x                            The column of the line's
                                 endpoint.

    y                            The row of the line's endpoint.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    MoveTo()

##src/graphics/autodocs.c::gpg/graphics/enablehavg.c##
EnableHAVG - Enables horizontal averaging.

  Synopsis

    Err EnableHAVG (Item screenItem)

  Description

    This function enables horizontal averaging of the specified screen.
    Vertical averaging is left undisturbed.

  Arguments

    screenItem                   Item number of the screen whose
                                 display is to be modified.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DisableHAVG(), DisableVAVG, EnableVAVG()

##src/graphics/autodocs.c::gpg/graphics/enablevavg.c##
EnableVAVG - Enables vertical averaging.

  Synopsis

    Err EnableVAVG (Item screenItem)

  Description

    This function enables vertical averaging of the specified screen.
    Horizontal averaging is left undisturbed.

  Arguments

    screenItem                   Item number of the screen whose
                                 display is to be modified.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DisableHAVG(), DisableVAVG, EnableHAVG()

##src/graphics/autodocs.c::gpg/graphics/fastmapcel##
FastMapCel - Maps this cel onto any four corners.

  Synopsis

    void FastMapCel (CCB *ccb,
		     Point *quad)

  Description

    This convenience routine maps a cel onto the four points specified by the
    quad argument.  The mapping is created by setting the delta fields in the
    specified ccb argument.  The deltas will cause the cel to be rendered such
    that the four corners of the imagery map to the four corners.

    The quad argument points to an array of four-point structures.  In the
    normal configuration of the quad, the first entry refers to the top-left
    corner of the imagery, the second entry refers to top-right, the third to
    bottom-right, and the fourth to bottom-left.  Those corners of the cel
    imagery map to those four entries in the quad, no matter what values are
    given to the quad entries.

    This function expects that the CCB structure's width and height
    fields have been initialized by the FastMapCelInit() routine.

  Arguments

    ccb                          Pointer to the CCB structure
                                 whose delta fields are modified to map to
                                 the quad.

    quad                          Pointer to a four-entry array of
                                 point structures.

  Implementation

    Convenience call implemented in graphics.lib V21.

  Associated Files

    graphics.h, graphics.lib

  Caveats

    The FastMapCel routines are not compatible with the MapCel routine, and
    cannot be called interchangeably.  FastMapCel operates at a lower
    precision to the MapCel routine, and produces slightly different output.

  See Also

    FastMapCel(), FastMapCelInit(), MapCel()

##src/graphics/autodocs.c::gpg/graphics/fastmapcelf16##
FastMapCelf16 - Maps this cel onto any four corners.

  Synopsis

    void FastMapCelf16 (CCB *ccb,
			Point *quad)

  Description

    This convenience routine maps a cel onto the four points specified by the
    quad argument.  The mapping is created by setting the delta fields in the
    specified ccb argument.  The deltas will cause the cel to be rendered such
    that the four corners of the imagery map to the four corners.

    The quad argument points to an array of four-point structures.  In the
    normal configuration of the quad, the first entry refers to the top-left
    corner of the imagery, the second entry refers to top-right, the third to
    bottom-right, and the fourth to bottom-left.  Those corners of the cel
    imagery map to those four entries in the quad, no matter what values are
    given to the quad entries.

    This routine is different from MapCel() and FastMapCel() in that it
    expects the values in the quad structure to be frac16 values and not
    int32 values.

    This function expects that the CCB structure's width and height
    fields have been initialized by the FastMapCelInit() routine.

  Arguments

    ccb                          Pointer to the CCB structure
                                 whose delta fields are modified to map to
                                 the quad.

    quad                         Pointer to a four-entry array of
                                 Point structures.

  Implementation

    Convenience call implemented in graphics.lib V21.

  Associated Files

    graphics.h, graphics.lib

  Caveats

    The FastMapCel routines are not compatible with the MapCel routine, and
    cannot be called interchangeably.

  See Also

    FastMapCelInit(), FastMapCelf16(), MapCel()

##src/graphics/autodocs.c::gpg/graphics/fastmapcelinit##
FastMapCelInit - Initializes a CCB for FastMapCel use.

  Synopsis

    void FastMapCelInit (CCB *ccb)

  Description

    This convenience routine will initialize a CCB for use with MapCel.  This
    routine assumes that the ccb_Width and ccb_Height fields of the CCB are
    correct when the routine is called, and that the routine will replace the
    current values of the ccb_Width and ccb_Height fields.  If the ccb_Width
    and ccb_Height of the cel are both powers of two, then they will be
    replaced by the log(base 2) of their respective values.  If one or both of
    the fields are not a power of two, the ccb_Width will be replaced by
    (-0x10000/ccb_Width) and ccb_Height will be replaced by
    (0x10000/ccb_Height).

    Note:  This routine cannot be called multiple times for the same CCB.

  Arguments

    ccb                          Pointer to the CCB structure
                                 to bemodified.

  Implementation

    Convenience call implemented in graphics.lib V21.

  Associated Files

    graphics.h, graphics.lib

  Caveats

    The FastMapCel routines are not compatible with the MapCel routine, and
    cannot be called interchangeably.

    Since this routine modifies the ccb_Width and ccb_Height fields of the
    CCB, it cannot be called multiple times for the same CCB.

  See Also

    FastMapCel(), FastMapCelf16(), MapCel()

##src/graphics/autodocs.c::gpg/graphics/fillrect##
FillRect - Draws a filled rectangle.

  Synopsis

    Err FillRect (Item bitmapItem,
		  GrafCon *gc,
		  Rect *r)

  Description

    This function draws a rectangle to the display.

    The right and bottom edges of the rectangle are not drawn, to allow
    multiple rectangles to be rendered without unnecessary overstriking of the
    boundary pixels (cel engine emulation).

  Arguments

    bitmapItem                   The item number of the bitmap.

    gc                           Pointer to a GrafCon
                                 structure.

    r                            Pointer to a Rect structure that
                                 describes the rectangle to be rendered.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Notes

    This function will be changed to draw the entire rectangle,
    including the specified right and bottom edges.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    WritePixel()

##src/graphics/autodocs.c::gpg/graphics/getcurrentfont##
GetCurrentFont - Gets the pointer to the system's default font.

  Synopsis

    Font *GetCurrentFont (void)

  Description

    This function returns the pointer to the current font.

  Return Value

    The function returns a pointer to the current font.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    ResetCurrentFont()

##src/graphics/autodocs.c::gpg/graphics/getfirstdisplayinfo##
GetFirstDisplayInfo - Retrieve information about display modes
		      supported by the system.

  Synopsis

    DisplayInfo *GetFirstDisplayInfo (void)

  Description

    This routine returns a pointer to a DisplayInfo structure, which
    describes the characteristics of the display modes available to
    applications.

    The display characteristics are represented as an array of Tag
    arguments (to allow for future expansion).  You can search the
    array for the tag value representing the characteristic in which
    you're interested; the associated argument is the value of that
    characteristic.

    The DisplayInfo structure is a list node; you may traverse the
    list using the kernel list traversal routines (NEXTNODE(), et
    al).  Graphics may be supporting any number of display modes.

  Tag Arguments

    The tag values found in the DisplayInfo tag array are:

    DI_TYPE - int32
    	The type identifier of the display mode.  This would be the
    	value you would pass to CreateScreenGroup() as the argument
    	to the CSG_TAG_DISPLAYTYPE tag to create a Screen of that
    	type.

    	The currently defined (and ever-expanding) list of DI_TYPE
    	values are:

    	DI_TYPE_NTSC
    		Standard 320 * 240 display.

    	DI_TYPE_PAL1
    		"Narrow" PAL display (320 * 288).

    	DI_TYPE_PAL2
    		Normal ("Wide") PAL display (384 * 288).

    DI_WIDTH - int32
    	The width of this display mode, in pixels.

    DI_HEIGHT - int32
    	The height of this display mode, in pixels.

    DI_FIELDTIME - int32
    	Duration of a single field of video, in microseconds.

    DI_FIELDFREQ - int32
    	Number of fields of video per second.

    DI_ASPECT - frac16
    	Aspect ratio of this display mode's pixels.

    DI_ASPECTW - int32
    	Width component of this display mode's pixel aspect ratio.

    DI_HEIGHT - int32
    	Height component of this display mode's pixel aspect ratio.

    DI_NOINTERLACE - int32
    	Boolean value: non-zero if this display mode does not
    	support	interlaced video.

    DI_NOSTEREO - int32
    	Boolean value: non-zero if this display mode does not
    	support stereoscopic displays.

  Return Value

    Returns a pointer to the first DisplayInfo structure in the
    list.

  Notes

    This routine is most likely to be useful to individuals wishing
    to have "auto-sensing" applications that work on both continents
    (hint, hint...).

    Do not under any circumstances make assumptions about the layout
    of the tag argument array in the DisplayInfo structure.  You
    must perform explicit searches through the array for the
    information in which you're interested.

  Implementation

    Folio call implemented in graphics folio V22 (?).

  Associated Files

    graphics.h, graphics.lib

  See Also

    QueryGraphics(), QueryGraphicsList()

##src/graphics/autodocs.c::gpg/graphics/getpixeladdress##
GetPixelAddress - Gets a pointer to the pixel at the specified
                  coordinates.

  Synopsis

    void *GetPixelAddress (Item scrbitItem,
			   Coord x,
			   Coord y)

  Description

    This function returns a pointer to the pixel at the specified
    coordinates.

    The argument scrbitItem can refer to either a Screen Item or a
    Bitmap Item.  If scrbitItem is a Bitmap Item, the returned
    pointer is the address of the pixel in the Bitmap's buffer.  If
    scrbitItem is a Screen Item, the returned pointer is the address
    of the pixel in the buffer of the Bitmap associated with the
    Screen.

  Arguments

    screenItem                   Item number of the Screen or Bitmap
				 containing the pixel.

    x                            The column of the desired pixel
                                 address.

    y                            Row of the desired pixel address.

  Return Value

    The function returns a pointer to the pixel in the buffer of the
    relevant Bitmap, or NULL if an error occurs (such as specifying
    a pixel that lies outside the clip boundaries of the Bitmap).

  Notes

    Future display modes may cause this routine to return addresses
    of varying alignments.  Try not to assume too much about the
    characteristics of the memory to which the returned address
    points.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    ReadPixel()

##src/graphics/autodocs.c::gpg/graphics/getvblioreq##
GetVBLIOReq - Returns an I/O request for use with timer functions.

  Synopsis

    Item GetVBLIOReq (void)

  Description

    This function creates and returns an I/O request that is suitable for use
    with the WaitVBL() and WaitVBLDefer() functions.

  Return Value

    This function returns the item number of the I/O request or an error code
    (a negative value) if an error occurs.

  Implementation

    Convenience call implemented in graphics.lib V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    WaitVBL(), WaitVBLDefer(), DeleteItem()

##src/graphics/autodocs.c::gpg/graphics/getvramioreq##
GetVRAMIOReq - Returns an I/O request for use with SPORTtransfer
               functions.

  Synopsis

    Item GetVRAMIOReq (void)

  Description

    This function is a convenience call for SPORT device transfers.  This
    function creates and returns an I/O request that is suitable for use with
    the SPORT transfer functions.

  Return Value

    This function returns the item number of the I/O request or an error code
    (a negative value) if an error occurs.

  Implementation

    Convenience call implemented in graphics.lib V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    CloneVRAMPages(), SetVRAMPages(), SetVRAMPagesDefer(),
    CopyVRAMPagesDefer(), CloneVRAMPagesDefer(), CopyVRAMPages(), DeleteItem()

##src/graphics/autodocs.c::gpg/graphics/makeccbrelative##
MakeCCBRelative - Creates a CCB relative address.

  Synopsis

    int32 MakeCCBRelative (field, linkObject)

  Description

    This macro allows you to turn the absolute address of an object into the
    sort of relative address needed by the cel engine.  The first argument is
    a pointer to the field to receive the relative address, and the second
    argument is a pointer to the object to be referenced.  This macro does the
    math required to create a correct relative offset, which is not simply the
    difference between the two addresses.

    For instance, to create a relative pointer to a "next cel"  you
    would use these arguments:

    cel->ccb_NextPtr = (CCB *)CCB_Relative( &cel- >ccb_NextPtr,&NextCel );

    To make sure your cel indicates it has a relative pointer to the next cel,
    you might want to explicitly clear the control flag:

    ClearFlag(cel->ccb_Flags, CCB_NPABS );

    This macro is required because the cel engine uses pipelined prefetch
    techniques that keep the engine's internal addressing ahead of the
    internal logic that processes the addresses and data in the cel control
    block.

  Arguments

    field                        The address of the object that will
                                 receive the relative link to the other
                                 object.  The object can be the next CCB, cel
                                 data, or the PLUT.  This argument can be any
                                 value that can be coerced to an int32.

    linkObject                   The address to the object that will
                                 be linked.  The object can be the next CCB,
                                 cel data, or the PLUT.  This argument can be
                                 any value that can be coerced to an int32.

  Return Value

    The function returns an int32 value that is the relative offset between
    the two addresses corrected (offset) as required by the cel engine.

  Implementation

    Macro implemented in graphics.h V20.

  Associated File

    graphics.h

##src/graphics/autodocs.c::gpg/graphics/makeclutbackgroundentry##
MakeCLUTBackgroundEntry - Constructs a color entry to set the background
                          color of the display.

  Synopsis

    VDLEntry MakeCLUTBackgroundEntry (uint8 r,
				      uint8 g,
				      uint8 b)

  Description

    This macro constructs a VDL color entry that sets the background
    color of the display according to the specified RGB components.

  Arguments

    r                            An unsigned byte specifying the red
                                 component of the color to be built, with a
                                 value in the range of 0-255.

    g                            An unsigned byte specifying the green
                                 component of the color to be built, with a
                                 value in the range of 0-255.

    b                            An unsigned byte specifying the blue
                                 component of the color to be built, with a
                                 value in the range of 0-255.

  Return Value

    The macro returns a 32-bit color entry value.

  Implementation

    Macro implemented in graphics.h V20.

  Associated File

    graphics.h

  See Also

    SetScreenColor(), MakeCLUTGreenEntry(), MakeCLUTBlueEntry(),
    MakeCLUTRedEntry(), MakeCLUTColorEntry()

##src/graphics/autodocs.c::gpg/graphics/makeclutblueentry##
MakeCLUTBlueEntry - Packs a color index and blue values into a single
                    word.

  Synopsis

    VDLEntry MakeCLUTBlueEntry (uint8 index,
				uint8 b)

  Description

    This macro takes a blue color-specification argument and packs it into a
    single 32-bit word.  The color-entry word generated by MakeCLUTBlueEntry()
    is suitable for  passing to functions such as SetScreenColor() that
    expect this kind of argument.

  Arguments

    index                        An unsigned byte specifying an index
                                 into a color palette, with a value in the
                                 range of 0-31 for normal colors and 32 for
                                 the background color.

    b                            An unsigned byte specifying the blue
                                 component of the color to be built, with a
                                 value in the range of 0-255.

  Return Value

    The macro returns a 32-bit color entry value.

  Implementation

    Macro implemented in graphics.h V20.

  Associated File

    graphics.h

  See Also

    SetScreenColor(), MakeCLUTColorEntry(), MakeCLUTGreenEntry(),
    MakeCLUTRedEntry()

##src/graphics/autodocs.c::gpg/graphics/makeclutcolorentry##
MakeCLUTColorEntry - Packs a color index and red, green, and blue values
                     into a single word.

  Synopsis

    VDLEntry MakeCLUTColorEntry (uint8 index,
				 uint8 r,
				 uint8 g,
				 uint8 b)

  Description

    This macro takes four color-specification arguments and packs them
    together into a single 32-bit word.  The color-entry word generated by
    MakeCLUTColorEntry() is suitable for passing to functions such as
    SetScreenColor() that expect this kind of argument.

  Arguments

    index                        An unsigned byte specifying an index
                                 into a color palette, with a value in the
                                 range of 0-31 for normal colors and 32 for
                                 the background color.

    r                            An unsigned byte specifying the red
                                 component of the color to be built, with a
                                 value in the range of 0-255.

    g                            An unsigned byte specifying the green
                                 component of the color to be built, with a
                                 value in the range of 0-255.

    b                            An unsigned byte specifying the blue
                                 component of the color to be built, with a
                                 value in the range of 0-255.

  Return Value

    The macro returns a 32-bit color entry value.

  Implementation

    Macro implemented in graphics.h V20.

  Associated File

    graphics.h

  See Also

    SetScreenColor(), MakeCLUTGreenEntry(), MakeCLUTBlueEntry(),
    MakeCLUTRedEntry()

##src/graphics/autodocs.c::gpg/graphics/makeclutgreenentry##
MakeCLUTGreenEntry - Packs a color index and green values into a single
                     word.

  Synopsis

    VDLEntry MakeCLUTGreenEntry (uint8 index,
				 uint8 g)

  Description

    This macro takes a green color-specification argument and packs it into a
    single 32-bit word.  The color-entry word generated by
    MakeCLUTGreenEntry() is suitable for passing to functions such as
    SetScreenColor() that expect this kind of argument.

  Arguments

    index                        An unsigned byte specifying an index
                                 into a color palette, with a value in the
                                 range of 0-31 for normal colors and 32 for
                                 the background color.

    g                            An unsigned byte specifying the green
                                 component of the color to be built, with a
                                 value in the range of 0-255.

  Return Value

    The macro returns a 32-bit color entry value.

  Implementation

    Macro implemented in graphics.h V20.

  Associated File

    graphics.h

  See Also

    SetScreenColor(), MakeCLUTColorEntry(), MakeCLUTRedEntry(),
    MakeCLUTBlueEntry()

##src/graphics/autodocs.c::gpg/graphics/makeclutredentry##
MakeCLUTRedEntry - Packs a color index and red values into a single word.

  Synopsis

    VDLEntry MakeCLUTRedEntry (uint8 index,
			       uint8 r)

  Description

    This macro takes a red color-specification argument and packs it into a
    single 32-bit word.  The color-entry word generated by MakeCLUTRedEntry()
    is suitable for passing to functions such as SetScreenColor() that expect
    this kind of argument.

  Arguments

    index                        An unsigned byte specifying an index
                                 into a color palette, with a value in the
                                 range of 0-31 for normal colors and 32 for
                                 the background color.

    r                            An unsigned byte specifying the red
                                 component of the color to be built, with a
                                 value in the range of 0-255.

  Return Value

    The macro returns a 32-bit color entry value.

  Implementation

    Macro implemented in graphics.h V20.

  Associated File

    graphics.h

  See Also

    SetScreenColor(), MakeCLUTColorEntry(), MakeCLUTGreenEntry(),
    MakeCLUTBlueEntry()

##src/graphics/autodocs.c::gpg/graphics/makergb15##
MakeRGB15 - Creates a 3DO RGB value out of separate red, green, and blue
            values.

  Synopsis

    uint32 MakeRGB15 (r, g, b)

  Description

    This macro creates a 3DO RGB value out of separate red, green,  and blue
    values.  The composite RGB value created by this macro is suitable for
    writing to a bitmap, a CCB's PLUT, or anywhere else that the default
    RGB data type is called for.

  Arguments

    r                            The red value to be included in the
                                 RGB composite.  This can be any integer
                                 value; the value is coerced by the macro to
                                 a uint32 value.

    g                            The green value to be included in the
                                 RGB composite.  This can be any integer
                                 value; the value is coerced by the macro to
                                 a uint32 value.

    b                            The blue value to be included in the
                                 RGB composite.  This can be any integer
                                 value; the value is coerced by the macro to
                                 a uint32 value.

    r, g, and b must all be in the range 0-31.

  Return Value

    The macro returns a composite RGB value.

  Implementation

    Macro implemented in graphics.h V20.

  Associated File

    graphics.h

  See Also

    MakeRGB15Pair()

##src/graphics/autodocs.c::gpg/graphics/makergb15pair##
MakeRGB15Pair - Creates a double 3DO RGB value out of separate red, green,
                and blue values.

  Synopsis

    uint32 MakeRGB15Pair (r, g, b)

  Description

    This macro creates a double 15-bit 3DO RGB value out of separate red,
    green, and blue values.  The "double" part of the value comes from
    creating a 16-bit value and then merging it with a copy of itself shifted
    over 16 bits.  The composite double RGB value created by this macro is
    suitable to be used as an argument toSetVRAMPages(), or anywhere else that
    the double RGB data type is called for.

  Arguments

    r                            The red value to be included in the
                                 RGB composite.  This can be any integer
                                 value; the value is coerced by the macro to
                                 a uint32 value.

    g                            The green value to be included in the
                                 RGB composite.  This can be any integer
                                 value; the value is coerced by the macro to
                                 a uint32 value.

    b                            The blue value to be included in the
                                 RGB composite.  This can be any integer
                                 value; the value is coerced by the macro to
                                 a uint32 value.

    r, g, and b must all be in the range 0-31.

  Return Value

    The macro returns a composite-double RGB15 value.

  Implementation

    Macro implemented in graphics.h V20.

  Associated File

    graphics.h

  See Also

    MakeRGB15()

##src/graphics/autodocs.c::gpg/graphics/mapcel##
MapCel - Maps this cel onto any four corners.

  Synopsis

    void MapCel (CCB *ccb,
		 Point *quad)

  Description

    This function maps a cel onto the four points specified by the quad
    argument.  The mapping is created by setting the delta fields in the
    specified ccb argument.  The deltas will cause the cel to be rendered such
    that the four corners of the imagery map to the four corners.

    The quad argument points to an array of four-point structures.  In the
    normal configuration of the quad, the first entry refers to the top-left
    corner of the imagery, the second entry refers to top-right, the third to
    bottom-right, and the fourth to bottom-left.  Those corners of the cel
    imagery map to those four entries in the quad, no matter what values are
    given to the quad entries.

    This function expects that the CCB structure's width and height
    fields have valid values (the width and height fields are add-ons that
    aren't required by the cel engine hardware.)

  Arguments

    ccb                          Pointer to the CCB structure
                                 whose delta fields are modified to map to
                                 the quad.

    quad                         Pointer to a four-entry array of
                                 point structures.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    FastMapCel(), FastMapCelf16(), FastMapCelInit()

##src/graphics/autodocs.c::gpg/graphics/modifyvdl##
ModifyVDL - Changes one or more attributes of a VDL.

  Synopsis

    Err ModifyVDL (Item vdlItem,
		   TagArg *vdlTags)

    Err ModifyVDLVA (Item vdlItem,
		     uint32 vdlTags, ...)

  Description

    This function is used to change one or more attributes of a VDL.  When
    executed, it looks through each entry of the VDL for opcodes, and then
    changes the specified attributes in each opcode (if they need changing).
    This means that ModifyVDL() affects the entire VDL, regardless of its
    type.  It works equally well on simple VDLs and custom VDLs.

    This is a preliminary implementation of ModifyVDL().  Future
    implementations will include the ability to modify individual VDL entries.

  Arguments

    vdlItem                      Item number of the VDL to be
                                 modified.

    vdlTags                      Pointer to the array of TagArgs used
                                 to specify the modifications to the VDL.

    These are the values of the possible tags and their effects.  The effects
    are described in the "Graphic Programmer's Guide."

  Return Value

    The function returns a zero if successful or an error code (a negative
    value) if an error occurs.

  Implementation

    Folio call implemented in graphics folio V21.

  Associated Files

    graphics.h, graphics.lib

  See Also

    SubmitVDL(), SetVDL(), DeleteVDL()

##src/graphics/autodocs.c::gpg/graphics/moveto##
MoveTo - Moves the pen position of a GrafCon to a new location.

  Synopsis

    void MoveTo (GrafCon *gc,
		 Coord x,
		 Coord y)

  Description

    This function moves the GrafCon's pen position to a new location.
    After this move, functions such as DrawTo() and CopyRect() will use this
    pen position to do their work.

  Arguments

    gc                           Pointer to a GrafCon
                                 structure.

    x                            Column to which to move the pen.

    y                            Row to which to move the pen.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DrawTo()

##src/graphics/autodocs.c::gpg/graphics/opengraphicsfolio##
OpenGraphicsFolio - Opens the graphics folio for use by the calling task.

  Synopsis

    Err OpenGraphicsFolio (void)

  Description

    This function issues an OpenItem() call to open the graphics folio for
    use by the calling task.  If the graphics folio is successfully opened,
    this function sets the global variable GrafFolioNum to the item number of
    the graphics folio item.  It also sets the global variable GrafBase to the
    pointer to the graphics folio's GrafFolio structure.  GrafBase must be
    properly initialized before calling any of the graphics folio functions.

    This function is a convenience call that is provided in the graphics.lib,
    and is not part of the graphics folio.

    After the graphics folio is opened, the task may use any of the other
    graphics folio functions.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Convenience call implemented in graphics.lib V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    CloseGraphicsFolio()

##src/graphics/autodocs.c::gpg/graphics/querygraphics##
QueryGraphics - Gets graphics environment information.

  Synopsis

    Err QueryGraphics (int32 tag,
		       void *ret)

  Description

    QueryGraphics looks up a value in the environment based on the passed-in
    tag and deposits that value in the address pointed to by ret.

  Tag Arguments

    The currently available tags and their return values follow:

    * QUERYGRAF_TAG_END - No return value.

    * QUERYGRAF_TAG_FIELDFREQ - int32 - Returns the display field
      frequency (in Hz) of the current environment. The return value is 60 for
      NTSC and 50 for PAL.

    * QUERYGRAF_TAG_FIELDTIME - int32 - Returns the length of time for a
      single video display in usec.

    * QUERYGRAF_TAG_FIELDCOUNT - uint32 - Returns a number that is incremented
      every vblank period.

    * QUERYGRAF_TAG_DEFAULTWIDTH - int32 - Returns the default display width
      for the current hardware.  The return value will be 320 on every machine
      that is capable of generating a 320-pixel-wide display.  This may not
      be the preferred width for that environment (PAL for instance).

    * QUERYGRAF_TAG_DEFAULTHEIGHT - int32 - Returns the default display height
      for the current hardware.  The return value will be 240 on
      every machine that is capable of generating a 240-line-tall display.  This
      may not be the preferred height for that environment (PAL for instance).

    * QUERYGRAF_TAG_DEFAULTDISPLAYTYPE - int32 - Returns the default display type
      in this environment.  DI_TYPE_NTSC will be returned on current NTSC
      machines.  DI_TYPE_PAL1 will be returned on current PAL machines.

  Arguments

    tag                          tag number indicating information
                                 requested.

    ret                          pointer to the location in memory to
                                 deposit the requested value.

  Return Value

    The function returns 0 if it was successful or an error code (a negative
    value) if an error occurred.

    GRAFERR_BADTAG will be returned if an unknown tag is passed in.

  Implementation

    Folio call implemented in graphics folio V21.

  Associated Files

    graphics.h, graphics.lib

  See Also

    QueryGraphicsList()

##src/graphics/autodocs.c::gpg/graphics/querygraphicslist##
QueryGraphicsList - Gets graphics environment information.

  Synopsis

    Err QueryGraphicsList (TagArg *ta)

    Err QueryGraphicsListVA (uint32 ta, ...)

  Description

    The function looks up values in the environment based on passed in the
    ta_Tag elements of the TagArg array, and deposits those values in the
    addresses pointed to by the ta_Arg associated values.

    The currently available tags and their return values follow:

    * QUERYGRAF_TAG_END - No return value. Ends processing of the tag list.

    * QUERYGRAF_TAG_FIELDFREQ - int32 - Returns the display field frequency (in
      Hz) of the current environment.  The return value is 60 for NTSC and 50
      for PAL.QUERYGRAF_TAG_FIELDTIME  int32  Returns the length of time for a
      single video display in nsec.

    * QUERYGRAF_TAG_FIELDCOUNT - uint32 - Returns a number that is
      incremented every vblank period.

    * QUERYGRAF_TAG_DEFAULTWIDTH - int32 - Returns the default display width for
      the current hardware.  The return value will be 320 on every machine that
      is capable of generating a 320-pixel-wide display.  This may not be the
      preferred width for that environment (PAL for instance).

    * QUERYGRAF_TAG_DEFAULTHEIGHT - int32 - Returns the default display height for
      the current hardware.  The return value will be 240 on every machine that
      is capable of generating a 240-line-tall display.  This may not be the
      preferred height for that environment (PAL for instance).

    * QUERYGRAF_TAG_DEFAULTDISPLAYTYPE - int32 - Returns the default display type
      in this environment.  DI_TYPE_NTSC will be returned on current NTSC
      machines.  DI_TYPE_PAL1 will be returned on current PAL machines.

  Arguments

    tag                          tag number indicating information
                                 requested

    ret                          pointer to the location in memory to
                                 deposit the requested value.

  Return Value

    The function returns 0 if it was successful or an error code (a negative
    value) if an error occurred.

    GRAFERR_BADTAG will be returned if an unknown tag is passed in.

  Implementation

    Folio call implemented in graphics folio V21.

  Associated Files

    graphics.h, graphics.lib

  See Also

    QueryGraphics()

##src/graphics/autodocs.c::gpg/graphics/readpixel##
ReadPixel - Reads a pixel from the display currently associated with a
            GrafCon.

  Synopsis

    Color ReadPixel (Item bitmapItem,
		     GrafCon *gc,
		     Coord x,
		     Coord y)

  Description

    This function reads a pixel from the display of the specified GrafCon.
    The x and y coordinates specify the offset into the pixmap of the
    GrafCon's bitmap.  The value of the pixel there is read and returned
    to the caller.

  Arguments

    bitmapItem                   The item number of the bitmap.

    gc                           Pointer to a GrafCon structure.

    x                            column of the pixel to be read.

    y                            Row of the pixel to be read.

  Return Value

    This function returns the pixel value at the specified location or an
    error code (a negative value) if an error occurs.

    GRAFERR_COORDRANGE is returned if the specified location is outside the
    bounds of the specified bitmap.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    GetPixelAddress()

##src/graphics/autodocs.c::gpg/graphics/removescreengroup##
RemoveScreenGroup - Removes a screen group from the display.

  Synopsis

    Err RemoveScreenGroup (Item screenGroup)

  Description

    The function removes the specified screenGroup from the graphics
    folio's display mechanism.  After this call, none of the screens of
    the group can be made visible.

    If one of the screens of the group is visible when this call is made, the
    screen is removed from the display.

  Arguments

    screenGroup                  Item number of the ScreenGroup to be
                                 removed.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    AddScreenGroup()

##src/graphics/autodocs.c::gpg/graphics/resetcurrentfont##
ResetCurrentFont - Resets the system's default font.

  Synopsis

    Err ResetCurrentFont (void)

  Description

    This function resets the system font to the default font.  It is
    suggested that you call ResetCurrentFont() at the start of the program
    run, if you are using any of the font functions.  You must call
    ResetCurrentFont() when your program exits if you changed the system font
    in your program.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    GetCurrentFont()

##src/graphics/autodocs.c::gpg/graphics/resetreadaddress##
ResetReadAddress - Resets a bitmap's read address.

  Synopsis

    Err ResetReadAddress (Item bitmapItem)

  Description

    This function resets the read pointer to the bitmap to be the same as the
    write pointer, which is the default setting.

  Arguments

    bitmapItem                   Item number of the bitmap structure
                                 whose read address is to be reset.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    SetReadAddress()

##src/graphics/autodocs.c::gpg/graphics/resetscreencolors##
ResetScreenColors - Resets a screen's colors to a linear palette.

  Synopsis

    Err ResetScreenColors (Item screenItem)

  Description

    The function resets the colors of the specified screen.  The colors are
    set to a linear ascending palette.

  Arguments

    screenItem                   Item number of the screen structure
                                 whose palette is to be reset.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

##src/graphics/autodocs.c::gpg/graphics/setbgpen##
SetBGPen - Sets the background pen of a GrafCon.

  Synopsis

    void SetBGPen (GrafCon *gc,
		   Color c)

  Description

    This function sets the background pen of the specified GrafCon to the
    specified color.  The color value is a coded 15-bit RGB format value, with
    each 5-bit value acting as an index into the CLUT color registers.  After
    this call, the surrounding white space of text (and other graphics
    elements that use the background pen) will be rendered in the new
    background color.

    Note that the color values produced here are different from the color
    values produced by MakeCLUTColorEntry().  Here is an example showing how
    to create a color value:

    color = (red << 10) || (green << 5) || (blue << 0);

    Or you could use Use MakeRGB15().

  Arguments

    gc                           Pointer to a GrafCon
                                 structure.

    c                            Value to be stored as the new
                                 background pen color.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    MakeRGB15(), SetFGPen()

##src/graphics/autodocs.c::gpg/graphics/setcecontrol##
SetCEControl - Sets the cel engine control word.

  Synopsis

    Err SetCEControl (Item bitmapItem,
		      int32 controlWord,
		      int32 controlMask)

  Description

    This function sets the cel engine control word of the bitmap specified by
    the bitmapItem argument.  After this call, the newly modified control word
    will be used whenever the bitmap is used for cel rendering.  The control
    mask argument (controlMask) controls those bits of the bitmap's
    control word that will be modified by a call to SetCEControl().

  Arguments

    bitmapItem                   Item number of a bitmap structure.

    controlWord                  Value for the new control word for
                                 the bitmap.

    controlMask                  Bit mask that controls whether the
                                 corresponding bit in controlWord will be
                                 transferred to the CEControl word.  If the
                                 controlMask bit is set, the corresponding
                                 bit in controlWord is transferred to the
                                 CEControl word; if the controlMask bit is
                                 clear, the corresponding bit in controlWord
                                 is ignored.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DrawCels(), DrawScreenCels()

##src/graphics/autodocs.c::gpg/graphics/setcewatchdog##
SetCEWatchDog - Sets the length of time the cel engine can do one draw.

  Synopsis

    Err SetCEWatchDog (Item bitmapItem,
		       int32 db_ctr)

  Description

    This function controls how long DrawCels() lets the cel engine do one
    draw before it is killed.  The delay interval is expressed in
    microseconds.  Its intent is to give you a way to abort cel engine
    lock-ups (which might be caused by bad data, a linked list that is a loop,
    or other problems.)

    Currently, the default counter is 1,000,000 microseconds (1 second).

  Arguments

    bitmapItem                   Item number of a bitmap structure.

    db_ctr                       Value for the draw counter, in
                                 microseconds.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

    GRAFERR_BADDEADBOLT will be returned if an illegal value is specified.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DrawCels(), DrawScreenCels()

##src/graphics/autodocs.c::gpg/graphics/setclipheight##
SetClipHeight - Sets the clip height of a bitmap.

  Synopsis

    Err SetClipHeight (Item bitmapItem,
		       int32 clipHeight)

  Description

    This function uses the clipHeight argument to set the clip height of the
    bitmap specified by the bitmapItem argument.  The clipHeight must be no
    greater than the height of the bitmap's buffer.

    After setting the clip width and height, rendering to the bitmap (both
    with the rendering primitives and with calls to the cel engine) will be
    clipped to stay within the clip rectangle.

  Arguments

    bitmapItem                   Item number of a bitmap structure.

    clipHeight                   Value for the new clip height for the
                                 bitmap.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    SetClipWidth(), SetClipOrigin()

##src/graphics/autodocs.c::gpg/graphics/setcliporigin##
SetClipOrigin - Sets the clip origin of a bitmap.

  Synopsis

    Err SetClipOrigin (Item bitmapItem,
		       int32 x,
		       int32 y)

  Description

    This function sets the clip origin of a bitmap.  You specify the item
    number of a bitmap and the x and y coordinates that specify the top-left
    corner of the clip rectangle within the bitmap.

    Note that the (0,0) coordinate always refers to the top-left corner of the
    clip window, regardless of whether the clip window is set to the full size
    of the bitmap or to some subregion of the bitmap.  The clip rectangle that
    you specify must fit within the parameters of the bitmap; that is, the
    clip x offset plus the clip window width must not exceed the actual width
    of the bitmap.  The same is true for the height, or y, offset.  The order
    of operations setting width/height first or setting origin first is
    significant.

    If the read address is the same as the write address (this is normal),
    then the read buffer address is modified the same as the write buffer
    address (this is what you would expect).  But, if you have used
    SetReadAddress() to set the read address to something other than the write
    buffer, then the read address is not disturbed by the call to
    SetClipOrigin().

  Arguments

    bitmapItem                   Item number of a bitmap structure.

    x                            Value for the top left corner x
                                 coordinate.

    y                            Value for the top left corner y
                                 coordinate  (At this time, if the y argument
                                 is an odd number, it is forced to the next
                                 numerically lower even number, and a warning
                                 is returned.)

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    SetClipWidth()

##src/graphics/autodocs.c::gpg/graphics/setclipwidth##
SetClipWidth - Sets the clip width of a bitmap.

  Synopsis

    Err SetClipWidth (Item bitmapItem,
		      int32 clipWidth)

  Description

    This function uses the clipWidth argument to set the clip width of the
    bitmap specified by the bitmapItem argument.  The clipWidth must be no
    greater than the width of the bitmap's buffer.

    After setting the clip width and height, rendering to the bitmap (both
    with the rendering primitives and with calls to the cel engine) will be
    clipped to stay within the clip rectangle.

  Arguments

    bitmapItem                   Item number of a bitmap structure.

    clipWidth                    Value for the new clip width for the
                                 bitmap.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    SetClipWidth(), SetClipOrigin()

##src/graphics/autodocs.c::gpg/graphics/setcurrentfontccb##
SetCurrentFontCCB - Sets the font.

  Synopsis

    Err SetCurrentFontCCB (CCB *ccb)

  Description

    This function sets the CCB for the current font.  If you want to modify
    the CCB of the current font, you need to do the following:

    * call GetCurrentFont()

    * copy the CCB pointed to by the font structure

    * edit your copy of the CCB

    * then call SetCurrentFontCCB()

    When you submit a CCB, the ccb_PLUTPtr field should either be significant
    or set to NULL.  The font flag, FONT_VERTICAL, determines whether
    characters are printed vertically (top to bottom) or horizontally (left to
    right).  If the flag is set, the characters are printed vertically.

  Arguments

    ccb                          Pointer to the CCB.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    GetCurrentFont()

##src/graphics/autodocs.c::gpg/graphics/setfgpen##
SetFGPen - Sets the foreground pen of a GrafCon.

  Synopsis

    void SetFGPen (GrafCon *gc,
		   Color c)

  Description

    This function sets the foreground pen of the specified GrafCon to the
    specified color.  The color value is a coded 15-bit RGB format value, with
    each 5-bit value acting as an index into the CLUT color registers.  After
    this call, the imagery part of text (and other graphics elements that use
    the foreground pen, which include line drawing, rectangle and ellipse
    rendering) will be rendered in the new foreground color.

    Note that the color values produced here are different from the color
    values produced by MakeCLUTColorEntry().  The example shows how to create
    a color value:

    color = (red << 10) || (green << 5) || (blue << 0);

    Or you could use MakeRGB15();

  Arguments

    gc                           Pointer to a GrafCon
                                 structure.

    c                            Value to be stored as the new
                                 foreground pen color.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    MakeRGB15(), SetBGPen()

##src/graphics/autodocs.c::gpg/graphics/setreadaddress##
SetReadAddress - Sets a bitmap's read address.

  Synopsis

    Err SetReadAddress (Item bitmapItem,
			ubyte *buffer,
			int32 width)

  Description

    This function sets the read pointer to the bitmap to the specified
    buffer, which  has the specified pixel width.  After this call, the
    specified buffer would be used when cel renderings take place that include
    reading from a source buffer before writing to the destination buffer.

  Arguments

    bitmapItem                   Item number of the bitmap
                                 structure whose read address is to be set.

    buffer                       Pointer to the data buffer to be used
                                 as the read buffer.

    width                        Pixel count of the width of the
                                 buffer.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    ResetReadAddress()

##src/graphics/autodocs.c::gpg/graphics/setscreencolor##
SetScreenColor - Sets a color in the system's palette.

  Synopsis

    Err SetScreenColor (Item screenItem,
			int32 colorEntry)

  Description

    This function sets a color in the palette of the screen specified by the
    screenItem argument.  The colorEntry argument is a packed color value
    containing an index and individual red, green, and blue components.

    Each of the four components in the colorEntry argument consists of one
    byte of the 4-byte word.  The index is the high-order byte, followed by
    bytes of red, green, and blue, with the blue value in the low-order byte.
    The colorEntry argument can be constructed using the MakeCLUTColorEntry()
     macro.

  Arguments

    screenItem                   Item number of a screen structure.

    colorEntry                   32-bit color entry comprising an
                                 index, a red, a green, and a blue value.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

    GRAFERR_INDEXRANGE will be returned if the index value in the color entry
    is larger than 32.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    MakeCLUTColorEntry(), ReadCLUTColor()

##src/graphics/autodocs.c::gpg/graphics/setscreencolors##
SetScreenColors - Sets a number of colors in the system's palette.

  Synopsis

    Err SetScreenColors (Item screenItem,
			 uint32 *entries,
			 int32 count)

  Description

    This function sets a number of colors in the palette of the screen
    specified by the screenItem argument.  The entries argument points to an
    array of packed color values, each containing an index and individual red,
    green, and blue components.  The number of entries is specified by the
    count argument.

    Each of the four components in each entry's argument consists of one
    byte of the 4-byte word.  The index is the high-order byte, followed by
    bytes of red, green, and blue, with the blue value in the low-order byte.
    The entries argument can be constructed using the MakeCLUTColorEntry()
     macro.

  Arguments

    screenItem                   Item number of a screen
                                 structure.

    entries                      Pointer to an array of 32-bit color
                                 entries, each of which comprises an index, a
                                 red, a green, and a blue value.

    count                        Number of entries in the color array.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

    GRAFERR_INDEXRANGE will be returned if one or more color entries has an
    index value greater than 32.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    MakeCLUTColorEntry()

##src/graphics/autodocs.c::gpg/graphics/setvdl##
SetVDL - Sets a screen to display a specific VDL.

  Synopsis

    Err SetVDL (Item screenItem,
		Item vdlItem)

  Description

    This function associates the VDL specified by the vdlItem argument with
    the screen specified by the screenItem argument.

    Every screen has an associated VDL.  After this call, when DisplayScreen()
     is called referring to the specified screen the new VDL will be used to
    create the display.

  Arguments

    screenItem                   Item number of a screen structure.

    vdlItem                      Item number of the associated VDL.

  Return Value

    This function returns the item number of the current VDL (the last one
    submitted) or an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    DisplayScreen(), SubmitVDL(), ModifyVDL(), DeleteVDL()

##src/graphics/autodocs.c::gpg/graphics/setvrampages##
SetVRAMPages - Sets contiguous pages of VRAM to a specified value.

  Synopsis

    Err SetVRAMPages (Item ioreq,
		      void *dest,
		      int32 value,
		      int32 numpages,
		      int32 mask)

  Description

    This convenience routine allows one or more pages of VRAM, referred to by
    the dest argument, to be set to the specified value.  The number of VRAM
    pages set is controlled by the numPages argument.  Pages can be set to any
    value, via the immediate Flashwrite mode in the VRAM.  As expected, it is
    very fast.

    This function uses the SPORT device to do the transfer.  It takes effect
    immediately; there is no implicit wait for the next VBlank to occur.

  Arguments

    ioreq                        Item number of the I/O request.

    dest                         Pointer to the first byte of
                                 the first page of the destination VRAM.

    value                        32-bit value that is to be written to
                                 the VRAM pages.

    numpages                     Number of destination pages to
                                 receive the copy of the source page.

    mask                         Write mask, which controls which bits
                                 of the source get copied to the destination.

  Return Value

    The function returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Notes

    The use of a mask value of other than all ones (0xFFFFFFFF) is
    discouraged.  Future systems may be unable to support this
    feature in a performance-conscious manner.

  Implementation

    Convenience call implemented in graphics.lib V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    CloneVRAMPages(), CopyVRAMPages(), SetVRAMPagesDefer(),
    CopyVRAMPagesDefer(), CloneVRAMPagesDefer(), GetVRAMIOReq()

##src/graphics/autodocs.c::gpg/graphics/setvrampagesdefer##
SetVRAMPagesDefer - Sets contiguous pages of VRAM to a specified value.

  Synopsis

    Err SetVRAMPagesDefer (Item ioreq,
			   void *dest,
			   int32 val,
			   int32 numpages,
			   int32 mask)

  Description

    This function allows one or more pages of VRAM, referred to by the dest
    argument, to be set to the specified value.  The number of VRAM pages set
    is controlled by the numPages argument.  Pages can be set to any value,
    via the immediate Flashwrite mode of the VRAM.  As expected, it is very
    fast.  SetVRAMPagesDefer() does not issue a WaitIO() on the I/O request.
    It is up to the calling task to issue the WaitIO() at some time before the
    I/O request can be reused.

    This function uses the SPORT device to do the transfer.  It takes effect
    immediately; there is no implicit wait for the next VBlank to occur.

  Arguments

    ioreq                        Item number of the I/O request.

    dest                         Pointer to the first byte of
                                 the first page of the destination VRAM.

    val                          32-bit value that is to be written to
                                 the VRAM pages.

    numpages                     Number of destination pages to
                                 receive the copy of the source page.

    mask                         Write mask, which controls which bits
                                 of the source get copied to the destination.

  Return Value

    The function returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Notes

    The use of a mask value of other than all ones (0xFFFFFFFF) is
    discouraged.  Future systems may be unable to support this
    feature in a performance-conscious manner.

  Implementation

    Convenience call implemented in graphics.lib V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    CloneVRAMPages(), CopyVRAMPages(), SetVRAMPages(), CopyVRAMPagesDefer(),
    CloneVRAMPagesDefer(), GetVRAMIOReq()

##src/graphics/autodocs.c::gpg/graphics/submitvdl##
SubmitVDL - Submits a VDL for approval by the system.

  Synopsis

    Item SubmitVDL (VDLEntry *VDLDataPtr,
		    int32 length,
		    int32 type)

  Description

    This function accepts an absolute VDL specified by the VDLDataPtr
    argument and proofs it for use in the system.  As part of the approval
    process the VDL is copied into system data space and therefore can't
    be directly modified by the application after the call to SubmitVDL().

  Arguments

    VDLDataPtr                   Pointer to the VDL to be approved by
                                 the system.

    length                       The total length of the VDL in words.

    type                         The type of the VDL being submitted
                                 (currently, only VDLTYPE_FULL is
				 accepted).

  Return Value

    This function returns an item number for the VDL or an error code (a
    negative value) if an error occurs.

    GRAFERR_PROOF_ERR is returned if the VDL is rejected due to illegal
    opcodes, bad headers, bad pointers, or illegal control values.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

  Caveats

    Under certain circumstances, the system VDL that is created may need to
    occupy more memory than the VDL list passed in.  This can be caused by
    alignment constraints in the hardware.  One way to avoid the problem is to
    pad every line in the input VDL list to a multiple of four words (but
    without increasing the length count in the DMA control word).

  Bugs

    "Performance-conscious" is not a phrase I would use to describe
    this routine...

  See Also

    DisplayScreen(), ModifyVDL(), SetVDL(), DeleteVDL()

##src/graphics/autodocs.c::gpg/graphics/waitvbl##
WaitVBL - Waits the specified number of VBLs.

  Synopsis

    Err WaitVBL (Item ioreq,
		 uint32 numfields)

  Description

    This function is a convenience call that is actually not part of the
    graphics folio.  It is included here because it resides in the
    graphics.lib for the moment.  It actually uses the timer device, which is
    completely independent of the graphics folio.

    This function allows the task to wait the specified number of VBLs.  The
    I/O Request argument is set up to use the timer device.  The numfields
    argument is a count of the number of video fields to wait for.

  Arguments

    ioreq                        The item number of the I/O request.

    numfields                    Number of VBLs to wait.

  Return Value

    The function returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Caveats

    Because of the multitasking nature of the system, your task may
    not regain control until later than you may want.

  Implementation

    Convenience call implemented in graphics.lib V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    WaitVBLDefer(), GetVBLIOReq()

##src/graphics/autodocs.c::gpg/graphics/waitvbldefer##
WaitVBLDefer - Waits the specified number of VBLs.

  Synopsis

    Err WaitVBLDefer (Item ioreq,
		      uint32 numfields)

  Description

    This function is a convenience call that is actually not part of the
    graphics folio.  It is included here because it resides in the
    graphics.lib for the moment.  It actually uses the timer device, which is
    completely independent of the graphics folio.

    This function allows the task to wait the specified number of VBLs.  The
    I/O request argument is set up to use the timer device.  The numfields
    argument is a count of the number of video fields to wait for.

    This function differs from WaitVBL() as it does not wait for the
    operation to complete.  Instead, control returns to the calling
    application immediately, which can do more work while the I/O request is
    in the queue.  When using the deferred version of the request, WaitIO()
    should be used when you want to wait for the completion of the I/O
    request.

  Arguments

    ioreq                        The item number of the I/O request.

    numfields                    Number of VBLs to wait.

  Return Value

    The function returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    Convenience call implemented in graphics.lib V20.

  Associated Files

    graphics.h, graphics.lib

  See Also

    WaitVBL(), GetVBLIOReq()

##src/graphics/autodocs.c::gpg/graphics/writepixel##
WritePixel - Writes a pixel to a bitmap in a GrafCon's foreground
             color.

  Synopsis

    Err WritePixel (Item bitmapItem,
		    GrafCon *gc,
		    Coord x,
		    Coord y)

  Description

    This function writes a pixel to the specified bitmap's display.  The
    pixel is rendered in the foreground color of the GrafCon structure.  It is
    rendered on the column and row specified by the x and y arguments
    respectively.

  Arguments

    bitmapItem                   Item number of a bitmap structure.

    gc                           Pointer to a GrafCon
                                 structure.

    x                            Column where the pixel is to be
                                 written.

    y                            Row where the pixel is to be written.

  Return Value

    The function returns 0 if successful or an error code (a negative value)
    if an error occurs.

    GRAFERR_COORDRANGE is returned if the specified location is ouside the
    bitmap boundaries.

  Notes

    The current implementation of this routine is *very* slow.  This
    will change in the future.

  Implementation

    Folio call implemented in graphics folio V20.

  Associated Files

    graphics.h, graphics.lib

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/abandoninstrument##
AbandonInstrument - Make an instrument available for adoption.

  Synopsis

    Err AbandonInstrument (Item Instrument)

  Description

    This function together with AdoptIntrument() form a simple, but
    efficient, voice allocation system for a single instrument Template.
    AbandonInstrument() adds an instrument to a pool of unused
    instruments; AdoptInstrument() allocates instruments from that pool. A
    Template's pool can grow or shrink dynamically.

    Why should you use this system when CreateInstrument() and
    DeleteInstrument() also do dynamic voice allocation? The answer is
    that CreateInstrument() and DeleteInstrument() create and delete Items
    and allocate and free DSP resources. AdoptInstrument() and
    AbandonInstrument() merely manage a pool already existing Instrument
    Items belonging to a template. Therefore they don't have the overhead
    of Item creation and DSP resource management, and don't thrash the Item
    table.

    This function stops the instrument, if it was running, and sets its
    status to AF_ABANDONED (see GetAudioItemInfo() AF_TAG_STATUS). This
    instrument is now available to be adopted from its Template by calling
    AdoptInstrument().

    Instruments created with the AF_INSF_AUTOABANDON flag set, are
    automatically put into the AF_ABANDONED state when stopped.

  Arguments

    Instrument                   The item number for the instrument to
                                 abandon.

  Return Value

    The procedure returns a non-negative value if successful or an error
    code (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    AdoptInstrument(), StopInstrument(), ScavengeInstrument(),
    GetAudioItemInfo(), Instrument

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/aborttimercue##
AbortTimerCue - Cancels a timer request enqueued with SignalAtTime().

  Synopsis

    Err AbortTimerCue (Item Cue)

  Description

    Cancels a timer request enqueued with SignalAtTime(). The signal
    associated with the cue will not be sent if the request is aborted before
    completion. Aborting a timer request after completion does nothing
    harmful. Aborting a cue that has not been posted as a timer request is
    harmless.

  Arguments

    Cue                          Cue item to abort. The task calling this
                                 function must own the Cue. The Cue may have
                                 already completed - nothing bad will happen.

  Return Value

    The procedure returns a non-negative value if successful or an error
    code (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V21.

  Associated Files

    audio.h

  See Also

    SignalAtTime()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/adoptinstrument##
AdoptInstrument - Adopt an abandoned instrument.

  Synopsis

    Item AdoptInstrument (Item instrumentTemplate)

  Description

    This function adopts an instrument from this template's abandoned
    instrument pool (finds an instrument belonging to the the template
    whose status is AF_ABANDONED). It then sets the instrument state to
    AF_STOPPED and returns the instrument item number. If the template has
    no abandoned instruments, this function returns 0.

    Note that this function does not create a new Instrument Item; it
    returns an Instrument Item that was previously passed to
    AbandonInstrument() (or became abandoned because AF_INSF_AUTOABANDON
    was set).

    This function together with AbandonIntrument() form a simple, but
    efficient, voice allocation system for a single instrument Template.

  Arguments

    instrumentTemplate           The item number for the instrument
                                 template from which to to attempt to
                                 adopt an instrument.

  Return Value

    >0                           Instrument Item number if an instrument
                                 could be adopted.

    0                            If no abandoned instruments in template.

    <0                           Error code on failure.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    AbandonInstrument(), ScavengeInstrument(), GetAudioItemInfo(),
    Instrument

##src/audio/audiofolio/dspp_instr.c::mpg/audiofolio/allocamplitude##
AllocAmplitude - Allocates amplitude from available system amplitude.

  Synopsis

    int32 AllocAmplitude( int32 Amplitude )

  Description

    AllocAmplitude  is a voluntary procedure that checks available system
    amplitude and allocates the requested amplitude (or less, if the amount
    requested is not available) to the calling task.  It then marks that
    amplitude unavailable to other tasks making this call.  When the task
    finishes using the amplitude, it should call FreeAmplitude() to make the
    amplitude available to other tasks.  Note that this procedure is voluntary
    and doesn't restrict the amplitude actually used by a task; the only
    way it works is for all audio tasks to use this procedure.

    This call is necessary, because the output of the DSP is limited by the
    signed 16-bit precision of the digital-to-analog converter (DAC).  If you
    add together signals whose amplitude exceeds the limit of 0x7FFF, the
    result will "wrap around,"  causing a horrendous noise.  Rather
    than dictate a restriction on use of the DSP, we assume that
    programmers/composers will restrict themselves using whatever scheme they
    choose.  It is necessary, however, to tell other tasks how much of the DSP
    precision you plan to use.  You can allocate some or all of the amplitude
    for your task and then give it back when done.

  Arguments

    Amplitude                    The desired amplitude.  This must be value
                                 from 0 to 0x7FFF.

  Return Value

    The procedure returns the amount of amplitude that was allocated.  This
    will be less than or equal to the desired amount.  If unsuccessful, it
    returns a negative value (an error code).

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    FreeAmplitude()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/allocinstrument##
AllocInstrument - Allocates an instrument using a template.

  Synopsis

    Item AllocInstrument (Item InsTemplate, uint8 Priority)

  Description

    This procedure allocates an Instrument based on an instrument Template,
    previously loaded using LoadInsTemplate() or similar call, and allocates
    the DSP resources necessary for the Instrument. See also the convenience
    function LoadInstrument() combines these two steps.

    Call FreeInstrument() when you're finished with the Instrument to
    deallocate its resources.

    AllocInstrument() and FreeInstrument() are special cases of the more
    CreateInstrument() and DeleteInstrument(), which offer greater flexibility.

  Arguments

    InsTemplate                  Item number of a loaded instrument template
                                 used to allocate the instrument.

    Priority                     Determines order of execution in DSP. Set
                                 from 0 to 200. A typical value would be
                                 100. This value also determines the
                                 priority over other instruments when voices
                                 are stolen for dynamic voice allocation.

  Return Value

    The procedure returns the Item number for the Instrument (a positive value)
    or an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    FreeInstrument(), CreateInstrument(), LoadInsTemplate(), LoadInstrument()

##src/audio/audiofolio/audio_envelopes.c::mpg/audiofolio/attachenvelope##
AttachEnvelope - Attaches an envelope to an instrument and creates an
                 attachment item.

  Synopsis

    Item AttachEnvelope (Item Instrument, Item Envelope, char *EnvName)

  Description

    This procedure attaches the specified envelope to the specified instrument
    and creates an attachment item. The attachment point (the hook) must be
    specified by name, as instruments may have multiple places where envelopes
    can be attached.

    An instrument may, for example, have an amplitude envelope and a filter
    envelope, which may be called AmpEnv and FilterEnv respectively. The simple
    envelope.dsp instrument has a hook name of Env. You'll find hook names in
    the Instrument Templates chapter of this book. Note that if EnvName is set
    to NULL, the audio folio will look for "Env" as a default.

    You may use the same envelope for several instruments. The envelope data
    may be edited at any time, but be aware that it is read by a high priority
    task in the audio folio. Thus you should not leave it in a potentially
    "goofy" state if it is actively used.

    When you finish, you should call DetachEnvelope() to delete the attachment
    and free its resources.

  Arguments

    Instrument                   The item number of the instrument to which to
                                 attach the Envelope.

    Envelope                     The item number of the envelope to be attached.

    EnvName                      The name of the attachment point (hook).
                                 Can be NULL, in which case an Envelope Hook
                                 named "Env" is used.

  Return Value

    The procedure returns the item number of the Attachment created (a positive
    value) or an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  Caveat

    Prior to V24, EnvName == NULL was not supported.

  See Also

    DetachEnvelope(), CreateEnvelope(), envelope.dsp

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/attachsample##
AttachSample - Connects sample to instrument's FIFO.

  Synopsis

    Item AttachSample( Item Instrument, Item Sample, char
    *FIFOName )

  Description

    This procedure connects a sample to a named input FIFO for an instrument.
    This sample will be played when the instrument is started.  See the
    instrument's documentation for the names of its FIFOs.  If the
    procedure is successful, it returns an attachment item number.

    When you finish with the attachment between sample and instrument, you
    should call DetachSample() to detach and free the attachment's
    resources.

    Multisamples:  If more than one sample is attached to a FIFO and the
    instrument is started with a specified pitch, then the list of samples is
    searched for the first sample whose range of notes and velocities matches
    the desired note index (pitch).  The LowNote and HighNote, and LowVelocity
    and HighVelocity are read from the AIFF file.  The values from the file
    can be overwritten using SetAudioItemInfo().

  Arguments

    Instrument                   The item number of the instrument.

    Sample                       The item number of the sample.

    FIFOName                     Name of an input FIFO (set to NULL for the
                                 first or only FIFO).

  Return Value

    The procedure returns the item number of the attachment or an error code
    (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    DetachSample(), SetAudioItemInfo(), LoadSample(), UnloadSample(),
    DebugSample(), CreateSample(), ScanSample(), GetAudioItemInfo()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/audiotimelaterthan##
AudioTimeLaterThan - Compare two AudioTime values with wraparound.

  Synopsis

    int AudioTimeLaterThan (AudioTime t1, AudioTime t2)

  Description

    AudioTimeLaterThan() compares two AudioTime values, taking into account
    wraparound.

    The two time values are assumed to be within 0x7fffffff ticks of each
    other. The time differences larger than this number will produce incorrect
    comparisons.

  Arguments

    t1                          First AudioTime value to compare.

    t2                          Second AudioTime value to compare.

  Return Value

    TRUE                        If t1 is later than t2.

    FALSE                       If t1 is earlier than or equal to t2.

  Implementation

    Macro implemented in audio.h V22.

  Associated Files

    audio.h

  See Also

    AudioTimeLaterThanOrEqual(), CompareAudioTimes()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/audiotimelaterthanorequal##
AudioTimeLaterThanOrEqual - Compare two AudioTime values with wraparound.

  Synopsis

    int AudioTimeLaterThanOrEqual (AudioTime t1, AudioTime t2)

  Description

    AudioTimeLaterThanOrEqual() compares two AudioTime values, taking into
    account wraparound.

    The two time values are assumed to be within 0x7fffffff ticks of each
    other. Time differences larger than that will produce incorrect
    comparisons.

  Arguments

    t1                          First AudioTime value to compare.

    t2                          Second AudioTime value to compare.

  Return Value

    TRUE                        If t1 is later than or equal to t2.

    FALSE                       If t1 is earlier than t2.

  Implementation

    Macro implemented in audio.h V22.

  Associated Files

    audio.h

  See Also

    AudioTimeLaterThan(), CompareAudioTimes()

##src/audio/audiofolio/audio_knob.c::mpg/audiofolio/bendinstrumentpitch##
BendInstrumentPitch - Bends an instrument's output pitch up or down by
                      a specified amount.

  Synopsis

    Err BendInstrumentPitch (Item Instrument, frac16 BendFrac)

  Description

    This procedure sets a new pitch bend value for an Instrument, a value that
    is stored as part of the Instrument. This function sets the resulting pitch
    to the product of the Instrument's frequency and BendFrac.

    This setting remains in effect until changed by another call to
    BendInstrumentPitch(). To restore the original pitch of an Instrument, pass
    the result of Convert32_F16(1) as BendFrac.

    Use Convert12TET_F16() to compute a BendFrac value from an interval of
    semitones and cents.

    This procedure won't bend pitch above the upper frequency limit of the
    instrument.

  Arguments

    Instrument                   The item number of an instrument

    BendFrac                     16.16 factor to multiply Instrument's normal
                                 frequency by. This is a signed value; negative
                                 values result in a negative frequency value,
                                 which is not supported by all instruments.
                                 Specify the result of Convert32_F16(1) as BendFrac
                                 to restore the Instrument's original pitch.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    Convert12TET_F16()

##src/audio/audiofolio/audio_folio.c::mpg/audiofolio/closeaudiofolio##
CloseAudioFolio - Closes the audio folio.

  Synopsis

    Err CloseAudioFolio (void)

  Description

    This procedure closes a task's connection with the audio folio. Call
    it when your application finishes using audio calls.

  Arguments

    None

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    Library call implemented in audio.lib V20.

  Associated Files

    audio.h

  See Also

    OpenAudioFolio()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/compareaudiotimes##
CompareAudioTimes - Compare two AudioTime values with wraparound.

  Synopsis

    int32 CompareAudioTimes (AudioTime t1, AudioTime t2)

  Description

    CompareAudioTimes() compares two AudioTime values taking into account
    wraparound. The two time values are assumed to be within 0x7fffffff ticks
    of each other. Time differences larger than this value will produce
    incorrect comparisons.

  Arguments

    t1                          First AudioTime value to compare.

    t2                          Second AudioTime value to compare.

  Return Value

    >0                          If t1 is later than t2.

    0                           If t1 equals t2.

    <0                          If t1 is earlier than t2.

  Implementation

    Macro implemented in audio.h V22.

  Associated Files

    audio.h

  See Also

    AudioTimeLaterThan(), AudioTimeLaterThanOrEqual()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/connectinstruments##
ConnectInstruments - Patches the output of an instrument to the input of
                     another instrument.

  Synopsis

    Err ConnectInstruments (Item SrcIns, char *SrcName, Item DstIns,
                            char *DstName)

  Description

    This procedure connects an output from one instrument to an input of
    another instrument. This allows construction of complex "patches"
    from existing synthesis modules.

    An output can be connected to one or more inputs; only one output can be
    connected to any given input. If you connect an output to a knob, it
    disconnects that knob from any possible control by TweakKnob() or
    TweakRawKnob(). Unlike Attachments, this kind of connection does not create
    an Item.

    Call DisconnectInstruments() to break a connection set up by this function.
    Deleting either instrument will cause the connection to automatically
    be broken.

    See the DSP Template pages for complete listings of each template's inputs,
    outputs and knobs.

  Arguments

    SrcIns                       Item number of the source instrument.

    SrcName                      Name of the output port of the source
                                 instrument to connect to.

    DstIns                       Item number of the destination instrument.

    DstName                      Name of the input port of the destination
                                 instrument to connect to.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Notes

    Port names are matched case-insensitively.

  Associated Files

    audio.h

  See Also

    DisconnectInstruments()

##src/audio/audiofolio/audio_tuning.c::mpg/audiofolio/convert12tet_f16##
Convert12TET_F16 - Converts a pitch bend value in semitones and cents into
                   an f16 bend value.

  Synopsis

    Err Convert12TET_F16( int32 Semitones, int32 Cents,
    frac16 *FractionPtr )

  Description

    This procedure, whose name reads (convert 12-tone equal-tempered to
    f16,)  converts a pitch bend value expressed in semitones and cents to
    an f16 bend value.  The bend value is used with BendInstrumentPitch() to
    bend the instrument's pitch up or down: The value multiplies the
    frequency of the instrument's output to create a resultant pitch bent
    up or down by the specified amount.

    Note that the semitones and cents values need not both be positive or both
    be negative.  One value can be positive while the other value is negative.
     For example, -5 semitones and +30 cents bends pitch down by 4 semitones
    and 70 cents.

    Convert12TET_F16() stores the resultant bend value in FractionPtr.

  Arguments

    Semitones                    The integer number of semitones to bend up
                                 or down (can be negative or positive).

    Cents                        The integer number of cents (from -100 to
                                 +100) to bend up or down.

    FractionPtr                  Pointer to a frac16 variable where the bend
                                 value will be stored.

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    BendInstrumentPitch()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/createcue##
CreateCue - Creates an audio cue.

  Synopsis

    Item CreateCue (TagArg *tagList)

  Description

    This macro calls CreateItem() to create an audio cue, which is an item
    associated with a system signal. A task can get the signal mask of the
    cue's signal using the GetCueSignal() call.

    When a task uses an audio timing call such as SignalAtTime(), it passes
    the item number of the audio cue to the procedure. The task then calls
    WaitSignal() to enter wait state, where it waits for the cue's signal
    at the specified time.

    Since each task has its own set signals, Cues cannot be shared among
    tasks.

    Call DeleteCue() to dispose of a Cue item.

  Arguments

    None

  Tags

    None

  Return Value

    The procedure returns the item number of the cue (a positive value) or an
    error code (a negative value) if an error occurs.

  Implementation

    Macro implemented in the audio.h V21.

  Associated Files

    audio.h

  See Also

    DeleteCue(), GetCueSignal(), MonitorAttachment(), SignalAtTime(),
    SleepUntilTime()

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/createdelayline##
CreateDelayLine - Creates a delay for echoes and reverberations.

  Synopsis

    Item CreateDelayLine( int32 NumBytes, int32 NumChannels,
    int32 IfLoop )

  Description

    This procedure creates a delay line item for echo, reverberation, and
    oscilloscope applications.  The delay line item can be attached to any
    instrument that provides DMA OUT from DSP.  When finished with the delay
    line, delete it using DeleteDelayLine() to free its resources.

    CreateDelayLine() calls CreateItem() using the tag argument
    AF_TAG_DELAY_LINE.

  Arguments

    NumBytes                     The number of bytes in the delay line's
                                 sample buffer.

    NumChannels                  The number of channels stored in each sample
                                 frame.

    IfLoop                       A value indicating whether or not this is a
                                 loop.  Set to TRUE (1) or FALSE (0).

  Return Value

    The procedure returns the item number of the delay line or an error code
    (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    DeleteDelayLine()

##src/audio/audiofolio/audio_envelopes.c::mpg/audiofolio/createenvelope##
CreateEnvelope - Creates an envelope for a sample or cue.

  Synopsis

    Item CreateEnvelope (DataTimePair *Points, int32 Numpoints,
                         int32 SustainBegin, int32 SustainEnd)

  Description

    Creates an envelope for a sample or a cue. Envelopes are described by an
    array of pairs of time and data. It can be used to specify a loop for
    sustained sound.

    Data typically ranges from -32,768 to 32,767 or 0 to 65,535, and must be
    sign-extended to 32 bits. Loops are specified as point indices. For
    more information, read the description of envelopes in the Music
    Programmer's Guide.

    When you are finished with the envelope, you should call DeleteEnvelope()
    to delete it and deallocate its resources.

  Arguments

    Points                       An array of DataTimePair values giving delta
                                 time in milliseconds accompanied by data
                                 values. This becomes the value of the
                                 envelope item's AF_TAG_ADDRESS tag
                                 argument described in SetAudioItemInfo().
                                 The Points array is not copied: it must
                                 remain valid for the life of the Envelope
                                 Item or until it is replaced with another
                                 array of Points by a call to
                                 SetAudioItemInfo().

    NumPoints                    The number of points in the array. This
                                 becomes the value of the envelope item's
                                 AF_TAG_FRAMES tag argument.

    SustainBegin                 The beginning index of the loop. This
                                 becomes the value of the envelope item's
                                 AF_TAG_SUSTAINBEGIN tag argument. Set to
                                 -1 for no sustain loop.

    SustainEnd                   The ending index of the loop. This becomes
                                 the value of the envelope item's
                                 AF_TAG_SUSTAINEND tag argument. Set to
                                 -1 for no sustain loop. Otherwise must be
                                 >= SustainBegin.

  Return Value

    The procedure returns the item number of the envelope (a positive value) or
    an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    DeleteEnvelope(), AttachEnvelope()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/createinstemplate##
CreateInsTemplate - Generic template creation function.

  Synopsis

    Item CreateInsTemplate (TagArg *tagList)

    Item CreateInsTemplateVA (uint32 tag1, ...)

  Description

    This is the general function to create an instrument Template. It is used
    internally by all the other template creation functions (e.g.
    LoadInsTemplate(), DefineInsTemplate(), etc) to actually perform the
    template creation. Use it if you need to do something that these other
    functions don't provide.

    Call UnloadInsTemplate() to dispose of the Item created by this function.

  Arguments

    None

  Tags

    AF_TAG_ALLOC_FUNCTION        (void *(*)(uint32 memsize, uint32
                                 memflags)) Sets custom memory
                                 allocation function to be called during
                                 template creation. Defaults to AllocMem().
                                 If you supply a custom allocation function
                                 you must also provide a custom free function
                                 with AF_TAG_FREE_FUNCTION.

    AF_TAG_DEVICE                (Item) Audio device Item for
                                 instrument template. 0 indicates the default audio
                                 device, the DSP, which is the only valid audio
                                 device item at the present time. Conveniently
                                 defaults to 0, so you should never need to use
                                 this tag.

    AF_TAG_FREE_FUNCTION         (void (*)(void *memptr, uint32 memsize))
                                 Sets custom memory free function to
                                 be called during template deletion. Defaults
                                 to FreeMem(). If you supply a custom free
                                 function you must also provide a custom
                                 allocation function with
                                 AF_TAG_ALLOC_FUNCTION.

    AF_TAG_IMAGE_ADDRESS         (const char *) Specifies a memory
                                 location containing a template file image.
                                 Must use in conjunction with
                                 AF_TAG_IMAGE_LENGTH. Mutually exclusive
                                 AF_TAG_NAME.

    AF_TAG_IMAGE_LENGTH          (uint32) Specifies number of bytes
                                 in template file image pointed to by
                                 AF_TAG_IMAGE_ADDRESS.

    AF_TAG_NAME                  (const char *) Name of template file
                                 to load. Mutually exclusive with
                                 AF_TAG_IMAGE_ADDRESS.

  Return Value

    The procedure returns an instrument Template Item number (a positive value)
    if successful or an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Caveats

    Ideally there should be a DeleteInsTemplate() function, but there isn't one
    yet. Sorry for any confusion that might arise from pairing
    CreateInsTemplate() with UnloadInsTemplate().

  Examples

        // These two calls are equivalent
    LoadInsTemplate ("directout.dsp", 0);
    CreateInsTemplateVA (
        AF_TAG_NAME, "directout.dsp",
        TAG_END);

        // These two calls are also equivalent
    DefineInsTemplate (dspFileImage, dspFileLength, 0, "foo.dsp");
    CreateInsTemplateVA (
        AF_TAG_IMAGE_ADDRESS, dspFileImage,
        AF_TAG_IMAGE_LENGTH,  dspFileLength,
        TAG_END);

  Associated Files

    audio.h

  See Also

    UnloadInsTemplate(), LoadInsTemplate(), DefineInsTemplate(), Template,
    CreateInstrument(), LoadInstrument(), AttachSample(), AttachEnvelope()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/createinstrument##
CreateInstrument - Creates an instrument using a template.

  Synopsis

    Item CreateInstrument (Item InsTemplate, const TagArg *tagList)

    Item CreateInstrumentVA (Item InsTemplate, uint32 tag1, ...)

  Description

    This procedure allocates an Instrument based on an instrument Template,
    previously loaded using LoadInsTemplate() or similar call, and allocates
    the DSP resources necessary for the Instrument. See also the convenience
    function LoadInstrument() combines these two steps.

    The new instrument is always created in the AF_STOPPED state, regardless
    of the setting of AF_INSF_ABANDONED.

    Call DeleteInstrument() when you're finished with the Instrument to
    deallocate its resources.

    This function is a superset of AllocInstrument().

  Arguments

    InsTemplate                  Item number of a loaded instrument template
                                 used to allocate the instrument.

  Tags

    AF_TAG_CALCRATE_DIVIDE       (uint32) (new tag for V24) Create.
                                 Specifies the the denominator of the fraction
                                 of the total DSP cycles on which this instrument
                                 is to run. The only valid
                                 settings at this time are 1 to run on all DSP
                                 cycles (i.e. execute at 44,100 cycles/sec),
                                 and 2 to run on only 1/2 of the DSP
                                 cycles (i.e. execute at 22,050 cycles/sec).
                                 Defaults to 1.

    AF_TAG_PRIORITY              (uint32) Priority of new instrument in range
                                 of 0..255. Defaults to 100.

    AF_TAG_SET_FLAGS             (uint32) Set of AF_INSF_ flags to set in new
                                 instrument. All flags default to cleared.
                                 See the Instrument item page a for complete
                                 description of AF_INSF_ flags.

  Return Value

    The procedure returns the item number for the Instrument (a positive value)
    or an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V24.

  Associated Files

    audio.h

  See Also

    DeleteInstrument(), AllocInstrument(), LoadInsTemplate(), LoadInstrument()

##src/audio/audiofolio/audio_probe.c::mpg/audiofolio/createprobe##
CreateProbe - Connects a task to an instrument controller.

  Synopsis

    Item CreateProbe( Item Instrument, const char *Name, const TagArg *Tags )
    Item CreateProbeVA( Item Instrument, const char *Name, uint32 tag1, ... )

  Description

    This procedure creates a Probe item that provides a fast connection between
    a task and one of an instrument's outputs.  You can then call
    ReadProbe() to poll the value of output.  When you finish with the
    probe item, you should call DeleteProbe()to deallocate the item.

    If you plan to use a probe several times, the proper procedure is to call
    CreateProbe() once to create the item, call ReadProbe() several times,
    and then call DeleteProbe() when finished.

  Arguments

    Instrument                   The item number of the instrument.

    Name                         The name of the Output.

  Tags

    None

  Return Value

    The procedure returns the item number of the probe if successful or an
    error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V24.

  Associated Files

    audio.h

  Notes

    This procedure is case-insensitive to the names of probes.

  See Also

    ReadProbe(), DeleteProbe()

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/createsample##
CreateSample - Generic sample creation function.

  Synopsis

    Item CreateSample (TagArg *TagList)

    Item CreateSampleVA (uint32 tag1, ...)

  Description

    This function is used by all the other sample creation functions (e.g.
    LoadSample(), ScanSample(), DefineSampleHere(), etc.) to actually perform
    the sample creation. Use it if you need to do something that these
    other more specific functions don't provide (e.g. creating an empty sample
    item to which to attach your own sample memory).

    This function is extremely flexible and has many different sets of tags to
    perform different types of Sample Item creation. Sample Item creation falls
    into these categories:
        . Loading a Sample File from disc
        . Parsing a Sample File image in memory
        . Creating a Sample Item from scratch

    The currently supported sample file formats are:
        . AIFF
        . AIFC

    The tag sets are described below for each category of sample item creation.

  Tags to Load Sample File

    Required:

    AF_TAG_NAME                  (const char *) Name of sample file to load.

    Optional:

    AF_TAG_SCAN                  (int32) Specifies the maximum number of bytes
                                 of sound data to read from the file. This can
                                 be used to cause the audio folio to simply
                                 load sample parameters without loading sample
                                 data. (see ScanSample()).

    AF_TAG_ALLOC_FUNCTION        (void *(*)(uint32 memsize, uint32 memflags))
                                 Sets custom memory allocation function to be
                                 called to allocate sample memory while loading
                                 sample file. Defaults to AllocMem(). If you
                                 supply a custom allocation function you must
                                 also provide a custom free function with
                                 AF_TAG_FREE_FUNCTION.

    AF_TAG_FREE_FUNCTION         (void (*)(void *memptr, uint32 memsize)) Sets
                                 custom memory free function to free sample
                                 memory to be called during sample deletion.
                                 Defaults to FreeMem(). If you supply a custom
                                 free function you must also provide a custom
                                 allocation function with AF_TAG_ALLOC_FUNCTION.

  Tags to Parse Sample File Image in Memory

    Required:

    AF_TAG_IMAGE_ADDRESS         (const char *) Specifies a memory location
                                 containing a sample file image from which to
                                 read sample. Unless AF_TAG_LEAVE_IN_PLACE is
                                 set, this memory does not need to remain valid
                                 after calling CreateSample(). Must use in
                                 conjunction with AF_TAG_IMAGE_LENGTH.

    AF_TAG_IMAGE_LENGTH          (uint32) Specifies number of bytes in sample
                                 file image pointed to by AF_TAG_IMAGE_ADDRESS.

    Optional:

    AF_TAG_SCAN                  (int32) See above.

    AF_TAG_ALLOC_FUNCTION        (void *(*)(uint32 memsize, uint32 memflags))
                                 See above. Mutually exclusive with
                                 AF_TAG_LEAVE_IN_PLACE.

    AF_TAG_FREE_FUNCTION         (void (*)(void *memptr, uint32 memsize)) See
                                 above.

    AF_TAG_LEAVE_IN_PLACE        (bool) Memory is normally allocated for the
                                 sample data to be extracted from the sample
                                 file, even when parsing a sample file image in
                                 memory. When this parameter is set to TRUE, the
                                 Sample Item uses the sample data contained
                                 within the sample file image in-place rather
                                 than allocating more memory to hold the sample
                                 data.

                                 This tag assumes that the file has been
                                 buffered in memory of MEMTYPE_AUDIO and that
                                 the memory will remain valid for the life of
                                 the Sample Item.

                                 Also, because the audio folio requires that
                                 sample data be quad-byte aligned, the sample
                                 data image in memory may be moved within the
                                 file image. This corrupts the file image for
                                 further parsing, but leaves the sample data
                                 intact. The audio folio prints a warning
                                 message if it needed to move the sample data,
                                 but does not return any special code.
                                 Therefore it's best to assume that the file
                                 image is always corrupted when this option is
                                 enabled.

                                 Defaults to FALSE. Mutually exclusive with
                                 AF_TAG_ALLOC_FUNCTION.

  Tags to Create Sample from Scratch

    Data:

    AF_TAG_ADDRESS               (void *) Specifies pointer to sample data to
                                 construct Sample Item for. This parameter can
                                 be changed at a later time with
                                 SetAudioItemInfo(), so it is not required for
                                 creation. For best results, must be quad-byte
                                 aligned (see caveats). In general, this
                                 parameter should be used in conjunction with
                                 AF_TAG_FRAMES or AF_TAG_NUMBYTES. Defaults to
                                 NULL.

    AF_TAG_FRAMES                (uint32) Length of sample data expressed in
                                 frames. In a stereo sample, this would be the
                                 number of stereo pairs. For best results, must
                                 be quad-byte aligned (see caveats). Mutually
                                 exlusive with AF_TAG_NUMBYTES. If neither
                                 AF_TAG_FRAMES or AF_TAG_NUMBYTES is specified,
                                 length defaults to 0.

    AF_TAG_NUMBYTES              (uint32) Length of sample data expressed in
                                 bytes. For best results, must be quad-byte
                                 aligned (see caveats). Mutually exlusive with
                                 AF_TAG_FRAMES. If neither AF_TAG_FRAMES or
                                 AF_TAG_NUMBYTES is specified, length defaults
                                 to 0.

    Format:

    AF_TAG_CHANNELS              (uint32) Number of channels (or samples per
                                 sample frame). For example: 1 for mono, 2 for
                                 stereo. Valid range is 1..255. Defaults to 1.

    AF_TAG_WIDTH                 (uint32) Number of bytes per sample
                                 (uncompressed). Valid range is 1..2. Mutually
                                 exclusive with AF_TAG_NUMBITS. If neither
                                 AF_TAG_WIDTH or AF_TAG_NUMBIS is specified,
                                 width defaults to 2 bytes (16 bits).

    AF_TAG_NUMBITS               (uint32) Number of bits per sample
                                 (uncompressed). Valid range is 1..32. Width
                                 is rounded up to the next byte when computed
                                 from this tag. Mutually exclusive with
                                 AF_TAG_WIDTH. If neither AF_TAG_WIDTH or
                                 AF_TAG_NUMBIS is specified, width defaults to
                                 2 bytes (16 bits).

    AF_TAG_COMPRESSIONTYPE       (uint32) 32-bit ID representing AIFC
                                 compression type of sample data (e.g.
                                 ID_SDX2). 0 for no compression, which is the
                                 default.

    AF_TAG_COMPRESSIONRATIO      (uint32) Compression ratio of sample data.
                                 Uncompressed data has a value of 1, which is
                                 the default. 0 is illegal.

    Loops:

    AF_TAG_SUSTAINBEGIN          (int32) Frame index of the first frame of the
                                 sustain loop. Valid range is 0..NumFrames-1.
                                 For best results, must be quad-byte aligned
                                 (see caveats). -1 for no sustain loop, which
                                 is the default. Must be used in conjunction
                                 with AF_TAG_SUSTAINEND.

    AF_TAG_SUSTAINEND            (int32) Frame index of the first frame after
                                 the last frame in the sustain loop. Valid
                                 range is 1..NumFrames. For best results, must
                                 be quad-byte aligned (see caveats). -1 for no
                                 sustain loop, which is the default. Must be
                                 used in conjunction with AF_TAG_SUSTAINBEGIN.

    AF_TAG_RELEASEBEGIN          (int32) Frame index of the first frame of the
                                 release loop. Valid range is 0..NumFrames-1.
                                 For best results, must be quad-byte aligned
                                 (see caveats). -1 for no release loop, which
                                 is the default. Must be used in conjunction
                                 with AF_TAG_RELEASEEND.

    AF_TAG_RELEASEEND            (int32) Frame index of the first frame after
                                 the last frame in the release loop. Valid
                                 range is 1..NumFrames. For best results, must
                                 be quad-byte aligned (see caveats). -1 for no
                                 release loop, which is the default. Must be
                                 used in conjunction with AF_TAG_RELEASEBEGIN.

    Tuning:

    AF_TAG_BASENOTE              (uint32) MIDI note number for this sample when
                                 played at the original sample rate (as set by
                                 AF_TAG_SAMPLE_RATE). Defaults to middle C
                                 (60). This defines the frequency conversion
                                 reference note for the StartInstrument()
                                 AF_TAG_PITCH tag.

    AF_TAG_DETUNE                (int32) Amount to detune the MIDI base note in
                                 cents to reach the original pitch. Must be in
                                 the range of -100 to 100. Defaults to 0.

    AF_TAG_SAMPLE_RATE           (ufrac16) Original sample rate for sample
                                 expressed in 16.16 fractional Hz. Defaults to
                                 44,100 Hz.

    Multisample:

    AF_TAG_LOWNOTE               (uint32) Lowest MIDI note number at which to
                                 play this sample when part of a multisample.
                                 StartInstrument() AF_TAG_PITCH tag is used
                                 to perform selection. Valid range is 0 to 127.
                                 Defaults to 0.

    AF_TAG_HIGHNOTE              (uint32) Highest MIDI note number at which to
                                 play this sample when part of a multisample.
                                 Valid range is 0 to 127. Defaults to 127.

  Return Value

    The procedure returns a Sample Item number (a positive value) if successful
    or an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Caveats

    There's currently no way to enforce that memory pointed to by
    AF_TAG_ADDRESS or file image memory used with AF_TAG_LEAVE_IN_PLACE is
    actually of MEMTYPE_AUDIO. Be careful.

    All sample data, loop points, and lengths must be quad-byte aligned. For
    example, a 1-channel, 8-bit sample (which has 1 byte per frame) is only
    legal when the lengths and loop points are at multiples of 4 frames. For
    mono ADPCM samples (which have only 4 bits per frame), lengths and loop
    points must be at multiples of 8 frames. The audio folio, however, does not
    report any kind of an error for using non-quad-byte aligned sample data.
    Sample addresses, lengths, and loop points, are internally truncated to
    quad-byte alignment when performing the DMA without warning. Misalignments
    may result in noise at loop points, or slight popping at the beginning and
    ending of sound playback. It is recommended that you pay very close
    attention to sample lengths and loop points when creating, converting, and
    compressing samples.

    Setting AF_TAG_WIDTH does not set the AF_TAG_NUMBITS attribute (e.g. if you
    create a sample with AF_TAG_WIDTH set to 1, GetAudioItemInfo()
    AF_TAG_NUMBITS will return 16). Setting AF_TAG_NUMBITS does however
    correctly update the AF_TAG_WIDTH field.

  Examples

        // Create a Sample Item to be filled out later with SetAudioItemInfo()
    sample = CreateSample (NULL);

        // Make a Sample Item for raw sample data in memory
        // (8-bit monophonic 22KHz sample in this case)
    sample = CreateSampleVA (
        AF_TAG_ADDRESS,     data,
        AF_TAG_FRAMES,      NUMFRAMES,
        AF_TAG_CHANNELS,    1,
        AF_TAG_WIDTH,       1,
        AF_TAG_SAMPLE_RATE, Convert32_F16 (22050),
        TAG_END);

        // Parse a sample file image and use the sample data in place
    sample = CreateSampleVA (
        AF_TAG_IMAGE_ADDRESS,  sampleFileImage,
        AF_TAG_IMAGE_LENGTH,   sampleFileLength,
        AF_TAG_LEAVE_IN_PLACE, TRUE,
        TAG_END);

        // Identical to LoadSample()
    sample = CreateSampleVA (
        AF_TAG_NAME, "sinewave.aiff",
        TAG_END);

        // Identical to DefineSampleHere()
    sample = CreateSampleVA (
        AF_TAG_IMAGE_ADDRESS,  sampleFileImage,
        AF_TAG_IMAGE_LENGTH,   sampleFileLength,
        AF_TAG_ALLOC_FUNCTION, MyAlloc,
        AF_TAG_FREE_FUNCTION,  MyFree,
        TAG_END);

  Associated Files

    audio.h

  See Also

    UnloadSample(), LoadSample(), ScanSample(), Sample, AttachSample()

##src/audio/audiofolio/audio_tuning.c::mpg/audiofolio/createtuning##
CreateTuning - Creates a tuning item.

  Synopsis

    Item CreateTuning( ufrac16 *Frequencies, int32 NumNotes,
    int32 NotesPerOctave, int32 BaseNote )

  Description

    This procedure creates a tuning item that can be used to tune an
    instrument.

    NotesPerOctave is set to 12 for a standard western tuning system.  For
    every octave's number of notes up or down, the frequency will be
    doubled or halved.  You can thus specify 12 notes of a 12-tone scale, then
    extrapolate up or down for the other octaves.  You should specify the
    entire range of pitches if the tuning does not repeat itself every octave.
     For more information, see the Music Programmer's Guide.

    When you are finished with the tuning item, you should call DeleteTuning()
    to deallocate the resources.

  Arguments

    Frequencies                  A pointer to an array of 16.16 frequencies,
                                 which lists a tuning pattern.

    NumNotes                     The number of frequencies in the array.

    NotesPerOctave               The number of notes in an octave (12 in a
                                 standard tuning scale).

    BaseNote                     The MIDI pitch (note) value of the first
                                 frequency in the array.  If your array
                                 starts with the frequency of middle C, its
                                 MIDI pitch value would equal 60.

  Return Value

    The procedure returns the item number for the tuning or an error code (a
    negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    DeleteTuning(), TuneInsTemplate(), TuneInstrument()

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/debugsample##
DebugSample - Prints sample information for debugging.

  Synopsis

    Err DebugSample( Item SampleItem )

  Description

    This procedure dumps all available sample information to the 3DO Debugger
    screen for your delight and edification.  This procedure will probably be
    eliminated from the production version of the software.

  Arguments

    SampleItem                   Item number of a sample.

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    AttachSample(), DetachSample(), SetAudioItemInfo(), LoadSample(),
    UnloadSample(), CreateSample(), ScanSample(), GetAudioItemInfo()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/defineinstemplate##
DefineInsTemplate - Creates an instrument template from a .dsp file.

  Synopsis

    Item DefineInsTemplate (uint8 *Definition, int32 NumBytes, Item Device,
                            char *Name)

  Description

    This procedure defines an instrument template from a .dsp file image that
    has been loaded into RAM. The procedure is intended for use with streaming
    data applications, or any other application where calling LoadInsTemplate(),
    which reads DSP files off disc, at instrument template creation time is
    impractical.

    When you are finished with the template, you should call
    UnloadInsTemplate() to deallocate the resources.

    See CreateInsTemplate() for a more general solution to creating instrument
    templates.

  Arguments

    Definition                   A pointer to the DSP instrument template file
                                 image in memory. This memory does not need
                                 to remain valid after the Template has been
                                 created.

    NumBytes                     The length of the file image pointed to by
                                 Definition.

    Device                       The item number of the device on which you
                                 want to play instruments created with the
                                 template. 0 indicates the default audio
                                 device, the DSP, which is the only valid audio
                                 device item at the present time.

    Name                         The name of the instrument template file
                                 image. Ignored.

  Return Value

    This returns the Item number of the Template (a positive value) or an error
    code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Caveats

    Ideally there should be a DeleteInsTemplate() function, but there isn't one
    yet. Sorry for any confusion that might arise from pairing
    DefineInsTemplate() with UnloadInsTemplate().

    The name argument is ignored.

  Associated Files

    audio.h

  See Also

    UnloadInsTemplate(), CreateInsTemplate(), LoadInsTemplate(),
    DefineSampleHere()

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/definesamplehere##
DefineSampleHere - Defines a sample from a data stream.

  Synopsis

    Item DefineSampleHere( uint8 *AIFFImage, int32 NumBytes,
    void *(*CustomAllocMem)(), void (*CustomFreeMem)() )

  Description

    This call uses a custom allocation procedure to allocate memory for a
    sample buffer.  It then finds an image of an AIFF file contained within a
    data stream and creates a sample using that image, placing the sample in
    the allocated memory.  The procedure specifies a custom
    memory-deallocation procedure to be called when the sample is unloaded.

    See the description of LoadSampleHere() for the parameters passed to the
    custom memory calls.

    When you finish with the created sample, you should call UnloadSample() to
    deallocate its resources.

  Arguments

    AIFFImage                    Pointer to the AIFF image in RAM.

    NumBytes                     Value specifying the  number of bytes in the
                                 sample.

    CustomAllocMem               Pointer to a custom memory-allocation
                                 procedure.

    CustomFreeMem                Pointer to a custom memory-freeing
                                 procedure.

  Return Value

    This returns the item number of the sample or an error code (a negative
    value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    DefineInsTemplate()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/deletecue##
DeleteCue - Deletes an audio cue created by CreateCue().

  Synopsis

    Err DeleteCue (Item Cue)

  Description

    This macro deletes an audio cue and frees its resources (including its
    associated signal).

  Arguments

    Cue                          The item number of the cue to delete.

  Return Value

    The procedure returns zero if successful or an error code (a negative
    value) if an error occurs.

  Implementation

    Macro implemented in audio.h V21.

  Associated Files

    audio.h

  See Also

    CreateCue()

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/deletedelayline##
DeleteDelayLine - Deletes a delay line.

  Synopsis

    Err DeleteDelayLine( Item DelayLine )

  Description

    This procedure deletes a delay line item and frees its resources.

  Arguments

    DelayLine                    The item number of the delay line to delete.

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    CreateDelayLine()

##src/audio/audiofolio/audio_envelopes.c::mpg/audiofolio/deleteenvelope##
DeleteEnvelope - Deletes an envelope created by CreateEnvelope().

  Synopsis

    Err DeleteEnvelope (Item Envelope)

  Description

    This procedure deletes the specified envelope, freeing its resources. It
    also deletes any attachments to the envelope. It does not delete the
    array of DataTimePairs used to define the envelope, which must be freed
    directly by the task that created it.

  Arguments

    Envelope                     Item number of the envelope to delete.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    CreateEnvelope(), DetachEnvelope()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/deleteinstrument##
DeleteInstrument - Frees an instrument and its resources allocated by CreateInstrument().

  Synopsis

    Err DeleteInstrument (Item InstrumentItem)

  Description

    This procedure frees an instrument allocated by CreateInstrument(), which
    frees the resources allocated for the instrument. If the instrument is
    running, it is stopped. All of the Attachments, Knobs, and Probes belonging
    to this Instrument are also deleted by this function. The Envelopes and
    Samples at the other end of Attachments are not deleted by this function.

    If you delete an instrument Template, all Instruments created using that
    Template are freed, so you don't need to use DeleteInstrument() on them.

    Do not confuse this function with UnloadInstrument(). If you create an
    Instrument using LoadInstrument(), you shouldn't use DeleteInstrument() to
    free the instrument because it will leave the instrument's Template loaded
    and without access to unload the Template. Use UnloadInstrument() instead.

    This function is to CreateInstrument() as FreeInstrument() is to
    AllocInstrument().

  Arguments

    InstrumentItem               The item number of the instrument to free.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V24.

  Associated Files

    audio.h

  See Also

    CreateInstrument(), FreeInstrument(), UnloadInstrument(), UnloadInsTemplate()

##src/audio/audiofolio/audio_probe.c::mpg/audiofolio/deleteprobe##
DeleteProbe - Releases a task from a probe it has grabbed.

  Synopsis

    Err DeleteProbe( Item ProbeItem )

  Description

    This procedure deletes the probe item created by CreateProbe(), freeing its
    resource and disconnecting the task that created the probe item from the
    instrument containing the probe.

  Arguments

    ProbeItem                     Item number of probe to delete.

  Return Value

    The procedure returns a non-negative value if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in audio folio V24.

  Associated Files

    audio.h

  See Also

    ReadProbe(), CreateProbe()

##src/audio/audiofolio/audio_tuning.c::mpg/audiofolio/deletetuning##
DeleteTuning - Deletes a tuning.

  Synopsis

    Err DeleteTuning( Item Tuning )

  Description

    This procedure deletes the specified tuning and frees any resources
    dedicated to it.  Note that if you delete a tuning that's in use for
    an existing instrument, that instrument returns to its default tuning.

  Arguments

    Tuning                       The item number of the tuning to delete.

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    CreateTuning(), TuneInsTemplate(), TuneInstrument()

##src/audio/audiofolio/audio_envelopes.c::mpg/audiofolio/detachenvelope##
DetachEnvelope - Detaches an envelope from an instrument.

  Synopsis

    Err DetachEnvelope (Item Attachment)

  Description

    This procedure deletes the specified Attachment between an Envelope and an
    Instrument created by AttachEnvelope(). The Envelope and Instrument are not
    deleted by this function.

  Arguments

    Attachment                   Item number of the Attachment to delete.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    DeleteEnvelope(), AttachEnvelope()

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/detachsample##
DetachSample - Disconnects sample from instrument.

  Synopsis

    Err DetachSample( Item Attachment )

  Description

    This procedure disconnects a  sample from an instrument, deletes the
    attachment item connecting the two, and frees the attachment's
    resources.

  Arguments

    Attachment                   The item number of the attachment.

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    AttachSample(), SetAudioItemInfo(), LoadSample(), UnloadSample(),
    DebugSample(), CreateSample(), ScanSample(), GetAudioItemInfo()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/disconnectinstruments##
DisconnectInstruments - Disconnects one instrument from another.

  Synopsis

    Err DisconnectInstruments (Item SrcIns, char *SrcName, Item DstIns,
                               char *DstName)

  Description

    This procedure breaks a connection made by ConnectInstruments() between
    two instruments. If the connection was to a knob of the second
    instrument, the knob is once again available for tweaking.

  Arguments

    SrcIns                       Item number of the source instrument.

    SrcName                      Name of the output port of the source
                                 instrument to break connection from.

    DstIns                       Item number of the destination instrument.

    DstName                      Name of the input port of the destination
                                 instrument to break connection to.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    ConnectInstruments()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/disownaudioclock##
DisownAudioClock - Gives up ownership of the audio clock.

  Synopsis

    Err DisownAudioClock (Item Owner)

  Description

    This procedure is the inverse of OwnAudioClock() it relinquishes
    ownership of the audio clock. Once a task does not own the audio clock,
    it can't change the audio clock rate or be assured that another task
    doesn't change it.

  Arguments

    Owner                        Item number of ownership returned from
                                 OwnAudioClock().

  Return Value

    The procedure returns a non-negative value if successful or an error
    code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    OwnAudioClock()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/enableaudioinput##
EnableAudioInput - Enable Anvil audio input.

  Synopsis

    Err EnableAudioInput (int32 OnOrOff, TagArg *tagList)

    Err EnableAudioInputVA (int32 OnOrOff, uint32 tag1, ...)

  Description

    Enables or disables the use of audio input on systems that have audio
    input capability (e.g. Anvil systems) for the calling task. The DSP
    instrument directin.dsp requires that a successful call to enable audio
    input be made before that instrument can be loaded.

    Enable/Disable calls nest.

    If you turn on audio input, you do not not need to turn it off as part of
    your cleanup.

  Arguments

    OnOrOff                      Non-zero to enable, zero to disable.
                                 An enable count is maintained for each
                                 task so that you may nest calls to
                                 EnableAudioInput (TRUE, ...).

  Tags

    None

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V24.

  Caveats

    EnableAudioInput() only permits a NULL tag list pointer. Therefore,
    EnableAudioInputVA() always fails with AF_ERR_BADTAG.

  Associated Files

    audio.h

  See Also

    directin.dsp

##src/audio/audiofolio/dspp_instr.c::mpg/audiofolio/freeamplitude##
FreeAmplitude - Inverse of AllocAmplitude().

  Synopsis

    Err FreeAmplitude( int32 Amplitude )

  Description

    This procedure gives back amplitude allocated by AllocAmplitude().

  Arguments

    Amplitude                    Amount of amplitude given by
                                 AllocAmplitude().

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    AllocAmplitude()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/freeinstrument##
FreeInstrument - Frees an instrument and its resources allocated by
                 AllocInstrument().

  Synopsis

    Err FreeInstrument (Item InstrumentItem)

  Description

    This procedure frees an instrument allocated by AllocInstrument(), which
    frees the resources allocated for the instrument. If the instrument is
    running, it is stopped. All of the Attachments, Knobs, and Probes belonging
    to this Instrument are also deleted by this function. The Envelopes and
    Samples at the other end of Attachments are not deleted by this function.

    If you delete an instrument Template, all Instruments created using that
    Template are freed, so you don't need to use DeleteInstrument() on them.

    Do not confuse this function with UnloadInstrument(). If you create an
    Instrument using LoadInstrument(), you shouldn't use DeleteInstrument() to
    free the instrument because it will leave the instrument's Template loaded
    and without access to unload the Template. Use UnloadInstrument() instead.

    AllocInstrument() and FreeInstrument() are special cases of the more
    CreateInstrument() and DeleteInstrument(), which offer greater flexibility.

  Arguments

    InstrumentItem               The item number of the instrument to free.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    Library call implemented in audio.lib V20.

  Associated Files

    audio.h

  See Also

    AllocInstrument(), DeleteInstrument(), UnloadInstrument(), UnloadInsTemplate()

##src/audio/audiofolio/dspp_touch_anvil.c::mpg/audiofolio/getaudiocyclesused##
GetAudioCyclesUsed - !!!

  Synopsis

    int32 GetAudioCyclesUsed (void)

  Description

    !!! description!

  Arguments

    None

  Return Value

    !!!

  Implementation

    SWI implemented in audio folio V24.

  Associated Files

    audio.h

  See Also

    GetAudioFrameCount()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/getaudioduration##
GetAudioDuration - Asks for the current duration of an audio clock tick.

  Synopsis

    uint32 GetAudioDuration (void)

  Description

    This procedure asks for the current duration of an audio clock tick
    measured in DSP sample frames. The DSP runs at 44,100 Hz.

  Arguments

    None.

  Return Value

    Current audio clock duration expressed as the actual number of sample
    frames between clock interrupts.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    SignalAtTime(), GetAudioRate(), SetAudioDuration(), GetAudioFolioInfo()

##src/audio/audiofolio/audio_folio.c::mpg/audiofolio/getaudiofolioinfo##
GetAudioFolioInfo - Get system-wide audio settings.

  Synopsis

    Err GetAudioFolioInfo (TagArg *tagList)

  Description

    Queries audio folio for certain system-wide settings. It takes a
    tag list with the ta_Tag fields set to parameters to query and fills in the
    ta_Arg field of each TagArg with the parameter requested by that TagArg.

    For normal multiplayers, these settings are set to the described normal
    values during startup. Other kinds of hardware or execution environments
    (e.g. cable) may have different settings.

    None of these paramaters can be set directly by an application.

  Arguments

    tagList                      Pointer to tag list containing AF_TAG_ tags to
                                 query. The ta_Arg fields of each matched tag
                                 is filled in with the corresponding setting
                                 from the audio folio.

  Tags

    AF_TAG_SAMPLE_RATE           (frac16) Returns the DSP's sample rate in
                                 samples/second expressed as a 16.16 value.
                                 Normally this is 44,100 samples/second. For
                                 certain cable applications this can be 48,000
                                 samples/second.

                                 When the sample rate is something other than
                                 44,100, substitute this to everywhere in the
                                 audio documentation that specifies the sample
                                 rate as 44,100 samples/second. If your
                                 application needs to cope with variable DSP
                                 sample rate and you have need the sample rate
                                 for something, then you should read this value
                                 from here rather than hardcoding 44,100, or
                                 any other sample rate, into your code.

    AF_TAG_AMPLITUDE             (uint32) Returns the audio folio's master
                                 volume level. Normally this is 0x7fff.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

    Returns AF_ERR_BADTAG if this function is passed any tag that is not listed
    above.

  Additional Results

    Fills in the ta_Arg field of each matched TagArg in tagList with the
    corresponding setting from the audio folio.

  Implementation

    Folio call implemented in audio folio V24.

  Associated Files

    audio.h

  See Also

    GetAudioItemInfo()

##src/audio/audiofolio/dspp_touch_anvil.c::mpg/audiofolio/getaudioframecount##
GetAudioFrameCount - !!!

  Synopsis

    uint16 GetAudioFrameCount (void)

  Description

    !!! description!

  Arguments

    None

  Return Value

    !!!

  Implementation

    SWI implemented in audio folio V24.

  Associated Files

    audio.h

  See Also

    GetAudioCyclesUsed()

##src/audio/audiofolio/audio_folio.c::mpg/audiofolio/getaudioiteminfo##
GetAudioItemInfo - Gets information about an audio item.

  Synopsis

    Err GetAudioItemInfo (Item audioItem, TagArg *tagList)

  Description

    This procedure queries settings of several kinds of audio items. It takes a
    tag list with the ta_Tag fields set to parameters to query and fills in the
    ta_Arg field of each TagArg with the parameter requested by that TagArg.

    SetAudioItemInfo() can be used to set audio item parameters.

  Arguments

    audioItem                    Item number of an audio item to query.

    tagList                      Pointer to tag list containing AF_TAG_ tags to
                                 query. The ta_Arg fields of each matched tag
                                 is filled in with the corresponding setting
                                 from the audio item.

                                 See each audio Item pages for list of tags
                                 that are supported by each item type.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

    Returns AF_ERR_BADTAG if this function is passed any tag that is not listed
    above.

  Additional Results

    Fills in the ta_Arg field of each matched TagArg in tagList with the
    corresponding setting from the audio item.

  Implementation

    Folio call implemented in audio folio V20.

  Caveats

    Not all audio Item types support being queried in this way. Those that
    don't support it, return AF_ERR_UNIMPLEMENTED.

  Associated Files

    audio.h

  See Also

    SetAudioItemInfo(), Attachment, Cue, Envelope, Instrument, Knob, Probe,
    Sample, Template, Tuning

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/getaudiorate##
GetAudioRate - Asks for current audio clock rate.

  Synopsis

    frac16 GetAudioRate (void)

  Description

    This procedure returns the current clock rate in 16.16 fractional Hz,
    using fractions so that you can do more accurate timing calculations.

  Arguments

    None.

  Return Value

    The procedure returns the current audio rate as a frac16 value in Hz.

  Implementation

    Folio call implemented in audio folio V20.

  Examples

        // To convert the result of this function to ticks per second, use
        // ConvertF16_32().
    TicksPerSecond = ConvertF16_32 (GetAudioRate());

  Associated Files

    audio.h

  See Also

    SignalAtTime(), GetAudioDuration(), SetAudioRate()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/getaudiotime##
GetAudioTime - Queries current audio time.

  Synopsis

    AudioTime GetAudioTime (void)

  Description

    This procedure returns the current 32-bit audio time. This time comes
    from an interrupt from the DSP and typically increases at 240 Hz.

  Arguments

    None.

  Return Value

    The procedure returns the current audio time expressed in audio ticks.

  Implementation

    Folio call implemented in audio folio V20.

  Caveats

    Note that the audio clock rate can be changed by other tasks, so the
    audio time isn't guaranteed to be constant unless the task making this
    call takes ownership of the clock using OwnAudioClock(). Of course,
    owning the audio clock and hanging onto the lock forever causes any
    other task trying to the same to fail.

  Associated Files

    audio.h

  See Also

    SignalAtTime(), GetAudioRate(), GetAudioDuration(), OwnAudioClock(),
    GetAudioFolioInfo()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/getcuesignal##
GetCueSignal - Returns a signal mask for a cue.

  Synopsis

    int32 GetCueSignal (Item Cue)

  Description

    This procedure returns a signal mask containing the signal bit
    allocated for an audio Cue item. The mask can be passed to
    WaitSignal() so a task can enter wait state until a Cue completes.

  Arguments

    Cue                          Item number of Cue.

  Return Value

    The procedure returns a signal mask (a positive value) if successful
    or a non-positive value (0 or an error code) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Caveats

    This function has always returned 0 when a bad item is passed in. It
    should probably have returned AF_ERR_BADITEM, but will continue to
    return 0 for this case.

  Associated Files

    audio.h

  See Also

    SignalAtTime(), SleepUntilTime(), MonitorAttachment()

##src/audio/audiofolio/audio_knob.c::mpg/audiofolio/getknobname##
GetKnobName - Queries name of one of an Instrument's knob.

  Synopsis

    char *GetKnobName (Item Instrument, int32 KnobNumber)

  Description

    This procedure returns the name of one of the Knobs belonging to an
    Instrument. The Knob is selected by specifying an index between
    0 and NKnobs-1, where NKnobs is the # of Knobs the instrument has
    (see GetNumKnobs()). The name of the Knob can be used to grab that Knob.
    This function is useful if you don't already know the names of the Knobs
    belonging to an instrument (see the example ta_faders.c or patchdemo.c
    for example usage).

    If you already have a Knob Item, you can find out its name with
    GetAudioItemInfo().

  Arguments

    Instrument                   Item number of the instrument.

    KnobNumber                   Index number of a knob. Must be between
                                 0 and one less than the result of
                                 GetNumKnobs() for this instrument.

  Return Value

    The procedure returns a pointer to the name of the specified knob if
    successful or NULL if an error occurs. Note that this is not a memory
    allocation, but a pointer to system memory. You can read it, but you can't
    write it, free it, or change it in any way. This pointer becomes invalid
    after the Instrument's Template has been deleted.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    GetNumKnobs(), GrabKnob(), Knob

##src/audio/audiofolio/audio_knob.c::mpg/audiofolio/getnumknobs##
GetNumKnobs - Finds how many knobs an Instrument has.

  Synopsis

    int32 GetNumKnobs (Item Instrument)

  Description

    This procedure indicates how many knobs an instrument has.

  Arguments

    Instrument                   The item number of the instrument.

  Return Value

    The procedure returns the number of knobs if successful (a non-negative
    value: 0 means no knobs) or an error code (a negative value) if an error
    occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    GetKnobName(), GrabKnob(), Knob

##src/audio/audiofolio/audio_knob.c::mpg/audiofolio/grabknob##
GrabKnob - Gain direct access to one of an Instrument's knobs.

  Synopsis

    Item GrabKnob (Item Instrument, char *Name)

  Description

    This procedure creates a Knob item that provides a fast connection between
    a task and one of an Instrument's parameters. You can then call
    TweakKnob() or TweakRawKnob() to rapidly modify that parameter.

    See the Instrument Template pages for complete listings of each Instrument
    Templates knobs.

    Call ReleaseKnob() to relinquish access to this knob. All Knob Items
    grabbed for an Instrument are deleted when the Instrument is deleted.
    This can save you a bunch of calls to ReleaseKnob().

  Arguments

    Instrument                   The item number of the instrument.

    Name                         The name of the knob to grab. The knob
                                 name is matched case-insensitively.

  Return Value

    The procedure returns the item number of the Knob (a positive value) if
    successful or an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    ReleaseKnob(), TweakKnob(), TweakRawKnob(), GetKnobName(), GetNumKnobs(),
    Knob

##src/audio/audiofolio/audio_attachments.c::mpg/audiofolio/linkattachments##
LinkAttachments - Connects sample attachments for sequential playback.

  Synopsis

    Err LinkAttachments (Item Att1, Item Att2)

  Description

    This procedure specifies that the attachment Att2 will begin playing when
    attachment Att1 finishes. This is useful if you want to connect
    discontiguous sample buffers that are used for playing interleaved audio
    and video data. It is also a good way to construct big sound effects from
    a series of small sound effects.

    If Att1's sample has a sustain loop, but no release loop, you can follow
    this with a call to ReleaseAttachment (Att1, NULL) to smoothly transition
    to Att2.

    If Att1's sample has no loops, Att2 will automatically start as soon as
    Att1 completes (assuming that it has not completed prior to this function
    being called).

    If, after linking Att1 to Att2, StopAttachment() is called on Att1 before it
    finishes, Att2 will not be automatically started. StopAttachment() on Att1
    after it finishes has no effect.

    All link remains in effect for multiple calls to StartInstrument() or
    StartAttachment(). That is, if you call LinkAttachments (Att1, Att2),
    Att1 will flow into Att2 upon completion of Att1 for every subsequent
    call to StartAttachment (Att1, NULL) (or StartInstrument() on the instrument
    belonging to Att1) if Att1 would normally be automatically started by
    starting the instrument).

    An attachment (Att1) can link to no more than one attachment. An attachment
    (Att2) can be linked to multiple attachments. The most recent call to
    LinkAttachments() for Att1 takes precedence.

    The pair of Attachments passed to this function must satisfy all of these
    requirements:

    . Both Attachments must be Sample Attachments.

    . Both Attachments must be attached to the same Instrument.

    . Both Attachments must be attached to the same FIFO of that Instrument.

    Call LinkAttachments (Att1, 0) to remove a previous link from Att1.

    A link does not interfere with a Cue associated with an attachment.

    Deleting either Attachment, either Attachment's Sample, or the Instrument
    to which the Attachment belongs, breaks the link.

  Arguments

    Att1                         The item number for the attachment that is
                                 to finish. Must be a sample attachment.

    Att2                         The item number for the attachment that is
                                 to begin playing. Must be a Sample Attachment
                                 attached to the same FIFO on the same
                                 Instrument as Att1. Can be 0 to remove a link
                                 from Att1.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Caveats

    In order for Att2 to start, Att1 must either be currently playing or
    yet to be played. If it has already completed by the time of this call,
    Att2 will not be started. 

  Associated Files

    audio.h

  See Also

    StartAttachment(), ReleaseAttachment()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/loadinstemplate##
LoadInsTemplate - Loads template for creating instruments.

  Synopsis

    Item LoadInsTemplate (char *Name, Item AudioDevice)

  Description

    This procedure loads an instrument template from the specified file. Note
    that the procedure doesn't create an instrument from the instrument
    template. Call CreateInstrument() to create an Instrument from this Template.

    When you finish using the Template, call UnloadInsTemplate() to deallocate
    the template's resources.

  Arguments

    Name                         Name of the file containing the instrument
                                 template (e.g. "directout.dsp").

    AudioDevice                  Audio device Item for
                                 instrument template. 0 indicates the default audio
                                 device, the DSP, which is the only valid audio
                                 device item at the present time.

  Return Value

    The procedure returns a Template item number if successful (a positive
    value) or an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    UnloadInsTemplate(), CreateInsTemplate(), CreateInstrument(),
    LoadInstrument(), AttachSample(), AttachEnvelope()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/loadinstrument##
LoadInstrument - Loads Instrument and Template in one call.

  Synopsis

    Item LoadInstrument (char *Name, Item AudioDevice, uint8 Priority)

  Description

    This functions combines the actions of LoadInsTemplate() and
    CreateInstrument(), and returns the resulting Instrument item.

    Call UnloadInstrument() (not DeleteInstrument()) to free an Instrument
    created by this function. Calling DeleteInstrument() deletes the
    Instrument, but not the Template, leaving you with an unaccessible Template
    Item that you can't delete.

  Arguments

    Name                         Name of the file containing the instrument
                                 template.

    AudioDevice                  Audio device Item for instrument. 0 indicates
                                 the default audio
                                 device, the DSP, which is the only valid audio
                                 device item at the present time.

    Priority                     Determines order of execution in DSP. Set
                                 from 0 to 200. A typical value would be
                                 100. This also determines the priority over
                                 other instruments when voices are stolen for
                                 dynamic voice allocation.

  Return Value

    The procedure returns an Instrument item number (a positive value) if
    successful or an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    UnloadInstrument(), LoadInsTemplate(), CreateInstrument()

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/loadsample##
LoadSample - Loads an AIFF or AIFC sample from file.

  Synopsis

    Item LoadSample( char *Name )

  Description

    This procedure allocates task memory and creates a sample item there that
    contains the digital-audio recording from the specified file.  The file
    must be either an AIFF file or an AIFC file.  These can be created using
    almost any sound development tool including AudioMedia, Alchemy, CSound,
    and SoundHack.

    AIFC files contain compressed audio data.  These can be created from an
    AIFF file using the SquashSound MPW  tool from The 3DO Company.

    A single loop is supported for sustained repetitive waveforms.

    When you finish with the sample, you should call UnloadSample() to
    deallocate the resources.

  Arguments

    Name                         The name of the AIFF or AIFC file.

  Return Value

    The procedure returns an item number if successful or an error code (a
    negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    AttachSample(), DetachSample(), SetAudioItemInfo(), UnloadSample(),
    DebugSample(), CreateSample(), ScanSample(), GetAudioItemInfo(),
    LoadSampleHere()

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/loadsamplehere##
LoadSampleHere - Loads an AIFC sample from file into RAM allocated and
                 freed  by a custom procedure.

  Synopsis

    Item LoadSampleHere( char *Name, void*(*CustomAllocMem)(),
    void (*CustomFreeMem)() )

  Description

    This procedure, like LoadSample(), loads and creates a sample item in RAM
     from a sample stored in the specified file.  The major difference is that
    LoadSampleHere() allows a task to use its own memory allocation and
    deallocation calls to provide RAM for the sample.

    To use this task, you must provide a custom allocation procedure and a
    custom deallocation procedure and then specify them in the call.  When
    LoadSampleHere() executes, it passes these arguments to the allocation
    procedure:

    ( int32 NumBytes, uint32 MemType )

    The allocation call should should return a DataPtr to the allocated memory
    if successful or NULL if unsuccessful.

    When the sample is later unloaded using UnloadSample(), the deallocation
    procedure receives these arguments:

    ( ivoid *DataPtr, int32 NumBytes)

    The deallocation procedure must use these arguments to free the sample's
    memory.

  Arguments

    Name                         Name of an AIFF or AIFC file to be loaded.

    CustomAllocMem()             A custom memory-allocation procedure.

    CustomFreeMem()              A custom memory-freeing procedure.

  Return Value

    The procedure returns the item number of the sample if successful or an
    error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    AttachSample(), DetachSample(), SetAudioItemInfo(), UnloadSample(),
    DebugSample(), CreateSample(), ScanSample(), GetAudioItemInfo(),
    LoadSample()

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/makesample##
MakeSample - Makes a sample from memory (OBSOLETE)

  Synopsis

    Item MakeSample( uint32 NumBytes, TagArg *TagList )

  Description

    OBSOLETE - use CreateSample() instead.

    This procedure makes a sample without loading data from disk. It
    allocates a sample data buffer of the specified size and then defines that
    buffer as a sample using the parameters specified in the tag arg list. A
    task can write any data it cares to in the sample buffer; a sampled-sound
    instrument can then play that data from the buffer.

    When you finish with the sample, you should call UnloadSample() to
    deallocate its resources.

    See the SetAudioItemInfo() and the Music Programmer's Guide for a
    list of supported tags.

    See the test program ta_makesample.c for an example.

  Arguments

    NumBytes                     Amount of memory to be allocated. Set to
                                 zero if you already have a sample in memory
                                 that you want to define using this call.

    TagList                      A pointer to an array of tag arguments. The
                                 last element of the array must be the value
                                 TAG_END. If there are no tag arguments,
                                 this argument must be NULL. For a list of
                                 possible tag arguments for samples, see
                                 SetAudioItemInfo() and the description of
                                 MakeSample() in the Music Programmer's Guide.

  Return Value

    The procedure returns a Sample Item number (a positive value) if successful
    or an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Notes

    THIS FUNCTION IS CONSIDERED OBSOLETE. Use CreateSample() instead.

  Associated Files

    audio.h

  See Also

    UnloadSample(), CreateSample()

##src/audio/audiofolio/audio_attachments.c::mpg/audiofolio/monitorattachment##
MonitorAttachment - Monitors an attachment, sends a cue at a specified point.

  Synopsis

    Err MonitorAttachment (Item Attachment, Item Cue, int32 Index)

  Description

    This procedure sends a Cue to the calling task when the specified
    Attachment reaches the specified point. The procedure is often used
    with a sample Attachment to send a cue when the sample has been fully
    played.

    There can be only one Cue per Attachment. The most recent call to
    MonitorAttachment() takes precedence.

    To remove the current Cue from an Attachment, call
    MonitorAttachment (Attachment, 0, 0).

  Arguments

    Attachment                   The item number for the Attachment.

    Cue                          Item number for the Cue to be associated
                                 with this attachment. Can be 0 to remove
                                 a the current Cue from the Attachment.

    Index                        Value indicating the point to be monitored.
                                 At this time, the only value that can be
                                 passed is CUE_AT_END, which asks that a Cue be
                                 sent at the end of an Attachment.

                                 Index is ignored if Cue is 0.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    GetCueSignal(), StartAttachment(), LinkAttachments()
    WhereAttachment()

##src/audio/audiofolio/audio_folio.c::mpg/audiofolio/openaudiofolio##
OpenAudioFolio - Opens the audio folio.

  Synopsis

    Err OpenAudioFolio (void)

  Description

    This procedure connects a task to the audio folio and must be executed by
    each task before it makes any audio folio calls. If a task makes an audio
    folio call before it executes OpenAudioFolio(), the task fails.

    Call CloseAudioFolio() to relinquish a task's access to the audio folio.

  Arguments

    None

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    Library call implemented in audio.lib V20.

  Associated Files

    audio.h

  See Also

    CloseAudioFolio()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/ownaudioclock##
OwnAudioClock - Takes ownership of audio clock.

  Synopsis

    Item OwnAudioClock (void)

  Description

    This procedure takes ownership of the audio clock so that it can change
    the rate or so that no other task can change the clock rate during
    ownership, or both. The audio clock rate is set to a default of around
    240 Hz. Taking clock ownership without changing the rate ensures that no
    other task will change the rate, which assures a steady clock.

    Note that a task can't change the clock rate without owning the clock.

    Ownership can be relinquished with DisownAudioClock().

  Arguments

    None.

  Return Value

    The procedure returns the item number of a semaphore used to claim
    ownership of the clock if successful (a positive value). It returns
    an error code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Caveats

    Owning the audio clock and hanging onto the lock forever causes any
    other task trying to the same to fail.

  Associated Files

    audio.h

  See Also

    DisownAudioClock(), SetAudioRate(), SetAudioDuration(),
    GetAudioRate(), GetAudioDuration(), SignalAtTime(), GetAudioTime(),
    SleepUntilTime()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/pauseinstrument##
PauseInstrument - Pauses an instrument's playback.

  Synopsis

    Err PauseInstrument (Item Instrument)

  Description

    This procedure pauses an instrument during playback. A paused
    instrument ceases to play, but retains its position in playback so
    that it can resume playback at that point. ResumeInstrument() allows
    a paused instrument to continue its playback.

    This procedure is intended primarily for sampled-sound instruments,
    where a paused instrument retains its playback position within a
    sampled sound. PauseInstrument() and ResumeInstrument() used with
    sound-synthesis instruments may not have effects any different from
    StartInstrument() and StopInstrument().

    The paused state is superceded by a call to StartInstrument() or
    StopInstrument().

    !!! unsure if ReleaseInstrument() affects a paused instrument.

  Arguments

    Instrument                   The item number for the instrument.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  Caveats

    This procedure will not pause an envelope attached to an instrument. The
    envelope will continue to play while the instrument is paused.

  See Also

    ResumeInstrument(), StartInstrument(), StopInstrument(), ReleaseInstrument()

##src/audio/audiofolio/audio_probe.c::mpg/audiofolio/readprobe##
ReadProbe - Read the value of a Probe.

  Synopsis

    Err ReadProbe( Item ProbeItem, int32 *ValuePtr )

  Description

    Read the instantaneous value of an instrument output.

  Arguments

    ProbeItem                     Item number of the knob to be tweaked.

    ValuePtr                      Pointer to where to put result. Task
                                      must have write permission for that address.

  Return Value

    The procedure returns a non-negative value if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    SWI implemented in audio folio V24.

  Associated Files

    audio.h

  See Also

    CreateProbe(), DeleteProbe()

##src/audio/audiofolio/audio_attachments.c::mpg/audiofolio/releaseattachment##
ReleaseAttachment - Releases an attachment.

  Synopsis

    Err ReleaseAttachment (Item Attachment, TagArg *tagList)

    Err ReleaseAttachmentVA (Item Attachment, uint32 tag1, ...)

  Description

    This procedure releases an attachment and is commonly used to release
    attachments started with StartAttachment(). ReleaseAttachment() causes an
    attachment in a sustain loop to enter release phase. Has no effect on
    attachment with no sustain loop, or not in its sustain loop.

  Arguments

    Attachment                   The item number for the attachment.

  Tags

    None

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Caveats

    Prior to V24, ReleaseAttachment() did not support envelope attachments.

  Associated Files

    audio.h

  See Also

    StartAttachment(), StopAttachment(), LinkAttachments()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/releaseinstrument##
ReleaseInstrument - Instruct an instrument to begin to finish (Note Off).

  Synopsis

    Err ReleaseInstrument (Item Instrument, TagArg *tagList)

    Err ReleaseInstrumentVA (Item Instrument, uint32 tag1, ...)

  Description

    This tells an Instrument to progress into its "release phase" if it hasn't
    already done so. This is equivalent to a MIDI Note Off event. Any Samples
    or Envelopes that are attached are set to their release portion, which may
    or may not involve a release loop. The sound may continue to be produced
    indefinitely depending on the release characteristics of the instrument.

    This has no audible effect on instruments that don't have some kind of
    sustain loop (e.g. sawtooth.dsp).

    Affects only instruments in the AF_STARTED state: sets them to the
    AF_RELEASED state. By default if and when an instrument reaches the end of
    its release phase, it stays in the AF_RELEASED state until explicitly
    changed (e.g. StartInstrument(), StopInstrument()). If one of this
    Instrument's running Attachments has the AF_ATTF_FATLADYSINGS flag set, the
    Instrument is automatically stopped when that Attachment completes. In
    that case, the instrument goes into the AF_STOPPED state, or, if the
    Instrument has the AF_INSF_AUTOABANDON flag set, the AF_ABANDONED state.

    !!! not sure of the effect this has on a paused instrument

  Arguments

    Instrument                   The item number for the instrument.

  Tags

    AF_TAG_TIME_SCALE            (ufrac16) Scale times for
                                 all Envelopes attached to this Instrument.
                                 Original value is derived from the
                                 AF_TAG_TIME_SCALE provided when the Envelope
                                 Attachment was made. This value remains in
                                 effect until another AF_TAG_TIME_SCALE is
                                 passed to StartInstrument() or
                                 ReleaseInstrument().

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    StartInstrument(), StopInstrument(), PauseInstrument(),
    ResumeInstrument(), Instrument

##src/audio/audiofolio/audio_knob.c::mpg/audiofolio/releaseknob##
ReleaseKnob - Releases a knob grabbed with GrabKnob().

  Synopsis

    Err ReleaseKnob (Item KnobItem)

  Description

    This procedure deletes the Knob item created by GrabKnob(), freeing its
    resource and disconnecting the task that created the Knob item from the
    instrument containing the Knob.

  Arguments

    KnobItem                     Item number of knob.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    Library call implemented in audio.lib V20.

  Associated Files

    audio.h

  See Also

    GrabKnob()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/resumeinstrument##
ResumeInstrument - Resumes playback of a paused instrument.

  Synopsis

    Err ResumeInstrument (Item Instrument)

  Description

    This procedure resumes playback of an instrument paused using
    PauseInstrument(). A resumed instrument continues playback from the point
    where it was paused. It does not restart from the beginning of a note.

    This procedure is intended primarily for sampled-sound instruments, where
    a paused instrument retains its playback position within a sampled sound.
    PauseInstrument() and ResumeInstrument() used with sound-synthesis
    instruments may not have effects any different than StartInstrument() and
    StopInstrument().

    This function has no effect on an instrument that has been stopped
    or restarted after being paused.

  Arguments

    Instrument                   The item number for the instrument.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    PauseInstrument(), StartInstrument(), StopInstrument(), ReleaseInstrument()

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/scansample##
ScanSample - Loads a truncated sample file.

  Synopsis

    Item ScanSample( char *Name, int32 BufferSize )

  Description

    This procedure is similar to LoadSample(), but allocates only as much
    memory as specified by BufferSize.  It then loads as much of the sample
    data as will fit.  This is handy for loading the first part of a very
    large sound file that won't fit in memory.

  Arguments

    Name                         Name of an AIFF or AIFC file.

    BufferSize                   Amount of memory to allocate (in bytes).

  Return Value

    The procedure returns a Sample Item number if successful or an error code (a
    negative value) if an error occurs.

  Caveats                       
                       
    Any loop points in an AIFF or AIFC file beyond the BufferSize cause                   
    this function to return an error.
                       
  Implementation

    Folio call implemented in audio folio V20.
                       
  Associated Files

    audio.h

  See Also

    AttachSample(), DetachSample(), SetAudioItemInfo(), LoadSample(),
    UnloadSample(), DebugSample(), CreateSample(), GetAudioItemInfo()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/setaudioduration##
SetAudioDuration - Changes duration of audio clock tick.

  Synopsis

    Err SetAudioDuration (Item Owner, uint32 Frames)

  Description

    This procedure changes the rate of the audio clock by specifying a
    duration for the clock's tick. The clock is driven by a countdown
    timer in the DSP. When the DSP timer reaches zero, it increments the
    audio clock by one. The DSP timer is decremented at the sample rate
    of 44,100 Hz. Thus tick duration is given in units of sample frames.

    The current audio clock duration can be read with GetAudioDuration().

    You must own the audio clock before changing its rate or duration. See
    OwnAudioClock().

  Arguments

    Owner                        Item number of owner ID from
                                 OwnAudioClock().

    Duration                     Duration of one audio tick in sample
                                 frames at 44,100 Hz.

  Return Value

    The procedure returns a non-negative value if successful or an error
    code (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    OwnAudioClock(), GetAudioDuration(), SetAudioRate(), GetAudioRate(),
    SignalAtTime(), SleepUntilTime(), GetAudioFolioInfo()

##src/audio/audiofolio/audio_folio.c::mpg/audiofolio/setaudioiteminfo##
SetAudioItemInfo - Sets parameters of an audio item.

  Synopsis

    Err SetAudioItemInfo (Item audioItem, TagArg *tagList)

    Err SetAudioItemInfoVA (Item audioItem, uint32 tag1, ...)

  Description

    This procedure sets one or more parameters of an audio item. This is the
    only way to set parameters for an audio item. The parameters are
    determined by the tag arguments.

  Arguments

    audioItem                    Item number of an audio item to modify.

    tagList                      List of parameters to set. See each audio
                                 Item pages for list of tags that are supported
                                 by each item type.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Caveats

    If this function fails, the audio item you were modifying may have been
    partially modified and thus in an undefined state.

  Associated Files

    audio.h

  See Also

    GetAudioItemInfo(), Attachment, Cue, Envelope, Instrument, Knob, Probe,
    Sample, Template, Tuning

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/setaudiorate##
SetAudioRate - Changes the rate of the audio clock.

  Synopsis

    Err SetAudioRate (Item Owner, frac16 Rate)

  Description

    This procedure changes the rate of the audio clock. The default rate is
    240 Hz. The range of the clock rate is 60 to 1000 Hz.

    The current audio clock rate can be read with GetAudioRate().

    You must own the audio clock before changing the rate or duration. See
    OwnAudioClock().

  Arguments

    Owner                        Item number of owner ID from
                                 OwnAudioClock().

    Rate                         16.16 fractional rate value in Hz.
                                 Must be in the range of 60 Hz to 1000 Hz.

  Return Value

    The procedure returns a non-negative value if successful or an error
    code (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Caveats

    High clock rates may degrade system performance.

  Examples

    // Here is an example of changing the rate to 300 Hz (error checking
    // omitted for brevity).
    {
        Owner = OwnAudioClock();
        SetAudioRate (Owner, Convert32_F16 (300));
    }

  Associated Files

    audio.h

  See Also

    OwnAudioClock(), GetAudioRate(), SetAudioDuration(),
    GetAudioDuration(), SignalAtTime(), SleepUntilTime()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/signalattime##
SignalAtTime - Requests a wake-up call at a given time.

  Synopsis

    Err SignalAtTime (Item Cue, AudioTime Time)

  Description

    This procedure requests that a signal be sent to the calling item at the
    specified audio time. The cue item can be created using CreateCue().

    A task can get the cue's signal mask using GetCueSignal(). The task
    can then call WaitSignal() to enter wait state until the cue's signal
    is sent at the specified time.

    If you need to, you can call AbortTimerCue() to cancel the timer
    request before completion.

    See the test program "ta_timer.c" for a complete example.

  Arguments

    Cue                          Item number of a cue.

    Time                         The time at which to send a signal to the
                                 calling task.

  Return Value

    The procedure returns a non-negative value if successful or an error
    code (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    AbortTimerCue(), CreateCue(), GetCueSignal(), SleepUntilTime(),
    GetAudioRate()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/sleepaudioticks##
SleepAudioTicks - Enters wait state for a number of audio ticks (OBSOLETE)

  Synopsis

    Err SleepAudioTicks (int32 Ticks)

  Description

    This procedure puts the calling task in wait state for the specified
    number of ticks of the audio clock. If you use this procedure to
    schedule music events you'll regret it, because there will be creeping
    error in the absolute time. Use the cue-based procedures instead.

  Arguments

    Ticks                        The number of audio clock ticks to wait (at
                                 240 Hz or whatever the current rate is).

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Notes

    Use of this function is discouraged because it creates and deletes a
    cue, which wastes an Item number. Create your own Cue, keep it around,
    and use SleepUntilTime() instead.

  Associated Files

    audio.h

  See Also

    SleepUntilTime(), SignalAtTime(), CreateCue(), GetAudioRate()

##src/audio/audiofolio/audio_timer.c::mpg/audiofolio/sleepuntiltime##
SleepUntilTime - Enters wait state until a specified audio time.

  Synopsis

    Err SleepUntilTime (Item Cue, AudioTime Time)

  Description

    This procedure will not return until the specified audio time is reached.
    If that time has already passed, it will return immediately. If it needs
    to wait, your task will enter wait state so that it does not consume CPU
    time.

  Arguments

    Cue                          The item number of the cue.

    Time                         Audio time to wait for

  Return Value

    The procedure returns a non-negative value if successful or an error
    code (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Examples

        // If you want to wait for a specific number of ticks to go by,
        // you can get the current audio time from GetAudioTime() and
        // add your delay:
    SleepUntilTime (cue, GetAudioTime() + DELAYTICKS);

  Associated Files

    audio.h

  See Also

    SignalAtTime(), CreateCue(), GetCueSignal(), GetAudioTime(),
    GetAudioRate()

##src/audio/audiofolio/audio_attachments.c::mpg/audiofolio/startattachment##
StartAttachment - Starts an attachment.

  Synopsis

    Err StartAttachment (Item Attachment, TagArg *tagList)

    Err StartAttachmentVA (Item Attachment, uint32 tag1, ...)

  Description

    This procedure starts playback of an attachment, which may be an attached
    envelope or sample. This function is useful to start attachments that
    aren't started by StartInstrument() (e.g. attachments with the
    AF_ATTF_NOAUTOSTART flag set).

    An attachment started with StartAttachment() should be released with
    ReleaseAttachment() and stopped with StopAttachment() if necessary.

  Arguments

    Attachment                   The item number for the attachment.

  Tags

    None

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  Caveats

    Prior to V24, StartAttachment() did not support envelope attachments.

  See Also

    ReleaseAttachment(), StopAttachment(), LinkAttachments(),
    AttachSample(), AttachEnvelope()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/startinstrument##
StartInstrument - Begins playing an instrument (Note On).

  Synopsis

    Err StartInstrument (Item Instrument, TagArg *tagList)

    Err StartInstrumentVA (Item Instrument, uint32 tag1, ...)

  Description

    This procedure begins execution of an instrument. This typically starts a
    sound but may have other results, depending on the nature of the
    instrument. This call links the DSP code into the list of active
    instruments. If the instrument has Samples or Envelopes attached, they will
    also be started (unless the Attachments specify otherwise). This is
    equivalent to a MIDI "Note On" event.

    The Amplitude and Frequency knobs, of instruments that have such, can
    be tweaked by some of the tags listed below before the instrument is
    started. When none of the tags for a particular know are specified, that
    knob is left set to its previous value. At most one tag for each knob can
    be specified. Tags are ignored for Instruments without the corresponding
    knob. Knobs connected to the output of another Instrument
    (ConnectInstruments()), cannot be set in this manner. A Knob that has been
    grabbed, can however be set in this manner.

    This function puts the instrument in the AF_STARTED state. If the instrument
    was previous running, it is first stopped and then restarted. If the instrument
    has a sustain or release loop, it stays in the AF_STARTED state until the
    state is explicitly changed (e.g. ReleaseInstrument(), StopInstrument()).

    This function supercedes a call to PauseInstrument().

  Arguments

    Instrument                   The item number for the instrument.

  Tags

    Amplitude:

    AF_TAG_AMPLITUDE             (uint32) Value to set instrument's
                                 Amplitude knob. Valid range is 0..0x7fff.

    AF_TAG_VELOCITY              (uint32) MIDI note velocity
                                 indicating the value to set instrument's
                                 Amplitude knob. Valid range is 0..127.

    Frequency:

    AF_TAG_FREQUENCY             (ufrac16) Value to set Frequency knob
                                 to in 16.16 Hz.

    AF_TAG_PITCH                 (uint32) Value to set Frequency knob
                                 expressed as a MIDI note number. The range
                                 is 0 to 127; 60 is middle C. For multisample
                                 instruments, picks the sample associated with
                                 the MIDI pitch number.

    AF_TAG_RATE                  (uint32) Value to set Frequency knob
                                 to in instrument-specific frequency units
                                 (e.g. phase incrment, proportion of original
                                 sample rate).

    Other:

    AF_TAG_TIME_SCALE            (ufrac16) Scale times for
                                 all Envelopes attached to this Instrument.
                                 Original value is derived from the
                                 AF_TAG_TIME_SCALE provided when the Envelope
                                 Attachment was made. This value remains in
                                 effect until another AF_TAG_TIME_SCALE is
                                 passed to StartInstrument() or
                                 ReleaseInstrument().

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  Caveats

    Ideally this function should also use the MIDI note velocity specified
    by AF_TAG_VELOCITY to pick samples in a multisample (e.g. a pp piano
    sample versus a ff piano sound) based on AF_TAG_HIGHVELOCITY and
    AF_TAG_LOWVELOCITY sample settings. At present multisample selection
    ignores AF_TAG_HIGHVELOCITY and AF_TAG_LOWVELOCITY sample settings.
    This features cannot be added such that it would affect existing
    applications. If it were added, there would be some mechanism to enable it,
    for example a new tag for either Samples or StartInstrument().

  See Also

    ReleaseInstrument(), StopInstrument(), PauseInstrument(),
    ResumeInstrument(), Instrument

##src/audio/audiofolio/audio_attachments.c::mpg/audiofolio/stopattachment##
StopAttachment - Stops an attachment.

  Synopsis

    Err StopAttachment (Item Attachment, TagArg *tagList)

    Err StopAttachmentVA (Item Attachment, uint32 tag1, ...)

  Description

    This procedure abruptly stops an attachment. The attachment doesn't
    go into its release phase when stopped this way.

  Arguments

    Attachment                   The item number for the attachment.

  Tags

    None

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Caveats

    Prior to V24, StopAttachment() did not support envelope attachments.

  Associated Files

    audio.h

  See Also

    StartAttachment(), ReleaseAttachment(), LinkAttachments()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/stopinstrument##
StopInstrument - Abruptly stops an instrument.

  Synopsis

    Err StopInstrument (Item Instrument, TagArg *tagList)

    Err StopInstrumentVA (Item Instrument, uint32 tag1, ...)

  Description

    This procedure, which abruptly stops an instrument, is called when you
    want to abort the execution of an instrument immediately. This can cause
    a click because of its suddenness. You should use ReleaseInstrument() to
    gently release an instrument according to its release characteristics.

    Affects only instruments in the AF_STARTED or AF_RELEASED states: sets them
    to the AF_STOPPED state, or, if the Instrument has the AF_INSF_AUTOABANDON
    flag set, the AF_ABANDONED state.

    This function supercedes a call to PauseInstrument().

  Arguments

    Instrument                   The item number for the instrument.

  Tags

    None

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    StartInstrument(), ReleaseInstrument(), PauseInstrument(),
    ResumeInstrument(), Instrument

##src/audio/audiofolio/audio_folio.c::mpg/audiofolio/traceaudio##
TraceAudio - Turns specific audio diagnostics on or off (OBSOLETE)

  Synopsis

    uint32 TraceAudio (uint32 traceMask)

  Description

    Development versions of the audio folio have diagnostic information
    available which can be turned on or off with this function. To help 3DO
    Technical Support diagnose a bug, you may be asked to turn on certain TRACE_
    flags and send the result for interpretation.

    This function has no effect in production versions of the audio folio.

    Note that this is a system-wide setting. It affects all clients of the
    audio folio, not just the task that calls TraceAudio().

  Arguments

    traceMask                    Set of flags indicating which information
                                 should be on. A set flag turns on the
                                 corresponding trace feature, a cleared flag
                                 turns off the corresponding trace feature. 0
                                 turns off all tracing.

                                 See Flags section for complete description of
                                 each trace flag.

  Flags

    TRACE_ATTACHMENT             Trace an attachment.

    TRACE_DSP                    Trace DSP specific calls such as
                                 AllocAmplitude().

    TRACE_ENVELOPE               Trace an envelope.

    TRACE_INT                    Trace internal information.

    TRACE_ITEM                   Trace item creation and deletion.

    TRACE_KNOB                   Trace a knob.

    TRACE_NOTE                   Trace note playing.

    TRACE_OFX                    Trace parsing of DSP instrument files, DSP
                                 resource allocation, and so on.

    TRACE_SAMPLE                 Trace AIFF sample loading, and so on.

    TRACE_TIMER                  Trace a timer.

    TRACE_TOP                    Trace the parameters passed to, and returned
                                 from, most audio folio calls.

    TRACE_TUNING                 Trace a tuning.

  Return Value

    The procedure returns the previous trace mask setting.

  Implementation

    SWI implemented in audio folio V20.

  Examples

        // Turn on a few interesting things
    TraceAudio (TRACE_TOP | TRACE_INT | TRACE_KNOB);

        // Turn off all tracing
    TraceAudio (0);

  Caveats

    Given that this is a system-wide setting that any task can set at any time,
    it really isn't possible to use the return value of this function to create
    a stack of previous settings. As soon as more than one task starts setting
    TraceAudio(), the stack would be invalid.

    As of V24, this function has no longer has any effect.

  Associated Files

    audio.h

##src/audio/audiofolio/audio_tuning.c::mpg/audiofolio/tuneinstemplate##
TuneInsTemplate - Applies the specified tuning to an instrument template.

  Synopsis

    Err TuneInsTemplate( Item InsTemplate, Item Tuning )

  Description

    This procedure applies the specified tuning to the specified instrument
    template.  When an instrument is created using the template, the tuning is
    applied to the new instrument.  When notes are played on the instrument,
    they play using the specified tuning system.

    The tuning is created using CreateTuning().

  Arguments

    InsTemplate                  The item number of the template.

    Tuning                       The item number of the tuning.

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    CreateTuning(), TuneInstrument(), DeleteTuning()

##src/audio/audiofolio/audio_tuning.c::mpg/audiofolio/tuneinstrument##
TuneInstrument - Applies the specified tuning to an instrument.

  Synopsis

    Err TuneInstrument( Item Instrument, Item Tuning )

  Description

    This procedure applies the specified tuning (created using CreateTuning())
    to an instrument so that notes played on the instrument use that tuning.
    If no tuning is specified, the default 12-tone equal-tempered tuning is
    used.

  Arguments

    Instrument                   The item number of the instrument.

    Tuning                       The item number of the tuning.

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    CreateTuning(), TuneInsTemplate(), DeleteTuning()

##src/audio/audiofolio/audio_knob.c::mpg/audiofolio/tweakknob##
TweakKnob - Changes the value of a knob.

  Synopsis

    Err TweakKnob (Item KnobItem, int32 Value)

  Description

    This procedure sets the value of a knob that is attached to an instrument.
    The value is clipped to the allowable range. This has been optimized to
    allow rapid modulation of sound parameters.

    This function differs from TweakRawKnob() in that the value passed to this
    funciton goes through knob-specific conversion. For example, typically
    frequency knobs are controlled with a frac16 Hz value with this function,
    and with a phase increment value with TweakRawKnob(). For many other knobs,
    the conversion is trivial: TweakRawKnob() and TweakKnob() yield the same
    results.

    The current raw value of the Knob can be read by GetAudioItemInfo() using
    the AF_TAG_CURRENT_VALUE tag. There is no inverse conversion function,
    however, to convert back to the units supplied to TweakKnob().

    If this knob is connected to the output of another instrument via
    ConnectInstruments(), the tweaked value is ignored until that connection
    is broken.

  Arguments

    KnobItem                     Item number of the knob to be tweaked.

    Value                        The new value for that knob.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    TweakRawKnob(), GrabKnob(), Knob

##src/audio/audiofolio/audio_knob.c::mpg/audiofolio/tweakrawknob##
TweakRawKnob - Changes the value of a knob using a raw value.

  Synopsis

    Err TweakRawKnob (Item KnobItem, int32 Value)

  Description

    This procedure sets the value of a Knob that is attached to an Instrument.
    This procedure bypasses any knob-specific (e.g. frequency-to-raw-value)
    conversion that is done in TweakKnob(), and instead provides the value
    directly used by the instrument. This saves a simple operation in
    execution, which is useful if a task uses a stream of tweaking commands.

    The current raw value of the Knob can be read by GetAudioItemInfo() using
    the AF_TAG_CURRENT_VALUE tag.

    If this knob is connected to the output of another instrument via
    ConnectInstruments(), the tweaked value is ignored until that connection
    is broken.

  Arguments

    KnobItem                     Item number of the knob to be tweaked.

    Value                        The new raw value for that knob.

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    SWI implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    TweakKnob(), GrabKnob(), Knob

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/unloadinstemplate##
UnloadInsTemplate - Unloads an instrument template.

  Synopsis

    Err UnloadInsTemplate (Item InsTemplate)

  Description

    This procedure unloads (or deletes) an instrument template created by
    CreateInsTemplate(), LoadInsTemplate(), and DefineInsTemplate(). It unloads
    the Template from memory and frees its resources. Any Instruments created
    using the Template are deleted as well, with the expected side-effects.
    Any Attachments made to this Template are also deleted.

    Unlike DeleteInstrument(), any Envelopes or Samples attached to this
    Template are also deleted, along with the expected side-effects. If you
    need to protect the Envelopes or Attachments, detach them from the Template
    first.

  Arguments

    InsTemplate                  Item number of Template to delete.

  Return Value

    The procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Caveats

    Ideally there should be a DeleteInsTemplate() function, but there isn't one
    yet. Sorry for any confusion that might arise from pairing
    CreateInsTemplate() or DefineInsTemplate() with UnloadInsTemplate().

  Associated Files

    audio.h

  See Also

    CreateInsTemplate(), LoadInsTemplate(), DefineInsTemplate()

##src/audio/audiofolio/audio_instr.c::mpg/audiofolio/unloadinstrument##
UnloadInstrument - Unloads an instrument loaded with LoadInstrument().

  Synopsis

    Err UnloadInstrument (Item Instrument)

  Description

    This procedure frees the Instrument and unloads the Template loaded by
    LoadInstrument().

    Do not confuse this function with DeleteInstrument(), which deletes an
    Instrument created by CreateInstrument(). Calling DeleteInstrument() for an
    instrument created by LoadInstrument() deletes the Instrument, but not the
    Template, leaving you with an unaccessible Template Item that you can't
    delete. Calling UnloadInstrument() for and Instrument created by
    CreateInstrument() deletes Template for that Instrument along with all
    other Instruments created from that Template.

  Arguments

    Instrument                   Item number of the instrument.

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    LoadInstrument(), DeleteInstrument(), UnloadInsTemplate()

##src/audio/audiofolio/audio_samples.c::mpg/audiofolio/unloadsample##
UnloadSample - Deletes a sample and frees its resources.

  Synopsis

    Err UnloadSample( Item SampleItem )

  Description

    This procedure deletes a sample from memory, freeing its resources.  If
    the sample was created using a custom memory-allocation call,
    UnloadSample() calls a corresponding custom memory-deallocation call to
    free the sample's memory.

  Arguments

    SampleItem                   Item number of sample to delete.

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Folio call implemented in audio folio V20.

  Associated Files

    audio.h

  See Also

    AttachSample(), DetachSample(), SetAudioItemInfo(), LoadSample(),
    DebugSample(), CreateSample(), ScanSample(), GetAudioItemInfo()

##src/audio/audiofolio/audio_attachments.c::mpg/audiofolio/whereattachment##
WhereAttachment - Returns the current playing location attachment.

  Synopsis

    int32 WhereAttachment (Item Attachment)

  Description

    This procedure is useful for monitoring the progress of a sample or
    envelope that's being played. It returns a value indicating where playback
    is located in the attachment's sample or envelope. For sample attachments,
    returns the currently playing byte offset of within the sample. For
    envelope attachments, returns the currently playing segment index.

    A sample's offset starts at zero. Note that the offset is not measured in
    sample frames. You must divide the byte offset by the number of bytes per
    frame, then discard the remainder to find out which frame is being played.

  Arguments

    Attachment                   Item number of the attachment.

  Return Value

    Non-negative value indicating position (byte offset of sample or
    segment index of envelope) on success, negative error code on failure.

  Implementation

    SWI implemented in audio folio V20.

  Caveats

    If a sample attachment has finished, the return value may be negative, or
    greater than the length of the sample. This is because the DMA hardware is
    pointing to a different sample.

  Associated Files

    audio.h

  See Also

    MonitorAttachment()

##src/audio/dsp/add.ins::mpg/dsp/add.dsp##
add.dsp - Add 2 signals together.

  Function

    This instrument performs a signed addition between its two inputs. The result
    is clipped into range.

  Knobs

    InputA

    InputB

  Outputs

    Output                          Clipped sum of InputA and InputB.

  Resources

    Ticks: 6

    Code: 6 words

  Implementation

    V24

  See Also

    multiply.dsp, subtract.dsp, timesplus.dsp

##src/audio/dsp/adpcmhalfmono.ins::mpg/dsp/adpcmhalfmono.dsp##
adpcmhalfmono.dsp - Play a compressed4 bit Intel/DVI format sample at half
                    rate.

  Function

    This instrument plays a sample that has been previously compressed to a 4
    bit Intel/DVI format.  Run the soundhack program to compress a sound
    sample from 16 bits to 4 bits (Intel/DVI format).  This instrument uses
    the decodeadpcm.dsp library routine which must be loaded as an instrument
    prior to using this instrument.  This instrument plays a sample that was
    recorded at 22050 Hertz, playing it back at 44100 Hertz with interpolated
    values between samples to keep the sampled sound's original pitch and
    duration.

  Knobs

    Amplitude  - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks=103

    N memory = 71 words

##src/audio/dsp/adpcmmono.ins::mpg/dsp/adpcmmono.dsp##
adpcmmono.dsp - Play a compressed4-bit Intel/DVI format sample.

  Function

    This instrument plays a sample that has been previously compressed to a
    4-bit Intel/DVI format.  Run the SoundHack program to compress a sound
    sample from 16 bits to 4 bits (Intel/DVI format).  This instrument plays
    this compressed sample, and it uses the decodeadpcm.dsp library routine to
    do the necessary decompression.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks=91

    N memory = 51 words

##src/audio/dsp/adpcmvarmono.ins::mpg/dsp/adpcmvarmono.dsp##
adpcmvarmono.dsp - Play a variable-rate compressed 4-bit Intel/DVI format sample.

  Function

    This instrument plays a variable rate sample that has been previously compressed to a
    4-bit Intel/DVI format.  Run the SoundHack program to compress a sound
    sample from 16 bits to 4 bits (Intel/DVI format).  This instrument plays
    this compressed sample, and it uses the decodeadpcm.dsp library routine to
    do the necessary decompression.

  Knobs

    Frequency                       Frequency in fixed point phase increment in the range of 0..$8000. 
                                    $8000 equals the normal sample rate, with 1 sample per frame. 
                                    Defaults to $2000 which is 1/4 normal rate.

    Amplitude                       0..$7FFF. Defaults to $7FFF.

  Outputs

    Output

  Input FIFOs

    InFIFO

  Resources

    Ticks: 108

    Code: 70 words

  Implementation

    V24

  Notes

    Unlike other sample player instruments this one doesn't  
    support playing the sample above the system sample rate.

  See Also

    adpcmmono.dsp, decodeadpcm.dsp, dcsqxdvarmono.dsp, sampler.dsp 

##src/audio/dsp/benchmark.ins::mpg/dsp/benchmark.dsp##
benchmark.dsp - Output is current Tick count.

  Function

    Output is current Tick count.  Used by ta_faders.c for more
    accurate benchmarking of DSP.

    !!! a bit more description, please.

  Outputs

    Output                          Current tick count.

  Resources

    Ticks: 6

    Code: 6 words

  Implementation

    V24

##src/audio/dsp/dcsqxdhalfmono.ins::mpg/dsp/dcsqxdhalfmono.dsp##
dcsqxdhalfmono.dsp - Play a square/xact/delta/monocompressed 22,050 hertz
                     sample.

  Function

    This instrument plays a square/xact/delta/monocompressed sample at a fixed
    rate.  This is a 2:1 compression.  The compression is done by SquashSnd or
    SoundHack.   This instrument plays a sample that was recorded at 22,050
    hertz, playing it back at 44,100 hertz with interpolated values between
    samples to keep the sampled sound's original pitch and duration.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 62

    N memory = 64 words

##src/audio/dsp/dcsqxdhalfstereo.ins::mpg/dsp/dcsqxdhalfstereo.dsp##
dcsqxdhalfstereo.dsp - Play a square/xact/delta/stereocompressed 22,050
                       hertz sample.

  Function

    This instrument plays a square/xact/delta/stereocompressed sample at a
    fixed rate.  This is a 2:1 compression.  The compression is done by
    SquashSnd or SoundHack.   This instrument plays a sample that was recorded
    at 22,050 hertz, playing it back at 44,100 hertz with interpolated values
    between samples to keep the sampled sound's original pitch and
    duration.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    LeftOutput

    RightOutput

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 107

    N memory = 92 words

##src/audio/dsp/dcsqxdmono.ins::mpg/dsp/dcsqxdmono.dsp##
dcsqxdmono.dsp - Play a square/xact/delta/monocompressed sample.

  Function

    This instrument plays a square/xact/delta/monocompressed sample at a fixed
    rate.  This is a 2:1 compression.  The compression is done by SquashSnd or
    SoundHack.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 42

    N memory = 42 words

##src/audio/dsp/dcsqxdstereo.ins::mpg/dsp/dcsqxdstereo.dsp##
dcsqxdstereo.dsp - Play a square/xact/delta/stereocompressed sample.

  Function

    This instrument plays a square/xact/delta/stereocompressed sample at a
    fixed rate.  This is a 2:1 compression.  The compression is done by
    SquashSnd or SoundHack.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    LeftOutput

    RightOutput

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 61

    N memory = 66 words

##src/audio/dsp/dcsqxdvarmono.ins::mpg/dsp/dcsqxdvarmono.dsp##
dcsqxdvarmono.dsp - Play a variable-rate  square/xact/delta/mono compressed sample.

  Function

    This instrument plays a square/xact/delta/mono compressed sample at a variable
    rate.  This is a 2:1 compression.  The compression is done by SquashSnd or
    SoundHack.

  Knobs

    Frequency                       Frequency in fixed point phase increment in the range of 0..$8000. 
                                    $8000 equals the normal sample rate, with 1 sample per frame. 
                                    Defaults to $2000 which is 1/4 normal rate.

    Amplitude                       0..$7FFF. Defaults to $7FFF.

  Outputs

    Output

  Input FIFOs

    InFIFO

  Resources

    Ticks: 59

    Code: 56 words

  Implementation

    V24

  Notes

    Unlike other sample player instruments this one doesn't  
    support playing the sample above the system sample rate.

  See Also

    dcsqxdmono.dsp, adpcmvarmono.dsp, sampler.dsp 

##src/audio/dsp/decodeadpcm.ins::mpg/dsp/decodeadpcm.dsp##
decodeadpcm.dsp - Decompress a 4-bit Intel/DVI format  sample.

  Function

    This instrument is the adaptive delta pulse code modulation library
    routine.  It is used internally when it is called by other adpcm routines
    to implement the decompression of 4-bit samples.  Load this instrument by
    running the program, supportadpcm.

    Sound samples are compressed from 16-bit samples to 4-bit samples using
    the SoundHack program.   These 4- bit samples are in the standard
    Intel/DVI format.  This library routine decompresses the 4-bit samples so
    that they can be played by other adpcm instruments.

  Knobs

    None

  Inputs

    None

  Outputs

    In accumulator

  Input FIFOs

    None

  Output FIFOs

    None

  Resource

    Ticks = 0

    N memory = 51 words

##src/audio/dsp/deemphcd.ins::mpg/dsp/deemphcd.dsp##
deemphcd.dsp - DSP Instrument for CD de-emphasis

  Function

    This filter is a standard "feed-forward, feed-back" filter designed by
    Ayabe-san of MEI for CD de-emphasis.

  Inputs

    Input

  Outputs

    Output

  Resources

    Ticks: 19

    Code: 17 words

  Implementation

    V20

##src/audio/dsp/delay1tap.ins::mpg/dsp/delay1tap.dsp##
delay1tap.dsp - Simple 1 tap delay.

  Function

    This instrument writes samples to an output, then reads them back on
    another FIFO and mixes them.  It has a separate "effects send" mix
    and an output mix.  It can only write to special samples created using
    CreateDelayLine().

  Knobs

    Tap0Send  - -$-8000  =>  $7FFF, default = $-4000, = amount of
    delayed signal to send back.  This controls the amount of recirculation or
    feedback.  Negative is best because it reduces DC drift.

    OriginalSend  - -$-8000  =>  $7FFF, default = $-3FFF = amount of
    original signal to send to delay line.

    Tap0Mix  - -$-8000  =>  $7FFF, default = $-4000, = amount of
    delayed signal to send to output.

    OriginalMix  - -$-8000  =>  $7FFF, default = $-3FFF = amount of
    original signal to send output.

  Inputs

    Input

  Outputs

    Output

  Input FIFOs

    Tap0

  Output FIFOs

    OutFIFO

  Resources

    Ticks = 16

    N memory = 16 words

##src/audio/dsp/delaymono.ins::mpg/dsp/delaymono.dsp##
delaymono.dsp - Write input to an output FIFO.

  Function

    This instrument writes input to an output FIFO.  It is used as a building
    block for reverbation and echo effects.  It can only write to special
    samples created using CreateDelayLine().

  Knobs

    None

  Inputs

    Input

  Outputs

    None

  Input FIFOs

    None

  Output FIFOs

    OutFIFO

  Resource

    Ticks = 8

    N memory = 8 words

##src/audio/dsp/delaystereo.ins::mpg/dsp/delaystereo.dsp##
delaystereo.dsp - Write stereo input to an output FIFO.

  Function

    This instrument writes input to an output FIFO.  It is used as a building
    block for reverbation and echo effects.  It can only write to special
    samples created using CreateDelayLine().

  Knobs

    None

  Inputs

    InputLeft
    InputRight

  Outputs

    None

  Input FIFOs

    None

  Output FIFOs

    OutFIFO

  Resource

    Ticks = 12

    N memory = 10 words

##src/audio/dsp/directin.ins::mpg/dsp/directin.dsp##
directin.dsp - Get audio input.

  Function

    Outputs the stereo Audio Input signal in Anvil hardware.

    Each task that intends to use this instrument must successfully enable audio input
    EnableAudioInput() before the instrument can be loaded.

    Any number of instances of directin.dsp can be used without interraction.

  Outputs

    LeftOutput

    RightOutput

  Resources

    Ticks: 6

    Code: 6 words

  Implementation

    V23

  See Also

    directout.dsp, audiofolio/EnableAudioInput()

##src/audio/dsp/directout.ins::mpg/dsp/directout.dsp##
directout.dsp - Mix stereo pair with DAC output.

  Function

    Mixes stereo pair with the output of other directout or mixer instruments.
    The result is sent to the DAC.

  Knobs

    None

  Inputs

    InputLeft

    InputRight

  Outputs

    None

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 8

    N memory = 8 words

##src/audio/dsp/envelope.ins::mpg/dsp/envelope.dsp##
envelope.dsp - Interpolate a segment of an envelope.

  Function

    This instrument is used by the audio folio to produce multisegmented
    envelopes.  The main CPU passes each segment to this DSP instrument, which
    interpolates the values between the envelope points.  This can be used to
    produce contours to smoothly control amplitude or other parameters.  See
    the audio folio function CreateEnvelope() and the example program
    ta_envelope.c.  The knobs are controlled internally by the audio folio to
    produce the desired effect.

    You can also use this instrument by itself to generate ramp functions.

  Knobs

    Env.request - -$8000  =>  $7FFF = target value

    Env.incr - 0 => $7FFF, default = $0010. = how fast to get there.

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 22

    N memory = 23 words

##src/audio/dsp/envfollower.ins::mpg/dsp/envfollower.dsp##
envfollower.dsp - Track the contour of a signal.

  Function

    This instrument tracks the positive peaks of an input signal.  It decays
    exponentially based on the droop factor.  It outputs a fairly smooth
    signal that can be used to control other signals.

  Knobs

    Droop  - -$0 =>  $7FFF, default = $7FF0 = number to multiply
    previous result by to generate exponential decay.  Higher numbers give
    slower decay.

  Inputs

    Input

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 15

    N memory = 15 words

##src/audio/dsp/filterednoise.ins::mpg/dsp/filterednoise.dsp##
filterednoise.dsp - Generate filtered noise.

  Function

    This instrument passes white noise through the state variable filter.  It
    is useful for wind sounds, or other whooshing sounds.

  Knobs

    Frequency- currently nonlinear, 0=> $4000, default $2000

    Resonance - 1 / Q,  0 => $6000, default $1000

    Amplitude- 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 22

    N memory = 22 words

##src/audio/dsp/fixedmono8.ins::mpg/dsp/fixedmono8.dsp##
fixedmono8.dsp - Play a monophonic 8-bit sample at 44,100 hertz.

  Function

    This instrument plays a monophonic 8-bit sample at a 44,100 hertz.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 23

    N memory = 21 words

##src/audio/dsp/fixedmonosample.ins::mpg/dsp/fixedmonosample.dsp##
fixedmonosample.dsp - Play a monophonic 16-bit sample at 44,100 hertz.

  Function

    This instrument plays a monophonic 16-bit sample at a 44,100 hertz.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 6

    N memory = 6 words

##src/audio/dsp/fixedstereo16swap.ins::mpg/dsp/fixedstereo16swap.dsp##
fixedstereo16swap.dsp - Play a stereo  sample with byte swap.

  Function

    This instrument plays a stereophonic sample at a 44,100 hertz.  The audio
    CD player uses it to swap the bytes as they come off the Red Book CD.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    LeftOutput

    RightOutput

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 46

    N memory = 38 words

##src/audio/dsp/fixedstereo8.ins::mpg/dsp/fixedstereo8.dsp##
fixedstereo8.dsp - Play a stereophonic 8-bit sample at 44,100 hertz.

  Function

    This instrument plays a stereophonic 8-bit sample at a 44,100 hertz.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    LeftOutput

    RightOutput

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 15

    N memory = 15 words

##src/audio/dsp/fixedstereosample.ins::mpg/dsp/fixedstereosample.dsp##
fixedstereosample.dsp - Play a stereophonic sample at 44,100 hertz.

  Function

    This instrument plays a stereophonic sample at a 44,100 hertz.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    LeftOutput

    RightOutput

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 10

    N memory = 10 words

##src/audio/dsp/halfmono8.ins::mpg/dsp/halfmono8.dsp##
halfmono8.dsp - Play a monophonic 8- bit sample at 22,050 hertz.

  Function

    This instrument plays a monophonic 8-bit sample recorded at 22,050 hertz.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 38

    N memory = 49 words

##src/audio/dsp/halfmonosample.ins::mpg/dsp/halfmonosample.dsp##
halfmonosample.dsp - Play a monophonic sample at 22,050 hertz.

  Function

    This instrument plays a monophonic sample recorded at 22,050 hertz.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Resource

    Ticks = 21

    N memory = 23 words

##src/audio/dsp/halfstereo8.ins::mpg/dsp/halfstereo8.dsp##
halfstereo8.dsp - Play a stereo 8-bit sample at 22,050 hertz.

  Function

    This instrument plays a stereo 8-bit sample recorded at 22,050 hertz.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    LeftOutput

    RightOutput

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 37

    N memory = 45 words

##src/audio/dsp/halfstereosample.ins::mpg/dsp/halfstereosample.dsp##
halfstereosample.dsp - Play a stereophonic sample at 22050 Hertz.

  Function

    This instrument plays a stereophonic sample at 22050 Hertz.

  Knobs

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    LeftOutput

    RightOutput

  Input FIFOS

    InFIFO

  Output FIFOS

    None

  Resources

    Ticks = 36

    N memory = 44 words

##src/audio/dsp/head.ins::mpg/dsp/head.dsp##
head.dsp - Writes to DACs and generates audio clock.

  Function

    This instrument writes to the DACs and generates interrupts for the audio
    timer.  It is only used internally and is included here for completeness.

  Knobs

    None

  Inputs

    None

  Outputs

    None

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 29

    N memory = 32 words

##src/audio/dsp/impulse.ins::mpg/dsp/impulse.dsp##
impulse.dsp - Impulse waveform generator.

  Function

    This instrument is a simple impulse generator.  The output is either zero
    or the Amplitude value.  The width of the impulse is one sample.  This is
    useful for pinging filters.

  Knobs

    Frequency  - 0 => $7FFF, default = $300 = raw frequency.  If you
    call TweakRawKnob() the units are phase increments, If you call
    TweakKnob() the units are 16.16 fractional Hertz.

    Amplitude  - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 14

    N memory = 12 words

##src/audio/dsp/maximum.ins::mpg/dsp/maximum.dsp##
maximum.dsp - Pick the maximum of two input signals.

  Function

    Outputs the larger of InputA and InputB. This can be used for clipping.

    By connecting Output to InputB, you can measure a historical maximum.
    In this configuration, StartInstrument() can be used to reset the
    historical maximum.

    Input values are signed as usual.

  Knobs

    InputA

    InputB

  Outputs

    Output                          MAX(InputA,InputB)

  Resources

    Ticks: 12

    Code: 11 words

  Implementation

    V24

  See Also

    minimum.dsp, add.dsp

##src/audio/dsp/minimum.ins::mpg/dsp/minimum.dsp##
minimum.dsp - Pick the minimum of two input signals.

  Function

    Outputs the smaller of InputA and InputB. This can be used for clipping.

    By connecting Output to InputB, you can measure a historical minimum.
    In this configuration, StartInstrument() can be used to reset the
    historical maximum.

    Input values are signed as usual.

  Knobs

    InputA

    InputB

  Outputs

    Output                          MIN(InputA,InputB)

  Resources

    Ticks: 12

    Code: 11 words

  Implementation

    V24

  See Also

    maximum.dsp, add.dsp

##src/audio/dsp/mixer12x2.ins::mpg/dsp/mixer12x2.dsp##
mixer12x2.dsp - Twelve-channel stereo mixer.

  Function

    This is a twelve-channel stereo mixer.  The total gain on a side should
    not exceed $7FFF.  Its output is added to the ouput of the other mixers,
    then sent to the DAC by head.dsp.

  Knobs

    LeftGain0 - 0  ->  $7FFF

    LeftGain1 - 0  ->  $7FFF

    ...and so on up to...

    LeftGain10 - 0  ->  $7FFF

    LeftGain11 - 0  ->  $7FFF

    RightGain0 - 0  ->  $7FFF

    RightGain1 - 0  ->  $7FFF

    ...and so on up to...

    RightGain10 - 0  ->  $7FFF

    RightGain11 - 0  ->  $7FFF

  Inputs

    Input0

    Input1

    ...and so on up to...

    Input10

    Input11

  Outputs

    None

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 80

    N memory = 80 words

##src/audio/dsp/mixer2x2.ins::mpg/dsp/mixer2x2.dsp##
mixer2x2.dsp - Two-channel stereo mixer.

  Function

    This is a two-channel stereo mixer.  The total gain on a side should not
    exceed $7FFF.  Its output is added to the ouput of the other mixers, then
    sent to the DAC by head.dsp.

  Knobs

    LeftGain0                       In the range of 0..$7FFF.

    LeftGain1                       In the range of 0..$7FFF.

    RightGain0                      In the range of 0..$7FFF.

    RightGain1                      In the range of 0..$7FFF.

  Inputs

    Input0

    Input1

  Resources

    Ticks: 20

    Code: 20 words

  Implementation

    V20

  See Also

    mixer4x2.dsp, submixer2x2.dsp, directout.dsp

##src/audio/dsp/mixer4x2.ins::mpg/dsp/mixer4x2.dsp##
mixer4x2.dsp - Four-channel stereo mixer.

  Function

    This is a four-channel stereo mixer.  The total gain on a side should not
    exceed $7FFF.  Its output is added to the ouput of the other mixers, then
    sent to the DAC by head.dsp.

  Knobs

    LeftGain0 - 0  ->  $7FFF

    LeftGain - 0  ->  $7FFF

    LeftGain2 - 0  ->  $7FFF

    LeftGain3 - 0  ->  $7FFF

    RightGain0 - 0  ->  $7FFF

    RightGain1 - 0  ->  $7FFF

    RightGain2 - 0  ->  $7FFF

    RightGain3 - 0  ->  $7FFF

  Inputs

    Input0

    Input1

    Input2

    Input3

  Outputs

    None

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 32

    N memory = 32 words

##src/audio/dsp/mixer8x2.ins::mpg/dsp/mixer8x2.dsp##
mixer8x2.dsp - Eight-channel stereo mixer.

  Function

    This is an eight-channel stereo mixer.  The total gain on a side should
    not exceed $7FFF. Its output is added to the ouput of the other mixers,
    then sent to the DAC by head.dsp.

  Knobs

    LeftGain0 - 0  ->  $7FFF

    LeftGain1 - 0  ->  $7FFF

    ...and so on up to...

    LeftGain6 - 0  ->  $7FFFLeftGain7" - 0  ->  $7FFF

    RightGain0 - 0  ->  $7FFF

    RightGain1 - 0  ->  $7FFF

    ...and so on up to...

    RightGain6 - 0  ->  $7FFF

    RightGain7 - 0  ->  $7FFF

  Inputs

    Input0

    Input1

    ...and so on up to...

    Input6

    Input7

  Outputs

    None

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 56

    N memory = 56 words

##src/audio/dsp/mixer8x2amp.ins::mpg/dsp/mixer8x2amp.dsp##
mixer8x2amp.dsp - Eight channel stereo mixer with master gain.

  Function

    This is an eight channel stereo mixer.  The total gain on a side should
    not exceed $7FFF.  The output is added to the output of the other mixers,
    then sent to the DAC by head.dsp.  This mixer has an additional master
    gain control that can be used to fade control the entire mix.

  Knobs

     LeftGain0  - 0  ->  $7FFF

     LeftGain1  - 0  ->  $7FFF

    ...and so on up to...

     LeftGain6  - 0  ->  $7FFF

     LeftGain7  - 0  ->  $7FFF

     RightGain0  - 0  ->  $7FFF

     RightGain1  - 0  ->  $7FFF

    ...and so on up to...

     RightGain6  - 0  ->  $7FFF

     RightGain7  - 0  ->  $7FFF

     Amplitude  - 0  ->  $7FFF, default $7FFF = master gain control

  Inputs

    Input0

    Input1

    ...and so on up to...

    Input6

    Input7

  Outputs

    None

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 61

    N memory = 59 words

##src/audio/dsp/multiply.ins::mpg/dsp/multiply.dsp##
multiply.dsp - Ring modulator.

  Function

    This is a 4-quadrant multiplier using fixed point arithmetic.  Basically
    Output = A*B. It is the same as a ring modulator.

  Knobs

    InputA

    InputB

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 6

    N memory = 6 words

##src/audio/dsp/noise.ins::mpg/dsp/noise.dsp##
noise.dsp - White noise generator.

  Function

    This instrument uses a pseudo-random number generator to produce white
    noise.  It uses the hardware noise generator in CLIO.

  Knobs

    Amplitude - 0  => $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 6

    N memory = 6 words

##src/audio/dsp/oscupdownfp.ins::mpg/dsp/oscupdownfp.dsp##
oscupdownfp.dsp - External subroutine used by sampler.dsp instrument.

  Function

    This is an external subroutine used internally by the sampler.dsp
    instrument.  It is included for completeness.

  Knobs

    None

  Inputs

    None

  Outputs

    None

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 0

    N memory = 22 words

##src/audio/dsp/pulse.ins::mpg/dsp/pulse.dsp##
pulse.dsp - Pulse waveform generator.

  Function

    This instrument is a simple pulse generator.

  Knobs

    Frequency  - 0 => $7FFF, default = $300 = raw frequency.  If you
    call TweakRawKnob() the units are phase increments, If you call
    TweakKnob() the units are 16.16 fractional Hertz.

    Amplitude - 0  =>  $7FFF

    PulseWidth -  $-8000 =>  $7FFF, default = 0 = level for
    comparator used to generate pulse wave.  0 gives a 50% duty cycle pulse
    wave.  Values above or below 0 give narrower pulses.

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 13

    N memory = 14 words

##src/audio/dsp/pulse_lfo.ins::mpg/dsp/pulse_lfo.dsp##
pulse_lfo.dsp - Pulse waveform generator for Low Frequency Oscillator.

  Function

    This instrument is a pulse generator that uses extended precision
    arithmetic to give lower frequencies than pulse.dsp.  It also has better
    resolution at the same frequency.  The frequency of this instrument is 256
    times lower than it corresponding high frequency version.   It is useful
    as a modulation source for controlling other instruments, or for bass
    instruments.

  Knobs

    Frequency  - 0 => $7FFF, default = $300 = raw frequency.  If you
    call TweakRawKnob() the units are phase increments, If you call
    TweakKnob() the units are 16.16 fractional Hertz.

    Amplitude  - 0  =>  $7FFF

    PulseWidth  -  $-8000 =>  $7FFF, default = 0 = level for
    comparator used to generate pulse wave.  0 gives a 50% duty cycle pulse
    wave.  Values above or below 0 give narrower pulses.

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 24

    N memory = 23 words

##src/audio/dsp/pulser.ins::mpg/dsp/pulser.dsp##
pulser.dsp - Triangle wave modulating frequency of a pulse wave.

  Function

    This instrument is a triangle wave modulating the frequency of a pulse
    wave, to produce a siren sound.

  Knobs

    LFORate - $0  =>  $0100, default $0010

    LFODepth - $0  =>  $1000, default $0300

    PulseWidth - $0  =>  $7FFF, default $1000

    Frequency - $0  =>  $2000, default $0600

    Amplitude - $0  =>  $7FFF, default $7000

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 32

    N memory = 33 words

##src/audio/dsp/randomhold.ins::mpg/dsp/randomhold.dsp##
randomhold.dsp - Generate random values and hold them.

  Function

    This instrument generates new random numbers at a given rate and holds
    steady until a new number is chosen.  Think of it as a random stairstep
    function.  This is handy for weird synthetic sound effects.

  Knobs

    Frequency  - 0 => $7FFF, default = $300 = raw frequency.  If you
    call TweakRawKnob() the units are phase increments, If you call
    TweakKnob() the units are 16.16 fractional Hertz.

    Amplitud  - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 15

    N memory = 13 words

##src/audio/dsp/rednoise.ins::mpg/dsp/rednoise.dsp##
rednoise.dsp - Red  noise generator.

  Function

    This instrument interpolates straight line segments between pseudo-random
    numbers  to produce "red" noise.  It is a grittier alternative to
    the filterednoise.dsp.

  Knobs

    Frequency - 0 -=> $FFFF, default $0300.  Controls how often new random
    numbers are selected. Units are fixed point phase increment.  $8000
    implies that a new random number will be chosen every other sample  frame.

    Amplitude - 0  => $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 23

    N memory = 21 words

##src/audio/dsp/sampler.ins::mpg/dsp/sampler.dsp##
sampler.dsp - Rate-variable sample player.

  Function

    This instrument is a rate-variable 16-bit mono sample player.  It is
    identical to varmono16.dsp, except that you should use sampler.dsp if you
    are short on memory.

    The instrument is limited to a pitch one octave above base pitch, if
    recorded at 44.1 kHz.  If it is recorded at 22 kHz, the pitch can go two
    octaves up.  A rate of 0x8000 corresponds to one data sample per DAC
    sample frame.  0xFFFF is the highest possible rate.

  Knobs

    Frequency  -  units are fixed point phase increment.  $8000 equals the
    normal sample rate, with 1 sample per frame.  Thus, you can go from zero
    to one octave above the original.

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 36

    N memory = 11 words

##src/audio/dsp/samplerenv.ins::mpg/dsp/samplerenv.dsp##
samplerenv.dsp - Variable-rate sample player with amplitude envelope.

  Function

    This is a composite instrument consisting of sampler.dsp with a built-in
    amplitude envelope generator.

  Knobs

    Frequency                       Units are fixed point phase increment. $8000 equals the
                                    normal sample rate, with 1 sample per frame. Thus, you can go from zero
                                    to one octave above the original. Defaults to $8000.

    Amplitude                       0..$7FFF. Defaults to $7FFF.

  Outputs

    Output

  Input FIFOs

    InFIFO

  Envelopes

    AMPEnv                          Amplitude envelope hook.

  Resources

    Ticks: 56

    Code: 36 words

  Implementation

    V20

  Notes

    This instrument has some obvious limitations. Consider using the discrete 
    instruments sampler.dsp and envelope.dsp or designing a custom 
    instrument with ARIA instead of using this instrument.

##src/audio/dsp/samplermod.ins::mpg/dsp/samplermod.dsp##
samplermod.dsp - Variable-rate sample player with pitch modulation.

  Function

    This is a composite instrument consisting of sampler.dsp with built-in
    pitch modulation. You could construct an instrument like this one
    using sampler.dsp and timesplus.dsp (or add.dsp).

    The sampler frequency is computed as follows: 

    SamplerFrequency = Frequency + ModInput * ModDepth
                        
  Knobs

    Frequency                       Units are fixed point phase increment. $8000 equals the
                                    normal sample rate, with 1 sample per frame. Thus, you can go from zero
                                    to one octave above the original. Defaults to $8000.

    Amplitude                       0..$7FFF. Defaults to $7FFF.

    ModInput                        Pitch modulation signal (e.g. output of triangle_lfo.dsp) in the range
                                    of 0..$7fff. Defaults to 0.
                                     
    ModDepth                        Gain of pitch modulation in the range of 0..$7fff.
                                    Defaults to 0.

  Outputs

    Output

  Input FIFOs

    InFIFO

  Resources

    Ticks: 43

    Code: 18

  Implementation

    V20

##src/audio/dsp/sawenv.ins::mpg/dsp/sawenv.dsp##
sawenv.dsp - Sawtooth generator with amplitude envelope.

  Function

    This instrument is a simple sawtooth generator with a built-in envelope.
    It is a test instrument that we use to test the envelope code, but you may
    find it useful as a synthesizer voice.

  Knobs

    Frequency - If you call TweakRawKnob(), the units are phase increments, If
    you call TweakKnob(), the units are 16.16 fractional hertz.

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resource

    Ticks = 29

    N memory = 35 words

##src/audio/dsp/sawenvsvfenv.ins::mpg/dsp/sawenvsvfenv.dsp##
sawenvsvfenv.dsp - Sawtooth generator with amplitude and filter envelope.

  Function

    This instrument is a simple sawtooth generator with two built-in envelopes
    to control amplitude and filter cutoff. It is a test instrument that we
    use to test the envelope code, but you may find it useful as a synthesizer
    voice.

  Knobs

    Amplitude - 0  =>  $7FFF, final amplitude of voice

    CutoffFreq - 0 => $2000, default $100.  Currently nonlinear cutoff
    frequency of filter.

    Frequency - If you call TweakRawKnob(), the units are phase increments, If
    youcall TweakKnob(), the units are 16.16 fractional hertz.

    Resonance - 1 / Q,  0 => $6000, default $1000

    SawAmp - 0  =>  $4000, default $1000, amplitude of sawtooth feeding into
    filter

    SVFEnvDepth - 0 => $7FFF, default $2000, Depth of filter envelope.

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resource

    Ticks = 72

    N memory = 82 words

##src/audio/dsp/sawfilterednoise.ins::mpg/dsp/sawfilterednoise.dsp##
sawfilterednoise.dsp - Filtered noise with sawtooth modulation.

  Function

    This instrument passes white noise through the state variable filter.  The
    filter cutoff frequency is modulated with a sawtooth instrument.  This is
    useful for helicopters or other "whop, whop" sounds

  Knobs

    Amplitude - 0  =>  $7FFF, final amplitude of voice

    Frequency - 0 => $2000, default $100.  Non-linear cutoff
    frequency of filter.

    Resonance  - 1 / Q,  0 => $6000, default $1000 = filter will ring
    at low values.

    LFORate  - 0  =>  $0100, default $0020, rate of sawtooth
    modulating filter

    LFODepth  - 0  =>  $2000, default $0100, Amplitude of sawtooth
    modulating filter.  Actual cutoff is = Frequency +
    SawtoothOutput*LFODepth.

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resource

    Ticks = 31

    N memory = 29 words

##src/audio/dsp/sawfilteredsaw.ins::mpg/dsp/sawfilteredsaw.dsp##
sawfilteredsaw.dsp - Filtered sawtooth with sawtooth modulation.

  Function

    This instrument passes a sawtooth wave through the state variable filter.
    The filter cutoff frequency is modulated with another sawtooth instrument.
    Try setting the Resonance to 0-10, SawAmpl = 0-40.

  Knobs

    Amplitude - 0  =>  $7FFF, final amplitude of voice

    Frequency - 0 => $2000, default $100.  Non-linear cutoff
    frequency of filter.

    Resonance - 1 / Q,  0 => $6000, default $1000 = filter will ring
    at low values.

    LFORate - 0  =>  $0100, default $0020, rate of sawtooth
    modulating filter

    LFODepth - 0  =>  $2000, default $0100, Amplitude of sawtooth
    modulating filter.  Actual cutoff is = Frequency +
    SawtoothOutput*LFODepth.

    Sawtooth - 0 => $0400, default = $0100 = frequency of primary
    sawtooth.

    SawAmplitude  - 0 => $7FFF, default = $7FFF = amplitude of
    primary sawtooth.

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resource

    Ticks = 35

    N memory = 35 words

##src/audio/dsp/sawtooth.ins::mpg/dsp/sawtooth.dsp##
sawtooth.dsp - Sawtooth generator.

  Function

    This instrument is a simple sawtooth generator.

  Knobs

    Frequency - If you call TweakRawKnob(), the units are phase increments. If
    you call TweakKnob(), the units are 16.16 fractional hertz.

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 8

    N memory = 8 words

##src/audio/dsp/square.ins::mpg/dsp/square.dsp##
square.dsp - Square waveform generator.

  Function

    This instrument is a simple square wave generator.  It has a woody,
    saxaphone like sound.

  Knobs

    Frequency  - 0 => $7FFF, default = $300 = raw frequency.  If you
    call TweakRawKnob() the units are phase increments, If you call
    TweakKnob() the units are 16.16 fractional Hertz.

    Amplitude  - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 13

    N memory = 12 words

##src/audio/dsp/square_lfo.ins::mpg/dsp/square_lfo.dsp##
square_lfo.dsp - Square waveform generator for Low Frequency Oscillator.

  Function

    This instrument is a square wave generator that uses extended precision
    arithmetic to give lower frequencies than square.dsp.  It also has better
    resolution at the same frequency.  The frequency of this instrument is 256
    times lower than it corresponding high frequency version.   It is useful
    as a modulation source for controlling other instruments, or for bass
    instruments.

  Knobs

    Frequency  - 0 => $7FFF, default = $300 = raw frequency.  If you
    call TweakRawKnob() the units are phase increments, If you call
    TweakKnob() the units are 16.16 fractional Hertz.

    Amplitude  - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 17

    N memory = 16 words

##src/audio/dsp/submixer2x2.ins::mpg/dsp/submixer2x2.dsp##
submixer2x2.dsp - Two channel stereo submixer.

  Function

    This is a four channel stereo mixer.  The total gain on a side should not
    exceed $7FFF.  The output is available directly and can be used as an
    input to other instruments.  This could be used to mix signals before
    being passed to an effects processor.

  Knobs

    LeftGain0  - 0  ->  $7FFF

    LeftGain1  - 0  ->  $7FFF

    RightGain0 - 0  ->  $7FFF

    RightGain1 - 0  ->  $7FFF

  Inputs

    Input0

    Input1

  Outputs

    LeftOutput

    RightOutput

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 20

    N memory = 20 words

##src/audio/dsp/submixer4x2.ins::mpg/dsp/submixer4x2.dsp##
submixer4x2.dsp - Four-channel stereo submixer.

  Function

    This is a four-channel stereo mixer.  The total gain on a side should not
    exceed $7FFF.  The output is available directly and can be used as an
    input to other instruments.  This could be used to mix signals before
    being passed to an effects processor.

  Knobs

    LeftGain0 - 0  ->  $7FFF

    LeftGain1 - 0  ->  $7FFF

    LeftGain2 - 0  ->  $7FFF

    LeftGain3 - 0  ->  $7FFF

    RightGain0 - 0  ->  $7FFF

    RightGain1 - 0  ->  $7FFF

    RightGain2 - 0  ->  $7FFF

    RightGain3 - 0  ->  $7FFF

  Inputs

    Input0

    Input1

    Input2

    Input3

  Outputs

    Left Output

    Right Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 32

    N memory = 32 words

##src/audio/dsp/submixer8x2.ins::mpg/dsp/submixer8x2.dsp##
submixer8x2.dsp - Eight-channel stereo submixer.

  Function

    This is an eight-channel stereo mixer.  The total gain on a side should
    not exceed $7FFF.  Output is available directly and can be used as an
    input to other instruments.  It could be used to mix signals before being
    passed to an effects processor.

  Knobs

    LeftGain0 - 0  ->  $7FFF

    LeftGain1 - 0  ->  $7FFF

    ...and so on up to...

    LeftGain6 - 0  ->  $7FFF

    LeftGain7 - 0  ->  $7FFF

    RightGain0 - 0  ->  $7FFF

    RightGain1 - 0  ->  $7FFF

    ...and so on up to...

    RightGain6 - 0  ->  $7FFF

    RightGain7 - 0  ->  $7FFF

  Inputs

    Input0

    Input1

    ...and so on up to...

    Input6

    Input7

  Outputs

    LeftOutput

    RightOutput

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks =  56

    N memory = 56 words

##src/audio/dsp/subtract.ins::mpg/dsp/subtract.dsp##
subtract.dsp - Returns the difference between 2 signals.

  Function

    Outputs the difference between InputA and InputB (A-B). The result
    is clipped into range. The inputs are signed as usual.

  Knobs

    InputA                          

    InputB                          

  Outputs

    Output                          Clipped result of InputA - InputB.

  Resources

    Ticks: 6

    Code: 6 words

  Implementation

    V24

  See Also

    add.dsp, multiply.dsp, timesplus.dsp

##src/audio/dsp/svfilter.ins::mpg/dsp/svfilter.dsp##
svfilter.dsp - State-variable filter.

  Function

    This instrument is a state-variable filter.

  Knobs

    Frequency- currently nonlinear

    Resonance - 1 / Q,  0 => $7FFF

    Amplitude- 0  =>  $7FFF

  Inputs

    Input - signal

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 19

    N memory = 19 words

##src/audio/dsp/tail.ins::mpg/dsp/tail.dsp##
tail.dsp - Read DSP clock and report DSP time spent.

  Function

    This is an internal routine used to read the DSP clock and report the DSP
    time spent.  It is included for completeness.

  Knobs

    None

  Inputs

    None

  Outputs

    None

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 16

    N memory = 16 words

##src/audio/dsp/tapoutput.ins::mpg/dsp/tapoutput.dsp##
tapoutput.dsp - Tap accumulated DSP output.

  Function

    This instrument permits reading the accumulated stereo output from
    all currently running output instruments (e.g. directout.dsp, mixerNxN.dsp).
    These signals are what is eventually sent to the audio DACs.

    This can be used to snoop the audio output of an application without the
    application being aware of it (real handy for debugging!).

    It can also be used to provide instrumentation, and such, for the
    accumulated audio output of the DSP (see examples).

  Outputs

    LeftOutput

    RightOutput

  Resources

    Ticks: 6

    Code: 6 words

  Implementation

    V24

  Examples

    Combine with delaystereo.dsp to capture the output of an application to memory
    without the cooperation of the application (kind of like a screen grabber for audio).

    Combine with a pair of envfollower.dsp instruments and a pair of Probes to
    make stereo VU meters for the accumulated audio of all applications currently running.

    Combine with a pair of envfollower.dsp instruments, a pair of maximum.dsp instruments,
    and a pair of Probes to make a stereo peak level detector for the accumulated audio
    of all applications currently running.

  Notes

    You should only use this instrument when there's no direct way to get the signals you
    want. For example, if you want to add metering or peak detection to your own application
    (as opposed to every application that is running on the 3DO at a given time), split your audio
    (e.g. the output of a submixer), between directout.dsp and envfollowers instead of using
    tapoutput.dsp.

    This instrument must be allocated at a lower priority
    than all the output instruments that you want to snoop. If not, you'll only
    get the accumulated results of all of the output instruments at higher (and
    perhaps equal) priority to tapoutput.dsp. Allocate at a priority of 0 to get
    the accumulated results of all output instruments.

  See Also

    directout.dsp, delaystereo.dsp, envfollower.dsp, maximum.dsp,
    examples/capture_audio.c, examples/minmax_audio.c (!!! get correct ref section name)

##src/audio/dsp/timesplus.ins::mpg/dsp/timesplus.dsp##
timesplus.dsp - Mix control signals.

  Function

    This instrument is the A*B+C modulator, which is useful for mixing control
    signals.

  Knobs

    InputA

    InputB

    InputC

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 10

    N memory = 7 words

##src/audio/dsp/triangle.ins::mpg/dsp/triangle.dsp##
triangle.dsp - Triangle wave generator.

  Function

    This instrument is a simple triangle wave generator.  The waves it
    produces looks like:  / / / .

  Knobs

    Frequency  -  If you call TweakRawKnob(), the units are phase increments.
    If you call TweakKnob(), the units are 16.16 fractional hertz.

    FrequencyInhertz  =  RawFreq / ( SampleRate * 2)

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 16

    N memory = 15 words

##src/audio/dsp/triangle_lfo.ins::mpg/dsp/triangle_lfo.dsp##
triangle_lfo.dsp - Triangle waveform generator for Low Frequency
                   Oscillator.

  Function

    This instrument is a triangle wave generator that uses extended precision
    arithmetic to give lower frequencies than triangle.dsp. It also has
    better resolution at the same frequency. The frequency of this instrument
    is 256 times lower than it corresponding high frequency version. It is
    useful as a modulation source for controlling other instruments, or for
    bass instruments.

  Knobs

    Frequency  - 0 => $7FFF, default = $300 = raw frequency.  If you
    call TweakRawKnob() the units are phase increments, If you call
    TweakKnob() the units are 16.16 fractional Hertz.

    Amplitude  - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    None

  Output FIFOs

    None

  Resources

    Ticks = 24

    N memory = 23 words

##src/audio/dsp/varmono16.ins::mpg/dsp/varmono16.dsp##
varmono16.dsp - Rate-variable sample player.

  Function

    This instrument is a rate-variable 16-bit mono sample player.  This
    instrument is identical to sampler.dsp, except that you should use
    varmono16.dsp if you are short on ticks.

    This instrument is limited to a pitch one octave above base pitch, if
    recorded at 44.1 kHz.  If it is recorded at 22 kHz, the pitch can go two
    octaves up.  A rate of 0x8000 corresponds to one data sample per DAC
    sample frame.  0xFFFF is the highest possible rate.

  Knobs

    Frequency  -  units are fixed point phase increment.  $8000 equals the
    normal sample rate, with 1 sample per frame.  Thus, you can go from zero
    to one octave above the original.

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 25

    N memory = 26 words

##src/audio/dsp/varmono8.ins::mpg/dsp/varmono8.dsp##
varmono8.dsp - Rate-variable 8-bit sample player.

  Function

    This instrument is a rate-variable 8-bit sample player.

    This instrument is limited to a pitch one octave above base pitch, if
    recorded at 44.1 kHz.  If it is recorded at 22 kHz, the pitch can go two
    octaves up.  A rate of 0x8000 corresponds to one data sample per DAC
    sample frame.  0xFFFF is the highest possible rate.

  Knobs

    Frequency  -  units are fixed point phase increment.  $8000 equals the
    normal sample rate, with 1 sample per frame.  Thus, you can go from zero
    to one octave above the original.

    Amplitude - 0  =>  $7FFF

  Inputs

    None

  Outputs

    Output

  Input FIFOs

    InFIFO

  Output FIFOs

    None

  Resources

    Ticks = 38

    N memory = 50 words

##src/audio/dsp/varmono8_s.ins::mpg/dsp/varmono8_s.dsp##
varmono8_s.dsp - Rate-variable 8-bit sample player (shared).

  Function

    This instrument is a rate-variable 8-bit sample player. This is identical
    to "varmono8.dsp" except that it uses a shared subroutine to reduce the
    amount of code memory required. If you need several 8 bit sample players,
    you may get more voices if you use this instrument instead of
    "varmono8.dsp".

    This instrument is limited to a pitch one octave above base pitch, if
    recorded at 44.1 kHz. If it is recorded at 22 kHz, the pitch can go two
    octaves up. A rate of 0x8000 corresponds to one data sample per DAC sample
    frame. 0xFFFF is the highest possible rate.

  Knobs

    Frequency                       Units are fixed point phase increment.
                                    0x8000 equals the normal sample rate, with
                                    1 sample per frame. Thus, you can go from
                                    zero to one octave above the original.

    Amplitude                       Output amplitude in the range of 0 to 0x7FFF.

  Outputs

    Output

  Input FIFOs

    InFIFO

  Resources

    Ticks: 44

    Code: 12 words per instrument + 36 words once for shared subroutine

  Implementation

    V24

  See Also

    varmono8.dsp, varmono16.dsp, sampler.dsp

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/classes/collectionclass##
CollectionClass - Multiple parallel sequences and collections.

  Description

    Objects of this class can maintain and playback in parallel an
    assembly of sequences and other collections.

  Super Class

    JuggleeClass

  Methods

    !!!

  Implementation

    V20

  Associated Files

    juggler.h, music.lib

  See Also

    SequenceClass

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/classes/juggleeclass##
JuggleeClass - Root juggler class.

  Description

    This is the root class used to derive other juggler classes. It cannot
    be used as a stand-alone class.

  Super Class

    None

  Methods

    !!!

  Implementation

    V20

  Associated Files

    juggler.h, music.lib

  See Also

    CollectionClass, SequenceClass

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/classes/sequenceclass##
SequenceClass - A single sequence of events.

  Description

    Objects of this class can maintain and playback a single sequence of
    events.

  Super Class

    JuggleeClass

  Methods

    !!!

  Implementation

    V20

  Associated Files

    juggler.h, music.lib

  See Also

    CollectionClass

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/abortobject##
AbortObject - Abnormally stops a juggler object.

  Synopsis

    int32 AbortObject( CObject *obj, Time stopTime )

  Description

    This is a method macro that is part of the juggler object-oriented
    toolbox.  An object's method can be called explicitly through the
    class structure function pointer, or with one of the defined method
    macros.

    This method macro abnormally stops an object at the specified time
    (measured in audio clock ticks). Once an object is stopped, it's
    removed from the active object list, and will no longer be played by
    the juggler when the juggler is bumped.

    !!! how does this differ from StopObject().
        . no completion message sent for AbortObject() ?

  Arguments

    obj                          A pointer to the CObject data structure for
                                 the object.

    stopTime                     A value indicating the time to stop the
                                 object.

  Return Value

    This macro returns 0 if successful or an error code (a negative value) if
    an error occurs.

  Implementation

    Macro implemented in cobj.h V20.

  Associated Files

    cobj.h, music.lib

  See Also

    StopObject(), SetObjectInfo(), GetObjectInfo(), StartObject(),
    AllocObject(), FreeObject(), GetNthFromObject(),
    RemoveNthFromObject(), PrintObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/allocobject##
AllocObject - Allocates memory for an object.

  Synopsis

    Err AllocObject( CObject *obj, int32 n )

  Description

    This is a method macro that is part of the juggler object-oriented
    toolbox.  An object's method can be called explicitly through the
    class structure function pointer, or with one of the defined method
    macros.

    This method macro allocates memory for an object.  It checks the amount of
    RAM required for the elements of the specified object, and then uses the
    argument n to see how many of those elements exist and need memory
    allocation.  This procedure is typically used for a sequence object, in
    which case n  specifies how many events must be stored in the sequence.

  Arguments

    obj                          A pointer to the CObject data structure for
                                 the object.

    n                            The number of elements that must be stored
                                 in memory.

  Return Value

    This macro returns 0 if successful or an error code (a negative value) if
    an error occurs.

  Implementation

    Macro implemented in cobj.h V20.

  Associated Files

    cobj.h, music.lib

  See Also

    AllocObject(), FreeObject(), GetNthFromObject(), GetObjectInfo(),
    PrintObject(), RemoveNthFromObject(), SetObjectInfo(), StartObject(),
    StopObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/bumpjuggler##
BumpJuggler - Bumps the juggler data-structure index.

  Synopsis

    int32 BumpJuggler( Time CurrentTime, Time *NextTime,
                       int32 CurrentSignals, int32 *NextSignals )

  Description

    This procedure provides the juggler with a current time value.  The
    juggler checks unexecuted events in any currently active sequences or jobs
    to see if their time value is less than or equal to the current time
    value.  If so, it executes the event.  The juggler also checks all
    unexecuted events in all currently active sequences or jobs to see which
    event should be executed next.  It writes the time of that event into the
    NextTime variable so the calling task can wait until that time to bump the
    juggler once again.  The time value supplied is an arbitrary value in
    ticks and must be supplied from an external source.  Typically, the time
    value comes from the audio clock.

    ***At this writing, BumpJuggler() does not work with signals, so ignore
    this paragraph.***This procedure may also work with signals specified for
    each event.  The current signal mask lists current signal bits.  The
    juggler checks unexecuted events for events associated with current signal
    bits, and executes those events.  It writes the next set of signals to
    wait for in the NextSignals signal mask.  To use this feature properly,
    CurrentSignals should be set to 0 the first time you call BumpJuggler().
    For subsequent calls, you would have your program wait for the signals to
    be set (with WaitSignal()), or you would wait until the NextTime time is
    reached.  When either the signal arrives or the time occurs, you would
    call BumpJuggler() again with the new time and any signals that have
    arrived in the wait interval.

    See the example program "playmf.c" to see how BumpJuggler() is
    used.

  Arguments

    CurrentTime                  Value indicating the current time that the
                                 procedure is called.

    NextTime                     Pointer to a value where this procedure
                                 writes the time that it should be called
                                 again.

    CurrentSignals               The current signal mask.

    NextSignals                  Pointer to a signal mask where this
                                 procedure writes the signal bits for which
                                 the task should wait before making this call
                                 again.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.  If everything is finished or there are no active
    objects, this procedure returns 1.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    juggler.h, music.lib

  See Also

    InitJuggler(), TermJuggler()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/createobject##
CreateObject - Creates an object of the given class.

  Synopsis

    COBObject *CreateObject( COBClass *Class )

  Description

    This procedure is part of the juggler object-oriented toolbox that
    supports the various classes of juggler objects.  This procedure creates
    an object of the given class.  Execute the object's Init() method to
    correctly set up the object.

  Arguments

    Class                        A pointer to the COBClass data structure for
                                 the class (currently available:
                                 &SequenceClass and &CollectionClass as
                                 defined in juggler.h).

  Return Value

    This procedure returns a pointer to the COBObject data structure defining
    the object if successful or an error code (a negative value) if an error
    occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    cobj.h, music.lib

  See Also

    DefineClass(), DestroyObject(), ValidateObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/defineclass##
DefineClass - Defines a class of objects.

  Synopsis

    int32 DefineClass( COBClass *Class, COBClass *SuperClass,
                       int32 DataSize )

  Description

    ***At this writing, this call is for internal use only, and not available
    to user tasks.***

    This procedure is part of the juggler object-oriented toolbox that
    supports the various classes of juggler objects.  This procedure defines a
    new class of objects with the given size.  All methods for this class are
    inherited from the specified SuperClass.  New methods are added to the
    class by setting function pointers in the Class structure.

    See the chapter "Playing Juggler Objects" in the Portfolio
    Programmer's Guide for more information about object-oriented
    programming and the data structures necessary for this procedure.

  Arguments

    Class                        A pointer to the COBClass data structure for
                                 the class.

    SuperClass                   A pointer to the COBClass data structure for
                                 the superclass.

    DataSize                     A value indicating the size of the new
                                 class.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    cobj.h, music.lib

  See Also

    CreateObject(), DestroyObject(), ValidateObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/destroyobject##
DestroyObject - Destroys an object.

  Synopsis

    int32 DestroyObject( COBObject *Object )

  Description

    This procedure is part of the juggler object-oriented toolbox that
    supports the various classes of juggler objects.  This procedure gets rid
    of an object.  Execute the object's Term() method to close the object,
    then use this call to get rid of the object by deleting its COBObject data
    structure and freeing the memory used to store it.

  Arguments

    Object                       A pointer to the COBObject data structure
                                 for the object.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    cobj.h, music.lib

  See Also

    CreateObject(), DefineClass(), ValidateObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/freeobject##
FreeObject - Frees memory allocated for an object.

  Synopsis

    Err FreeObject( CObject *obj )

  Description

    This is a method macro that is part of the juggler object-oriented
    toolbox.  An object's method can be called explicitly through the
    class structure function pointer, or with one of the defined method
    macros.

    This method macro frees memory allocated for the object using
    AllocObject().

  Arguments

    obj                          A pointer to the CObject data structure for
                                 the object.

  Return Value

    This macro returns 0 if successful or an error code (a negative value) if
    an error occurs.

  Implementation

    Macro implemented in cobj.h V20.

  Associated Files

    cobj.h, music.lib

  See Also

    SetObjectInfo(), GetObjectInfo(), StopObject(), AllocObject(),
    GetNthFromObject(), RemoveNthFromObject(), PrintObject(), StartObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/getnthfromobject##
GetNthFromObject - Gets the nth element of a collection.

  Synopsis

    Err GetNthFromObject( CObject *obj, int32 n,
                          (void**) ptr )

  Description

    This is a method macro that is part of the juggler object-oriented
    toolbox.  An object's method can be called explicitly through the
    class structure function pointer, or with one of the defined method
    macros.

    This method macro returns a pointer to the nth element of a collection so
    that a task can find out what elements are included in the collection.
    Note that element numbering within a collection starts at 0.

  Arguments

    obj                          A pointer to the CObject data structure for
                                 the object.

    n                            A value indicating the element to get,
                                 starting at 0.

    ptr                          A variable in which to store a pointer to
                                 the element found.

  Return Value

    This macro returns 0 if successful or an error code (a negative value) if
    an error occurs.

  Implementation

    Macro implemented in cobj.h V20.

  Associated Files

    cobj.h, music.lib

  See Also

    SetObjectInfo(), GetObjectInfo(), StopObject(), AllocObject(),
    FreeObject(), RemoveNthFromObject(), PrintObject(), StartObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/getobjectinfo##
GetObjectInfo - Gets the current settings of an object.

  Synopsis

    Err GetObjectInfo( CObject *obj, TagArg *tags )

  Description

    This is a method macro that is part of the juggler object-oriented
    toolbox.  An object's method can be called explicitly through the
    class structure function pointer, or with one of the defined method
    macros.  This method macro replaces the TagArg values in the specified tag
    arg list with the values currently defined for the object.  Use this
    procedure to get information about the current state of an object.

    See SetObjectInfo() for a list of the tag args supported.

  Arguments

    obj                          A pointer to the CObject data structure for
                                 the object.

    tags                         A pointer to the TagArg list.

  Return Value

    This macro returns 0 if successful or an error code (a negative value) if
    an error occurs.

  Implementation

    Macro implemented in cobj.h V20.

  Associated Files

    cobj.h, music.lib

  See Also

    SetObjectInfo(), StopObject(), AllocObject(), FreeObject(),
    GetNthFromObject(), RemoveNthFromObject(), PrintObject(), StartObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/initjuggler##
InitJuggler - Initializes the juggler mechanism for controlling events.

  Synopsis

    int32 InitJuggler( void )

  Description

    This procedure initializes the juggler scheduling system for controlling
    arbitrary events.  Note that the juggler must be initialized before
    calling any object-oriented, juggler, or MIDI playback procedures.

    See the chapter "Playing Juggler Objects" in the Portfolio
    Programmer's Guide for more information about the juggler and how it
    works.

  Arguments

    None.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    juggler.h, music.lib

  See Also

    TermJuggler(), BumpJuggler()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/printobject##
PrintObject - Prints debugging information about an object.

  Synopsis

    Err PrintObject( CObject *obj )

  Description

    This is a method macro that is part of the juggler object-oriented
    toolbox.  An object's method can be called explicitly through the
    class structure function pointer or with one of the defined method macros.

    This method macro prints debugging information about an object.  The
    information includes a pointer to the object.

  Arguments

    obj                          A pointer to the CObject data structure for
                                 the object.

  Return Value

    This macro returns 0 if successful or an error code (a negative value) if
    an error occurs.

  Implementation

    Macro implemented in cobj.h V20.

  Associated Files

    cobj.h, music.lib

  See Also

    SetObjectInfo(), GetObjectInfo(), StartObject(), StopObject(),
    AllocObject(), FreeObject(), GetNthFromObject(), RemoveNthFromObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/removenthfromobject##
RemoveNthFromObject - Removes the nth element of a collection.

  Synopsis

    Err RemoveNthFromObject( CObject *obj, int32 n )

  Description

    This is a method macro that is part of the juggler object-oriented
    toolbox.  An object's method can be called explicitly through the
    class structure function pointer or with one of the defined method macros.
     This method macro removes the reference to the nth element (a sequence or
    a collection) of a collection.  Numbering starts from 0.

    Note that using this procedure to remove a sequence or collection from a
    higher collection doesn't delete the sequence or collection, but
    merely removes its reference in the higher collection so that the element
    is no longer part of the collection.

  Arguments

    obj                          A pointer to the CObject data structure for
                                 the object.

    n                            A value indicating the element to remove,
                                 starting at 0.

  Return Value

    This macro returns 0 if successful or an error code (a negative value) if
    an error occurs.

  Implementation

    Macro implemented in cobj.h V20.

  Associated Files

    cobj.h, music.lib

  See Also

    SetObjectInfo(), GetObjectInfo(), StopObject(), AllocObject(),
    FreeObject(), GetNthFromObject(), PrintObject(), StartObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/setobjectinfo##
SetObjectInfo - Sets values in the object based on tag args.

  Synopsis

    Err SetObjectInfo( CObject *obj, TagArg *tags )

  Description

    This is a method macro that is part of the juggler object-oriented
    toolbox.  An object's method can be called explicitly through the
    class structure function pointer, or with one of the defined method
    macros.

    This method macro sets the values in the object based on the supplied tag
    arguments.  Valid tag arguments are as follows:Tags for Jugglee SuperClass

    !!! the formatting of the following paragraph is totally hosed:

    As the jugglee is the superclass for the other juggler classes, its
    methods are inherited by other juggler classes.  The following tags are
    for SetObjectInfo()for the jugglee superclass:JGLR_TAG_CONTEXT
    <usercontext>  User-specified context; this may be a pointer to almost
    anything.  It is passed to the Interpreter function. JGLR_TAG_START_DELAY
    <ticks> The delay interval before starting this object.  This is used to
    stagger the execution of parallel objects within a collection for canon.
    JGLR_TAG_REPEAT_DELAY <ticks>  The time to wait between repetitions.
    JGLR_TAG_STOP_DELAY <ticks>  The time to wait after stopping.
    JGLR_TAG_START_FUNCTION <*function(object, time)>  This function is called
    before executing the first element of the object.JGLR_TAG_REPEAT_FUNCTION
    <*function(object, time)>,JGLR_TAG_STOP_FUNCTION <*function(object,
    time)>,JGLR_TAG_MUTE <flag>  If the flag is true, the object will be muted
    when played.  The Interpreter function must look at the mute flag.Tags for
    Sequence

    A sequence contains an array of events that are to be executed over time.
    An event consists of a timestamp, followed by a user-defined, fixed-size
    data field.  A sequence keeps track of time, advances through the events
    in its array, and calls a user-defined Interpreter function to
    "play" the event.

    Sequences will typically contain arrays of MIDI messages from a MIDI file.
    Sequences may also contain other things; these other things each require a
    different Interpreter function.  The possible sequence contents and their
    functions are as follows:FunctionPointers, Data    schedule arbitrary
    functions.Cel, Corners    draw this cel.Knob, Value    tweak a knob for
    timbral sequences.Collections    schedule scores at a very high level.

    The following are tags for a sequence:JGLR_TAG_INTERPRETER_FUNCTION
    Specifies the user-defined function to be called for interpreting events
    in a sequence.  This function is called at the time specified in the
    event.  When the function is called, it is passed a pointer to one of your
    events.  It is also passed a pointer to your context data structure that
    was set using JGLR_TAG_CONTEXT and SetObjectInfo().  The function
    prototype for interpreting events is given below:int32 InterpretEvent(
    Sequence *SeqPtr, void *CurrentEvent, void *UserContext)JGLR_TAG_MAX  Sets
    the maximum number of events that can be used.JGLR_TAG_MANY  Sets the
    actual number of events that can be used.JGLR_TAG_EVENTS <void *Events>
    Sets a pointer to your event array.JGLR_TAG_EVENT_SIZE <size_in_bytes>
    Sets the size of a single event in bytes so that an index into an array
    can be constructed.Other Tags

    Other tag arguments are listed below:

    JGLR_TAG_SELECTOR_FUNCTION

    JGLR_TAG_AUTO_DELETE

    JGLR_TAG_DURATION

  Arguments

    obj                          A pointer to the CObject data structure for
                                 the object.

    tags                         A pointer to the TagArg list.

  Return Value

    This macro returns 0 if successful or an error code (a negative value) if
    an error occurs.

  Implementation

    Macro implemented in cobj.h V20.

  Associated Files

    cobj.h, music.lib

  See Also

    GetObjectInfo(), StartObject(), StopObject(), AllocObject(), FreeObject(),
    GetNthFromObject(), RemoveNthFromObject(), PrintObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/startobject##
StartObject - Starts an object so the juggler will play it.

  Synopsis

    Err StartObject( CObject *obj, uint32 time, int32 nrep,
                     CObject *par )

  Description

    This is a method macro that is part of the juggler object-oriented
    toolbox.  An object's method can be called explicitly through the
    class structure function pointer or with one of the defined method macros.

    This method macro starts an object at the given time.  Once an object is
    started, it's added to the active object list so that the juggler will
    play it when the juggler is bumped.  The "nrep" argument sets an
    object to be played a set number of repetitions.

  Arguments

    obj                          A pointer to the CObject data structure for
                                 the object.

    time                         A value indicating the time in audio clock
                                 ticks to start the object.

    nrep                         A value indicating the number of occurrences
                                 of the object.

    par                          A pointer to the CObject data structure that
                                 is the parent of this object.

  Return Value

    This macro returns 0 if successful or an error code (a negative value) if
    an error occurs.

  Implementation

    Macro implemented in cobj.h V20.

  Associated Files

    cobj.h, music.lib

  See Also

    SetObjectInfo(), GetObjectInfo(), StopObject(), AllocObject(),
    FreeObject(), GetNthFromObject(), RemoveNthFromObject(), PrintObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/stopobject##
StopObject - Stops an object so the juggler won't play it.

  Synopsis

    int32 StopObject( CObject *obj, uint32 time )

  Description

    This is a method macro that is part of the juggler object-oriented
    toolbox.  An object's method can be called explicitly through the
    class structure function pointer, or with one of the defined method
    macros.

    This method macro stops an object at the specified time (measured in audio
    clock ticks).  Once an object is stopped, it's removed from the active
    object list, and will no longer be played by the juggler when the juggler
    is bumped.

  Arguments

    obj                          A pointer to the CObject data structure for
                                 the object.

    time                         A value indicating the time to stop the
                                 object.

  Return Value

    This macro returns 0 if successful or an error code (a negative value) if
    an error occurs.

  Implementation

    Macro implemented in cobj.h V20.

  Associated Files

    cobj.h, music.lib

  See Also

    SetObjectInfo(), GetObjectInfo(), StartObject(), AllocObject(),
    FreeObject(), GetNthFromObject(), RemoveNthFromObject(), PrintObject()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/termjuggler##
TermJuggler - Terminates the juggler mechanism for controlling events.

  Synopsis

    int32 TermJuggler( void )

  Description

    This procedure terminates the juggler, which eliminates support for
    object-oriented calls, juggler playback, and MIDI score playback.  A task
    should call this procedure when finished with the juggler.

  Arguments

    None.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    juggler.h, music.lib

  See Also

    InitJuggler(), BumpJuggler()

##src/audio/musiclib/juggler.c::mpg/musiclib/juggler/functions/validateobject##
ValidateObject - Validates an object.

  Synopsis

    int32 ValidateObject( COBObject *cob )

  Description

    This procedure is part of the juggler object-oriented toolbox that
    supports the various classes of juggler objects.  This procedure returns
    an error code if the object is not a valid objectthat is, if the COBObject
    data structure element dedicated to object validity doesn't confirm
    validity.

  Arguments

    cob                          A pointer to the COBObject data structure
                                 for the object.

  Return Value

    This procedure returns 0 if the object is valid or an error code (a
    negative value) if the object isn't valid.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    cobj.h, music.lib

  See Also

    CreateObject(), DefineClass(), DestroyObject()

##src/audio/musiclib/score.c::mpg/musiclib/score/changescorecontrol##
ChangeScoreControl - Changes a MIDI control value for a channel.

  Synopsis

    Err ChangeScoreControl( ScoreContext *ScoreCon, int32
                            Channel, int32 Index, int32 Value )

  Description

    This procedure changes a specified MIDI control value for notes played on
    the specified channel.  It's the equivalent of a MIDI control message,
    currently limited to control values of 7 (channel volume control) and 10
    (channel pan control).

    The procedure determines the control to change through the value passed in
    the index argument.  It then assigns the value passed in the value
    argument to the control.  For channel volume, the value can range from 0
    to 127, with 0 as silence and 127 as maximum volume.  For channel panning,
    the value can range from 0 to 127, with 0 playing all the notes in the
    left of a stereo output and 127 playing all the notes in the right of a
    stereo output.

  Arguments

    ScoreCon                     Pointer to a ScoreContext data structure
                                 controlling playback.

    Channel                      The number of the MIDI channel for which to
                                 change the control.

    Index                        The number of the control to be changed
                                 (currently only 7 and 10 are recognized).

    Value                        A value from 0 to 127 used as the new
                                 control setting.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    ChangeProgramControl(), ChangeScorePitchBend(), InterpretMIDIMessage(),
    StartScoreNote(), StopScoreNote()

##src/audio/musiclib/score.c::mpg/musiclib/score/changescorepitchbend##
ChangeScorePitchBend - Changes a channel's pitch bend value.

  Synopsis

    Err ChangeScorePitchBend( ScoreContext *scon,
                              int32 Channel, int32 Bend )

  Description

    This procedure changes the current MIDI pitch bend value used to alter the
    pitch values of all instruments in the channel.  The procedure is the
    equivalent of a MIDI Pitch Bend message.

    The Bend argument ranges from 0x0 to 0x3FFF.  A setting of 0x2000 means
    that instrument pitch values aren't bent up or down.  A setting of 0x0
    means that instrument pitches are bent as far down as possible.  A setting
    of 0x3FFF means that instrument pitches are bent as far up as possible.

    The pitch bend value supplied by ChangeScorePitchBend() works within a
    pitch bend range, which is contained in the score context.  If the range
    is 8 semitones, for example, the score voices can be bent up a maximum of
    8 semitones or down a minimum of 8 semitones.  You can set the pitch bend
    range using SetScoreBendRange() and read the current pitch bend range
    usingGetScoreBendRange().

    Note that ChangeScorePitchBend() only affects notes whose pitches are
    specified by MIDI note values (0127).  It doesn't affect the pitch of
    notes specified by frequency.

  Arguments

    ScoreCon                     Pointer to a ScoreContext data structure
                                 controlling playback.

    Channel                      The number of the MIDI channel for which to
                                 change the pitch bend value.

    Bend                         The new pitch bend setting (0x00x3FFF).

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    score.h, music.lib

  Caveats

    Pitch can't be bent beyond the range of the instrument.

  See Also

    ChangeScoreControl(), ChangeScoreProgram(), ConvertPitchBend(),
    GetScoreBendRange(), InterpretMIDIMessage(), StartScoreNote(),
    SetScoreBendRange()

##src/audio/musiclib/score.c::mpg/musiclib/score/changescoreprogram##
ChangeScoreProgram - Changes the MIDI program for a channel.

  Synopsis

    Err ChangeScoreProgram( ScoreContext *ScoreCon,
                            int32 Channel, int32 ProgramNum )

  Description

    This procedure changes the current MIDI program used to play notes in a
    MIDI channel.  It's the equivalent of a MIDI program change message.

  Arguments

    ScoreCon                     Pointer to a ScoreContext data structure
                                 controlling playback.

    Channel                      The number of the MIDI channel for which to
                                 change the program.

    ProgramNum                   The number of the new MIDI program to use
                                 for the channel.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    ChangeScoreControl(), ChangeScorePitchBend(), InterpretMIDIMessage(),
    StartScoreNote(), StopScoreNote()

##src/audio/musiclib/score.c::mpg/musiclib/score/convertpitchbend##
ConvertPitchBend - Converts a MIDI pitch bend value into frequency
                   multiplier.

  Synopsis

    Err ConvertPitchBend( int32 Bend, int32 SemitoneRange,
                          frac16 *BendFractionPtr )

  Description

    This procedure accepts a MIDI pitch bend value from 0x0 to 0x3FFF.  It
    also accepts a pitch bend range in semitones (half steps).  The range
    value measures the distance from normal pitch to the farthest bent pitch.
    For example, a pitch bend range of 12 semitones means that an instrument
    can be bent up in pitch by 12 semitones, and down in pitch by 12 semitones
    for a total range of 24 semitones (two octaves).

    The pitch bend value operates within the pitch bend range: 0x0 means bend
    pitch all the way to the bottom of the range; 0x2000 means don't bend
    pitch; and 0x3FFF means bend pitch all the way to the top of the range.

    ConvertPitchBend() uses the pitch bend range and the pitch bend value to
    calculate an internal pitch bend valuea value used to multiply the output
    of an instrument, bending the instrument's pitch up or down.  The
    internal pitch bend value is written into the variable "BendFractionPtr."
    This bend value is the same as the bend value used for the audio folio
    call BendInstrumentPitch().

    Note that DSP sampled-sound instruments won't bend any more than 12
    semitones, so don't set the pitch bend range to a value greater than
    12.

  Arguments

    Bend                         A MIDI pitch bend value from 0x0 to 0x3FFF.

    SemitoneRange                A pitch bend range value from 1 to 12,
                                 measured in semitones away from normal
                                 pitch.

    BendFractionPtr              A pointer to a frac16 variable in which to
                                 store the returned frequency multiplier.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Convenience call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    ChangeScorePitchBend(), GetScoreBendRange(), SetScoreBendRange()

##src/audio/musiclib/score.c::mpg/musiclib/score/createscorecontext##
CreateScoreContext - Allocates a score context.

  Synopsis

    ScoreContext *CreateScoreContext( int32 MaxNumPrograms )

  Description

    This procedure allocates and initializes a score context with room enough
    for nMIDI programs.  It also creates a default PIMap for the score
    context.  The score context is necessary to import a MIDI score from a
    disc file and then play back that file.

  Arguments

    MaxNumPrograms               The maximum number of MIDI programs (1128)
                                 for which memory will be allocated within
                                 the score context.

  Return Value

    Returns a pointer to a new ScoreContext on success; NULL on failure.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    InitScoreDynamics(), InitScoreMixer(),
    ChangeScoreControl() TermScoreMixer(),
    ChangeScoreProgram(), DeleteScoreContext()

##src/audio/musiclib/score.c::mpg/musiclib/score/deletescorecontext##
DeleteScoreContext - Deletes a score context.

  Synopsis

    Err DeleteScoreContext( ScoreContext *scon )

  Description

    This procedure deletes the ScoreContext data structure along with all of
    its attendant data structures, including the NoteTracker data structures
    used for dynamic voice allocation.

  Arguments

    scon                         Pointer to the ScoreContext data structure
                                 to be deleted.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    InitScoreMixer(), CreateScoreContext()

##src/audio/musiclib/score.c::mpg/musiclib/score/disablescoremessages##
DisableScoreMessages - Enable or disable printed messages during score playback.

  Synopsis

    int32 DisableScoreMessages( int32 Flag )

  Description

    This function turns on or off the informational and error message
    printing during score playback. Messages default to being enabled.
    Also, there are a few error messages that cannot be disabled.

  Arguments

    Flag                         Non-zero to disable messages, 0 to enable messages.
                                 Messages default to being enabled.

  Return Value

    Previous enable/disable flag.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

##src/audio/musiclib/score.c::mpg/musiclib/score/freechannelinstruments##
FreeChannelInstruments - Frees all of a MIDI channel's instruments.

  Synopsis

    Err FreeChannelInstruments( ScoreContext *scon,
                                int32 Channel )

  Description

    This procedure frees all instruments currently allocated to a MIDI channel
    of a score context, an action that abruptly stops any notes the
    instruments may be playing.

    This call is useful because allocated instruments may accumulate in a
    channel as dynamic voice allocation creates instruments to handle
    simultaneous note playback within the channel.  As notes stop, the
    instruments used to play the notes are abandoned, but not freed, remaining
    in existence so they can be used to immediately play incoming notes.
    These abandoned instruments use up system resources.

    If a task knows that it will not play notes in a MIDI channel for a period
    of time, it can use FreeChannelInstruments() to free all allocated
    instruments dedicatedto a channel.  This frees all of the system resources
    used to support those instruments, making them available for other audio
    jobs.  When notes are played in a channel after all of its voices are
    freed, dynamic voice allocation immediately allocates new instruments to
    play those notes.

  Arguments

    scon                         Pointer to a ScoreContext data structure.

    Channel                      The number of the MIDI channel for which to
                                 free instruments.

  Return Value

    This macro returns 0 if successful or an error code (a negative value) if
    an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    ReleaseScoreNote(), StartScoreNote()

##src/audio/musiclib/score.c::mpg/musiclib/score/getscorebendrange##
GetScoreBendRange - Gets the current pitch bend range value for a score
                    context.

  Synopsis

    int32 GetScoreBendRange( ScoreContext *scon )

  Description

    This procedure retrieves the pitch bend range value currently set for the
    score.  This value is an integer, measured in semitones (half steps), that
    sets the range above or below normal that instruments can be bent.  A
    pitch range of two, for example, means that instruments can bend up two
    semitones (a whole step up) and down two semitones (a whole step down).

  Arguments

    scon                         Pointer to a ScoreContext data structure.

  Return Value

    This procedure returns the current pitch bend range value of the specified
    score if successful, or an error code (a negative value) if an error
    occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    ChangeScorePitchBend(), ConvertPitchBend(), SetScoreBendRange()

##src/audio/musiclib/score.c::mpg/musiclib/score/initscoredynamics##
InitScoreDynamics - Sets up dynamic voice allocation.

  Synopsis

    Err InitScoreDynamics( ScoreContext *scon,
                           int32 MaxScoreVoices )

  Description

    This procedure creates an appropriate number of note trackers to handle
    the maximum number of voices specified.  It's called internally by
    InitScoreMixer().  You should use this call instead of InitScoreMixer() if
    your task is setting up MIDI score playback using non-DSP instruments.
    InitScoreDynamics() sets up voice allocation without creating a mixer
    instrument.

  Arguments

    scon                         Pointer to a ScoreContext data structure.

    MaxNumVoices                 A value indicating the maximum number of
                                 voices for the score.

  Return Value

    The procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    InitScoreMixer(), TermScoreMixer()

##src/audio/musiclib/score.c::mpg/musiclib/score/initscoremixer##
InitScoreMixer - Creates and initializes a mixer instrument for MIDI score
                 playback.

  Synopsis

    Err InitScoreMixer( ScoreContext *scon, char *MixerName,
                        int32 MaxNumVoices, int32 Amplitude )

  Description

    This procedure creates a mixer instrument from the specified instrument
    template and writes the item number of that mixer into the score context
    so that notes played with that score context are fed through the mixer.
    The procedure uses the maximum number of voices specified to create an
    appropriate number of note trackers to handle MIDI note playback.  The
    procedure also uses the amplitude value as the maximum possible amplitude
    allowed for each voice in the score.

    Note that a task should first allocate system amplitude to itself.  It can
    then divide that amplitude up by the number of voices to arrive at a
    completely safe amplitude value (one that won't drive the DSP to
    distortion) for this call.  Because it's unlikely that all voices will
    play simultaneously at full amplitude, a task can typically raise
    amplitude levels above the level considered to be completely safe.

  Arguments

    scon                         Pointer to a ScoreContext data structure.

    MixerName                    Pointer to a character string containing the
                                 name of a mixer instrument template.

    MaxNumVoices                 Value indicating the maximum number of
                                 voices used for the score.

    Amplitude                    Value indicating the maximum volume for each
                                 voice in the score.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    ChangeScoreProgram(), InitScoreDynamics(),
    TermScoreMixer(), ChangeScoreContext()

##src/audio/musiclib/score_mfloader.c::mpg/musiclib/score/interpretmidievent##
InterpretMIDIEvent - Interprets MIDI events within a MIDI object.

  Synopsis

    Err InterpretMIDIEvent( Sequence *SeqPtr, MIDIEvent
    *MEvCur,ScoreContext *scon )

  Description

    This procedure is the interpreter procedure for MIDI sequence objects
    created using MFLoadSequence() and MFLoadCollection(). It's an
    internal procedure that is called by the juggler and, in turn, calls
    InterpretMIDIMessage().

  Arguments

    SeqPtr                       Pointer to a sequence data structure.

    MEvCur                       Pointer to the current MIDI event within the
                                 sequence.

    scon                         Pointer to a ScoreContext data structure
                                 used for playback.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    InterpretMIDIMessage()

##src/audio/musiclib/score.c::mpg/musiclib/score/interpretmidimessage##
InterpretMIDIMessage - Executes a MIDI message.

  Synopsis

    Err InterpretMIDIMessage( ScoreContext *ScoreCon,
                              char *MIDIMsg, int32 IfMute )

  Description

    This procedure executes a MIDI message by calling another music library
    procedure appropriate to that message, and passing the message's data
    to that procedure.  The called procedure uses audio folio procedures for
    playback based on the settings of a ScoreContext data structure.

    InterpretMIDIMessage() is called by InterpretMIDIEvent(), which extracts
    MIDI messages from juggler sequences containing MIDI events.  Although
    this procedure is used most often as an internal call of the music
    library, tasks may call it directly to execute a supplied MIDI message.
    The message should be stored in the first byte (first character) of the
    MIDIMsg string, followed by data bytes (if present) in subsequent bytes of
    the string.

    Whenever the IfMute argument is set to TRUE, this procedure does not
    process Note On messages with velocity values greater than zero.  In other
    words, it doesn't start new notes, but it does release existing notes
    and process all other recognized MIDI messages.  When IfMute is set to
    FALSE, this procedure processes all recognizable messages, including Note
    On messages.

    Note that InterpretMIDIEvent() reads a juggler sequence's mute flag
    and, if true, passes that true setting on to InterpretMIDIMessage() so
    that the sequence stops playing notes.  It likewise passes a false setting
    on to InterpretMIDIMessage() so that the sequence can play notes.

  Arguments

    ScoreCon                     Pointer to a ScoreContext data structure.

    MIDIMsg                      Pointer to a character string containing the
                                 MIDI message.

    IfMute                       A flag that turns muting on or off.  TRUE is
                                 on, FALSE is off.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  Caveats

    This procedure only handles Note On, Note Off, Change Program, Change
    Control (values 7 and 10), and Pitchbend MIDI messages.  It does not
     support running status.

  See Also

    InterpretMIDIEvent()

##src/audio/musiclib/score_pimaploader.c::mpg/musiclib/score/loadpimap##
LoadPIMap - Loads a program-instrument map from a text file.

  Synopsis

    Err LoadPIMap( ScoreContext *scon, char *FileName )

  Description

    This procedure reads the designated program-instrument map file (PIMap
    file) and writes appropriate values to the specified score context's
    PIMap.  It also assigns appropriate sampled-sound instruments to samples
    listed in the PIMap file and imports all instrument templates listed in
    the PIMap file.

    For information about the format of a PIMap file, read the "Playing
    MIDI Scores" chapter of the Portfolio Programmer's Guide.

    Note that if you want to set a score context's PIMap entries directly,
    you can use SetPIMapEntry().

  Arguments

    scon                         Pointer to a ScoreContext data structure.

    FileName                     Pointer to the character string containing
                                 the name of the PIMap file.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    SetPIMapEntry(), UnloadPIMap()

##src/audio/musiclib/score_mfloader.c::mpg/musiclib/score/mfdefinecollection##
MFDefineCollection - Creates a juggler collection from a MIDI file image
                     in RAM.

  Synopsis

    Err MFDefineCollection( MIDIFileParser *mfpptr, char
    *Image, int32 NumBytes, Collection *ColPtr)

  Description

    This procedure creates a juggler collection from a MIDI file image
    imported into RAM as part of a data streaming process.  The MIDI file in
    the image may be a format 0 or a format 1 MIDI file.  To use this
    procedure, you must first create a juggler collection using CreateObject()
    .  The procedure then creates an appropriate number of juggler sequences
    to contain the sequences found in the MIDI file image.

    The procedure translates the MIDI messages in each file sequence into MIDI
    events in an appropriate juggler sequences within the collection.  To
    work, the procedure must have a MIDIFileParser data structure to keep
    track of the MIDI sequence's original settings.

    Note that this procedure treats format 0 MIDI files as one-track format 1
    MIDI files.

  Arguments

    mfpptr                       Pointer to a MIDIFileParser data structure.

    Image                        Pointer to a MIDI file image in RAM (a
                                 string of bytes).

    NumBytes                     The size of the MIDI file image in bytes.

    ColPtr                       Pointer to a juggler collection in which to
                                 store the converted MIDI sequences.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    CreateObject(), MFLoadCollection(), MFLoadSequence(), MFUnloadCollection()

##src/audio/musiclib/score_mfloader.c::mpg/musiclib/score/mfloadcollection##
MFLoadCollection - Loads a set of sequences from a MIDI file.

  Synopsis

    Err MFLoadCollection( MIDIFileParser *mfpptr, char
    *filename, Collection *ColPtr )

  Description

    This procedure loads a set of sequences from a format 1 MIDI file and
    turns them into a juggler collection for playback using the juggler.  To
    use this procedure, you must first create a juggler collection using
    CreateObject().  The procedure then creates an appropriate number of
    juggler sequences to contain the sequences found in the MIDI file.

    The procedure translates the MIDI messages in each file sequence into MIDI
    events in appropriate juggler sequences within the collection.  To work,
    the procedure must have a MIDIFileParser data structure to keep track of
    the MIDI sequence's original settings.

    Note that this procedure also accept format 0 MIDI files, treating them as
    a one-track format 1 MIDI file.

  Arguments

    mfpptr                       Pointer to a MIDIFileParser data structure.

    filename                     Pointer to a character string containing the
                                 name of the format 1 MIDI file from which to
                                 load the sequences.

    ColPtr                       Pointer to a juggler collection in which to
                                 store the converted MIDI sequences.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    CreateObject(), MFLoadSequence(), MFUnloadCollection()

##src/audio/musiclib/score_mfloader.c::mpg/musiclib/score/mfloadsequence##
MFLoadSequence - Loads a sequence from a MIDI file.

  Synopsis

    Err MFLoadSequence( MIDIFileParser *mfpptr, char
    *filename, Sequence *SeqPtr )

  Description

    This procedure loads a single sequence from a format 0 MIDI file and turns
    it into a juggler sequence for playback using the juggler.  To use this
    procedure, you must first create the juggler sequence using CreateObject().
    The procedure translates the MIDI messages in the sequence into MIDI
    events in the juggler sequence.  To work, the procedure must have a
    MIDIFileParser data structure to keep track of the MIDI sequence's
    original settings.

    Note that this procedure will accept a format 1 MIDI file, in which case
    it converts only the first track (sequence) of the file.  That track
    typically contains no notes.

  Arguments

    mfpptr                       Pointer to a MIDIFileParser data structure.

    filename                     Pointer to a character string containing the
                                 name of the format 0 MIDI file from which to
                                 load the sequence.

    SeqPtr                       Pointer to a juggler sequence in which to
                                 store the converted MIDI sequence.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    CreateObject(), MFLoadCollection(), MFUnloadCollection()

##src/audio/musiclib/score_mfloader.c::mpg/musiclib/score/mfunloadcollection##
MFUnloadCollection - Unloads a MIDI collection.

  Synopsis

    Err MFUnloadCollection( Collection *ColPtr )

  Description

    This procedure unloads a juggler collection created by importing a MIDI
    format 1 file.  Unloading destroys the collection and any sequences
    defined as part of it.

  Arguments

    ColPtr                       Pointer to a juggler collection data
                                 structure.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    MFLoadCollection(), MFLoadSequence()

##src/audio/musiclib/score.c::mpg/musiclib/score/noteoffins##
NoteOffIns - Turns off a note played by an instrument.

  Synopsis

    Err NoteOffIns( Item Instrument, int32 Note,
                    int32 Velocity )

  Description

    This procedure releases a note being played by an instrument and specifies
    the pitch and velocity for the instrument to release the note.  The
    procedure does not use voice allocation for the note.  It's called by
    ReleaseScoreNote() after ReleaseScoreNote() has worked out voice
    allocation.

  Arguments

    Instrument                   The item number of the instrument.

    Note                         The MIDI pitch value of the note.

    Velocity                     The MIDI release velocity value of the note.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Caveats

    At present, release velocity is ignored.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    NoteOnIns(), ReleaseScoreNote(), StartScoreNote()

##src/audio/musiclib/score.c::mpg/musiclib/score/noteonins##
NoteOnIns - Turns on a note for an instrument.

  Synopsis

    Err NoteOnIns( Item Instrument, int32 Note,
                   int32 Velocity )

  Description

    This procedure turns on a note for an instrument and specifies the pitch
    and velocity for the instrument to play the note.  The procedure does not
    use voice allocation for the note.  It's called by StartScoreNote()
    after StartScoreNote() has worked out voice allocation.

  Arguments

    Instrument                   The item number of the instrument.

    Note                         The MIDI pitch value of the note.

    Velocity                     The MIDI attack velocity value of the note.
                                 If attack velocity is 0, the specified note is
                                 released (identical behavior to the MIDI Note On
                                 event).

  Return Value

    This procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    NoteOffIns(), ReleaseScoreNote(), StartScoreNote()

##src/audio/musiclib/score.c::mpg/musiclib/score/purgescoreinstrument##
PurgeScoreInstrument - Purges an unused instrument from a ScoreContext.

  Synopsis

    Err PurgeScoreInstrument( ScoreContext *scon, uint8 Priority, int32 MaxLevel )

  Description

    This procedure purges an unused instrument from a ScoreContext. This
    call, coupled with the scon_PurgeHook allows an application to share
    DSP resources with the ScoreContext.

  Arguments

    scon                         A pointer to a ScoreContext data structure
                                 controlling playback.

    Priority                     The maximum instrument priority to purge
                                 for instruments that are still playing
                                 (in the range of 0 to 200). Instruments of
                                 higher priority that this may be purged
                                 if they have stopped playing.

    MaxLevel                     The maximum activity to purge (i.e.
                                 AF_ABANDONED, AF_STOPPED, AF_RELEASED,
                                 AF_STARTED).

  Return Value

    This procedure returns a positive value if an instrument was actually
    purged, zero if no instrument matching the specifications could be
    purged, or a negative error code on failure.

  Examples

    This code fragment can be used to free the DSP resources used by all
    instruments that have finished playing:

    {
        int32 result;

            * loop until function returns no voice purged or error *
        while ( (result = PurgeScoreInstrument (scon, SCORE_MAX_PRIORITY,
                                                AF_STOPPED)) > 0 ) ;

            * catch error *
        if (result < 0) ...
    }

  Caveats

    This function deletes items that are created by StartScoreNote().
    Frequent use of this function and StartScoreNote() can consume the
    item table. If you simply want to stop a score note in it's tracks
    for later use with the same channel, use StopScoreNote() instead. It
    merely stops instruments and doesn't delete them.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    StopScoreNote()

##src/audio/musiclib/score.c::mpg/musiclib/score/releasescorenote##
ReleaseScoreNote - Releases a MIDI note, uses voice allocation.

  Synopsis

    Err ReleaseScoreNote( ScoreContext *scon, int32 Channel,
                          int32 Note, int32 Velocity )

  Description

    This procedure releases a note for the score context and uses dynamic
    voice allocation to do so.  It is equivalent to a MIDI NoteOff message.

  Arguments

    scon                         A pointer to a ScoreContext data structure
                                 controlling playback.

    Channel                      The number of the MIDI channel in which to
                                 play the note.

    Note                         The MIDI pitch value of the note (0..127).

    Velocity                     The MIDI release velocity value of the note (0..127).

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Caveats

    At present, release velocity is ignored.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    FreeChannelInstruments(), NoteOnIns(), NoteOffIns(), StartScoreNote(),
    StopScoreNote()

##src/audio/musiclib/selectsampleplayer.c::mpg/musiclib/score/selectsampleplayer##
SelectSamplePlayer - Gets the name of the instrument to play the sample.

  Synopsis

    char *SelectSamplePlayer( Item Sample, int32 IfVariable )

  Description

    This procedure gets and returns the name of the appropriate instrument
    that will play the given sample.  If there is no appropriate instrument to
    play the sample, it returns NULL.  This procedure looks at the sample
    rate, the number of channels (mono or stereo), width (8 or 16), and
    compression type to determine the appropriate instrument for the sample.
    It also lets you specify whether you need to vary the pitch or play only
    at the original pitch.

  Arguments

    Sample                       The item number of the sample to be played.

    IfVariable                   A value indicating whether or not the pitch
                                 is to vary.  If TRUE, the pitch will vary.
                                 If FALSE, the pitch won't vary.

  Return Value

    This procedure returns the name of the instrument that will play the given
    sample, or NULL if there is no appropriate instrument to play the sample.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    LoadSoundFile()

##src/audio/musiclib/score.c::mpg/musiclib/score/setpimapentry##
SetPIMapEntry - Specifies the instrument to use when a MIDI program change
                occurs.

  Synopsis

    Err SetPIMapEntry( ScoreContext *scon, int32 ProgramNum,
                       Item InsTemplate, int32 MaxVoices, int32 Priority )

  Description

    This procedure specifies the instrument type to use when a MIDI program
    change occurs.

    This procedure directly sets a PIMap entry, assigning an instrument
    template, a maximum voice value, and an instrument priority to a MIDI
    program number.  When a MIDI program change occurs, a new instrument
    specified by the instrument template is used for notes played after the
    program change.

    The variable "ProgramNum" ranges from 0 to 127 (unlike some
    synthesizers, which range program numbers from 1 to 128).  It must not
    exceed the number of programs allocated in CreateScoreContext().

    Note that it's easier to create a full PIMap using LoadPIMap().

  Arguments

    scon                         A pointer to the ScoreContext data structure
                                 whose PIMap is to be changed.

    ProgramNum                   Value indicating a program number, ranging
                                 from 0127; not to exceed the maximum number
                                 allocated in CreateScoreContext().

    InsTemplate                  The item number of an instrument template.

    MaxVoices                    The maximum number of voices that can play
                                 simultaneously for this program.

    Priority                     An instrument priority value from 0 to 200.

  Return Value

    This procedure returns 0 if all went well; or an error code (less then 0)
    indicating that an error occurred.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    LoadPIMap(), UnloadPIMap()

##src/audio/musiclib/score.c::mpg/musiclib/score/setscorebendrange##
SetScoreBendRange - Sets the current pitch bend range value for a score
                    context.

  Synopsis

    Err SetScoreBendRange( ScoreContext *scon,
                           int32 BendRange )

  Description

    The procedure sets a score's current pitch bend range value.  This
    value is an integer, measured in semitones (half steps), that sets the
    range above or below normal that instruments can be bent.  A pitch range
    of two, for example, means that instruments can bend up two semitones (a
    whole step up) and down two semitones (a whole step down).

    Note that DSP sampled-sound instruments won't bend any more than 12
    semitones, so don't set BendRange to a value greater than 12.

  Arguments

    scon                         Pointer to a ScoreContext data structure.

    BendRange                    A pitch bend range value from 1 to 12.

  Return Value

    This procedure returns 0 if all went well; otherwise, an error code (less
    then 0) indicating that an error occurred.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    ChangeScorePitchBend(), ConvertPitchBend(), GetScoreRange()

##src/audio/musiclib/score.c::mpg/musiclib/score/startscorenote##
StartScoreNote - Starts a MIDI note, uses voice allocation.

  Synopsis

    Err StartScoreNote( ScoreContext *scon, int32 Channel,
                        int32 Note, int32 Velocity )

  Description

    This procedure turns on a note for the score context and uses dynamic
    voice allocation to do so.  It is equivalent to a MIDI Note On message.

  Arguments

    scon                         A pointer to a ScoreContext data structure
                                 controlling playback.

    Channel                      The number of the MIDI channel in which to
                                 play the note.

    Note                         The MIDI pitch value of the note (0..127).

    Velocity                     The MIDI attack velocity value of the note (0..127).
                                 If attack velocity is is 0, the specified note is
                                 released (identical behavior to the MIDI Note On event).

  Return Value

    This procedure returns a non-negative value if successful or an error code
    (a negative value) if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    FreeChannelInstruments(), NoteOnIns(), NoteOffIns(), ReleaseScoreNote(),
    StopScoreNote()

##src/audio/musiclib/score.c::mpg/musiclib/score/stopscorenote##
StopScoreNote - Stop a MIDI note w/o releasing it, uses voice allocation.

  Synopsis

    Err StopScoreNote( ScoreContext *scon, int32 Channel, int32 Note )

  Description

    This procedure instantly stops a note for the score context and uses dynamic
    voice allocation to do so.  It differs from ReleaseScoreNote() in that
    it doesn't allow the note to go through any release phase that it might have.

  Arguments

    scon                         A pointer to a ScoreContext data structure
                                 controlling playback.

    Channel                      The number of the MIDI channel in which to
                                 play the note.

    Note                         The MIDI pitch value of the note (0..127).

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    score.h, music.lib

  See Also

    FreeChannelInstruments(), NoteOnIns(), NoteOffIns(), StartScoreNote(),
    ReleaseScoreNote(), PurgeScoreInstrument()

##src/audio/musiclib/score.c::mpg/musiclib/score/termscoremixer##
TermScoreMixer - Dispose of mixer created by InitTermMixer().

  Synopsis

    Err TermScoreMixer( ScoreContext *scon )

  Description

    This function unloads the mixer loaded by InitScoreMixer(). This
    function is automatically called by DeleteScorePlayer().

    Calling this function multiple times has no harmful effect.

  Arguments

    scon                         Pointer to a ScoreContext data structure.
                                 The mixer need not have been successfully
                                 initialized.

  Return Value

    This procedure returns a non-negative value if successful or an
    error code (a negative value) if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    InitScoreMixer(), DeleteScoreContext()

##src/audio/musiclib/score_pimaploader.c::mpg/musiclib/score/unloadpimap##
UnloadPIMap - Unloads instrument templates loaded previously with PIMap
              file.

  Synopsis

    Err UnloadPIMap( ScoreContext *scon )

  Description

    This procedure is the inverse of LoadPIMap; it unloads any instrument
    templates specified in the score context's PIMap.  Any instruments
    created using those templates are freed when the templates are unloaded.

  Arguments

    scon                         Pointer to a ScoreContext data structure.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    score.h, music.lib

  See Also

    LoadPIMap(), SetPIMapEntry()

##src/audio/musiclib/soundfile.c::mpg/musiclib/soundfileplayer/closesoundfile##
CloseSoundFile - Closes a SoundFilePlayer data structure and unloads a
                 sound file.

  Synopsis

    int32 CloseSoundFile( SoundFilePlayer *sfp )

  Description

    This procedure is a convenience procedure that closes the specified
    SoundFilePlayer data structure and also cleans up any items associated
    with the player.  This procedure is the inverse of OpenSoundFile(), and is
    in essence acombination of UnloadSoundFile() and DeleteSoundFilePlayer().

  Arguments

    sfp                          A pointer to the SoundFilePlayer.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Convenience call implemented in music.lib V20.

  Associated Files

    soundfile.h, music.lib

  See Also

    OpenSoundFile(), DeleteSoundFile(), LoadSoundFile(), ReadSoundFile(),
    RewindSoundFile(), ServiceSoundFile(), StartSoundFile(), StopSoundFile(),
    UnloadSoundFile(), CreateSoundFilePlayer()

##src/audio/musiclib/soundfile.c::mpg/musiclib/soundfileplayer/createsoundfileplayer##
CreateSoundFilePlayer - Creates a SoundFilePlayer data structure to play
                        sound files.

  Synopsis

    SoundFilePlayer *CreateSoundFilePlayer( int32 NumBuffers,
    int32 BufSize, void *Buffers[] )

  Description

    This procedure creates a SoundFilePlayer data structure and initializes
    it.  A SoundFilePlayer can be used to play several sound files, one at a
    time.  The Buffers argument is a pointer to an array of pointers to
    preallocated audio data buffers, all the same size.  If Buffers is NULL,
    then this procedure allocates the memory for you.  The memory for this
    must be of type MEMTYPE_AUDIO.

  Arguments

    NumBuffers                   A value indicating the number of audio data
                                 buffers.

    BufSize                      A value indicating the size of the audio
                                 data buffers.

    Buffers                      A pointer to an array of pointers to
                                 preallocated audio data buffers.

  Return Value

    This procedure returns a pointer to the SoundFilePlayer data structure if
    all went well or a NULL if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Caveats

    Buffer size must be a multiple of the file's block size (see LoadSoundFile() for complete reason).

  Associated Files

    soundfile.h, music.lib

  See Also

    OpenSoundFile(), CloseSoundFile(), DeleteSoundFile(), LoadSoundFile(),
    ReadSoundFile(), RewindSoundFile(), ServiceSoundFile(), StartSoundFile(),
    StopSoundFile(), UnloadSoundFile()

##src/audio/musiclib/soundfile.c::mpg/musiclib/soundfileplayer/deletesoundfileplayer##
DeleteSoundFilePlayer - Deletes a SoundFilePlayer data structure.

  Synopsis

    int32 DeleteSoundFilePlayer( SoundFilePlayer *sfp )

  Description

    This procedure deletes a SoundFilePlayer data structure and cleans up
    after CreateSoundFilePlayer().  If the memory for the SoundFilePlayer was
    allocated by CreateSoundFilePlayer(), then the memory is returned to the
    system.  If you allocated your own buffers, DeleteSoundFilePlayer()
    won't free the buffers; you must do it yourself.

  Arguments

    sfp                          A pointer to the SoundFilePlayer.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    soundfile.h, music.lib

  See Also

    OpenSoundFile(), CloseSoundFile(), LoadSoundFile(), ReadSoundFile(),
    RewindSoundFile(), ServiceSoundFile(), StartSoundFile(), StopSoundFile(),
    UnloadSoundFile(), CreateSoundFilePlayer()

##src/audio/musiclib/soundfile.c::mpg/musiclib/soundfileplayer/loadsoundfile##
LoadSoundFile - Preloads the first part of a sound file.

  Synopsis

    Err LoadSoundFile( SoundFilePlayer *sfp, char *FileName )

  Description

    This procedure preloads the first part of a sound file to be played.  The
    file should be an AIFF file.  The appropriate DSP instrument to play this
    sound file is loaded for you at the same time.

  Arguments

    sfp                          A pointer to the SoundFilePlayer.

    FileName                     A pointer to the sound file.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Caveats

    Prior to V24 this function failed to check the file's block size. It always
    assumed that it was 2048 bytes. As of V24 it does check. However, there has
    always been an implicit requirement that buffer size be a multiple of block
    size. Not having buffers be a multiple of block size could
    result in memory overruns. The sound file player now checks buffer size against block size and returns
    an error if the buffer size is not a multiple of block size.

    This means that an app using 10K buffers will work fine on a 2K block file and
    will simply fail on a 4K block file system. To prevent this choose a buffer size
    that is a multiple of all of the block sizes that your application is expected to support.

    If this restriction is too severe, use the advanced sound player instead.

  Associated Files

    soundfile.h, music.lib

  See Also

    OpenSoundFile(), CloseSoundFile(), DeleteSoundFile(), ReadSoundFile(),
    RewindSoundFile(), ServiceSoundFile(), StartSoundFile(), StopSoundFile(),
    UnloadSoundFile(), CreateSoundFilePlayer()

##src/audio/musiclib/soundfile.c::mpg/musiclib/soundfileplayer/opensoundfile##
OpenSoundFile - Creates a SoundFilePlayer data structure and loads a sound
                file.

  Synopsis

    SoundFilePlayer *OpenSoundFile( char *FileName,
    int32 NumBuffers, int32 BufSize )

  Description

    This is a convenience procedure that creates a SoundFilePlayer data
    structure and loads the sound file.  It calls CreateSoundFilePlayer() and
    LoadSoundFile() for you.

  Arguments

    FileName                     A pointer to the name of the sound file.

    NumBuffers                   A value indicating the number of audio data
                                 buffers in the SoundFilePlayer.

    BufSize                      A value indicating the size of the audio
                                 data buffers.

  Return Value

    This procedure returns a pointer to the SoundFilePlayer data structure if
    successful or NULL if an error occurs.

  Implementation

    Convenience call implemented in music.lib V20.

  Caveats

    Buffer size must be a multiple of the file's block size (see LoadSoundFile() for complete reason).

  Associated Files

    soundfile.h, music.lib

  See Also

    CloseSoundFile(), DeleteSoundFile(), LoadSoundFile(), ReadSoundFile(),
    RewindSoundFile(), ServiceSoundFile(), StartSoundFile(), StopSoundFile(),
    UnloadSoundFile(), CreateSoundFilePlayer()

##src/audio/musiclib/soundfile.c::mpg/musiclib/soundfileplayer/readsoundfile##
ReadSoundFile - Reads a sound file.

  !!! hide this function?

  Synopsis

    int32 ReadSoundFile( SoundFilePlayer *sfp, int32 Cursor,
    int32 BufIndex )

  Description

    This procedure is used internally to read part of the sound file into a
    buffer.

  Arguments

    sfp                          A pointer to the SoundFilePlayer.

    Cursor                       A value indicating where in the sound file
                                 the procedure is reading from.

    BufIndex                     A value indicating which of the audio data
                                 buffers the procedure is reading from.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    soundfile.h, music.lib

  See Also

    ServiceSoundFile()

##src/audio/musiclib/soundfile.c::mpg/musiclib/soundfileplayer/rewindsoundfile##
RewindSoundFile - Rewinds a sound file player.

  Synopsis

    int32 RewindSoundFile( SoundFilePlayer *sfp )

  Description

    This procedure rewinds a SoundFilePlayer data structure so that sound file
    playback will start from the beginning when the sound file is activated
    with StartSoundFile().

  Arguments

    sfp                          A pointer to the SoundFilePlayer data
                                 structure.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    soundfile.h, music.lib

  See Also

    OpenSoundFile(), CloseSoundFile(), DeleteSoundFile(), LoadSoundFile(),
    ReadSoundFile(), ServiceSoundFile(), StartSoundFile(), StopSoundFile(),
    UnloadSoundFile(), CreateSoundFilePlayer()

##src/audio/musiclib/soundfile.c::mpg/musiclib/soundfileplayer/servicesoundfile##
ServiceSoundFile - Spools a sound file from disk to a sound buffer.

  Synopsis

    int32 ServiceSoundFile( SoundFilePlayer *sfp, int32
    SignalIn, int32 *SignalNeeded )

  Description

    This procedure is called repeatedly to spool the sound file from disk to a
    sound buffer played by StartSoundFile() and controlled by the specified
    SoundFilePlayer data structure.  It returns, in the SignalNeeded mask, the
    signal for the next sound buffer to finish playing.   The task should use
    that signal in WaitSignal() to enter wait state where it can wait for the
    buffer to finish playing.  When it exits wait state, it passes the signal
    mask returned to ServiceSoundFile() as the next buffer to write to.

  Arguments

    sfp                          A pointer to the SoundFilePlayer data
                                 structure.

    SignalIn                     A signal mask containing bits set
                                 corresponding to the cue bits of sound
                                 buffers to be filled.

    SignalNeeded                 A pointer to a signal mask where the
                                 procedure writes the cue bit of the sound
                                 buffers for which the task should wait.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    soundfile.h, music.lib

  See Also

    OpenSoundFile(), CloseSoundFile(), DeleteSoundFile(), LoadSoundFile(),
    ReadSoundFile(), RewindSoundFile(), StartSoundFile(), StopSoundFile(),
    UnloadSoundFile(), CreateSoundFilePlayer()

##src/audio/musiclib/soundfile.c::mpg/musiclib/soundfileplayer/startsoundfile##
StartSoundFile - Begins playing a sound file.

  Synopsis

    int32 StartSoundFile( SoundFilePlayer *sfp, int32
    Amplitude )

  Description

    This procedure begins playing a sound file.

  Arguments

    sfp                          A pointer to the SoundFilePlayer data
                                 structure controlling playback.

    Amplitude                    A value indicating the amplitude at which to
                                 play the sound file; the value is from 0 to
                                 $7FFF.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    soundfile.h, music.lib

  See Also

    OpenSoundFile(), CloseSoundFile(), DeleteSoundFile(), LoadSoundFile(),
    ReadSoundFile(), RewindSoundFile(), ServiceSoundFile(), StopSoundFile(),
    UnloadSoundFile(), CreateSoundFilePlayer()

##src/audio/musiclib/soundfile.c::mpg/musiclib/soundfileplayer/stopsoundfile##
StopSoundFile - Stops playing a sound file.

  Synopsis

    int32 StopSoundFile( SoundFilePlayer *sfp )

  Description

    This procedure stops playing a sound file.

  Arguments

    sfp                          A pointer to the SoundFilePlayer data
                                 structure.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    soundfile.h, music.lib

  See Also

    OpenSoundFile(), CloseSoundFile(), DeleteSoundFile(), LoadSoundFile(),
    ReadSoundFile(), RewindSoundFile(), ServiceSoundFile(), StartSoundFile(),
    UnloadSoundFile(), CreateSoundFilePlayer()

##src/audio/musiclib/soundfile.c::mpg/musiclib/soundfileplayer/unloadsoundfile##
UnloadSoundFile - Unloads a sound file.

  Synopsis

    int32 UnloadSoundFile( SoundFilePlayer *sfp )

  Description

    This procedure unloads a sound file that has been played.  This process
    closes the AIFF file, deletes the IOReq item used to read the file,
    detaches the buffers from the sampled-sound instrument, and frees the
    sampled-sound instrument.  The task must delete the SoundFilePlayer data
    structure and the sound buffers on its own.

  Arguments

    sfp                          A pointer to the SoundFilePlayer data
                                 structure.

  Return Value

    This procedure returns 0 if successful or an error code (a negative value)
    if an error occurs.

  Implementation

    Library call implemented in music.lib V20.

  Associated Files

    soundfile.h, music.lib

  See Also

    OpenSoundFile(), CloseSoundFile(), DeleteSoundFile(), LoadSoundFile(),
    ReadSoundFile(), RewindSoundFile(), ServiceSoundFile(), StartSoundFile(),
    StopSoundFile(), CreateSoundFilePlayer()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spaddmarker##
spAddMarker - Add a new SPMarker to an SPSound.

  Synopsis

    Err spAddMarker (SPSound *sound, uint32 position,
                     const char *markerName)

  Description

    Adds a new SPMarker to the specified SPSound.

    All markers added to an SPSound are automatically freed when the
    SPSounds is freed by spRemoveSound(). A marker may be manually
    freed by calling spRemoveMarker().

  Arguments

    sound                       Pointer to an SPSound to which to add an
                                SPMarker.

    position                    Position (in frames) within the sound data
                                for the new marker. The range is
                                0..nframes, where nframes is the length of
                                the sound in frames. 0 places the new
                                marker before the first frame in the
                                sound; nframes places the marker after the
                                last frame in the sound. This position must
                                be DMA-aligned, or else this function
                                returns ML_ERR_BAD_SAMPLE_ALIGNMENT.

    markerName                  Name for the new marker. This name must be
                                unique for the sound. Names are compared
                                case-insensitively. The name passed in to
                                this function is copied, so the caller need not
                                keep the string buffer pointed to by markerName
                                intact after calling this function.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spRemoveMarker(), spBranchAtMarker(), spStopAtMarker(),
    spContinueAtMarker(), spSetMarkerDecisionFunction(),
    spClearMarkerDecisionFunction()

##src/audio/musiclib/soundplayer_sample.c::mpg/musiclib/soundplayer/spaddsample##
spAddSample - Create an SPSound for a Sample Item.

  Synopsis

    Err spAddSample (SPSound **resultSound, SPPlayer *player, Item sample)

  Description

    Creates an SPSound for the specified Sample Item and adds it to the
    specified player. This is useful for playing back sounds that are
    already in memory.

    This function queries the sample item for its properties
    (e.g. number of channels, size of frame, number of frames,
    loop points, etc). The sound is checked for sample frame formatting compatibility
    with the other SPSounds in the SPPlayer and for buffer size compatibility.
    A mismatch causes an error to be returned.

    Once that is done, the following special SPMarkers are created for the new SPSound:

        SP_MARKER_NAME_BEGIN         - set to the beginning of the sample

        SP_MARKER_NAME_END           - set to the end of the sample

        SP_MARKER_NAME_SUSTAIN_BEGIN - set to the beginning of the sustain loop
                                       if the sample has a sustain loop.

        SP_MARKER_NAME_SUSTAIN_END   - set to the end of the sustain loop
                                       if the sample has a sustain loop.

        SP_MARKER_NAME_RELEASE_BEGIN - set to the beginning of the release loop
                                       if the sample has a release loop.

        SP_MARKER_NAME_RELEASE_END   - set to the end of the release loop
                                       if the sample has a release loop.

    Since a Sample Item has no provision for storing any markers other than
    the loop points, an SPSound created from a sample item returned by LoadSample()
    will not have any of the markers from the AIFF file other than the ones
    listed above.

    The length of the sample and all of its loop points must be DMA-aligned
    or else this function will return ML_ERR_BAD_SAMPLE_ALIGNMENT.

    All SPSounds added to an SPPlayer are automatically disposed of when
    the SPPlayer is deleted with spDeletePlayer() (by calling spRemoveSound()).
    You can manually dispose of an SPSound with spRemoveSound().

  Arguments

    resultSound                 Pointer to buffer to write resulting
                                SPSound pointer. Must be supplied or
                                or else this function returns ML_ERR_BADPTR.

    player                      Pointer to an SPPlayer.

    sample                      Item number of a sample to add.

  Return Value

    Non-negative value on success; negative error code on failure.

  Outputs

    A pointer to an allocated SPSound is written to the buffer
    pointed to by resultSound on success. NULL is written to this
    buffer on failure.

  Notes

    Since all SPSounds belonging to an SPPlayer are played by the same
    sample player instrument, they must all have the same frame sample frame
    characteristics (width, number of channels, compression type, and compression ratio).

    SPSound to SPSound cross verification is done: an error is returned
    if they don't match. However, there is no way to verify the correctness of sample frame
    characteristics for the instrument supplied to spCreatePlayer().

  Caveats

    There is no restriction on adding Sample Item class SPSounds while the SPPlayer
    is playing, but removing them while playing can be dangerous. See the Caveats
    section of spRemoveSound() for more details on this.

    Note that this only applies to Sample Item class SPSounds (the kind made with this function).
    There is no restriction on adding _or_ removing AIFF Sound File class
    SPSounds while playing.

    The sound player will not work correctly unless the sample frame
    size for the sample follows these rules:

    If frame size (in bytes) < 4, then it must divide into 4 evenly.

    If frame size (in bytes) > 4, then it must must be a multiple of 4.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spRemoveSound(), spAddSoundFile()

##src/audio/musiclib/soundplayer_file.c::mpg/musiclib/soundplayer/spaddsoundfile##
spAddSoundFile - Create an SPSound for an AIFF sound file.

  Synopsis

    Err spAddSoundFile (SPSound **resultSound, SPPlayer *player,
                        const char *fileName)

  Description

    Creates an SPSound for the specified AIFF sound file and adds it to the
    specified player. SPSounds created this way cause the player to spool
    the sound data directly off of disc instead of buffering the whole sound
    in memory. This is useful for playing back really long sounds.

    This function opens the specified AIFF file and scans collects its
    properties (e.g. number of channels, size of frame, number of frames,
    markers, etc). The sound is checked for sample frame formatting compatibility
    with the other SPSounds in the SPPlayer and for buffer size compatibility.
    A mismatch causes an error to be returned.

    Once that is done, all of the markers from the AIFF file are translated into
    SPMarkers. Additionally the following special markers are created:

        SP_MARKER_NAME_BEGIN         - set to the beginning of the sound data

        SP_MARKER_NAME_END           - set to the end of the sound data

        SP_MARKER_NAME_SUSTAIN_BEGIN - set to the beginning of the sustain loop
                                       if the sound file has a sustain loop.

        SP_MARKER_NAME_SUSTAIN_END   - set to the end of the sustain loop
                                       if the sound file has a sustain loop.

        SP_MARKER_NAME_RELEASE_BEGIN - set to the beginning of the release loop
                                       if the sound file has a release loop.

        SP_MARKER_NAME_RELEASE_END   - set to the end of the release loop
                                       if the sound file has a release loop.

    The file is left open for the entire life of this type of SPSound for
    later reading by the player.

    The length of the sound file and all of its markers must be DMA-aligned
    or else this function will return ML_ERR_BAD_SAMPLE_ALIGNMENT.

    All SPSounds added to an SPPlayer are automatically disposed of when
    the SPPlayer is deleted with spDeletePlayer() (by calling spRemoveSound()).
    You can manually dispose of an SPSound with spRemoveSound().

  Arguments

    resultSound                 Pointer to buffer to write resulting
                                SPSound pointer. Must be supplied or
                                or else this function returns ML_ERR_BADPTR.

    player                      Pointer to an SPPlayer.

    fileName                    Name of an AIFF file to read.

  Return Value

    Non-negative value on success; negative error code on failure.

  Outputs

    A pointer to an allocated SPSound is written to the buffer
    pointed to by resultSound on success. NULL is written to this
    buffer on failure.

  Notes

    SoundDesigner II has several classes of markers that it supports in sound:
    loop, numeric, and text. When it saves to an AIFF file, it silently throws away
    all but the first 2 loops that may be in the edited sound. Numeric markers are
    written to an AIFF file with a leading "# " which SDII apparently uses to
    recognize numeric markers when reading an AIFF file. It unfortunately ignores the
    rest of the marker name in that case, making the actual numbers somewhat variable.
    Text markers, thankfully, have user editable names that are saved verbatim in an
    AIFF file. For this reason, we recommend using only text markers (and possibly loops 1
    and 2) when preparing AIFF files for use with the sound player in SoundDesigner II.

    Since all SPSounds belonging to an SPPlayer are played by the same
    sample player instrument, they must all have the same frame sample frame
    characteristics (width, number of channels, compression type, and compression ratio).

    SPSound to SPSound cross verification is done: an error is returned
    if they don't match. However, there is no way to verify the correctness of sample frame
    characteristics for the instrument supplied to spCreatePlayer().

  Caveats

    The sound player will not work correctly unless the sample frame
    size for the sample follows these rules:

    If frame size (in bytes) < 4, then it must divide into 4 evenly.

    If frame size (in bytes) > 4, then it must must be a multiple of 4.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spRemoveSound(), spAddSample()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spbranchatmarker##
spBranchAtMarker - Set up a static branch at a marker.

  Synopsis

    Err spBranchAtMarker (SPSound *fromSound, const char *fromMarkerName,
                          SPSound *toSound, const char *toMarkerName)

  Description

    Sets up a static branch from one marker to another. Barring the result
    of a marker or default decision function, when the playback encounters
    the 'from' marker, the playback will skip to the 'to' marker seamlessly.

    Markers can have one of 3 static actions: continue, branch, or stop.
    This action can be changed at any time, including while the player is
    playing.

  Arguments

    fromSound                   Pointer to SPSound containing marker to
                                branch from.

    fromMarkerName              Name of marker in fromSound to branch from. All markers
                                except markers at the beginning of sounds
                                are considered valid "from" markers.

    toSound                     Pointer to SPSound containing marker to
                                branch to.

    toMarkerName                Name of marker to in toSound branch to. All markers
                                except markers at the end of sounds are
                                considered valid "to" markers.

  Return Value

    Non-negative value on success; negative error code on failure.

  Notes

    Both SPSounds must belong to the same SPPlayer.

    Good sounding results require good placement of markers in the sounds.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spStopAtMarker(), spContinueAtMarker(), spSetMarkerDecisionFunction(),
    spSetDefaultDecisionFunction()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spcleardefaultdecisionfunction##
spClearDefaultDecisionFunction - Clears global decision function.

  Synopsis

    Err spClearDefaultDecisionFunction (SPPlayer *player)

  Description

    Removes a global decision function installed by
    spSetDefaultDecisionFunction().

  Arguments

    player                      SPPlayer from which to remove default
                                decision function.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Macro implemented in soundplayer.h V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spSetDefaultDecisionFunction()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spclearmarkerdecisionfunction##
spClearMarkerDecisionFunction - Clears a marker decision function.

  Synopsis

    Err spClearMarkerDecisionFunction (SPSound *sound,
                                       const char *markerName)

  Description

    Removes a marker decision function installed by
    spSetMarkerDecisionFunction().

  Arguments

    sound                       Pointer to SPSound containing marker from
                                which to remove decision function.

    markerName                  Name of marker in sound from which to remove
                                decision function.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Macro implemented in soundplayer.h V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spSetMarkerDecisionFunction()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spcontinueatmarker##
spContinueAtMarker - Clear static branch at a marker.

  Synopsis

    Err spContinueAtMarker (SPSound *sound, const char *markerName)

  Description

    Restores the marker to its default action of playing through (for a
    marker in the middle of a sound), or stopping (for a marker at the end
    of a sound), barring the results from a marker or default decision
    function. This resets the effect of spBranchAtMarker() or
    spStopAtMarker().

    Markers can have one of 3 static actions: continue, branch, or stop.
    This action can be changed at any time, including while the player is
    playing.

  Arguments

    sound                       Pointer to SPSound containing marker to
                                clear branch from.

    markerName                  Name of marker in sound to clear branch from. All
                                markers except markers at the beginning of
                                sounds are considered valid for this
                                function.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spBranchAtMarker(), spStopAtMarker(), spSetMarkerDecisionFunction(),
    spSetDefaultDecisionFunction()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spcreateplayer##
spCreatePlayer - Create an SPPlayer.

  Synopsis

    Err spCreatePlayer (SPPlayer **resultPlayer,
                        Item samplerInstrument,
                        uint32 numBuffers, uint32 bufferSize,
                        void * const customBuffers[])

  Description

    Creates an SPPlayer (the top-level player context). The player needs:
        . a sample player DSP instrument to play the sound.
        . a set of identically-sized audio buffers used to spool sound off
          of disc.

    The client must supply the sample player instrument. Buffers can be
    allocated automatically or supplied by the client.

    At least 2 buffers are required in order to permit smooth sound
    playback. Since each buffer will have a signal allocated for it, there
    can be no more than 23 buffers (the number of free signals for a task
    that has no signals allocated). 4 or 5 is probably a comfortable
    number of buffers.

    Buffer size must be at least 512 bytes for in-memory sounds or 2 *
    blocksize + 514 for sounds off disc. Typically much larger buffers are
    required to smoothly playback sounds directly off disk (e.g. 16K or
    so for 44100 frame/sec playback of a 16-bit monophonic sound).

    For disc-based sounds, the buffer size, truncated to a multiple of
    block size, represents the maximum amount of data that can be read
    from the disc in a single I/O request. Given the nature of data being
    read from a CD, the larger the buffer, the more efficiently the player
    will read data off of disc. In order to guarantee smooth sound
    playback, there must be enough data spooled at all times to cover the
    read of 1 buffer. Obviously, this requires that the data can be read
    faster than it can be played.

    The total size of all of the buffers represents the maximum latency
    between reading and the actual sound output (the responsiveness to
    branches and decisions). The maximum latency can be computed as
    follows:

        max latency (sec) = numBuffers * bufferSize / frame size / sample rate

    For example:

        numBuffers = 4
        bufferSize = 16384 bytes
        frame size = 2 (16-bit monophonic)
        sample rate = 44100 frames / sec

        max latency = 4 * 16384 / 2 / 44100 = 0.743 sec

    With the above buffer configuration and playback rate, the results of
    branches and decision functions will be heard no later than about 3/4
    second afterwards.

    The client is left with the problem of striking a good balance between
    efficient I/O usage and responsiveness for any specific application.

    Use spDeletePlayer() to dispose of this SPPlayer when you are done
    with it.

  Arguments

    resultPlayer                Pointer to buffer to write resulting
                                SPPlayer pointer. Must be supplied or
                                or else this function returns ML_ERR_BADPTR.

    samplerInstrument           Item number of sample player instrument
                                to be used to play back sounds with this
                                SPPlayer. Note that all sounds added
                                to the player must be of a format that
                                this sampler instrument can play. The
                                player has no way to verify correctness of
                                instrument, however.

    numBuffers                  Number of buffers to use. Valid range is
                                2..23 (limited by available signals).

    bufferSize                  Size of each buffer in bytes. For in-memory
                                sounds, must be at least 512 bytes. For
                                sounds to spool directly off disc, must be
                                at least 2*blocksize+514. In practice larger
                                buffers for disc-based sounds are probably
                                required in order to provide smooth sound
                                playback.

    customBuffers               Table of pointers to client-supplied
                                buffers. If NULL is passed in for this
                                argument, the player will allocate memory
                                for the specified buffers.

                                Use this if you want to allocate
                                your own buffers instead of letting the
                                player do it. The table must contain
                                numBuffers pointers to unique buffers that
                                must be bufferSize in length. Each buffer
                                must be of MEMTYPE_AUDIO and have a
                                DMA-aligned starting address.

  Return Value

    Non-negative value on success; negative error code on failure.

  Outputs

    A pointer to an allocated SPPlayer is written to the buffer
    pointed to by resultPlayer on success. NULL is written to this
    buffer on failure.

  Caveats

    The sound player allocates one signal from your task for each buffer.
    Keep this in mind when deciding how many buffers to use.

    The sound player will not work correctly unless the sample frame
    size for the sample follows these rules:

    If frame size (in bytes) < 4, then it must divide into 4 evenly.

    If frame size (in bytes) > 4, then it must must be a multiple of 4.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spDeletePlayer(), spAddSoundFile(), spAddSample(), spStartReading(),
    spStartPlaying(), spStop()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spdecisionfunction##
SPDecisionFunction - Typedef for decision callback functions

  Synopsis

    typedef Err (*SPDecisionFunction) (SPAction *resultAction,
                                       void *decisionData,
                                       SPSound *sound,
                                       const char *markerName)

  Description

    Client-supplied callback functions of this form may be installed in
    each marker and/or as a default for an SPPlayer.

    A marker's action is processed when the sound data for that marker's
    position is read by the player when any of the following is true:
        . there is a default decision function for the marker's SPPlayer.
        . the marker has a marker decision function
        . the marker specifies a non-trivial action (branch or stop)
        . the marker is at the end of a sound

    Normally, disc I/O is performed based on the size of each buffer. When
    one of the above conditions is true for a marker, the player will
    split up disc I/O at that marker in order to prepare for a possible
    branch. This impacts disc I/O efficiency. It is important to avoid
    having so many markers with non-trivial actions as to cripple the
    players ability to produce smooth sounding output. Since default
    decision functions affect every marker, it is necessary to insure
    that the marker spacing is such that smooth playback can still be
    produced. This is unfortunately one of those things that requires a
    bit of trial and error.

    The following steps are used in determining what action the SPPlayer
    will take when processing a marker's action:

        . If the marker has a decision function, call it. If the marker's
          decision function sets its resultAction (e.g. by a call to
          spSetBranchAction() or spSetStopAction()), then take that action.

        . Otherwise, if the there is a default decision function, call it.
          If the default decision function sets its resultAction (e.g. by a call to
          spSetBranchAction() or spSetStopAction()), then take that action.

        . Otherwise, if the marker specifies some static action (branch or
          stop), take that action.

        . Otherwise, if the marker is at the end of a sound, stop reading.

        . Otherwise continue reading the sound after the marker.

    A decision function MAY do almost anything to the SPPlayer that owns
    this marker including adding new sounds or markers, changing the
    static action for this or any other marker, changing the default or
    marker decision functions for this or any other marker, deleting this
    or any other marker or sound (with the below caveats in mind).

    A decision functoin MUST NOT do any of the following:
        . call any function that changes the player state (e.g.
          spDeletePlayer(), spStop(), spStartReading(), spStartPlaying(),
          spService(), etc) for the current SPMarker's SPPlayer.

        . delete the current SPMarker's SPSound since this has the side effect
          of calling spStop().

        . delete the current marker without
          setting up resultAction to stop or branch to another marker.

        . take a long time to execute.

  Arguments

    resultAction                SPAction to optionally be filled out
                                by decision function. If it isn't filled
                                out, the sound player ignores the call
                                to the decision function and continues
                                as if the decision function hadn't been
                                installed.

    decisionData                Pointer to client data passed to
                                spSetMarkerDecisionFunction() or
                                spSetDefaultDecisionFunction().

    sound                       Pointer to SPSound containing marker for which the player
                                is requesting a playback decision.

    markerName                  Name of marker for which the player
                                is requesting a playback decision.

  Return Value

    Client should return a non-negative value for success, or a negative error code on failure.
    An error code returned to the sound player causes the sound player to stop reading
    and return that error code back to the caller.

  Outputs

    Decision function can set the SPAction by calling one of the following:

        spSetBranchAction() - specifies a marker to branch to as the result of
        this decision function.

        spSetStopAction() - specifies that reader should stop as the result of
        this decision function.

    If the decision does note set the SPAction, the sound player ignores the
    the decision function (acts as if decision function hadn't been installed).

  Examples

    Err mydecision (SPAction *resultAction, int32 *remaining,
                    SPSound *sound, const char *markerName)
    {
            // stop when remaining count reaches zero
        if ((*remaining)-- <= 0) {
            return spSetStopAction (resultAction);
        }

            // do nothing (take default action) otherwise
        return 0;
    }

  Implementation

    Typedef for callback function defined in soundplayer.h V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spSetMarkerDecisionFunction(), spSetDefaultDecisionFunction(),
    spSetBranchAction(), spSetStopAction()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spdeleteplayer##
spDeletePlayer - Delete an SPPlayer.

  Synopsis

    Err spDeletePlayer (SPPlayer *player)

  Description

    Deletes an SPPlayer created by spCreatePlayer(). Automatically stops
    the SPPlayer and calls spRemoveSound() for all SPSounds belonging to the
    SPPlayer. If the spCreatePlayer() allocated buffers, those buffers are
    automatically freed. Custom allocated buffers passed in to spCreatePlayer()
    are not deleted.

  Arguments

    player                      Pointer to an SPPlayer to delete. Can be
                                NULL.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spCreatePlayer(), spRemoveSound(), spRemoveMarker()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spdumpplayer##
spDumpPlayer - Print debug information for sound player

  Synopsis

    void spDumpPlayer (const SPPlayer *player)

  Description

    Prints out a bunch of debug information for an SPPlayer including:
        . list of the SPPlayer's SPSounds
        . list of each SPSound's SPMarkers
        . cross reference of static branches between markers

  Arguments

    player                      Pointer to SPPlayer to print.

  Return Value

    None

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spCreatePlayer()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spfindmarkername##
spFindMarkerName - Return pointer an SPMarker by looking up its name.

  Synopsis

    SPMarker *spFindMarkerName (const SPSound *sound, const char *markerName)

  Description

    Locates the specified marker name in the specified sound.

  Arguments

    sound                       Pointer to SPSound to search for marker.

    markerName                  Name of marker in sound to find.

  Return Value

    Pointer to matched SPMarker on success; NULL on failure.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spAddMarker(), spRemoveMarker(), SPDecisionFunction

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spgetmarkername##
spGetMarkerName - Get name of an SPMarker.

  Synopsis

    const char *spGetMarkerName (const SPMarker *marker)

  Description

    Returns a pointer to the name of the SPMarker.

  Arguments

    marker                      Pointer to SPMarker to interrogate.

  Return Value

    Pointer to the SPMarker name string.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spAddMarker(), spFindMarkerName(), spGetMarkerPosition()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spgetmarkerposition##
spGetMarkerPosition - Get position of an SPMarker.

  Synopsis

    uint32 spGetMarkerPosition (const SPMarker *marker)

  Description

    Returns frame position of the SPMarker.

  Arguments

    marker                      Pointer to SPMarker to interrogate.

  Return Value

    Frame position of the SPMarker.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spAddMarker(), spFindMarkerName(), spGetMarkerName()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spgetplayerfromsound##
spGetPlayerFromSound - Get SPPlayer that owns an SPSound.

  Synopsis

    SPPlayer *spGetPlayerFromSound (const SPSound *sound)

  Description

    Returns a pointer to the SPPlayer to which the specified SPSound
    was added.

  Arguments

    sound                       Pointer to SPSound to interrogate.

  Return Value

    Pointer to SPPlayer that owns this SPSound.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spAddSoundFile(), spAddSample()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spgetplayersignalmask##
spGetPlayerSignalMask - Get set of signals player will send to client.

  Synopsis

    int32 spGetPlayerSignalMask (const SPPlayer *player)

  Description

    Returns the set of signals that the player will send to the client.
    The client must wait on this signal set between calls to spService().
    This signal set is constant for the life of the SPPlayer. This
    function cannot fail.

  Arguments

    player                      Pointer to SPPlayer.

  Return Value

    Set of signals suitable for passing to WaitSignal().

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spCreatePlayer(), spService()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spgetplayerstatus##
spGetPlayerStatus - Get current status of an SPPlayer.

  Synopsis

    int32 spGetPlayerStatus (const SPPlayer *player)

  Description

    Returns a set of flags indicating the current state of an SPPlayer.
    The most useful thing about this function is that it can be used
    to find out when an SPPlayer has finished playing.

  Arguments

    player                      Pointer to SPPlayer to interrogate.

  Return Value

    Any combination of the following SP_STATUS_F_ flags (always a
    non-negative value):

    SP_STATUS_F_BUFFER_ACTIVE   This flag indicates that there's something
                                in the sound buffers waiting to
                                be played. It is set or cleared by
                                spStartReading(), spService(),
                                and cleared by spStop().

                                When this flag has been cleared
                                after playback has started,
                                all of the sound data has been
                                played: it's safe to stop.

    SP_STATUS_F_READING         This flag indicates that there's more data to
                                read. It is set by spStartReading() and
                                cleared when there is no more to read (by
                                spStartReading() or spService()),
                                or when spStop() is called.

    SP_STATUS_F_PLAYING         This flag indicates that playback is
                                underway. It is set by
                                spStartPlaying() and cleared by
                                spStop().

    SP_STATUS_F_PAUSED          This flag indicates that player has been
                                paused. It is set by spPause() and cleared
                                by spResume(), spStop(),spStartPlaying().
                                This flag is really only meaningful when
                                SP_STATUS_F_PLAYING is set.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spStartReading(), spStartPlaying(), spStop()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spgetsoundfrommarker##
spGetSoundFromMarker - Get SPSound that owns an SPMarker.

  Synopsis

    SPSound *spGetSoundFromMarker (const SPMarker *marker)

  Description

    Returns a pointer to the SPSound to which the specified SPMarker
    belongs.

  Arguments

    marker                      Pointer to SPMarker to interrogate.

  Return Value

    Pointer to SPSound that owns this SPMarker.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spAddMarker(), spFindMarkerName(), spGetMarkerPosition(), spGetMarkerName()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spissoundinuse##
spIsSoundInUse - Determines if SPPlayer is currently reading from a
                 particular SPSound.

  Synopsis

    bool spIsSoundInUse (const SPSound *sound)

  Description

    Determines if SPPlayer is currently reading from a particular SPSound.
    An SPSound cannot be removed from its owning SPPlayer while it is being
    read from while the player is running. This function is necessary for
    a client to know when it is safe to remove an SPSound.

  Arguments

    sound                       Pointer to SPSound to test.

  Return Value

    TRUE if sound is currently being read by player; FALSE otherwise.

  Caveats

    Returns FALSE too early for Sample Item class SPSounds. Since the
    spooler is given a pointer to the Sample Item's memory directly,
    rather than copying it into the spooler buffers, it mustn't return
    FALSE until a Sample Item SPSound has actually finished playing, not
    finished being read.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spRemoveSound(), spStop()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/splinksounds##
spLinkSounds - Branch at end of one sound to beginning of another.

  Synopsis

    Err spLinkSounds (SPSound *fromSound, SPSound *toSound)

  Description

    This is a convenient macro for linking multiple sounds together. It
    simply does this:

        spBranchAtMarker (fromSound, SP_MARKER_NAME_END,
                          toSound, SP_MARKER_NAME_BEGIN)

  Arguments

    fromSound                   Pointer to SPSound to link from.

    toSound                     Pointer to SPSound to link to the end
                                of fromsound.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Macro implemented in soundplayer.h V24.

  Notes

    Both SPSounds must belong to the same SPPlayer.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spBranchAtMarker(), spLoopSound()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/sploopsound##
spLoopSound - Branch at end of sound back to the beginning.

  Synopsis

    Err spLoopSound (SPSound *sound)

  Description

    This is a convenient macro for looping a single sound. It simply does
    this:

        spBranchAtMarker (sound, SP_MARKER_NAME_END,
                          sound, SP_MARKER_NAME_BEGIN)

  Arguments

    sound                       Pointer to SPSound to loop.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Macro implemented in soundplayer.h V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spBranchAtMarker(), spLinkSounds()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/sppause##
spPause - Pause an SPPlayer.

  Synopsis

    Err spPause (SPPlayer *player)

  Description

    Pauses playback of an SPPlayer. Use this to stop playback dead in its
    tracks and be able to pick up at the same spot. This differs from
    spStop() in that playback cannot be restarted at the position at which
    spStop() occurred. Resume playback with spResume().

    Sets SP_STATUS_F_PAUSED. Calling spPause() multiple times has no effect,
    the calls do not nest. Calling spPause() while the SPPlayer's
    SP_STATUS_F_PLAYING flag is not set has no effect. The paused state is
    superceded by a call to spStop() or spStartPlaying().

    There is presently no way to know if an SPPlayer is paused.

    Data can still be spooled while paused if there were any completed
    buffers prior to pausing.

  Arguments

    player                      Pointer to SPPlayer to pause.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spResume(), spStartPlaying(), spStop()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spremovemarker##
spRemoveMarker - Manually remove an SPMarker from an SPSound.

  Synopsis

    Err spRemoveMarker (SPMarker *marker)

  Description

    Removes and frees the specified marker from the sound that it belongs
    to. All markers belonging to an SPSound are automatically disposed of
    when that sound is disposed of with spRemoveSound() or when the player
    that owns that sound is deleted with spDeletePlayer(). Use this
    function if you want to remove a marker manually.

    This function cannot be used to remove a permanent marker
    (SP_MARKER_NAME_BEGIN or SP_MARKER_NAME_END) from a sound.

  Arguments

    marker                      Pointer to an SPMarker to remove. Can be
                                NULL. If this is one of the permanent
                                markers (SP_MARKER_NAME_BEGIN or
                                SP_MARKER_NAME_END) this function does
                                nothing and returns ML_ERR_INVALID_MARKER.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spFindMarkerName(), spAddMarker(), spRemoveSound(), spDeletePlayer()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spremovesound##
spRemoveSound - Manually remove an SPSound from an SPPlayer.

  Synopsis

    Err spRemoveSound (SPSound *sound)

  Description

    Removes and frees the specified sound from the SPPlayer that it
    belongs to. All markers belonging to this sound including any
    the client may have added, are automatically freed by this function.

    All sounds belonging to an SPPlayer are
    automatically disposed of when that SPPlayer is disposed of with
    spDeletePlayer(). Use this function if you want to remove a sound
    manually.

    For sound file class SPSounds, the file opened by spAddSoundFile()
    is closed. The sample item passed into spAddSample() is left behind
    after this spRemoveSound() for the client to clean up.

    An SPSound cannot be removed from its owning SPPlayer while it is being
    read from while the player is running. spIsSoundInUse() can be used to
    determine if the sound is being read. If this function is called for an
    SPSound for which spIsSoundInUse() returns TRUE, the SPPlayer is
    stopped by calling spStop().

  Arguments

    sound                       Pointer to an SPSound to remove. Can be
                                NULL.

  Return Value

    Non-negative value on success; negative error code on failure.

  Caveats

    This function only stops
    the SPPlayer when while the SPPlayer is still reading from the SPSound
    being removed, which is fine for AIFF Sound File class SPSounds.
    For Sample Item class SPSounds, the player passes pointers
    to the Sample Item's sound data in memory the SoundSpooler rather than
    copying the sound data to the SPPlayer's buffers. That means that the
    sound data must remaing valid until the SoundSpooler has completely
    played the sound data, which happens some amount of time after the SPPlayer
    is done 'reading' that data.

    If you remove a Sample Item class SPSound during that window of vulnerability
    and then delete the data for the Sample Item (e.g. UnloadSample()),
    the SoundSpooler is then pointing to freed memory, whose contents
    may be clobbered by another task at any time. Unfortunately
    you may not hear bad results if you do this inadvertently because
    there's no guarantee that freed memory _will_ get trashed (unless you
    are running a deamon to munge newly freed memory).

    So, avoid removing Sample Item class SPSounds while the SPPlayer is playing.
    Or at least go to measures to insure that the Sample Item class SPSound you
    are removing is not in the spooler (e.g. it has never been played, or at least
    not since the last spStop()).

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spAddSample(), spAddSoundFile(), spRemoveMarker(), spDeletePlayer(),
    spIsSoundInUse()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spresume##
spResume - Resume playback of an SPPlayer after being paused.

  Synopsis

    Err spResume (SPPlayer *player)

  Description

    Resumes playback of an SPPlayer after being paused.

    Clears the SP_STATUS_F_PAUSED flag. Calling spResume() multiple
    times has no effect, the calls do not nest. Calling spResume()
    while the SPPlayer is the SP_STATUS_F_PLAYING flag is not set
    has no effect. The paused state is superceded by a call to
    spStop() or spStartPlaying().

    There is presently no way to know if an SPPlayer is paused.

  Arguments

    player                      Pointer to SPPlayer to resume.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spPause(), spStartPlaying(), spStop()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spservice##
spService - Service SPPlayer

  Synopsis

    int32 spService (SPPlayer *player, int32 signals)

  Description

    This function
        . processes signals received by the client's sent by the SPPlayer,
          and
        . reads and spools more sound data, processing marker actions
          along the way.

    This function synchronizes the SPPlayer's SoundSpooler to the state of
    the signals read from the last WaitSignal(). You must call it after
    waiting for SPPlayer's signals before calling any other sound player
    function for this SPPlayer (with the exception of spDeletePlayer(),
    which can tolerate the spooler being out of sync with the task's
    signals).

    This function can set or clear the SP_STATUS_F_BUFFER_ACTIVE flag, depending
    on buffer usage. It clears SP_STATUS_F_READING when there's no more sound data
    to read. This function may be called under any player state including
    when SP_STATUS_F_PLAYING is not set without any ill effects.

    This function must be called exactly once for each WaitSignal() on
    an SPPlayer's signals. It will almost certainly have dangerous results
    if fed incorrect signals (signals other than from the most recent
    WaitSignal(), or signals that it has already processed).

  Arguments

    player                      Pointer to SPPlayer to service.

    signals                     Signals last received to process. Ignores
                                any signals that do not belong to this
                                SPPlayer. Does nothing if none of the
                                SPPlayer's signals are set.

  Return Value

    Non-negative player status flags (SP_STATUS_F_) on success;
    negative error code on failure.

  Implementation

    Library call implemented in music.lib V24.

  Examples

    // error checking omitted for brevity

    {
        const int32 playersigs = spGetPlayerSignalMask (player);

            // service player until it's done
        while (spGetPlayerStatus(player) & SP_STATUS_F_BUFFER_ACTIVE) {
            const int32 sigs = WaitSignal (playersigs |
                                           othersignals1 |
                                           othersignals2);

                // service player before servicing other
                // things that might affect the player
            spService (player, playersigs);

                // service other things
            if (sigs & othersignals1) {
            }
            if (sigs & othersignals2) {
            }
        }
    }

  Associated Files

    soundplayer.h, music.lib

  See Also

    spGetPlayerSignalMask(), spGetPlayerStatus(), spStartReading(),
    spStartPlaying()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spsetbranchaction##
spSetBranchAction - Set up an SPAction to branch to the specified marker.

  Synopsis

    Err spSetBranchAction (SPAction *action, SPSound *toSound,
                           const char *toMarkerName)

  Description

    Sets up the SPAction to cause a branch to the specified marker as the
    resulting action of a decision function.

  Arguments

    action                      Pointer to an SPAction to fill out. This must
                                be the pointer passed to your decision function.

    toSound                     Pointer to SPSound containing marker to
                                branch to. This SPSound must belong to the same
                                SPPlayer as the SPMarker for which the decision function
                                was called.

    toMarkerName                Name of marker to in toSound branch to. All markers
                                except markers at the end of sounds are
                                considered valid "to" markers.

  Return Value

    Non-negative value on success; negative error code on failure.

  Outputs

    On success, fills out SPAction to cause a branch to the specified
    marker. On failure, nothing is written to the SPAction.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    SPDecisionFunction, spSetStopAction(), spBranchAtMarker()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spsetdefaultdecisionfunction##
spSetDefaultDecisionFunction - Install a global decision function to be
                               called for every marker.

  Synopsis

    Err spSetDefaultDecisionFunction (SPPlayer *player,
                                      SPDecisionFunction decisionFunc,
                                      void *decisionData)

  Description

    Install a global decision function that is to be called when the player
    reaches each marker. This can be used as a way to do some common
    operation at multiple locations during playback (e.g. processing a
    script).

    Clear the global decision function with
    spClearDefaultDecisionFunction().

  Arguments

    player                      SPPlayer to which to install default
                                decision function.

    decisionFunc                An SPDecisionFunction to install, or NULL
                                to clear.

    decisionData                A pointer to client-supplied data to be
                                passed to decisionFunc when called. Can be
                                NULL.

  Return Value

    Non-negative value on success; negative error code on failure.

  Notes

    The player normally optimizes reading data from disc by
    ignoring markers that have neither a branch destination nor a marker
    decision function. When a default decision function is installed, the
    player must interrupt reading data from disc in preperation for a
    potential branch at EVERY marker, even if the default decision
    function does nothing. This can severely impact
    performance depending on the placement of markers.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spCleateDefaultDecisionFunction(), spSetMarkerDecisionFunction(),
    SPDecisionFunction

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spsetmarkerdecisionfunction##
spSetMarkerDecisionFunction - Install a marker decision function.

  Synopsis

    Err spSetMarkerDecisionFunction (SPSound *sound,
                                     const char *markerName,
                                     SPDecisionFunction decisionFunc,
                                     void *decisionData)

  Description

    Install a decision function that is to be called when the player
    reaches the specified marker. Each marker can have a different
    decision function.

    Clear the marker's decision function with
    spCleateMarkerDecisionFunction().

  Arguments

    sound                       Pointer to SPSound containing marker to
                                which to install decision function.

    markerName                  Name of marker in sound to which to install
                                decision function.

    decisionFunc                An SPDecisionFunction to install, or NULL
                                to clear.

    decisionData                A pointer to client-supplied data to be
                                passed to decisionFunc when called. Can be
                                NULL.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Library call implemented in music.lib V24.

  Notes

    While a marker decision function is installed, reading from disc is
    interrupted every time this marker is encountered. This can have an
    impact on performance.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spCleateMarkerDecisionFunction(), spSetDefaultDecisionFunction(),
    SPDecisionFunction

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spsetstopaction##
spSetStopAction - Set up an SPAction to stop reading.

  Synopsis

    Err spSetStopAction (SPAction *resultAction)

  Description

    Sets up the SPAction to stop reading as the resulting action
    of a decision function.

  Arguments

    action                      Pointer to an SPAction to fill out. This must
                                be the pointer passed to your decision function.

  Return Value

    Non-negative value on success; negative error code on failure.

  Outputs

    On success, fills out SPAction to cause a branch to the specified
    marker. On failure, nothing is written to the SPAction.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    SPDecisionFunction, spSetBranchAction(), spStopAtMarker()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spstartplaying##
spStartPlaying - Begin emitting sound for an SPPlayer.

  Synopsis

    Err spStartPlaying (SPPlayer *player, const TagArg *samplerTags)

    Err spStartPlayingVA (SPPlayer *player, uint32 samplerTag1, ...)

  Description

    Begins the actual output of spooled sound. This function begins
    playback immediately making it suitable for being called in
    sync with some user activity if necessary. spStartReading() prefills
    the spooler buffers. This function should therefore be called some time
    after calling spStartReading().

    Calling this function starts the process of signals arriving which
    need to be serviced with spService(). This function causes the
    SP_STATUS_F_PLAYING flag to be set.

    Call spStop() to manually stop or wait for playback to finish by
    checking spGetPlayerStatus() after calling spService().

  Arguments

    player                      Pointer to SPPlayer to start playing.

  Tags

    AF_TAG_AMPLITUDE            (uint32) Amplitude to set SPPlayer's sample
                                player instrument to. Defaults to whatever
                                the last setting was. Valid range is 0 to
                                0x7fff.

    AF_TAG_RATE                 (uint32) Sample playback rate value for
                                variable rate sample player instruments
                                expressed as a 1.15 fixed point value.
                                0x8000 is the normal rate (e.g. 44100
                                sample frames / sec). Valid range is
                                0x0001 (really, really, slow) to 0xffff
                                (nearly twice the normal rate). Defaults
                                to whatever the last setting was
                                (variable rate sample player instruments
                                typically default to 0x8000). Ignored for
                                fixed rate sample players.

  Return Value

    Non-negative value on success; negative error code on failure.

  Notes

    The only bad thing that will happen if you call this function before calling
    spStartReading() is that you won't have any control over the
    precise time that playback begins. In that case, playback would start
    as soon as spStartReading() has read a buffer's worth of data. The player also
    might starved briefly if the 2nd buffer weren't ready before the first one
    finished.

    Multiple calls to spStartPlaying() without an intervening stop of some
    kind (spStop() or marker causing a stop) cause stuttered sound output.

    A call to spStartPlaying() will supercede a previous call to spPause().

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spStartReading(), spStop(), spService(), spGetPlayerStatus()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spstartreading##
spStartReading - Start SPPlayer reading from an SPSound.

  Synopsis

    Err spStartReading (SPSound *startSound,
                        const char *startMarkerName)

  Description

    This function begins the process of spooling data for an SPPlayer,
    processing marker actions along the way. It completely fills the
    spooler buffers belonging to the SPPlayer in preparation for playback,
    which can take an unpredictable amount of time. Therefore, the actual
    function to begin playback, spStartPlaying(), is a separate call so
    that starting the actual sound playback may be synchronized to some
    user event.

    Normally this function is called while the player's SP_STATUS_F_READING
    status flag is cleared (see spGetPlayerStatus()), in which case it merely
    begins reading at the specified location. The SP_STATUS_F_READING flag is
    then set. If the entire sound data to be played fits completely into the
    buffers, this flag is cleared again before this function returns.

    This function can also be called while the SP_STATUS_F_READING flag is set in
    order to force the playback to a different location without waiting for
    a marker branch or decision function. This abnormal method of
    relocating sound playback will almost certainly produce unpleasant
    sound output, but there may be times when it is necessary. Note that
    this merely causes reading to begin at a new location. It does not
    does not flush the spooler. Anything buffered already will continue
    play.

  Arguments

    startSound                  Pointer to SPSound to start reading from.

    startMarkerName             Name of marker in startSound to start reading from.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Library call implemented in music.lib V24.

  Examples

    // error checking omitted for brevity

    {
        const int32 playersigs = spGetPlayerSignalMask (player);

            // read from beginning of one of the sounds
        spStartReading (player, sound1, SP_MARKER_NAME_BEGIN);

        // could wait for some event to trigger playback here

            // begin playback
        spStartPlayingVA (player,
                          AF_TAG_AMPLITUDE, 0x7fff,
                          TAG_END);

            // service player until it's done
        while (spGetPlayerStatus(player) & SP_STATUS_F_BUFFER_ACTIVE) {
            const int32 sigs = WaitSignal (playersigs);

            spService (player, playersigs);
        }
    }

  Associated Files

    soundplayer.h, music.lib

  See Also

    spStartPlaying(), spStop(), spService(), spGetPlayerStatus()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spstop##
spStop - Stops an SPPlayer

  Synopsis

    Err spStop (SPPlayer *player)

  Description

    Stops reading and sound playback.

    Clears all SP_STATUS_F_ flags. Can be called regardless of
    SPPlayer's current state. Multiple calls have no effect.

  Arguments

    player                      Pointer to SPPlayer to stop.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spStartReading(), spStartPlaying(), spGetPlayerStatus()

##src/audio/musiclib/soundplayer.c::mpg/musiclib/soundplayer/spstopatmarker##
spStopAtMarker - Stop when playback reaches marker.

  Synopsis

    Err spStopAtMarker (SPSound *sound, const char *markerName)

  Description

    Barring results of a marker or default decision function, causes
    playback to stop when the player reaches this marker.

    Markers can have one of 3 static actions: continue, branch, or stop.
    This action can be changed at any time, including while the player is
    playing.

  Arguments

    sound                       Pointer to SPSound containing marker to
                                stop at.

    markerName                  Name of marker in sound to stop at. All markers
                                except markers at the beginning of sounds
                                are considered valid places to stop.

  Return Value

    Non-negative value on success; negative error code on failure.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundplayer.h, music.lib

  See Also

    spBranchAtMarker(), spContinueAtMarker(),
    spSetMarkerDecisionFunction(), spSetDefaultDecisionFunction()

##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/soundbufferfunc##
(*SoundBufferFunc)() - SoundSpooler callback function typedef.

  Synopsis

    typedef int32 (*SoundBufferFunc) ( SoundSpooler *sspl,
                                       SoundBufferNode *sbn,
                                       int32 msg )

  Description

    This callback system is a superset of the (*UserBufferProcessor)() system.
    It offers 2 basic improvements over the former:

    1.  It provides a method of getting buffer start as well as completion
        notification.

    2.  UserBufferProcessor can't be called by functions such as
        ssplDetachInstrument() or ssplPlayData() because these functions
        do not have a UserBufferProcessor argument.  The SoundBufferFunc is
        stored in the SoundSpooler structure, so all support functions
        can call it.

    The client can install a callback function pointer of this type in the
    SoundSpooler by calling ssplSetSoundBufferFunc().  Several sound spooler
    functions send notification messages to this function when the state of a
    SoundBufferNode changes.  When a buffer is started, one of the start class
    messages is sent to the SoundBufferFunc.  When a buffer ends, one of the
    end class messages is sent.

    This callback function is called with a message id, a pointer to the
    SoundSpooler and SoundBufferNode whose state has changed.  The callback
    function can call non-destructive sound spooler functions like
    ssplGetUserData(), ssplGetSequencenNum(), etc, but is not permitted to do
    anything to change the state of the sound spooler.  In particular, calling
    ssplRequestBuffer() or ssplSendBuffer() typically will confuse the sound
    spooler's list processing functions. Also, the state of SSPL_STATUS_F_ACTIVE
    is undefined when inside a SoundBufferFunc function.

    Generally, the callback function must be able to handle all message types.
    To simplify message handling, you can get the class of a message by
    calling ssplGetSBMsgClass().  This is extremely useful if you only care to
    know that a buffer started or finished, but not the specifics of how it
    did this.

    The callback function is required to return a result.  The sound spooler
    considers a return value >= 0 from the callback function to indicate
    success.  This value does NOT propogate back to the client.

    If the callback returns a value <0, that value is returned to the client
    through the sound spooler function that called the callback function.  In
    this case, the sound spooler function terminates immediately.  Any
    function that can process multiple SoundBufferNodes (e.g. ssplAbort(), or
    ssplProcessSignals()) doesn't complete its active queue processing when
    the callback function returns an error code.  If the cause of the callback
    failure can be resolved by the client, the client can usually call the
    offending function again to continue where it left off.

    Use of the SoundBufferFunc and UserBufferProcessor systems are mutually
    exclusive.  When a UserBufferProcessor is supplied to a function that
    supports it and a SoundBufferFunc is installed, that function fails
    and returns an error code prior to doing anything.

  Arguments

    sspl                        SoundSpooler.

    sbn                         SoundBufferNode changing state.

    msg                         A message id (SSPL_SBMSG_...).  See below.

  Messages

    Start Class

    SSPL_SBMSG_INITIAL_START    Initial Start.  ssplStartSpooler() sends this
                                message for the first buffer in active queue.

    SSPL_SBMSG_LINK_START       Link Start.  ssplProcessSignals() sends this
                                message for the next buffer in the active queue
                                after it removes a completed buffer.

    SSPL_SBMSG_STARVATION_START Starvation Start.  ssplSendBuffer() sends this
                                message for the buffer sent to it if that buffer
                                causes the spooler to restart after being starved.

    End Class

    SSPL_SBMSG_COMPLETE         Complete.  ssplProcessSignals() sends this message
                                for every completed buffer that it removes from
                                the active queue.

    SSPL_SBMSG_ABORT            Abort.  ssplAbort() sends this message for every
                                buffer (completed or otherwise) that it removes
                                from the active queue.

  Return Value

    Client should return non-negative value on success, or a negative 3DO
    error code on failure.

  Implementation

    Client-supplied callback function used by music.lib V22.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplSetSoundBufferFunc(), ssplGetSBMsgClass(), ssplStartSpooler(),
    ssplAbort(), splProcessSignals(), ssplSendBuffer()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplabort##
ssplAbort - Abort SoundSpooler buffers in active queue.

  Synopsis

    Err ssplAbort ( SoundSpooler *sspl, void
                    (*UserBufferProcessor) ( SoundSpooler *,
                                             SoundBufferNode * ) )

  Description

    ssplAbort stops the spooler (by calling ssplStopSpooler()) and removes all
    buffers in the active queue (by calling ssplReset()), including the one
    currently being played.

    If a SoundBufferFunc is installed, a SSPL_SBMSG_ABORT message is sent to
    it with each SoundBufferNode removed from the active queue.  If
    UserBufferProcessor is non-NULL, each SoundBufferNode removed from the
    active queue is passed to it.  If both a SoundBufferFunc and
    UserBufferProcessor are supplied, ssplAbort() fails and returns
    ML_ERR_BAD_ARG.

    If SoundBufferFunc fails, ssplAbort() fails immediately and returns the
    error code returned by SoundBufferFunc without removing the rest of the
    buffers from the active queue.  Calling ssplAbort() again safely picks
    up where it left off.

    Clears SSPL_STATUS_F_STARED, SSPL_STATUS_F_PAUSED, and SSPL_STATUS_F_ACTIVE.

  Arguments

    sspl                        SoundSpooler to abort.

    UserBufferProcessor         Pointer to a function to call with
                                each SoundBufferNode removed from the
                                active queue, or NULL.

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplStopSpooler(), ssplSendBuffer(), ssplProcessSignals(),
    ssplReset(), (*SoundBufferFunc)(), (*UserBufferProcessor)()
    ssplGetSpoolerStatus()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplattachinstrument##
ssplAttachInstrument - Attach new sample player instrument to SoundSpooler.

  Synopsis

    Err ssplAttachInstrument ( SoundSpooler *sspl,
                               Item SamplerIns )

  Description

    ssplAttachInstrument() installs a new sample player instrument in the
    SoundSpooler.  Any previously attached sample player instrument is detached
    (by calling ssplDetachInstrument()) before the new one is attached.

  Arguments

    sspl                        pointer to a SoundSpooler structure.

    SamplerIns                  Instrument to attach buffer samples to.

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Class

    Low level

  Note

    Any buffers in the active queue are aborted by calling ssplAbort().  Note
    that there is no provision to supply a UserBufferProcessor function to
    ssplAttachInstrument().  An installed SoundBufferFunc works correctly,
    however.

  Caveats

    Leaves the SoundSpooler in an inderminate state if this function fails.
    A subsequent successful call to this function or to ssplDetachInstrument()
    restores the SoundSpooler to sanity.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplDetachInstrument(), ssplAbort()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplcreatesoundspooler##
ssplCreateSoundSpooler - Create a SoundSpooler.

  Synopsis

    SoundSpooler *ssplCreateSoundSpooler ( int32 NumBuffers,
                                           Item SamplerIns )

  Description

    ssplCreateSoundSpooler creates a SoundSpooler data structure and
    initializes it.  Call ssplCreateSoundSpooler first to create a
    SoundSpooler data structure.

    This function allocates the requested number of SoundBufferNodes for the
    SoundSpooler.  SoundBufferNodes simply carry pointers to sample data; they
    do not have any embedded sample data.  The pointer and length of each
    sample buffer is stored into a SoundBufferNode with
    ssplSetBufferAddressLength() prior to enqueuing it with ssplSendBuffer().

  Arguments

    NumBuffers                  Specifies the number of buffers.  For
                                double buffering of audio data, use
                                NumBuffers=2. The more buffers you
                                use, the less chance you will have of
                                running out of data. A safe number to
                                use is 4-8.

    SamplerIns                  The DSP instrument that will play the
                                data.  For  example, you could use a
                                fixedstereosample.dsp  instrument to
                                play a 44.1 kHz, 16-bit, stereo
                                soundfile.  You can call ScanSample()
                                and SelectSamplePlayer() to determine
                                the best instrument to use for a
                                given sample format.  You will need
                                to connect this instrument to a mixer
                                or a direct out.dsp to hear the sound.

                                This setting can be changed after creation
                                by using ssplAttachInstrument().  Also,
                                this can be 0, if you call ssplAttachInstrument()
                                before actually starting the spooler.

  Return Value

    Pointer to new SoundSpooler on success, or NULL on failure.

  Implementation

    Library call implemented in music.lib V21.

  Caveats

    If this function fails, it messes up subsequent sequence numbering.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplDeleteSoundSpooler(), ssplStartSoundSpooler(), ssplSendBuffer(),
    ssplProcessSignals()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/sspldeletesoundspooler##
ssplDeleteSoundSpooler - Delete a SoundSpooler.

  Synopsis

    Err ssplDeleteSoundSpooler ( SoundSpooler *sspl )

  Description

    ssplDeleteSoundSpooler disposes of a SoundSpooler created by
    ssplCreateSoundSpooler() after first stopping it with ssplStopSpooler().
    All SoundBufferNodes associated with the SoundSpooler are deleted.

  Arguments

    sspl                        Pointer to a SoundSpooler structure.
                                Starting with music.lib v22, can be NULL.

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Caveats

    Doesn't tolerate a NULL sspl pointer prior to music.lib v22.

  Note

    This function does no notification of SoundBufferNode removal from
    the active queue. If this is an issue, call ssplAbort() prior to
    calling this function.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplCreateSoundSpooler(), ssplStopSoundSpooler()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/sspldetachinstrument##
ssplDetachInstrument - Detach the current sample player instrument from
                       the SoundSpooler.

  Synopsis

    Err ssplDetachInstrument ( SoundSpooler *sspl )

  Description

    ssplDetachInstrument removes the current sample player instrument from the
    SoundSpooler.  Any buffers in the active queue are aborted (calls
    ssplAbort()).  Spooler playback cannot be started until a new instrument
    is attached with ssplAttachInstrument().  Incidentally,
    ssplAttachInstrument() calls this function prior to attaching a new
    instrument, so it's pretty unlikely that you actually need to call this
    function directly.

  Arguments

    sspl                        Pointer to a SoundSpooler structure.

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Class

    Low level

  Note

    Any buffers in the active queue are aborted by calling ssplAbort().  Note
    that there is no provision to supply a UserBufferProcessor function to
    ssplAttachInstrument().  An installed SoundBufferFunc works correctly,
    however.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplAttachInstrument(), ssplAbort()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/sspldumpsoundbuffernode##
ssplDumpSoundBufferNode - Print debug info for SoundBufferNode.

  Synopsis

    void ssplDumpSoundBufferNode ( const SoundBufferNode *sbn )

  Description

    Prints debugging information for a SoundBufferNode.

  Arguments

    sbn                         SoundBufferNode to print.

  Return Value

    None

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplDumpSoundSpooler()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/sspldumpsoundspooler##
ssplDumpSoundSpooler - Print debug info for SoundSpooler.

  Synopsis

    void ssplDumpSoundSpooler ( const SoundSpooler *sspl )

  Description

    Prints debugging information for SoundSpooler including the contents of
    both the active and free queues (calls ssplDumpSoundBufferNode() for each
    SoundBufferNode).

  Arguments

    sspl                        SoundSpooler to print.

  Return Value

    None

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplDumpSoundBufferNode()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplgetsbmsgclass##
ssplGetSBMsgClass - Get class of message passed to SoundBufferFunc.

  Synopsis

    int32 ssplGetSBMsgClass ( int32 msg )

  Description

    Returns the class of a message passed to SoundBufferFunc.

  Arguments

    msg                         Message id passed to SoundBufferFunc.

  Return Value

    One of the SSPL_SBMSGCLASS_... values defined in soundspooler.h.

  Implementation

    Macro implemented in soundspooler.h V22.

  Associated Files

    soundspooler.h, music.lib

  See Also

    (*SoundBufferFunc)()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplgetsequencenum##
ssplGetSequenceNum - Get Sequence Number of a SoundBufferNode.

  Synopsis

    int32 ssplGetSequenceNum ( SoundSpooler *sspl,
                               SoundBufferNode *sbn )

  Description

    ssplGetSequenceNum returns the "sequence number" of the specified
    SoundBufferNode.  This is an integer that indicates the allocation
    sequence of the SoundBufferNode.

  Arguments

    sspl                        Pointer to a SoundSpooler structure.

    sbn                         Pointer to a sound buffer node.

  Return Value

    An integer that is the index of the buffer as allocated by
    ssplCreateSoundSpooler(). It goes from zero to NumBuffers-1.

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplCreateSoundSpooler()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplgetspoolerstatus##
ssplGetSpoolerStatus - Get SoundSpooler status flags.

  Synopsis

    int32 ssplGetSpoolerStatus (const SoundSpooler *sspl)

  Description

    Returns a set of flags SSPL_STATUS_F_ flags describing the current
    state of the SoundSpooler.

  Arguments

    sspl                        Pointer to a SoundSpooler structure.

  Return Value

    Any combination of these flags (always a postive value):

    SSPL_STATUS_F_ACTIVE        This flag are SoundBufferNodes in the
                                SoundSpooler's active queue.
                                It is set by ssplSendBuffer(). It can be
                                cleared by ssplProcessSignals()
                                when all of the buffers in the
                                active queue have completed. It is
                                always cleared by ssplReset() and
                                ssplAbort().

                                You can use this flag as an indicator
                                that all of the sound data submitted
                                by ssplSendBuffer() has been played
                                as of the most recent call to
                                ssplProcessSignals().

    SSPL_STATUS_F_STARTED       This flag indicates that the SoundSpooler
                                has been started.
                                Unless it has been paused, it is
                                playing sound or will as soon as
                                there is some to play. This flag is set by
                                ssplStartSpooler() and cleared by
                                ssplStopSpooler() and
                                ssplAbort().

    SSPL_STATUS_F_PAUSED        This flag indicates that the SoundSpooler has been paused.
                                It is only meaningful if
                                SSPL_STATUS_F_STARTED is also
                                set. This flag is set by ssplPause() and cleared
                                by ssplResume(),
                                ssplStartSpooler(), and
                                ssplStopSpooler().

  Caveats

    This state of SSPL_STATUS_F_ACTIVE is undefined when inside any
    SoundSpooler callback function. This is the case because the callback
    functions can be called inside the loop that processes the active queue.
    No guarantee is made about whether a SoundBufferNode is removed from
    the active queue before or after the callback functions are called.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplIsSpoolerActive(), ssplSendBuffer(), ssplProcessSignals()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplgetuserdata##
ssplGetUserData - Get User Data from a SoundBufferNode.

  Synopsis

    void *ssplGetUserData ( SoundSpooler *sspl,
                            SoundBufferNode *sbn )

  Description

    ssplGetUserData returns the pointer stored in a SoundBufferNode by
    ssplSetUserData().

  Arguments

    sspl                        Pointer to a SoundSpooler structure.

    sbn                         Pointer to a sound buffer node.

  Return Value

    User data pointer stored in a SoundBufferNode by ssplSetUserData().

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplSetUserData()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplisspooleractive##
ssplIsSpoolerActive - Test if spooler has anything in its active queue.

  Synopsis

    bool ssplIsSpoolerActive (const SoundSpooler *sspl)

  Description

    Returns TRUE if the SoundSpooler has any SoundBufferNodes in its active queue.
    Simply calls ssplGetSpoolerStatus() and tests the SSPL_STATUS_F_ACTIVE flag.

  Arguments

    sspl                        Pointer to a SoundSpooler structure.

  Return Value

    TRUE if SoundSpooler has any SoundBufferNodes in its active queue, FALSE otherwise.

  Caveats

    This state of SSPL_STATUS_F_ACTIVE is undefined when inside any
    SoundSpooler callback function. This is the case because the callback
    functions can be called inside the loop that processes the active queue.
    No guarantee is made about whether a SoundBufferNode is removed from
    the active queue before or after the callback functions are called.

  Implementation

    Macro implemented in soundspooler.h V24.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplGetSpoolerStatus(), ssplSendBuffer(), ssplProcessSignals()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplpause##
ssplPause - Pauses the SoundSpooler

  Synopsis

    Err ssplPause ( SoundSpooler *sspl )

  Description

    ssplPause pauses SoundSpooler's sample player instrument. Stops playback
    and retains the sample data position so that playback can be resumed at
    the same position with ssplResume(). This differs from the
    ssplStartSpooler() ssplStopSpooler() pair which do not retain the current
    sample playback position.

    The playback cannot be resumed from the paused location if
    ssplStartSpooler() or ssplStopSpooler() are called between ssplPause() and
    ssplResume(). Multiple calls to ssplPause() have no effect; pause
    does not nest.

    Sets SSPL_STATUS_F_PAUSED.

  Argument

    sspl                        Pointer to a SoundSpooler structure.

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplResume(), ssplStopSpooler(), audiofolio/PauseInstrument(),
    ssplGetSpoolerStatus()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplplaydata##
ssplPlayData - Waits for next available buffer then sends a block full of
               data to the spooler.  (convenience routine).

  Synopsis

    int32 ssplPlayData ( SoundSpooler *sspl,
                         char *Data,
                         int32 NumBytes )

  Description

    ssplPlayData() is a convenience function that does the following
    operations:

      * Requests an available SoundBufferNode.  If none are available, waits for
        one to become available.

      * Attaches sample data to the SoundBufferNode.

      * Submits the SoundBufferNode to the active queue.

  Arguments

    sspl                        Pointer to a SoundSpooler structure.

    Data                        Pointer to data buffer.

    NumBytes                    Number of bytes to send.

  Return Value

    Positive value on success indicating the signal to be sent when the buffer
    finishes playing, or negative 3DO error code on failure.  Never returns
    zero.

  Implementation

    Convenience call implemented in music.lib V21.

  Notes

    This function calls ssplProcessSignals() when forced to wait for a
    SoundBufferNode, but doesn't have a mechanism for the client to supply a
    UserBufferProcessor callback function.  If you use this function and
    require completion notification, use a SoundBufferFunc instead of a
    UserBufferProcessor.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplSpoolData(), ssplRequestBuffer(), ssplSendBuffer(),
    ssplSetBufferAddressLength(), ssplSetUserData(), ssplProcessSignals(),
    (*SoundBufferFunc)()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplprocesssignals##
ssplProcessSignals - Process completion signals that have been received.

  Synopsis

    int32 ssplProcessSignals ( SoundSpooler *sspl,
                               int32 SignalMask,
                               void (*UserBufferProcessor) ( SoundSpooler *,
                                                             SoundBufferNode * ) )

  Description

    ssplProcessSignals informs the spooler about which buffers have finished,
    so the spooler can move them to the free buffer queue.

    If a SoundBufferFunc in installed, a SSPL_SBMSG_COMPLETE message is sent
    to it with each completed SoundBufferNode removed from the active queue.
    Also, a SSPL_SBMSG_LINK_START message is sent with the next buffer in the
    active queue.  If UserBufferProcessor is non-NULL, each completed
    SoundBufferNode removed from the active queue is passed to it. If both a
    SoundBufferFunc and UserBufferProcessor are supplied, ssplProcessSignals()
    fails and returns ML_ERR_BAD_ARG.

    In SoundBufferFunc fails, ssplProcessSignals() fails immediately and
    returns the error code returned by SoundBufferFunc without processing the
    rest of the signals.  Calling ssplProcessSignals() again with the same
    signal set picks up where it left off.

    Clears SSPL_STATUS_F_ACTIVE when all of the active buffers have completed
    (i.e. the flag is cleared when this function has processed the completion signals for all of the
    buffers that were in the active queue at the time that this function was called).
    You can use this to detect when the last submitted buffer has finished.

  Arguments

    sspl                    Pointer to a SoundSpooler structure.

    SignalMask              Signals received from WaitSignal().

    UserBufferProcessor     Function for each completed SoundBufferNode,
                            or NULL.

  Return Value

    Non-negative value on success indicating number of completed buffers
    removed from the active queue, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  Notes

    ssplProcessSignals() synchronizes the sound spooler's queues to the set of
    signals collected at the last WaitSignal(). Many of the other sound
    spooler functions assume that the sound spooler has been synchronized in
    this way (in particular ssplSendBuffer()). Do not call any sound spooler
    functions between a WaitSignal() involving sound spooler signals and
    ssplProcessSignals().

  Caveats

    In the case where SoundBufferFunc(SSPL_SBMSG_COMPLETE) returns an error code,
    SoundBufferFunc(SSPL_SBMSG_LINK_START) isn't called for the next buffer in
    the active queue, because processing terminates immediately on receipt of
    of the failure of SoundBufferFunc(SSPL_SBMSG_COMPLETE) even when ssplProcessSignals()
    is called again.

  See Also

    ssplSendBuffer(), ssplAbort(), (*SoundBufferFunc)(), (*UserBufferProcessor)(),
    ssplGetSpoolerStatus()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplrequestbuffer##
ssplRequestBuffer - Asks for an available buffer.

  Synopsis

    SoundBufferNode *ssplRequestBuffer ( SoundSpooler *sspl )

  Description

    ssplRequestBuffer returns an available SoundBufferNode from the free queue
    or NULL if none are available (all are in the active queue). When an
    available SoundBufferNode is returned, the client can attach sample data
    to it (by calling ssplSetBufferAddressLength()) and submit it to the
    active queue (by calling ssplSendBuffer()). This procedure is
    automatically done for you by the convenience functions ssplSpoolData()
    and ssplPlayData().

    This function gives you write permission to the returned SoundBufferNode.
    You have that write permission until the SoundBufferNode is returned to the
    SoundSpooler with ssplSendBuffer() or ssplUnrequestBuffer().

  Argument

    sspl                        Pointer to a SoundSpooler structure.

  Return Value

    Pointer to a SoundBufferNode if one is available, or NULL if no buffers
    are available.

  Implementation

    Library call implemented in music.lib V21.

  Examples

    The following code fragment shows proper use of ssplRequestBuffer(),
    ssplUnrequestBuffer(), ssplSetBufferAddressLength(), and
    ssplSendBuffer().

    Err sendbuffer (SoundSpooler *sspl)
    {
        SoundBufferNode *sbn;
        Err errcode;

            // request a buffer
        if ((sbn = ssplRequestBuffer (sspl)) != NULL) {

                // fill buffer, on failure return unused buffer
                // to free queue
            if ((errcode = fillbuffer (sspl, sbn)) < 0) {
                ssplUnrequestBufffer (sspl, sbn);
                return errcode;
            }

                // on success, send buffer (always moves buffer to
                // either free or active queue - no need to unrequest it)
            if ((errcode = ssplSendBuffer (sspl, sbn)) < 0) return errcode;
        }

        return 0;
    }

    Err fillbuffer (SoundSpooler *sspl, SoundBufferNode *sbn)
    {
        void *addr;
        uint32 len;

        // your code here to fill buffer - results in addr, len

        return ssplSetBufferAddressLength (sspl, sbn, addr, len);
    }

  Notes

    Prior to music.lib V24, SoundBufferNodes were actually _removed_ from the
    free list; all knowledge of them was lost by the sound spooler until they were
    passed back to ssplSendBuffer() to put them back into one of the SoundSpooler's
    queues. If lost, ssplDeleteSoundSpooler() would lose memory and be unable to
    free some items.

    Starting with V24, the sound spooler automatically tracks all sound buffer
    nodes requested by ssplRequestBuffer() in a "requested" queue. Any buffers
    that are not submitted or "unrequested", get put back into the free list
    by ssplReset() and freed by ssplDeleteSoundSpooler().

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplUnrequestBuffer(), ssplSendBuffer(), ssplSetBufferAddressLength(),
    ssplSpoolData(), ssplPlayData()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplreset##
ssplReset - Reset Sound Spooler.

  Synopsis

    Err ssplReset ( SoundSpooler *sspl,
                    void (*UserBufferProcessor) ( SoundSpooler *,
                                                  SoundBufferNode * ) )

  Description

    This function removes all SoundBufferNodes from the active queue
    and clears their associated signal bits.  ssplAbort() calls this
    function to clear the active queue after stopping the sound spooler.

    If a SoundBufferFunc is installed, a SSPL_SBMSG_ABORT message is sent to
    it with each SoundBufferNode removed from the active queue.  If
    UserBufferProcessor is non-NULL, each SoundBufferNode removed from the
    active queue is passed to it.  If both a SoundBufferFunc and
    UserBufferProcessor are supplied, ssplReset() fails and returns
    ML_ERR_BAD_ARG.

    If SoundBufferFunc fails, ssplReset() fails immediately and returns the
    error code returend by SoundBufferFunc without removing the rest of the
    buffers from the active queue.  Calling ssplReset() again safely picks
    up where it left off.

    Clears SSPL_STATUS_F_ACTIVE.

  Arguments

    sspl                        SoundSpooler to reset.

    UserBufferProcessor         Pointer to a function to call with
                                each SoundBufferNode removed from the
                                active queue, or NULL.

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Note

    This function does not disturb the sample player instrument.  If the
    spooler has not been stopped, any data that has already been queued
    up will continue to play, even though the associated SoundBufferNodes
    have been removed from the active queue.  It is generally a good idea
    to call this function only after stopping the sound spooler, or use
    ssplAbort() instead.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplAbort(), (*SoundBufferFunc)(), (*UserBufferProcessor)(), ssplGetSpoolerStatus()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplresume##
ssplResume - Resume SoundSpooler playback.

  Synopsis

    Err ssplResume ( SoundSpooler *sspl )

  Description

    ssplResume resumes sound playback after being paused with ssplPause().
    Playback is resumed from the sample data position in the spooled sound at
    which it was paused.

    This function has no effect if ssplStartSpooler() or ssplStopSpooler() are
    called between ssplPause() and ssplResume(). Multiple calls to ssplResume()
    have no effect; pause does not nest.

    Clears SSPL_STATUS_F_PAUSED.

  Argument

    sspl                        Pointer to a SoundSpooler structure.

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplPause(), audiofolio/ResumeInstrument(), ssplGetSpoolerStatus()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplsendbuffer##
ssplSendBuffer - Send a buffer full of data.

  Synopsis

    int32 ssplSendBuffer ( SoundSpooler *sspl,
                           SoundBufferNode *sbn )

  Description

    ssplSendBuffer() submits a SoundBufferNode ready for playback to the active
    queue. If the spooler has already been started, playback of this buffer
    will begin immediately if there are no other buffers in the active queue.
    In this case if a SoundBufferFunc in installed, a
    SSPL_SBMSG_STARVATION_START message is sent with sbn.

    The SoundBufferNode is posted into the active buffer queue on success, or the
    free buffer list on failure.  In either case, you are not permitted to modify
    the SoundBufferNode passed to this function after calling it.

    When successful, sets SSPL_STATUS_F_ACTIVE.

  Arguments

    sspl                        Pointer to a SoundSpooler structure.

    sbn                         Pointer to a SoundBufferNode to send (returned
                                from ssplRequestBuffer()).

  Return Value

    Positive value on success indicating the signal to be sent when the buffer
    finishes playing, or negative 3DO error code on failure.  Never returns
    zero.

  Implementation

    Library call implemented in music.lib V21.

  Caveats

    In the case where ssplStartSpooler() is called with an empty active queue
    and ssplSendBuffer() actually starts the spooler, ssplSendBuffer() calls
    SoundBufferFunc(SSPL_SBMSG_STARVATION_START) instead of
    SoundBufferFunc(SSPL_SBMSG_INITIAL_START).  This isn't truely a starvation
    case, it's merely a difference in order of calls, but ssplSendBuffer()
    can't tell the difference.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplRequestBuffer(), ssplUnrequestBuffer(), ssplSetBufferAddressLength(),
    ssplSpoolData(), ssplGetSpoolerStatus()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplsetbufferaddresslength##
ssplSetBufferAddressLength - Attach sample data to a SoundBufferNode.

  Synopsis

    Err ssplSetBufferAddressLength ( SoundSpooler *sspl,
                                     SoundBufferNode *sbn,
                                     char *Data,
                                     int32 NumBytes )

  Description

    ssplSetBufferAddressLength() attaches sample data to a SoundBufferNode
    returned by ssplRequestBuffer(). This procedure is used internally by
    ssplPlayData() and ssplSpoolData().

  Arguments

    sspl                        Pointer to SoundSpooler that owns sbn.

    sbn                         Pointer to a SoundBufferNode returned by
                                ssplRequestBuffer().

    Data                        Pointer to sample data to attach to this
                                SoundBufferNode.

    NumBytes                    Length of sample data (in bytes).

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Notes

    The safe minimum size for spooler buffers appears to be around 256
    bytes. Values less than this risk having gaps in the playback due
    insufficient time to process transitions from one sample Attachment
    to another. This minimum is in reality more a function of the time
    required to play a sample Attachment than that of sample length in
    bytes. The value 256 was determined using fixedstereosample.dsp
    which at the time of this writing had the fastest DMA consumption
    of all the DSP instruments (176,400 bytes/sec). This means that this
    value should be a suitable minimum spooler buffer length for any
    sample playback instrument used with the sound spooler.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplRequestBuffer(), ssplSendBuffer(), ssplSpoolData()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplsetsoundbufferfunc##
ssplSetSoundBufferFunc - Install new SoundBufferFunc in SoundSpooler.

  Synopsis

    Err ssplSetSoundBufferFunc ( SoundSpooler *sspl,
                                 SoundBufferFunc func )

  Description

    Installs a new SoundBufferFunc callback function in a SoundSpooler.

  Arguments

    sspl                        SoundSpooler to affect.

    func                        New callback function pointer to install,
                                or NULL to disable callback.

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V22.

  Associated Files

    soundspooler.h, music.lib

  See Also

    (*SoundBufferFunc)()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplsetuserdata##
ssplSetUserData - Store user data in a SoundBufferNode.

  Synopsis

    void ssplSetUserData ( SoundSpooler *sspl,
                           SoundBufferNode *sbn,
                           void *UserData )

  Description

    ssplSetUserData stores user data pointer in a SoundBufferNode. This can be
    used to attach any extra data of your choosing to a SoundBufferNode. The
    user data pointer can be retrieved from a SoundBufferNode by calling
    ssplGetUserData().

  Arguments

    sspl                        Pointer to a SoundSpooler structure.

    sbn                         Pointer to a sound buffer node.

    UserData                    User data pointer to store in
                                SoundBufferNode.  Can be NULL.

  Return Value

    None

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplGetUserData(), ssplSpoolData()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplspooldata##
ssplSpoolData - Send a block full of data. (convenience routine)

  Synopsis

    int32 ssplSpoolData ( SoundSpooler *sspl,
                          char *Data,
                          int32 NumBytes,
                          void *UserData )

  Description

    ssplSpoolData() is a convenience function that does the following
    operations:

      * Requests an available SoundBufferNode, returns 0 if none are
        available.

      * Attaches sample data and optional user data pointer to the
        SoundBufferNode.

      * Submits the SoundBufferNode to the active queue.

  Arguments

    sspl                        Pointer to a SoundSpooler structure.

    Data                        Pointer to the buffer of data.

    NumBytes                    Number of bytes of data to send.

    UserData                    Pointer to user data, or NULL.

  Return Value

    Positive value on success indicating the signal to be sent when the buffer
    finishes playing, zero if no SoundBufferNodes are available, or negative
    3DO error code for others kinds of failure.

  Implementation

    Convenience call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplPlayData(), ssplRequestBuffer(), ssplSendBuffer(),
    ssplSetBufferAddressLength(), ssplSetUserData()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplstartspooler##
ssplStartSpooler - Start SoundSpooler.

  Synopsis

    Err ssplStartSpooler ( SoundSpooler *sspl,
                           int32 Amplitude )

  Description

    ssplStartSpooler() starts the sound spooler's sample player instrument. It
    starts playback at the beginning of the first buffer in the active queue
    (submitted by ssplSendBuffer()). If there are no buffers in the active
    queue, playback will not begin until a buffer is submitted with a call to
    ssplSendBuffer().

    If there is a SoundBufferFunc installed and there is a buffer in the
    active queue, sends a SSPL_SBMSG_INITIAL_START message with a pointer to
    the first active buffer. If SoundBufferFunc returns an error code,
    ssplStartSpooler() terminates and returns that error code.

    This function sets SSPL_STATUS_F_STARTED and clears SSPL_STATUS_F_PAUSED.

  Arguments

    sspl                        Pointer to a SoundSpooler structure.

    Amplitude                   A value of 0 to 0x7FFF that controls the
                                loudness.

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplStartInstrumentTags(), ssplStopSpooler(), ssplPause(), ssplSendBuffer(),
    (*SoundBufferFunc)(), audiofolio/StartInstrument(), ssplGetSpoolerStatus()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplstartspoolertags##
ssplStartSpoolerTags - Start SoundSpooler with tags.

  Synopsis

    Err ssplStartSpoolerTags ( SoundSpooler *sspl,
                               const TagArg *samplertagsint32 )

    Err ssplStartSpoolerTagsVA ( SoundSpooler *sspl,
                                 uint32 tag1, ... )

  Description

    ssplStartSpooler() starts the sound spooler's sample player instrument. It
    starts playback at the beginning of the first buffer in the active queue
    (submitted by ssplSendBuffer()). If there are no buffers in the active
    queue, playback will not begin until a buffer is submitted with a call to
    ssplSendBuffer().

    If there is a SoundBufferFunc installed and there is a buffer in the
    active queue, sends a SSPL_SBMSG_INITIAL_START message with a pointer to
    the first active buffer. If SoundBufferFunc returns an error code,
    ssplStartSpooler() terminates and returns that error code.

    This function sets SSPL_STATUS_F_STARTED and clears SSPL_STATUS_F_PAUSED.

  Arguments

    sspl                        Pointer to a SoundSpooler structure.

    samplertags                 Tags to be passed to StartInstrument() for
                                sample player instrument. Useful tags are
                                AF_TAG_AMPLITUDE and AF_TAG_RATE. Can be
                                NULL.

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplStopSpooler(), ssplPause(), ssplSendBuffer(), (*SoundBufferFunc)(),
    audiofolio/StartInstrument(), ssplGetSpoolerStatus()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplstopspooler##
ssplStopSpooler - Stop SoundSpooler.

  Synopsis

    Err ssplStopSpooler ( SoundSpooler *sspl )

  Description

    ssplStopSpooler stops the SoundSpooler's sample player instrument. Unlike
    ssplPause(), this call does not retain the current sample data position.
    Starting the spooler after stopping it will start sound playback from the
    beginning of the first buffer in the active queue.

    This function merely stops the SoundSpooler's sample player instrument. It
    does not disturb the active queue.

    This function clears SSPL_STATUS_F_STARTED and SSPL_STATUS_F_PAUSED.

  Argument

    sspl                        pointer to a SoundSpooler structure.

  Return Value

    Non-negative value on success, or negative 3DO error code on failure.

  Implementation

    Library call implemented in music.lib V21.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplStartSpooler(), ssplPause(), ssplAbort(), audiofolio/StopInstrument(),
    ssplGetSpoolerStatus()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/ssplunrequestbuffer##
ssplUnrequestBuffer - Return an unused buffer to the sound spooler.

  Synopsis

    Err ssplUnrequestBuffer (SoundSpooler *sspl, SoundBufferNode *sbn)

  Description

    ssplUnrequestBuffer() puts an unused SoundBufferNode from the requested
    queue back into the free queue. Use it as a way to politely give up
    write access to a SoundBufferNode that was given to you by ssplRequestBuffer()
    that you aren't going to submit to ssplSendBuffer(). For example, This can be
    used as part of a clean up path that traps failures between ssplRequestBuffer()
    and ssplSendBuffer().

    This is automatically done for all SoundBufferNodes in the requested list
    by ssplReset(), ssplAbort(), and ssplDeleteSoundSpooler().

  Argument

    sspl                        Pointer to a SoundSpooler structure.

    sbn                         Pointer to a SoundBufferNode to return.
                                The SBN must actually be in the requested
                                or else this function will return an error.

  Return Value

    Non-negative value on success, negative error code on failure:
        ML_ERR_BAD_ARG - the supplied sbn was not actually on the requested list.

  Implementation

    Library call implemented in music.lib V24.

  Associated Files

    soundspooler.h, music.lib

  See Also

    ssplRequestBuffer(), ssplSendBuffer()
##src/audio/musiclib/soundspooler.c::mpg/musiclib/soundspooler/userbufferprocessor##
(*UserBufferProcessor)() - Callback function called by
                           ssplProcessSignals(), ssplAbort(), and
                           ssplReset().

  Synopsis

    void (*UserBufferProcessor) ( SoundSpooler *sspl,
                                  SoundBufferNode *sbn )

  Description

    This user callback function is called by ssplProcessSignals() for each
    buffer that has finished playing and ssplAbort() for each buffer that is
    removed from the active buffer queue.  This function can be used as
    notification that the sound spooler is done with a given buffer.  For
    example, if sound is being spooled from a network connection, this
    function could be used to reply the network packet that contained the
    sample data for a given buffer.

    Using the SoundBufferNode's UserData field can help identify the buffer
    being passed to this function (for example, UserData could be a pointer to
    the aforementioned network packet).  See ssplGetUserData().

    It is not legal to do anything to disturb the sound spooler's active
    buffer queue during this function.  In particular, do not call
    ssplSendBuffer() or anything that might call ssplSendBuffer() as this will
    confuse the list processor in ssplProcessSignals().

    The state of SSPL_STATUS_F_ACTIVE is undefined when inside a UserBufferProcessor
    function.

  Arguments

    sspl                        Pointer to the SoundSpooler passed to
                                ssplProcessSignals() or ssplAbort().

    sbn                         Pointer to the completed (or aborted)
                                SoundBufferNode that was just
                                removed from the active queue.

  Return Value

    None

  Implementation

    Client-supplied callback function used by music.lib V21.

  Note

    This facility has been superceded by the SoundBufferFunc system.

    There are plenty of sound spooler functions in which buffers can be
    removed from the active queue without any means for the client to provide
    a UserBufferProcessor function.  This list includes, but is not limited to
    ssplDeleteSoundSpooler(), ssplAttachInstrument(), ssplDetachInstrument(),
    and ssplPlayData().  Consider using a SoundBufferFunc instead of a
    UserBufferProcessor.

  See Also

    (*SoundBufferFunc)(), ssplProcessSignals(), ssplAbort(), ssplReset()
##src/libs/c/CountBits.c::spg/clib/countbits##
CountBits: count the number of bits set in a word.

  Synopsis

    int CountBits(uint32 mask);

  Description

    CountBits examines the longword passed in as a parameter and
    returns the number of bits that are turned on in the word, using
    an algorithm derived from a note in MIT's "HAKMEM".

  Arguments

    mask                        The data word to count the bits of.

  Return Value

    The number of bits that were turned on in the supplied value.

  Implementation

    Convenience call implemented in clib.lib V21.

  Associated Files

    string.h                    ANSI C Prototype

    clib.lib                    ARM Link library

  See Also

    FindMSB(), FindLSB()
##src/libs/c/dumpnode.c::spg/clib/dumpnode##
DumpNode - Print contents of a node.

  Synopsis

    void DumpNode (const Node *node, const char *banner)

  Description

    This function prints out the contents of a Node structure for
    debugging purposes.

  Arguments

    node                        The node to print.

    banner                      Descriptive text to print before the
                                node contents. May be NULL.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

##src/libs/c/FindLSB.s::spg/clib/ffs##
ffs - Find the first set bit.

  Synopsis

    int ffs( uint32 mask )

  Description

    ffs finds the lowest-numbered bit that is set in the argument.
    The least significant bit is bit number 1, and the most
    significant bit is bit 32.

  Arguments

    flags                       The 32-bit word to check

  Return Value

    ffs returns zero if no bits are set in the parameter, or the bit
    index of the first bit set in the parameter. For example, ffs
    returns 1 if the value of the argument is 1 or 3 or 7; and 3 if
    the value of the argument is 4 or 12.  If no bits are set, ffs
    returns 0.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    clib.lib                    ARM Link Library

  Notes

    This entry point is provided for portability and compatibility
    only; code written specificly for Portfolio should use FindLSB or
    FindMSB to reduce any ambiguity over whether the least signifocant
    or most significant bit is desired.

  See Also

    FindMSB(), FindLSB()

##src/libs/c/FindLSB.s::spg/clib/findlsb##
FindLSB - Find the least significant bit.

  Synopsis

    int FindLSB( uint32 mask )

  Description

    FindLSB finds the lowest-numbered bit that is set in the argument.
    The least significant bit is bit number 1, and the most
    significant bit is bit 32.

  Arguments

    flags                       The 32-bit word to check

  Return Value

    FindLSB returns the number of the lowest-numbered bit that is set
    in the argument (for example, 1 if the value of the argument is 1
    or 3 or 7, 3 if the value of the argument is 4 or 12).  If no bits
    are set, the procedure returns 0.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    clib.lib                    ARM Link Library

  See Also

    FindMSB(), ffs()

##src/libs/c/FindMSB.s::spg/clib/findmsb##
FindMSB - Find the highest-numbered bit.

  Synopsis

    int FindMSB( uint32 bits )

  Description

    This procedure finds the highest-numbered bit that is set in the
    argument.  The least significant bit is bit number 1, and the most
    significant bit is bit 32.

  Arguments

    bits                        The 32-bit word to check

  Return Value

    The procedure returns the number of the highest-numbered bit that
    is set in the argument.  If no bits are set, the procedure returns
    0.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    clib.lib                    ARM Link Library

  See Also

    FindLSB(), ffs()

##src/libs/c/prterr.c::spg/clib/printerror##
PrintError - Print the error string for an error

  Synopsis

    void PrintError( char *who, char *what, char *whom, Err err )

  Description

    On DEVELOPMENT builds, this macro calls a procedure that
    prints the error string for an error to the Macintosh
    console for a 3DO development system.  This has the same
    effect as using printf() to print the who, what and whom
    strings with the string constructed by GetSysErr().

    On non-DEVELOPMENT builds, this macro expands to an empty
    statement, reducing code size and avoiding pulling in
    lots of extraneous junk from the support libraries.

    To copy an error string into a buffer instead of sending
    it the console, use GetSysErr().

    In the task called "shell", the C statement

        PrintError((char *)0, "open", filename, errno)

    might result in something like this:

        +================ Terminal ================
        | FFS-Severe-System-extended-No such file
        | shell: unable to open "badfile"


  Arguments

    who                         a string that identifies the task,
                                folio, or module that encountered the
                                error; if a NULL pointer or a
                                zero-length string is passed, the name
                                of the current task is used (or, if
                                there is no current task, "notask").

    what                        a string that describes what action
                                was being taken that failed. Normally,
                                the words "unable to" are printed
                                before this string to save client data
                                space; if the first character of the
                                "what" string is a backslash, these
                                words are not printed.

    whom                        a string that describes the object to
                                which the described action is being
                                taken (for instance, the name of a
                                file). It is printed surrounded by
                                quotes; if a NULL pointer or zero
                                length string is passed, the quotes
                                are not printed.

    err                         a (normally negative) number denoting
                                the error that occurred, which will be
                                decoded with GetSysErr. If not
                                negative, then no decoded error will
                                be printed.

  Implementation

    Macro implemented in the operror.h V21.

  Associated Files

    operror.h                   ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    PrintfSysErr(), GetSysErr()

##src/compression/folio/autodocs.c::spg/compression/createcompressor##
CreateCompressor - Create a compression engine

  Synopsis

    Err CreateCompressor(Compressor **comp, CompFunc cf,
                         const TagArg *tags);

    Err CreateCompressorVA(Compressor **comp, CompFunc cf,
                           uint32 tags, ...);

  Description

    Creates a compression engine. Once the engine is created, you
    can call FeedCompressor() to have the engine compress the
    data you supply.

  Arguments

    comp                        A pointer to a Compressor variable,
                                where a handle to the compression
                                engine can be put.

    cf                          A data output function. Every word of
                                compressed data is sent to this
                                function. This function is called with
                                two parameters: one is a user-data
                                value as supplied with the
                                COMP_TAG_USERDATA tag. The other is the
                                word of compressed data being output by
                                the compressor.

    tags                        A pointer to an array of tag arguments
                                containing extra data for this
                                function. See below for a description
                                of the tags supported.

  Tag Arguments

    The following tag arguments may be supplied in array form to this
    function. The array must be terminated with TAG_END.

    COMP_TAG_WORKBUFFER (void *)
                                A pointer to a work buffer. This buffer
                                is used by the compressor to store
                                state information. If this tag is not
                                supplied, the buffer is allocated and
                                freed by the folio automatically. To
                                obtain the required size for the
                                buffer, call the
                                GetCompressorWorkBufferSize() function.
                                The buffer you supply must be aligned
                                on a 4-byte boundary, and must
                                remain valid until DeleteCompressor()
                                is called. When you supply a work
                                buffer, this routine allocates no
                                memory of its own.

    COMP_TAG_USERDATA (void *)
                                A value that the compressor will pass
                                to 'cf' when it is called. This value
                                can be anything you want. For example,
                                it can be a pointer to a private data
                                structure containing some context such
                                as a file handle. If this tag is
                                not supplied, then NULL is passed
                                to 'cf' when it is called.

  Return Value

    Returns >= 0 for success, or a negative error code if the
    compression engine could not be created. Possible error codes
    include:

    COMP_ERR_BADPTR             An invalid output function pointer,
                                or work buffer was supplied.

    COMP_ERR_BADTAG             An unknown tag was supplied.

    COMP_ERR_NOMEM              There was not enough memory to
                                initialize the compressor.

  Implementation

    Folio call implemented in compression folio V24.

  Associated Files

    compression.h

  See Also

    FeedCompressor(), DeleteCompressor(), GetCompressorWorkBufferSize(),
    CreateDecompressor()

##src/compression/folio/autodocs.c::spg/compression/createdecompressor##
CreateDecompressor - Create a decompression engine

  Synopsis

    Err CreateDecompressor(Decompressor **comp, CompFunc cf,
                           const TagArg *tags);

    Err CreateDecompressorVA(Decompressor **comp, CompFunc cf,
                             uint32 tags, ...);

  Description

    Creates a decompression engine. Once the engine is created, you
    can call FeedDecompressor() to have the engine decompress the
    data you supply.

  Arguments

    decomp                      A pointer to a Decompressor variable,
                                where a handle to the decompression
                                engine can be put.

    cf                          A data output function. Every word of
                                decompressed data is sent to this
                                function. This function is called with
                                two parameters: one is a user-data
                                value as supplied with the
                                COMP_TAG_USERDATA tag. The other is the
                                word of decompressed data being output
                                by the decompressor.

    tags                        A pointer to an array of tag arguments
                                containing extra data for this
                                function. See below for a description
                                of the tags supported.

  Tag Arguments

    The following tag arguments may be supplied in array form to this
    function. The array must be terminated with TAG_END.

    COMP_TAG_WORKBUFFER (void *)
                                A pointer to a work buffer. This buffer
                                is used by the decompressor to store
                                state information. If this tag is not
                                supplied, the buffer is allocated and
                                freed by the folio automatically. To
                                obtain the required size for the
                                buffer, call the
                                GetDecompressorWorkBufferSize()
                                function. The buffer you supply must
                                be aligned on a 4-byte boundary, and
                                must remain valid until
                                DeleteDecompressor() is called.
                                When you supply a work buffer, this
                                routine allocates no memory of its own.

    COMP_TAG_USERDATA (void *)
                                A value that the decompressor will pass
                                to 'cf' when it is called. This value
                                can be anything you want. For example,
                                it can be a pointer to a private data
                                structure containing some context such
                                as a file handle. If this tag is
                                not supplied, then NULL is passed
                                to 'cf' when it is called.

  Return Value

    Returns >= 0 for success, or a negative error code if the
    decompression engine could not be created. Possible error codes
    include:

    COMP_ERR_BADPTR             An invalid output function pointer,
                                or work buffer was supplied.

    COMP_ERR_BADTAG             An unknown tag was supplied.

    COMP_ERR_NOMEM              There was not enough memory to
                                initialize the compressor.

  Implementation

    Folio call implemented in compression folio V24.

  Associated Files

    compression.h

  See Also

    FeedDecompressor(), DeleteDecompressor(),
    GetDecompressorWorkBufferSize(), CreateCompressor()

##src/compression/folio/autodocs.c::spg/compression/deletecompressor##
DeleteCompressor - Delete a compression engine

  Synopsis

    Err DeleteCompressor(Compressor *comp);

  Description

    Deletes a compression engine previously created by
    CreateCompressor(). This flushes any data left to be output
    by the compressor, and generally cleans things up.

  Arguments

    comp                        An active compression handle, as
                                obtained from CreateCompressor(). Once
                                this call is made, the compression
                                handle becomes invalid and can no
                                longer be used.

  Return Value

    >= 0 for success, or a negative error code. Possible
    error codes include:

    COMP_ERR_BADPTR             An invalid compression handle was
                                supplied.

  Implementation

    Folio call implemented in compression folio V24.

  Associated Files

    compression.h

  See Also

    CreateCompressor()

##src/compression/folio/autodocs.c::spg/compression/deletedecompressor##
DeleteCompressor - Delete a decompression engine

  Synopsis

    Err DeleteDecompressor(Decompressor *decomp);

  Description

    Deletes a decompression engine previously created by
    CreateDecompressor(). This flushes any data left to be output
    by the decompressor, and generally cleans things up.

  Arguments

    decomp                      An active decompression handle, as
                                obtained from CreateDecompressor().
                                Once this call is made, the
                                decompression handle becomes invalid
                                and can no longer be used.

  Return Value

    >= 0 for success, or a negative error code. Current possible
    error codes are:

    COMP_ERR_BADPTR               An invalid decompression handle was
                                  supplied.

    COMP_ERR_DATAREMAINS          The decompressor thinks it is done,
                                  but there remains extra data in its
                                  buffers. This happens when the
                                  compressed data is somehow corrupt.

    COMP_ERR_DATAMISSING          The decompressor thinks that not all
                                  of the compressed data was given to
                                       be decompressed. This happens when
                                  the compressed data is somehow
                                  corrupt.

  Implementation

    Folio call implemented in compression folio V24.

  Associated Files

    compression.h

  See Also

    CreateCompressor()

##src/compression/folio/autodocs.c::spg/compression/feedcompressor##
FeedCompressor - Give data to a compression engine

  Synopsis

    Err FeedCompressor(Compressor *comp, void *data,
                       uint32 numDataWords);

  Description

    Give data to a compressor engine to have it compress it.
    As data is compressed, the call back function supplied when the
    compressor was created gets called for every word of
    compressed data generated.

  Arguments

    comp                        An active compression handle, as
                                obtained from CreateCompressor().

    data                        A pointer to the data to compress.

    numDataWords                The number of words of data being
                                given to the compressor.

  Return Value

    >= 0 for success, or a negative error code. Possible
    error codes include:

    COMP_ERR_BADPTR            An invalid compression handle was
                               supplied.

  Implementation

    Folio call implemented in compression folio V24.

  Associated Files

    compression.h

  See Also

    CreateCompressor(), DeleteCompressor()

##src/compression/folio/autodocs.c::spg/compression/feeddecompressor##
FeedDecompressor - Give data to the decompression engine

  Synopsis

    Err FeedDecompressor(Decompressor *decomp, void *data,
                         uint32 numDataWords);

  Description

    Give data to the decompressor engine to have it decompress it.
    As data is decompressed, the call back function supplied when the
    decompressor was created gets called for every word of
    decompressed data generated.

  Arguments

    decomp                      An active decompression handle, as
                                obtained from CreateDecompressor().

    data                        A pointer to the data to decompress.

    numDataWords                The number of words of compressed data
                                being given to the decompressor.

  Return Value

    >= 0 for success, or a negative error code. Possible
    error codes include:

    COMP_ERR_BADPTR             An invalid decompression handle was
                                supplied.

  Implementation

    Folio call implemented in compression folio V24.

  Associated Files

    compression.h

  See Also

    CreateDecompressor(), DeleteDecompressor()

##src/compression/folio/autodocs.c::spg/compression/getcompressorworkbuffersize##
GetCompressorWorkBufferSize - Get the size of the work buffer
                              needed by a compression engine.

  Synopsis

    int32 GetCompressorWorkBufferSize(const TagArg *tags);

    int32 GetCompressorWorkBufferSizeVA(uint32 tags, ...);

  Description

    Return the size of the work buffer needed by a compression
    engine. You can then allocate a buffer of that size and supply
    the pointer with the COMP_TAG_WORKBUFFER tag when creating
    a compression engine. If the COMP_TAG_WORKBUFFER tag is not
    supplied when creating a compressor, then the folio automatically
    allocates the memory needed for the compression engine.

  Arguments

    tags                        A pointer to an array of tag arguments
                                containing extra data for this
                                function. This must currently always
                                be NULL.

  Return Value

    A positive value indicates the size of the work buffer needed in
    bytes, while a negative value indicates an error. Possible
    error codes currently include:

    COMP_ERR_BADTAG            An unknown tag was supplied.

  Implementation

    Folio call implemented in compression folio V24.

  Associated Files

    compression.h

  See Also

    CreateCompressor(), DeleteCompressor()

##src/compression/folio/autodocs.c::spg/compression/getdecompressorworkbuffersize##
GetDecompressorWorkBufferSize - Get the size of the work buffer
                                needed by a decompression engine.

  Synopsis

    int32 GetDecompressorWorkBufferSize(const TagArg *tags);

    int32 GetDecompressorWorkBufferSizeVA(uint32 tags, ...);

  Description

    Return the size of the work buffer needed by a decompression
    engine. You can then allocate a buffer of that size and supply
    the pointer with the COMP_TAG_WORKBUFFER tag when creating
    a decompression engine. If the COMP_TAG_WORKBUFFER tag is not
    supplied when creating a decompressor, then the folio automatically
    allocates the memory needed for the decompression engine.

  Arguments

    tags                        A pointer to an array of tag arguments
                                containing extra data for this
                                function. This must currently always
                                be NULL.

  Return Value

    A positive value indicates the size of the work buffer needed in
    bytes, while a negative value indicates an error. Possible
    error codes currently include:

    COMP_ERR_BADTAG            An unknown tag was supplied.

  Implementation

    Folio call implemented in compression folio V24.

  Associated Files

    compression.h

  See Also

    CreateDecompressor(), DeleteDecompressor()

##src/compression/folio/autodocs.c::spg/compression/simplecompress##
SimpleCompress - Compress some data in memory

  Synopsis

    Err SimpleCompress(void *source, uint32 sourceWords,
                       void *result, uint32 resultWords);

  Description

    Compress a chunk of memory to a different chunk of
    memory.

  Arguments

    source                      A pointer to memory containing
                                the data to be compressed. This
                                pointer must be on a 4-byte boundary.

    sourceWords                 The number of words of data to
                                compress.

    result                      A pointer to where the compressed
                                data is to be deposited.

    resultWords                 The number of words available in the
                                result buffer. If the compressed data
                                is larger than this size, an
                                overflow will be reported.

  Return Value

    If positive, then indicates the number of words copied to the
    result buffer. If negative, then an error code. Possible error
    codes include:

    COMP_ERR_NOMEM              There was not enough memory to
                                initialize the compressor.

    COMP_ERR_OVERFLOW           There was not enough room in the
                                result buffer to hold all of the
                                compressed data.

  Implementation

    Convenience call implemented in compression.lib V24.

  Associated Files

    compression.h

  See Also

    SimpleDecompress()
##src/compression/folio/autodocs.c::spg/compression/simpledecompress##
simpleDecompress - Decompress some data in memory

  Synopsis

    Err SimpleDecompress(void *source, uint32 sourceWords,
                         void *result, uint32 resultWords);

  Description

    Decompress a chunk of memory to a different chunk of
    memory.

  Arguments

    source                      A pointer to memory containing
                                the data to be decompressed. This
                                pointer must be on a 4-byte boundary.

    sourceWords                 The number of words of data to
                                decompress.

    result                      A pointer to where the decompressed
                                data is to be deposited.

    resultWords                 The number of words available in the
                                result buffer. If the decompressed data
                                is larger than this size, an
                                overflow will be reported.

  Return Value

    If positive, then indicates the number of words copied to the
    result buffer. If negative, then an error code. Possible error
    codes include:

    COMP_ERR_NOMEM              There was not enough memory to
                                initialize the decompressor.

    COMP_ERR_OVERFLOW           There was not enough room in the
                                result buffer to hold all of the
                                decompressed data.

  Implementation

    Convenience call implemented in compression.lib V24.

  Associated Files

    compression.h

  See Also

    SimpleCompress()
##src/input/autodocs.c::spg/eventbroker/getcontrolpad##
GetControlPad - Gets control pad events.

  Synopsis

    Err GetControlPad( int32 padNumber, int32 wait,
                       ControlPadEventData *data )

  Description

    This is a convenience call that allows a task to easily
    monitor events on controller pads.  This function specifies a
    controller pad to monitor, specifies whether the routine
    should return immediately or wait until something happens on the controller
    pad, and provides a data structure for data from the controller pad.

    When the function executes, it either returns immediately with event
    information or waits until there is a change in the controller pad
    before returning. If an event has occurred, the task must
    check the ControlPadEventData data structure for details about the
    event.

  Arguments

    padNumber                    Sets the number of the generic controller
                                 pad on the control port (i.e., the first,
                                 second, third, and so forth pad in the
                                 control-port daisy chain, counting out from
                                 the 3DO unit) which the task wants to
                                 monitor.  The first pad is 1, the second is
                                 2, and so on.

    wait                         A boolean value that specifies the event
                                 broker's response.  If it is TRUE (a
                                 nonzero value), the event broker waits along
                                 with the task until an event occurs on the
                                 specified pad and only returns with data
                                 when there is a change in the pad.  If it is
                                 FALSE (zero), the event broker immediately
                                 returns with the status of the pad.

    data                         A pointer to a ControlPadEventData data
                                 structure for the returned control pad data
                                 to be stored

  Return Value

    This function returns 1 if an event has occurred on the pad, 0 if no
    event has occurred on the pad, or a negative number (an error code) if
    there a problem occurred while retrieving an event.

  Implementation

    Convenience call implemented in input.lib V20.

  Associated Files

    event.h, input.lib

  See Also

    InitEventUtility(), GetMouse(), KillEventUtility()
##src/input/autodocs.c::spg/eventbroker/getmouse##
GetMouse - Gets mouse events.

  Synopsis

    Err GetMouse( int32 mouseNumber, int32 wait,
                  MouseEventData *data )

  Description

    This convenience call allows a task to easily
    monitor mouse events.

    This function is similar to GetControlPad() but gets
    events from a specified mouse instead of a specified controller pad.
    It specifies a mouse to monitor, specifies whether the call
    should return immediately or wait until something happens on the
    mouse, and provides a data structure for data from the mouse.

    When the function executes, it either returns immediately with
    event  information or waits there is a change in the mouse before
    returning. If an event has occurred, the task must check the
    MouseEventData data structure for details about the event.

  Arguments

    mouseNumber                  Sets the number of the generic mouse on the
                                 control port (i.e., the first, second,
                                 third, and so forth mouse in the
                                 control-port daisy chain, counting out from
                                 the 3DO unit) which the task wants to
                                 monitor.  The first mouse is 1, the second
                                 is 2, and so on.

    wait                         A boolean value that specifies the event
                                 broker's response.  If it is TRUE (a
                                 no-zero value), the event broker waits along
                                 with the task until an event occurs on the
                                 specified pad and only returns with data
                                 when there is a change in the pad.  If it is
                                 FALSE (zero), the event broker immediately
                                 returns with the status of the pad.

    data                         A pointer to a MouseEventData data structure
                                 that contains the mouse data that is
                                 returned

  Return Value

    This function returns 1 if an event has occurred on the mouse, 0 if no
    event has occurred on the mouse, or an error code (a negative value) if an
    error occurred when attempting to retrieve an event.

  Implementation

    Convenience call implemented in input.lib V20.

  Associated Files

    event.h, input.lib

  See Also

    InitEventUtility(), GetControlPad(), KillEventUtility()
##src/input/autodocs.c::spg/eventbroker/initeventutility##
InitEventUtility - Connects task to the event broker.

  Synopsis

    Err InitEventUtility( int32 numControlPads, int32 numMice,
                          int32 focusListener )

  Description

    This convenience call allows a task to easily
    monitor events on controller pads or mice.  This function connects
    the task to the event broker, sets the task's focus interest, and
    determines how many controller pads and mice the task wants to
    monitor.

    The function creates a reply port and a message, sends a configuration
    message to the event broker (which asks the event broker to report
    appropriate mouse and controller pad events), and deals with the event
    broker's configuration reply.

  Arguments

    numControlPads               The number of controller pads to monitor

    numMice                      The number of mice to monitor

    focusListener                The focus of the task when it is connected
                                 as a listener.  If the value is nonzero, the
                                 task is connected as a focus-dependent
                                 listener.  If the value is zero, the task is
                                 connected as a focus-independent listener.

  Return Value

    This function returns 0 if all went well or a negative error code
    if an error occurred.

  Implementation

    Convenience call implemented in input.lib V20.

  Associated Files

    event.h, input.lib

  See Also

    GetControlPad(), GetMouse(), KillEventUtility()
##src/input/autodocs.c::spg/eventbroker/killeventutility##
KillEventUtility - Disconnects a task from the event broker.

  Synopsis

    Err KillEventUtility( void );

  Description

    This is a convenience function that allows a task to easily
    monitor events on controller pads or mice. This function disconnects
    a task that was connected to the event broker with
    the InitEventUtility() function.

    When executed, the function disconnects the task from the event
    broker, closes the reply port, and frees all resources used for
    the connection.

  Return Value

    This function returns 0 if all went well or a negative error code
    if an error occurs.

  Implementation

    Convenience call implemented in input.lib V20.

  Associated Files

    event.h, input.lib

  See Also

    GetControlPad(), GetMouse(), InitEventUtility()
##src/filesystem/autodocs.c::spg/file/changedirectory##
ChangeDirectory - Changes the current directory.

  Synopsis

    Item ChangeDirectory( char *path )

  Description

    Changes the current task's working directory to the absolute or
    relative location specified by the path, and returns the item number for
    the directory.

  Arguments

    path                         An absolute or relative pathname for
                                 the new current directory.

  Return Value

    The function returns the item number of the new directory or a
    negative error code if an error occurs.

  Implementation

    SWI implemented in file folio V20.

  Associated Files

    filefunctions.h

  See Also

    GetDirectory()

##src/filesystem/autodocs.c::spg/file/closedirectory##
CloseDirectory - Closes a directory.

  Synopsis

    void CloseDirectory( Directory *dir )

  Description

    This function closes a directory that was previously opened using
    OpenDirectoryItem() or OpenDirectoryPath(). All resources get
    released.

  Arguments

    dir                          A pointer to the Directory structure
                                 for the directory to close.

  Implementation

    Folio call implemented in file folio V20.

  Associated Files

    directoryfunctions.h, filesystem.lib

  See Also

    OpenDirectoryItem(), OpenDirectoryPath(), ReadDirectory()

##src/filesystem/autodocs.c::spg/file/closediskfile##
CloseDiskFile - Closes a file.

  Synopsis

    int32 CloseDiskFile( Item fileItem )

  Description

    Closes a disk file that was opened with a call to OpenDiskFile() or
    OpenDiskFileInDir(). The specified item may not be used after
    successful completion of this call.

  Arguments

    fileItem                     The item number of the disk file to
                                 close.

  Return Value

    The function returns 0 if successful or a negative error code
    if an error occurs.

  Implementation

    SWI implemented in file folio V20.

  Associated Files

    filefunctions.h

  See Also

    OpenDiskFile(), OpenDiskFileInDir()

##src/filesystem/autodocs.c::spg/file/closediskstream##
CloseDiskStream - Closes a disk stream.

  Synopsis

    void CloseDiskStream( Stream *theStream )

  Description

    This function closes a disk stream that was opened with a call to
    OpenDiskStream().  It closes the stream's file, deallocates the
    buffer memory, and releases the stream structure.

  Arguments

    theStream                    A pointer to the Stream structure for
                                 an open file.

  Implementation

    Folio call implemented in file folio V20.

  Associated Files

    filestreamfunctions.h, filesystem.lib

  See Also

    OpenDiskStream(), ReadDiskStream(), SeekDiskStream()

##src/filesystem/autodocs.c::spg/file/createalias##
CreateAlias - Creates an alias for a file.

  Synopsis

    Item CreateAlias( char *aliasPath, char *realPath )

  Description

    This function creates an alias for a file.  The alias can be used in
    place of the full pathname for the file.  Note that the file system
    maintins separate alias entries for each task.

  Arguments

    aliasPath                    The alias pathname for the file.

    realPath                     The actual pathname for the file.

  Return Value

    The function returns the item number for the file alias that is
    created, or a negative error code if an error occurs.

  Implementation

    SWI implemented in file folio V20.

  Associated Files

    filefunctions.h

  See Also

    OpenDiskFile(), OpenDiskFileInDir()

##src/filesystem/autodocs.c::spg/file/createfile##
CreateFile - Creates a file.

  Synopsis

    Item CreateFile( char *path )

  Description

    This function creates a new file.

  Arguments

    path                         The pathname for the file.

  Return Value

    The function returns a positive value if the file is created successfully
    or a negative error code if an error occurs.

  Implementation

    SWI implemented in file folio V20.

  Associated Files

    filefunctions.h

  See Also

    DeleteFile(), OpenDiskFile(), OpenDiskFileInDir()

##src/filesystem/autodocs.c::spg/file/deletefile##
DeleteFile - Deletes a file.

  Synopsis

    Err DeleteFile( char *path )

  Description

    This function deletes a file.

  Arguments

    path                         The pathname for the file to delete.

  Return Value

    The function returns zero if the file was successfully deleted or
    a negative error code if an error occurs.

  Implementation

    SWI implemented in file folio V20.

  Associated Files

    filefunctions.h

  See Also

    CreateFile(), OpenDiskFile(), OpenDiskFileInDir(), CloseDiskFile()

##src/filesystem/LoadFile.c::spg/file/executeassubroutine##
ExecuteAsSubroutine - Execute previously loaded code as a subroutine.

  Synopsis

    int32 ExecuteAsSubroutine(CodeHandle code,
                              int32 argc, char **argv);

  Description

    This function lets you execute a chunk of code that was
    previously loaded from disk using LoadCode(). The code will
    run as a subroutine of the current task or thread.

    In order to function correctly, code being run as a subroutine
    should be linked with subroutinestartup.o instead of the usual
    cstartup.o

    The argc and argv parameters are passed directly to the main()
    entry point of the loaded code. The return value of this
    function is the value returned by main() of the code being run.

    The values you supply for argc and argv are irrelevant to
    this function. They are simply passed through to the loaded
    code. Therefore, their meaning must be agreed upon by the
    caller of this function, and by the loaded code.

  Arguments

    code                        A code handle filled in by a previous
                                call to LoadCode().

    argc	                A value that is passed directly as the
                                argc parameter to the loaded code's
                                main() entry point. This function
                                doesn't use the value of this argument,
                                it is simply passed through to the
                                loaded code.

    argv                        A value that is passed directly as the
                                argv parameter to the loaded code's
                                main() entry point. This function
                                doesn't use the value of this argument,
                                it is simply passed through to the
                                loaded code.

  Return Value

    Returns the value that the loaded code's main() function returns.

  Implementation

    Folio call implemented in file folio V21.

  Caveats

    If code being executed as a subroutine calls exit(), the
    parent thread or task will exit, not just the subroutine
    code.

  Associated Files

    filefunctions.h

  See Also

    LoadCode(), UnloadCode(), ExecuteAsThread()
##src/filesystem/LoadFile.c::spg/file/executeasthread##
ExecuteAsThread - Execute previously loaded code as a thread.

  Synopsis

    Item ExecuteAsThread(CodeHandle code,
                         int32 argc, char **argv,
                         char *threadName, int32 priority);

  Description

    This function lets you execute a chunk of code that was
    previously loaded from disk using LoadCode(). The code will
    execute as a thread of the current task.

    In order to function correctly, code being run as a thread
    should be linked with threadstartup.o instead of the usual
    cstartup.o

    The argc and argv parameters are passed directly to the main()
    entry point of the loaded code.

    The values you supply for argc and argv are irrelevant to
    this function. They are simply passed through to the loaded
    code. Therefore, their meaning must be agreed upon by the
    caller of this function, and by the loaded code.

    threadName specifies the name of the thread.

    priority specifies the priority the new thread should have.
    Providing a negative priority makes the thread inherit
    the priority of the current task or thread.

  Arguments

    code                        A code handle filled in by a previous
                                call to LoadCode().

    argc                        A value that is passed directly as the
                                argc parameter to the loaded code's
                                main() entry point. This function
                                doesn't use the value of this argument,
                                it is simply passed through to the
                                loaded code.

    argv                        A value that is passed directly as the
                                argv parameter to the loaded code's
                                main() entry point. This function
                                doesn't use the value of this argument,
                                it is simply passed through to the
                                loaded code.

    threadName                  The name of the thread. Should be a
                                descriptive string that identifies this
                                thread.

    priority                    The priority for the new thread. Supply
	                        a negative value to have the thread
                                inherit the priority of the current
                                task or thread. Priorities for user
                                threads can be in the range of 10 to
                                199.

  Return Value

    Returns the Item number of the new thread, or a negative error
    code if the thread could not be created.

  Implementation

    Folio call implemented in file folio V21.

  Associated Files

    filefunctions.h

  See Also

    LoadCode(), UnloadCode(), ExecuteAsSubroutine()
##src/filesystem/autodocs.c::spg/file/getdirectory##
GetDirectory - Gets the item number and pathname for the current
               directory.

  Synopsis

    Item GetDirectory( char *pathBuf, int32 pathBufLen )

  Description

    This function returns the item number of the calling task's current
    directory.  If pathBuf is non-NULL, it must point to a buffer of writable
    memory whose length is given in pathBufLen;  the absolute pathname of the
    current working directory is stored into this buffer.

  Arguments

    pathBuf                      A pointer to a buffer in which to receive
                                 the absolute pathname for the current
                                 directory.  If you do not want to get the
                                 pathname string, use NULL as the value of
                                 this argument.

    pathBufLen                   The size of the buffer pointed to by the
                                 pathBuf argument, in bytes, or zero if you
                                 don't provide a buffer.

  Return Value

    The function returns the item number of the current directory.

  Implementation

    SWI implemented in file folio V20.

  Associated Files

    filefunctions.h

##src/filesystem/LoadFile.c::spg/file/loadcode##
LoadCode - Load a binary image into memory, and obtain a handle to it.

  Synopsis

    Err LoadCode(char *fileName, CodeHandle *code);

  Description

    This function loads an executable file from disk into
    memory. Once loaded, the code can be spawned as a
    thread, or executed as a subroutine.

    In order to work correctly with this and associated functions,
    the executable file being loaded must have been linked
    with threadstartup.o or subroutinestartup.o instead of the
    usual cstartup.o

    You give this function the name of the executable file to
    load, as well as a pointer to a CodeHandle variable, where
    the handle for the loaded code will be stored. Note, "code"
    must point to a valid CodeHandle variable, that's where
    LoadCode() will put a pointer to the loaded code.

    Once you are done using the loaded code, you can remove it
    from memory by passing the code handle to the UnloadCode()
    function.

    To execute the loaded code, you must call either the
    ExecuteAsThread() function or the ExecuteAsSubroutine()
    function. Note that if the loaded code is reentrant, the
    same loaded code can be spawned multiple times simultaneously
    as a thread.

  Arguments

    fileName                    A NULL-terminated string indicating
                                the executable file to load.

    code                        A pointer to a CodeHandle variable,
                                where a handle to the loaded code
                                can be put.

  Return Value

    Returns >= 0 for success, or a negative error code if the file
    could not be loaded.

  Implementation

    Folio call implemented in file folio V21.

  Associated Files

    filefunctions.h

  See Also

    LoadProgram(), UnloadCode(), ExecuteAsThread(),
    ExecuteAsSubroutine()
##src/filesystem/LoadFile.c::spg/file/loadprogram##
LoadProgram - Load a binary image and spawn it as a task.

  Synopsis

    Item LoadProgram(char *cmdLine);

  Description

    This function loads an executable file from disk and
    launches a new task to execute the code.

    You give this function a command-line to interpret.
    The first component of the command-line is taken as the
    name of the file to load. The entirety of the command-line
    is passed to the new task as argc and argv in the main()
    function. The filename component of the command-line specifies
    either a fully-qualified pathname, or a pathname relative
    to the current directory.

    The priority of the new task will be identical to the
    priority of the current task. If you wish the task to have
    a different priority, you must use the LoadProgramPrio()
    function instead.

    If a priority was given to the executable being launched using
    the modbin utility, then the priority that was specified to modbin
    will be used for the new task, and not the current priority.

  Arguments

    cmdLine                     A NULL-terminated string indicating
                                the file to load as a task. The string
                                may also contain arguments for the task
                                being started.

  Return Value

    The Item number of the newly created task, or a negative error
    code if the task could not be created.

  Implementation

    Folio call implemented in file folio V20.

  Associated Files

    filefunctions.h

  See Also

    LoadProgramPrio(), LoadCode(), ExecuteAsThread()
##src/filesystem/LoadFile.c::spg/file/loadprogramprio##
LoadProgramPrio - Load a binary image and spawn it as a task, with
                  priority.

  Synopsis

    Item LoadProgramPrio(char *cmdLine, int32 priority);

  Description

    This function loads an executable file from disk and
    launches a new task to execute the code.

    You give this function a command-line to interpret.
    The first component of the command-line is taken as the
    name of the file to load. The entirety of the command-line
    is passed to the new task as argc and argv in the main()
    function. The filename component of the command-line specifies
    either a fully-qualified pathname, or a pathname relative
    to the current directory.

    The priority argument specifies the task priority to use
    for the new task. If you simply want the new task to have
    the same priority as the current task, use the
    LoadProgram() function instead. Alternatively, passing a
    negative priority to this function will also give the new
    task the same priority as the current task.

    If a priority was given to the executable being launched using
    the modbin utility, then the priority you give to this function
    is ignored, and the priority that was specified to modbin will be
    used instead.

  Arguments

    cmdLine                     A NULL-terminated string indicating
                                the file to load as a task. The
                                string may also contain arguments for
                                the task being started.

    priority                    The task priority for the new task.
                                For user code, this can be in the
                                range 10 to 199.

  Return Value

    The Item number of the newly created task, or a negative error
    code if the task could not be created.

  Implementation

    Folio call implemented in file folio V20.

  Associated Files

    filefunctions.h

  See Also

    LoadProgram(), LoadCode(), ExecuteAsThread()
##src/filesystem/autodocs.c::spg/file/opendirectoryitem##
OpenDirectoryItem - Opens a directory specified by an Item.

  Synopsis

    Directory *OpenDirectoryItem( Item openFileItem )

  Description

    This function opens a directory.  It allocates a new Directory
    structure, opens the directory, and prepares for a traversal of
    the contents of the directory.  Unlike OpenDirectoryPath(), you
    specify the file for the directory by its item number rather than
    by its pathname.

  Arguments

    openFileItem                 The item number of the open file to
                                 use for the directory. When you
                                 later call CloseDirectory(), this
                                 file item will automatically be
                                 deleted for you, you do not need to
                                 call CloseDiskFile().

  Return Value

    The function returns a pointer to the Directory structure that is
    created or NULL if an error occurs.

  Implementation

    Folio call implemented in file folio V20.

  Caveats

    When you are done scanning the directory and call
    CloseDirectory(), the item you gave to OpenDirectoryItem()
    will automatically be closed for you. In essense, when you
    call OpenDirectoryItem(), you are giving away the File item
    to the file folio, which will dispose of it when the directory
    is closed.

  Associated Files

    directoryfunctions.h, filesystem.lib

  See Also

    OpenDiskFile(), OpenDiskFileInDir(), OpenDirectoryPath(),
    CloseDirectory()

##src/filesystem/autodocs.c::spg/file/opendirectorypath##
OpenDirectoryPath - Opens a directory specified by a pathname.

  Synopsis

    Directory *OpenDirectoryPath( char *thePath )

  Description

    This function opens a directory.  It allocates a new Directory
    structure, opens the directory, and prepares for a traversal of the
    contents of the directory.  Unlike OpenDirectoryItem(), you specify
    the file for the directory by its pathname rather than by its item
    number.

  Arguments

    thePath                      An absolute or relative pathname (a null-
                                 terminated text string) for the file to
                                 use for the directory, or an alias for the
                                 pathname.

  Return Value

    The function returns a pointer to a Directory structure that is created
    or NULL if an error occurs.

  Implementation

    Folio call implemented in file folio V20.

  Associated Files

    directoryfunctions.h, filesystem.lib

  See Also

    OpenDiskFile(), OpenDiskFileInDir(), OpenDirectoryItem(),
    CloseDirectory()

##src/filesystem/autodocs.c::spg/file/opendiskfile##
OpenDiskFile - Opens a disk file.

  Synopsis

    Item OpenDiskFile( char *path )

  Description

    This function opens a disk file, given an absolute or relative
    pathname, and returns its Item number.

  Arguments

    path                         An absolute or relative pathname (a null-
                                 terminated text string) for the file to
                                 open, or an alias for the pathname.

  Return Value

    The function returns the item number of the opened file (which can be
    used later to refer to the file), or a negative error code if an
    error occurs.

  Implementation

    SWI implemented in file folio V20.

  Associated Files

    filefunctions.h

  See Also

    CloseDiskFile(), OpenDiskFileInDir(), OpenDiskStream()

##src/filesystem/autodocs.c::spg/file/opendiskfileindir##
OpenDiskFileInDir - Opens a disk file contained in a specific directory.

  Synopsis

    Item OpenDiskFileInDir( Item dirItem, char *path )

  Description

    Similar to OpenDiskFile(), this function allows the caller to specify
    the Item of a directory that should serve as a starting location for
    the file search.

  Arguments

    dirItem                      The item number of the directory
                                 containing the file.

    path                         A pathname for the file that is relative
                                 to the directory specified by the dirItem
                                 argument.

  Return Value

    The function returns the item number of the opened file (which can be
    used later to refer to the file), or a negative error code if an
    error occurs.

  Implementation

    SWI implemented in file folio V20.

  Associated Files

    filefunctions.h

  See Also

    OpenDiskFile(), OpenDirectoryItem(), OpenDirectoryPath(),
    OpenDiskStream(), CloseDiskFile()

##src/filesystem/autodocs.c::spg/file/opendiskstream##
OpenDiskStream - Opens a disk stream for stream-oriented I/O.

  Synopsis

    Stream *OpenDiskStream( char *theName, int32 bSize )

  Description

    This routine allocates a new Stream structure, opens the disk file
    identified by an absolute or relative pathname, allocates the specified
    amount of buffer space, and initiates an asynchronous read to fill the
    buffer with the first portion of the file's data.  It returns NULL if
    any of these functions cannot be performed for any reason.

    The bSize field specifies the amount of buffer space to be allocated to
    the file stream.  It may be positive (giving the number of bytes to be
    allocated), zero (indicating that a default allocation of two blocks
    should be used), or negative (giving the two's complement of the
    number of blocks worth of memory that should be allocated).

  Arguments

    theName                      An absolute or relative pathname (a null-
                                 terminated text string) for the file to
                                 open.

    bSize                        The size of the buffer to allocate for the
                                 stream.  This can be (1) a positive value
                                 that specifies the size of the buffer to
                                 allocate, in bytes, (2) zero, which
                                 specifies to allocate the default buffer
                                 (currently two blocks), or (3) a negative
                                 value , the two's complement of which
                                 specifies the number of blocks of memory to
                                 allocate for the buffer.

  Return Value

    The function returns a pointer to the Stream structure for the opened
    file or NULL if an error occurs.

  Implementation

    Folio call implemented in file folio V20.

  Associated Files

    filestreamfunctions.h

  See Also

    CloseDiskStream(), ReadDiskStream(), SeekDiskStream(),
    OpenDiskFile()

##src/filesystem/autodocs.c::spg/file/readdirectory##
ReadDirectory - Reads the next entry from a directory.

  Synopsis

    int32 ReadDirectory( Directory *dir, DirectoryEntry *de )

  Description

    This routine reads the next entry from the specified directory. It
    stores the information from the directory entry into the supplied
    DirectoryEntry structure. You can then examine the DirectoryEntry
    structure for information about the entry.

    The most interest fields in the DirectoryEntry structure are:

      de_Flags
      This contains a series of bit flags that describe characteristics
      of the entry. Flags of interest are FILE_IS_DIRECTORY which
      indicates the entry is a nested directory and FILE_IS_READONLY
      which tells you the file cannot be written to.

      de_Type
      This is currently one of FILE_TYPE_DIRECTORY, FILE_TYPE_LABEL, or
      FILE_TYPE_CATAPULT.

      de_BlockSize
      This is the size in bytes of the blocks when reading this entry.

      de_ByteCount
      The logical count of the number of useful bytes within the blocks
      allocated for this file.

      de_BlockCount
      The number of blocks allocated for this file.

    You can use OpenDirectoryPath() and ReadDirectory() to scan
    the list of mounted file systems. This is done by supplying a
    path of "/" to OpenDirectoryPath(). The entries that
    ReadDirectory() will return will then correspond to all of the
    mounted file systems. You can then look at the de_Flags field
    to determine if a file system is readable or not.

  Arguments

    dir                          A pointer to the Directory structure for the
                                 directory.

    de                           A pointer to a DirectoryEntry structure in
                                 which to receive the information about the
                                 next directory entry.

  Return Value

    This function returns zero if successful or a negative error code
    if an error (such as end-of-directory) occurs.

  Implementation

    Folio call implemented in file folio V20.

  Associated Files

    directoryfunctions.h, filesystem.lib

  See Also

    OpenDirectoryItem(), OpenDirectoryPath()

##src/filesystem/autodocs.c::spg/file/readdiskstream##
ReadDiskStream - Reads from a disk stream.

  Synopsis

    int32 ReadDiskStream( Stream *theStream, char *buffer,
                          int32 nBytes )

  Description

    This routine transfers the specified number of bytes (or, as many as are
    left before the end-of-file) from the stream (beginning at the stream'
    current position) to the specified buffer.  It advances the stream's
    position past the bytes that have been transferred, and returns the actual
    number of bytes transferred.  It will initiate an asynchronous read to
    read additional data into the stream's internal buffer, if possible
    and appropriate.

  Arguments

    theStream                    A pointer to the Stream structure from which
                                 to read.

    buffer                       A pointer to the buffer into which to read
                                 the data.

    nBytes                       The number of bytes to read.

  Return Value

    The function returns the actual number of bytes read or a
    negative error code if an error occurs.

  Implementation

    Folio call implemented in file folio V20.

  Associated Files

    filestreamfunctions.h, filesystem.lib

  See Also

    CloseDiskStream(), OpenDiskStream(), SeekDiskStream()

##src/filesystem/autodocs.c::spg/file/seekdiskstream##
SeekDiskStream - Performs a seek operation on a disk stream.

  Synopsis

    int32 SeekDiskStream( Stream *theStream, int32 offset,
                          enum SeekOrigin whence )

  Description

    This function does a seek operation on a stream file, thereby changing
    the I/O byte position within the file.  After calling this function, data
    transfers start with the first byte at the new file position.  The whence
    argument specifies whether the operation is to be relative to either the
    beginning or end of the file or to the current position in the file.  The
    offset argument specifies the number of bytes of offset relative to the
    whence position.  The result is the actual absolute file position that
    results from the seek or an error code if anything went wrong.

    The offset is specified in any of three ways: absolute (positive) byte
    offset from the beginning of file (SEEK_SET), relative byte offset from
    the current position in the file (SEEK_CUR), or absolute (negative) byte
    offset from the end of the file (SEEK_END).

    This function doesn't actually perform the seek, or do any I/O, or
    invalidate the data in the stream, or abort a read-ahead-in-progress.  It
    simply stores the desired offset and a "please seek"  request into
    the stream structure.  The actual seeking, if any, occurs on the next call
    to ReadDiskStream().

    Seeks are very efficient if they are backward seeks that don't take
    you outside of the current block, or forward seeks that don't take you
    outside of the amount of data actually read ahead into the buffer.  Short
    seeks of this nature simply adjust the pointers, and then allow the read
    to continue from the appropriate place in the buffer.

    Seeks that move you backward outside of the current block or forward past
    the amount of data in the buffer, will force all of the data in the buffer
    to be flushed.  Data from the sought after portion of the file will be
    read into the buffer (synchronously) and the read will be completed. As a
    result, you'll see some latency when you issue the ReadDiskStream
    call.

    If you wish to do a seek-ahead that is, you wish to seek to a specified
    location in the file but not necessarily read anything immediatelythe best
    thing to do is a SeekDiskStream followed immediately by a zero-byte
    ReadDiskStream.  This is a special- case that will start the read ahead
    for the data you're seeking, and then return without waiting for the
    I/O to complete.  When you issue a nonzero-length ReadDiskStream some time
    later, the data will probably have been read in, and there will be no
    delay in accessing it.

  Arguments

    theStream                    A pointer to an open Stream. "offset"
                                 is a byte offset into the file, and whence
                                 is SEEK_SET, SEEK_CUR, or SEEK_END.

    offset                       Specified in any of three ways:  absolute
                                 (positive) byte offset from the beginning of
                                 file (SEEK_SET);relative byte offset from
                                 the current position in the file (SEEK_CUR);
                                 or absolute (negative) byte offset from the
                                 end of the file (SEEK_END).

    whence                       The anchor point (either the beginning of
                                 the file, the current position, or the end
                                 of the file) to which the offset should be
                                 applied to create the new file position.

  Return Value

    The function returns the actual (absolute) offset to which the seek
    occurs or a negative error code if (1) the offset is outside of
    the legal range, (2) the whence field contains an illegal value, or (3)
    there was any other problem.

  Implementation

    Folio call implemented in file folio V20.

  Associated Files

    filestreamfunctions.h, filesystem.lib

  Notes

    Seeks that move backward outside of the current block or forward past the
    amount of data in the buffer flush all of the data from the buffer.  Data
    from the sought-after portion of the file is read synchronously into the
    buffer and the read operation is then completed.  As a result, you'll
    see some latency when you call ReadDiskStream().

    To perform a seek-ahead (seeking to an actual physical location in the
    file but not necessarily read anything immediately), call SeekDiskStream()
    followed immediately by a zero-byte ReadDiskStream().  This is a special
    case that starts the read-ahead for the data you're seeking.  You then
    return without waiting for the I/O to complete.  Later, you can call
    ReadDiskStream() with a nonzero read-length value, and if the data has
    been read in, you have immediate access to it.

  See Also

    CloseDiskStream(), OpenDiskStream(), ReadDiskStream()
##src/filesystem/LoadFile.c::spg/file/unloadcode##
UnloadCode - Unload a binary image previously loaded with LoadCode().

  Synopsis

    Err UnloadCode(CodeHandle code);

  Description

    This function frees any resources allocated by LoadCode().
    Once UnloadCode() has been called, the code handle supplied
    becomes invalid and cannot be used again.

  Arguments

    code                        A code handle filled in by a previous
                                call to LoadCode().

  Return Value

    Returns >= 0 for success, or a negative error code if the CodeHandle
    supplied is somehow invalid.

  Implementation

    Folio call Implemented in file folio V21.

  Associated Files

    filefunctions.h

  See Also

    LoadCode()
##src/international/folio/autodocs.c::spg/international/intlcloselocale##
intlCloseLocale - Tells the system you are done using a given Locale
                  Item.

  Synopsis

    Err intlCloseLocale(Item locItem);

  Description

    This function concludes the title's use of the given Locale
    Item. After this call is made, the Locale Item may no longer
    be used.

  Arguments

    locItem                     The Locale Item, as obtained from
                                intlOpenLocale().

  Return Value

    0                           Item successfully closed.

    INTL_ERR_BADITEM            locItem was not an existing Locale
                                Item.

    INTL_ERR_CANTCLOSEITEM      At attempt was made to close this
                                Locale Item more often than it was
                                opened.

  Implementation

    Macro implemented in intl.h V24.

  Associated Files

    intl.h

  See Also

    intlOpenLocale(), intlLookupLocale()
##src/international/folio/autodocs.c::spg/international/intlcomparestrings##
intlCompareStrings - Compares two strings for collation purposes.

  Synopsis

    int32 intlCompareStrings(Item locItem,
                             const unichar *string1,
                             const unichar *string2);

  Description

    Compares two strings according to the collation rules of the
    Locale item's language.

  Arguments

    locItem                     A Locale Item, as obtained from
                                intlOpenLocale().

    string1                     The first string to compare.

    string2                     The second string to compare.

  Return Value

    -1                          (string1 < string2)

    0                           (string1 == string2)

    1                           (string1 > string2)

    INTL_ERR_BADITEM            locItem was not an existing Locale
                                Item.

  Implementation

    Folio call implemented in international folio V24.

  Associated Files

    intl.h

  See Also

    intlOpenLocale(), intlConvertString()
##src/international/folio/autodocs.c::spg/international/intlconvertstring##
intlConvertString - Changes certain attributes of a string.

  Synopsis

    int32 intlConvertString(Item locItem,
                            const unichar *string,
                            unichar *result, uint32 resultSize,
                            uint32 flags);

  Description

    Converts character attributes within a string. The flags
    argument specifies the type of conversion to perform.

  Arguments

    locItem                     A Locale Item, as obtained from
                                intlOpenLocale().

    string                      The string to convert.

    result                      Where the result of the conversion is
                                put. This area must be at least as
                                large as the number of bytes in the
                                string.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    flags                       Description of the conversion process
                                to apply:

                                INTL_CONVF_UPPERCASE will convert all
                                characters to uppercase if possible.

                                INTL_CONVF_LOWERCASE will convert all
                                characters to lowercase if possible.

                                INTL_CONVF_STRIPDIACRITICALS will
                                remove diacritical marks from all
                                characters.

                                You can also specify:

                                     (INTL_CONVF_UPPERCASE|INTL_CONVF_STRIPDIACRITICALS)
                                or
                                (INTL_CONVF_LOWERCASE|INTL_CONVF_STRIPDIACRITICALS) in order

                                to perform two conversions in one call.

                                If flags is 0, then a straight copy
                                occurs.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code. The string copied into
    the result buffer is guaranteed to be NULL-terminated.

    >= 0                        Number of characters copied.

    INTL_ERR_BADSOURCEBUFFER    The string pointer supplied was bad.

    INTL_ERR_BADRESULTBUFFER    The result buffer pointer was NULL or
                                wasn't in valid writable memory.

    INTL_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

    INTL_ERR_BADITEM            locItem was not an existing Locale
                                Item.

  Implementation

    Folio call implemented in international folio V24.

  Associated Files

    intl.h

  Caveats

    This function is not as smart as it could be. Characters
    greater than 0x00ff are always copied as-is with no conversion
    performed on them.

  See Also

    intlOpenLocale(), intlCompareStrings()
##src/international/folio/autodocs.c::spg/international/intlformatdate##
intlFormatDate - Format a date in a localized manner.

  Synopsis

    int32 intlFormatDate(Item locItem,
                         DateSpec spec,
                         const GregorianDate *date,
                         unichar *result, uint32 resultSize);

  Description

    This function formats a date according to a template and
    to the rules specified by the provided Locale Item. The
    formatting string works in a manner similar to how printf()
    formatting strings are handled, except using some specialized
    format commands, tailored to date generation. The following
    format commands are supported:

       %D - day of month
       %H - hour using 24-hour style
       %h - hour using 12-hour style
       %M - minutes
       %N - month name
       %n - abbreviated month name
       %O - month number
       %P - AM or PM strings
       %S - seconds
       %W - weekday name
       %w - abbreviated weekday name
       %Y - year

    In addition to straight format commands, the formatting
    string can also specify a field width, a field limit, and a
    field pad character. This is done in a manner identical to
    the way printf() formatting strings specify these values. That
    is:

       %[flags][width][.limit]command

    where flags can be "-" or "0", width is a positive numeric value,
    limit is a positive numeric value, and command is one of the
    format commands mentioned above. Refer to documentation on the
    standard C printf() function for more information on how these
    numbers and flags interact.

    A difference with standard printf() processing is that the limit
    value is applied starting from the rightmost digits, instead of
    the leftmost. So for example:

       %.2Y

    will print the rightmost two digits of the current year.

  Arguments

    locItem                     A Locale Item, as obtained from
                                intlOpenLocale().

    spec                        The formatting template describing the
                                date layout. This value is typically
                                taken from the Locale structure
                                (loc_Date, loc_ShortDate, loc_Time,
                                loc_ShortTime), but it can also be
                                built up by the title for custom
                                formatting.

    date                        The date to convert into a string.

    result                      Where the result of the formatting
                                is put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code. The string copied into
    the result buffer is guaranteed to be NULL-terminated.

    >= 0                        Number of characters copied.

    INTL_ERR_BADRESULTBUFFER    The result buffer pointer was NULL or
                                wasn't in valid writable memory.

    INTL_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

    INTL_ERR_BADDATESPEC        The pointer to the DateSpec array was
                                bad.

    INTL_ERR_BADITEM            locItem was not an existing Locale
                                Item.

    INTL_ERR_BADDATE            The date specified in the GregorianDate
                                structure is not a valid date. For
                                example, if the gd_Month is greater
                                than 12.

  Implementation

    Folio call implemented in international folio V24.

  Associated Files

    intl.h

  See Also

    intlOpenLocale(), intlFormatNumber()
##src/international/folio/autodocs.c::spg/international/intlformatnumber##
intlFormatNumber - Format a number in a localized manner.

  Synopsis

    int32 intlFormatNumber(Item locItem,
                           const NumericSpec *spec,
                           uint32 whole, uint32 frac,
                           bool negative, bool doFrac,
                           unichar *result, uint32 resultSize);

  Description

    This function formats a number according to the rules
    contained in the NumericSpec structure. The NumericSpec
    structure is normally taken from a Locale structure.
    The Locale structure contains three initialized NumericSpec
    structures (loc_Numbers, loc_Currency, and loc_SmallCurrency)
    which let you format numbers in an appropriate manner for the
    current system.

    You can create your own NumericSpec structure which lets you
    use intlFormatNumber() to handle custom formatting needs. The
    fields in the structure have the following meaning:

        ns_PosGroups
             A GroupingDesc value defining how digits are grouped to the
        left of the decimal character. A GroupingDesc is simply a
        32-bit bitfield. Every ON bit in the bitfield indicates that
        the separator sequence should be inserted after the associated
        digit. So if the third bit (bit #2) is ON, it means that the
        grouping separator should be inserted after the third digit
        of the formatted number.

        ns_PosGroupSep
        A string used to separate groups of digits to the left of the
        decimal character.

        ns_PosRadix
        A string used as a decimal character.

        ns_PosFractionalGroups
        A GroupingDesc value defining how digits are grouped to the
        right of the decimal character.

        ns_PosFractionalGroupSep
        A string used to separate groups of digits to the right of the
        decimal character.

        ns_PosFormat
        This field is used to do post-processing on a formatted
        number. This is typically used to add currency notation around
        a numeric value. The string in this field is used as a
        format string in a sprintf() function call, and the formatted
        numeric value is supplied as a parameter to the same sprintf()
        call. For example, if the ns_PosFormat field is defined as
        "$%s", and the formatted numeric value is "0.02". then the
        result of the post-processing will be "$0.02". When this
        field is NULL, no post-processing occurs.

        ns_PosMinFractionalDigits
        Specifies the minimum number of digits to display to the right
        of the decimal character. If there are not enough digits, then
        the string will be padded on the right with 0s.

        ns_PosMaxFractionalDigits
        Specifies the maximum number of digits to display to the right
        of the decimal character. Any excess digits are just removed.

        ns_NegGroups, ns_NegGroupSep, ns_NegRadix,
        ns_NegFractionalGroups, ns_NegFractionalGroupSep,
        ns_NegFormat, ns_NegMinFractionalDigits,
        ns_NegMaxFractionalDigits
	These fields have the same function as the eight fields
        described above, except that they are used to process negative
        amounts, while the previous fields are used for positive
        amounts.

        ns_Zero
        If the number being processed is 0, then this string pointer
        us used 'as-is' and is copied directly into the result buffer.
        If this field is NULL, the number is formatted as if it
        were a positive number.

        ns_Flags
        This is reserved for future use and must always be 0.

  Arguments

    locItem                     A Locale Item, as obtained from
                                intlOpenLocale().

    spec                        The formatting template describing the
                                number layout. This structure is
                                typically taken from a Locale structure
                                (loc_Numbers, loc_Currency,
                                loc_SmallCurrency), but it can also be
                                built up by the title for custom
                                formatting.

    whole                       The whole component of the number to
                                format. (The part of the number to the
                                left of the radix character.)

    frac                        The decimal component of the number to
                                format. (The part of the number to the
                                right of the radix character.). This
                                is specified in number of billionth.
                                For example, to represent .5, you
                                would use 500000000. To represent .0004,
                                you would use 400000.

    negative                    TRUE if the number is negative, and
                                FALSE if the number is positive.

    doFrac                      TRUE if a complete number with a
                                decimal mark and decimal digits is
                                desired. FALSE if only the whole part
                                of the number should be output.

    result                      Where the result of the formatting is
                                put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code. The string copied into
    the result buffer is guaranteed to be NULL-terminated.

    >= 0                        Number of characters copied.

    INTL_ERR_BADNUMERICSPEC     The pointer to the NumericSpec
                                structure  was bad.

    INTL_ERR_NORESULTBUFFER     "result" was NULL.

    INTL_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

    INTL_ERR_BADITEM            locItem was not an existing Locale
                                Item.

  Implementation

    Folio call implemented in international folio V24.

  Associated Files

    intl.h

  See Also

    intlOpenLocale(), intlFormatDate()
##src/international/folio/autodocs.c::spg/international/intlgetcharattrs##
intlGetCharAttrs - Returns attributes describing a given
                   character.

  Synopsis

    uint32 intlGetCharAttrs(Item locItem, unichar character);

  Description

    This function examines the provided UniCode character and
    returns general information about it.

  Arguments

    locItem                     A Locale Item, as obtained from
                                intlOpenLocale().

    character                   The character to get the attribute of.

  Return Value

    Returns a bit mask, with bit sets to indicate various
    characteristics as defined by the UniCode standard. The
    possible bits are:

      INTL_ATTRF_UPPERCASE        This character is uppercase.

      INTL_ATTRF_LOWERCASE        This character is lowercase.

      INTL_ATTRF_PUNCTUATION      This character is a punctuation mark.

      INTL_ATTRF_DECIMAL_DIGIT    This character is a numeric digit.

      INTL_NUMBER                 This character represent a numerical
                                  value not representable as a single
                                  decimal digit. For example, a
                                  character 0x00bc represents the
                                  constant 1/2.

      INTL_ATTRF_NONSPACING       This character is a non-spacing mark.

      INTL_SPACE                  This character is a space character.

    If the value returned by this function is negative, then it is
    not a bit mask, and is instead an error code.

    INTL_ERR_BADITEM            locItem was not an existing Locale
                                Item.

  Implementation

    Folio call implemented in international folio V24.

  Associated Files

    intl.h

  Caveats

    This function currently does not report any attributes for many
    upper UniCode characters. Only the ECMA Latin-1 character page
    (0x0000 to 0x00ff) is handled correctly at this time.

  See Also

    intlOpenLocale(), intlConvertString()
##src/international/folio/autodocs.c::spg/international/intllookuplocale##
intlLookupLocale - Returns a pointer to a Locale structure.

  Synopsis

    Locale *intlLookupLocale(Item locItem);

  Description

    This macro returns a pointer to a Locale structure. The
    structure can then be examined and its contents used to
    localize titles.

  Arguments

    locItem                     A Locale Item, as obtained from
                                intlOpenLocale().

  Return Value

    The macro returns a pointer to a Locale structure, which
    contains localization information, or NULL if the supplied Item
    was not a valid Locale Item.

  Implementation

    Macro implemented in intl.h V24.

  Associated Files

    intl.h

  Example

    {
    Item    |t;
    Locale *loc;

        it = intlOpenLocale(NULL);
        if (it >= 0)
        {
            loc = intlLookupLocale(it);

            // you can now read fields in the Locale structure.
            printf("Language is %ldn",loc->loc_Language);

            intlCloseLocale(it);
        }
    }

  See Also

    intlOpenLocale(), intlCloseLocale()
##src/international/folio/autodocs.c::spg/international/intlopenlocale##
intlOpenLocale - Gain access to a Locale Item.

  Synopsis

    Item intlOpenLocale(const TagArg *tags);

  Description

    This function returns a Locale Item. You can then use
    intlLookupLocale() to gain access to the localization
    information within the Locale Item. This information enables
    software to adapt to different languages and customs
    automatically at run-time, thus creating truly international
    software.

  Arguments

    tags                        A pointer to an array of tag arguments
                                containing extra data for this
                                function. This must currently always
                                be NULL.

  Return Value

    The function returns the Item number of a Locale.
    You can use intlLookupLocale() to get a pointer to the
    Locale structure, which contains localization information.

  Implementation

    Macro implemented in intl.h V24.

  Associated Files

    intl.h

  Notes

    Once you are done with the Locale Item, you should call
    intlCloseLocale().

  See Also

    intlCloseLocale(), intlLookupLocale()
##src/international/folio/autodocs.c::spg/international/intltransliteratestring##
intlTransliterateString - Converts a string between character sets.

  Synopsis

    int32 intlTransliterateString(const void *string,
                                  CharacterSets stringSet,
                                  void *result,
                                  CharacterSets resultSet,
                                  uint32 resultSize,
                                  uint8 unknownFiller);

  Description

    Converts a string between two character sets. This is typically
    used to convert a string from or to UniCode. The conversion
    is done as well as possible. If certain characters from the source
    string cannot be represented in the destination character set,
    the unknownFiller byte will be inserted in the result buffer
    in their place.

  Arguments

    string                      The string to transliterate.

    stringSet                   The character set of the string to
                                transliterate. This describes the
                                interpretation of the bytes in the
                                source string.

    result                      A memory buffer where the result of the
                                transliteration can be put.

    resultSet                   The character set to use for the
                                resulting string.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted from the source
                                character set, then this byte will
                                be put into the result buffer in
                                place of the character sequence. When
                                converting to a 16-bit character set,
                                then this byte will be inserted twice
                                in a row within the result buffer.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    INTL_ERR_BADSOURCEBUFFER    The string pointer supplied was bad.

    INTL_ERR_BADCHARACTERSET    The "stringSet" or "resultSet"
                                arguments did not specify valid
                                character sets.

    INTL_ERR_BADRESULTBUFFER    The result buffer pointer was NULL or
                                wasn't in valid writable memory.

    INTL_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

    INTL_ERR_BADITEM            locItem was not an existing Locale
                                Item.

  Implementation

    Folio call implemented in international folio V24.

  Caveats

    This function is not as smart as it could be. When converting from
    UniCode to ASCII, characters not in the first UniCode page (codes
    greater than 0x00ff) are never converted and always replaced with
    the unknownFiller byte. The upper pages of the UniCode set contain
    many characters which could be converted to equivalent ASCII
    characters, but these are not supported at this time.

  Associated Files

    intl.h
##src/audio/audiofolio/audio_attachments.c::spg/items/attachment##
Attachment - The binding of a sample or an envelope to an instrument.

  Description

    An attachment is the item to binds a sample or an envelope to a particular
    instrument.

    An Attachment is associated with precisely one Envelope and one Instrument,
    or one Sample and one Instrument. An Attachment is said to be an Envelope
    Attachment if it is attached to an Envelope, or a Sample Attachment if
    attached to a Sample.

    Sample attachments actually come in two flavors: one for input FIFOs and
    another for output FIFOs, defined by the Hook to which the Sample is
    attached. Both kinds are considered Sample Attachments and no distinction
    is made between them.

    A single Instrument can have one Envelope Attachment per Envelope hook and
    one Sample Attachment per Output FIFO. A single Instrument can have
    multiple Sample Attachments per Input FIFO, but only one will be selected
    to be played when the instrument is started. This is useful for creating
    multi-sample instruments, where the sample selected to be played depends on
    the pitch to be played.

    A single Sample or Envelope can have multiple Attachments made to it.

  Folio

    audio

  Item Type

    AUDIO_ATTACHMENT_NODE

  Create

    AttachSample()

    AttachEnvelope()

    CreateItem()

  Delete

    DetachSample()

    DetachEnvelope()

    DeleteItem()

  Query

    None

  Modify

    SetAudioItemInfo()

  Use

    LinkAttachments()

    MonitorAttachment()

    ReleaseAttachment()

    StartAttachment()

    StopAttachment()

    WhereAttachment()

  Tags

    AF_TAG_CLEAR_FLAGS           (uint32) Modify. Set of AF_ATTF_ flags to
                                 clear. Clears every flag for which a 1 is
                                 set in ta_Arg. See also AF_TAG_SET_FLAGS. The
                                 final state of any flag is determined by the
                                 last occurrence of that flag in a
                                 AF_TAG_SET_FLAGS or AF_TAG_CLEAR_FLAGS.

    AF_TAG_ENVELOPE              (Item) Create. Envelope Item to attach to
                                 Instrument. Exactly one of AF_TAG_ENVELOPE
                                 or AF_TAG_SAMPLE must be specified.

    AF_TAG_HOOKNAME              (const char *) Create. The name of the
                                 sample or envelope hook in the instrument to
                                 attach to. For sample hooks, defaults to the
                                 first one listed for each instrument. For
                                 envelopes, defaults to "Env".

    AF_TAG_INSTRUMENT            (Item) Create. Instrument or Template item
                                 to attach envelope or sample to. Must be
                                 specified when creating an Attachment.

    AF_TAG_SAMPLE                (Item) Create. Sample Item to attach to
                                 instrument. Exactly one of AF_TAG_ENVELOPE
                                 or AF_TAG_SAMPLE must be specified.

    AF_TAG_SET_FLAGS             (uint32) Create, Modify. Set of AF_ATTF_
                                 flags to set. Sets every flag for which a 1
                                 is set in ta_Arg. See also AF_TAG_CLEAR_FLAGS.
                                 The final state of any flag is determined by
                                 the last occurrence of that flag in a
                                 AF_TAG_SET_FLAGS or AF_TAG_CLEAR_FLAGS.

    AF_TAG_START_AT              (int32) Create, Modify. Specifies the point at
                                 which to start when the attachment is started
                                 (with StartAttachment() or StartInstrument()).

                                 For sample attachments, specifies a sample
                                 frame number in the sample at which to begin
                                 playback.

                                 For envelopes, attachments specifies the
                                 segment index at which to start.

    AF_TAG_TIME_SCALE            (ufrac16) Create. Scales all of the times in
                                 the attached envelopes by the supplied
                                 ufrac16. Defaults to 1.0. Only applies to
                                 envelope attachments.

  Flags

    AF_ATTF_FATLADYSINGS         If set, causes the instrument to stop when the
                                 attachment finishes playing.

                                 This bit can be used to mark the one or more
                                 envelope(s) or sample(s) that are considered
                                 to be the determiners of when the instrument
                                 is completely done.

                                 For envelopes, the default setting for this
                                 flag comes from the AF_ENVF_FATLADYSINGS
                                 flag. Defaults to cleared for samples.

    AF_ATTF_NOAUTOSTART          When set, causes StartInstrument() to not
                                 automatically start this attachment. This
                                 allows later starting of the attachment by
                                 using StartAttachment(). Defaults to
                                 cleared (attachment defaults to starting when
                                 instrument is started).

##src/audio/audiofolio/audio_timer.c::spg/items/cue##
Cue - Audio Cue Item.

  Description

    This Item type is used to receive completion notification from the
    audio folio for these kinds of operations:

    . sample playback completion

    . envelope completion

    . audio timer request completion

    Each Cue has a signal bit associated with it. Because signals are
    task-relative, Cues cannot be shared between multiple tasks.

  Folio

    audio

  Item Type

    AUDIO_CUE_NODE

  Create

    CreateCue()

    CreateItem()

  Delete

    DeleteCue()

    DeleteItem()

  Query

    GetCueSignal()

  Modify

    None

  Use

    AbortTimerCue()

    MonitorAttachment()

    SignalAtTime()

    SleepUntilTime()

  Tags

    None

  See Also

    Attachment

##src/audio/audiofolio/audio_envelopes.c::spg/items/envelope##
Envelope - Audio envelope.

  Description

    An envelope is a time-variant control signal which can be used to control
    parameters of sounds that are to change over time (e.g. amplitude,
    frequency, filter characteristics, modulation amount, etc.).

    Envelope Items use a function defined by a set of points in time-level space
    described by an array of DataTimePairs (defined in audio.h). The function
    is a continuous set of line segments drawn between the points in the
    DataTimePair array.

    Envelopes are used in conjunction with Instruments that accept the Envelope
    Item's data and output the control signal (e.g. envelope.dsp).

  Folio

    audio

  Item Type

    AUDIO_ENVELOPE_NODE

  Create

    CreateEnvelope()

    CreateItem()

  Delete

    DeleteEnvelope()

    DeleteItem()

  Query

    None

  Modify

    SetAudioItemInfo()

  Use

    AttachEnvelope()

  Tags

    AF_TAG_ADDRESS               (const DataTimePair *) Create, Modify.
                                 Pointer to array of DataTimePairs used to
                                 define the envelope. All of the points in this
                                 array must be sorted in increasing order by
                                 time. The length of the array is specified
                                 with AF_TAG_FRAMES.

    AF_TAG_CLEAR_FLAGS           (uint32) Create, Modify. Set of AF_ENVF_
                                 flags to clear. Clears every flag for which
                                 a 1 is set in ta_Arg.

    AF_TAG_FRAMES                (int32) Create, Modify. Number of
                                 DataTimePairs in array pointed to by
                                 AF_TAG_ADDRESS.

    AF_TAG_MICROSPERUNIT         (int32) Create, Modify. Number of
                                 microseconds for each time unit specified in
                                 DataTimePairs and time related envelope
                                 tags. Defaults to 1000 on creation, which
                                 sets each time unit equal to one
                                 millisecond.

    AF_TAG_RELEASEBEGIN          (int32) Create, Modify. Index in
                                 DataTimePair array for beginning of release
                                 loop. -1 indicates no loop, which is the
                                 default on creation. If not -1, must <= the
                                 value set by AF_TAG_RELEASEEND.

    AF_TAG_RELEASEEND            (int32) Create, Modify. Index in
                                 DataTimePair array for end of release loop.
                                 -1 indicates no loop, which is the default
                                 on creation. If not -1, must >= the value set
                                 by AF_TAG_RELEASEBEGIN.

    AF_TAG_RELEASEJUMP           (int32) Create, Modify. Index in
                                 DataTimePair array to jump to on release.
                                 When set, release causes escape from normal
                                 envelope processing to the specified index
                                 without disturbing the current output
                                 envelope value. From there, the envelope
                                 proceeds to the next DataTimePair from the
                                 current value. -1 to disable, which is the
                                 default on creation.

    AF_TAG_RELEASETIME           (int32) Create, Modify. The time in units
                                 used when looping from the end of the
                                 release loop back to the beginning. Defaults
                                 to 0 on creation.

    AF_TAG_SET_FLAGS             (uint32) Create, Modify. Set of AF_ENVF_
                                 flags to set. Sets every flag for which a 1
                                 is set in ta_Arg.

    AF_TAG_SUSTAINBEGIN          (int32) Create, Modify. Index in
                                 DataTimePair array for beginning of sustain
                                 loop. -1 indicates no loop, which is the
                                 default on creation. If not -1, <= the value
                                 set by AF_TAG_SUSTAINEND.

    AF_TAG_SUSTAINEND            (int32) Create, Modify. Index in
                                 DataTimePair array for end of sustain loop.
                                 -1 indicates no loop, which is the default
                                 on creation. If not -1, >= the value set
                                 by AF_TAG_SUSTAINBEGIN.

    AF_TAG_SUSTAINTIME           (int32) Create, Modify. The time in units
                                 used when looping from the end of the
                                 sustain loop back to the beginning. Defaults
                                 to 0 on creation.

  Flags

    AF_ENVF_FATLADYSINGS         The state of this flag indicates the default
                                 setting for the AF_ATTF_FATLADYSINGS flag
                                 whenever this envelope is attached to an
                                 instrument.

  See Also

    Attachment, Instrument, envelope.dsp

##src/audio/audiofolio/audio_instr.c::spg/items/instrument##
Instrument - DSP Instrument Item.

  Description

    Instrument items are created from Template items. They correspond
    to actual instances of DSP code running on the DSP. Several Instruments
    can be connected together to create a patch. Instruments can be played (by
    starting them), and controlled (by tweaking knobs). An Instrument is
    monophonic in the sense that it corresponds to a single voice. Multiple
    voices require creating an Instrument per voice.

  Folio

    audio

  Item Type

    AUDIO_INSTRUMENT_NODE

  Create

    AllocInstrument()

    CreateInstrument() (new for V24)

    CreateItem()

    LoadInstrument()

  Delete

    DeleteInstrument() (new for V24)

    DeleteItem()

    FreeInstrument()

    UnloadInstrument()

  Query

    GetAudioItemInfo()

  Modify

    None

  Use

    AbandonInstrument()

    AttachEnvelope()

    AttachSample()

    BendInstrumentPitch()

    ConnectInstruments()

    CreateProbe() (new for V24)

    DisconnectInstruments()

    GetKnobName()

    GetNumKnobs()

    GrabKnob()

    PauseInstrument()

    ReleaseInstrument()

    ResumeInstrument()

    StartInstrument()

    StopInstrument()

    TuneInstrument()

  Tags

    AF_TAG_AMPLITUDE             (uint32) Start. Value to set instrument's
                                 Amplitude knob to before starting instrument
                                 (for instruments that have an Amplitude
                                 knob). Valid range is 0..0x7fff. Has no
                                 effect if Amplitude knob is connected to the
                                 output from another instrument. This tag is
                                 mutually exclusive with AF_TAG_VELOCITY.

    AF_TAG_CALCRATE_DIVIDE       (uint32) (new tag for V24) Create.
                                 Specifies the the denominator of the fraction
                                 of the total DSP cycles on which this instrument
                                 is to run. The only valid
                                 settings at this time are 1 to run on all DSP
                                 cycles (i.e. execute at 44,100 cycles/sec),
                                 and 2 to run on only 1/2 of the DSP
                                 cycles (i.e. execute at 22,050 cycles/sec).
                                 Defaults to 1.

    AF_TAG_FREQUENCY             (ufrac16) Start. Value to set Frequency knob
                                 to in 16.16 Hertz (for instruments that have
                                 a Frequency knob). Has no effect if
                                 Frequency knob is connected to the output
                                 from another instrument. This tag is
                                 mutually exclusive with AF_TAG_PITCH and
                                 AF_TAG_RATE.

    AF_TAG_PITCH                 (uint32) Start. Value to set Frequency knob
                                 (for instruments that have a Frequency knob)
                                 expressed as a MIDI note number. The range
                                 is 0 to 127; 60 is middle C. For multisample
                                 instruments, picks the sample associated with
                                 the MIDI pitch number. This tag is mutually
                                 exclusive with AF_TAG_FREQUENCY and
                                 AF_TAG_RATE.

    AF_TAG_PRIORITY              (uint32) Create, Query. The priority of
                                 execution in DSP in the range of 0..255,
                                 where 255 is the highest priority. Defaults
                                 to 100 on creation.

    AF_TAG_RATE                  (uint32) Start. Value to set Frequency knob
                                 to in instrument-specific frequency units
                                 (e.g. phase incrment, proportion of original
                                 sample rate) for instruments that have a
                                 Frequency knob. Has no effect if Frequency
                                 knob is connected to the output from another
                                 instrument. This tag is mutually exclusive
                                 with AF_TAG_FREQUENCY and AF_TAG_PITCH.

    AF_TAG_SET_FLAGS             (uint32) Create. AF_INSF_ flags to set at
                                 creation time. Defaults to all cleared.

    AF_TAG_START_TIME            (AudioTime) Query. Returns the AudioTime
                                 value of when the instrument was last
                                 started.

    AF_TAG_STATUS                (uint32) Query. Returns the current
                                 instrument status: AF_STARTED, AF_RELEASED,
                                 AF_STOPPED, or AF_ABANDONED.

    AF_TAG_TEMPLATE              (Item) Create. DSP Template Item used from
                                 which to create instrument. Note: this tag
                                 cannot be used with CreateInstrument().

    AF_TAG_TIME_SCALE            (ufrac16) Start, Release. Scale times for
                                 all Envelopes attached to this Instrument.
                                 Original value is derived from the
                                 AF_TAG_TIME_SCALE provided when the Envelope
                                 Attachment was made. This value remains in
                                 effect until another AF_TAG_TIME_SCALE is
                                 passed to StartInstrument() or
                                 ReleaseInstrument().

    AF_TAG_VELOCITY              (uint32) Start. MIDI note velocity
                                 indicating the value to set instrument's
                                 Amplitude knob to before starting instrument
                                 (for instruments that have an Amplitude
                                 knob). Valid range is 0..127. Has no effect
                                 if Amplitude knob is connected to the output
                                 from another instrument. This tag is
                                 mutually exclusive with AF_TAG_AMPLITUDE.

  Flags

    AF_INSF_AUTOABANDON          When set, causes instrument to automatically
                                 go to the AF_ABANDONED state when stopped
                                 (either automatically because of an
                                 AF_ATTF_FATLADYSINGS flag, or manually
                                 because of a StopInstrument() call).
                                 Otherwise, the instrument goes to the
                                 AF_STOPPED state when stopped.

                                 Note that regardless of the state of this
                                 flag, instruments are created in the
                                 AF_STOPPED state.

  See Also

    Template, Attachment, Knob, Probe

##src/audio/audiofolio/audio_knob.c::spg/items/knob##
Knob - An item for adjusting an Instrument's parameters.

  Description

    A Knob is an Item for adjusting an Instrument's parameters.

  Folio

    audio

  Item Type

    AUDIO_KNOB_NODE

  Create

    CreateItem()

    GrabKnob()

  Delete

    DeleteItem()

    ReleaseKnob()

  Query

    GetAudioItemInfo()

  Modify

    None

  Use

    TweakKnob()

    TweakRawKnob()

  Tags

    AF_TAG_CURRENT               (int32) Query. Returns the current raw value
                                 of knob.

    AF_TAG_DEFAULT               (int32) Query. Returns the default raw value
                                 of knob.

    AF_TAG_INSTRUMENT            (Item) Create. Specifies from which
                                 instrument to grab knob.

    AF_TAG_MAX                   (int32) Query. Returns maximum raw value of
                                 knob.

    AF_TAG_MIN                   (int32) Query. Returns minimum raw value of
                                 knob.

    AF_TAG_NAME                  (const char *) Create, Query. Knob name.
                                 On creation, specifies name of knob to grab.
                                 On query, returns a pointer to knob's name.

  See Also

    Instrument, Probe
##src/audio/audiofolio/audio_probe.c::spg/items/probe##
Probe - An item to permite the CPU to read the output of a DSP instrument.

  Description

    A probe is an item that allows the CPU to read the output of a DSP
    instrument. It is sort of like the opposite of a knob. Multiple probes can
    be connected to a single output. A probe does not interfere with a
    connection between instruments.

  Folio

    audio (new for V24)

  Item Type

    AUDIO_PROBE_NODE

  Create

    CreateProbe()

    CreateItem()

  Delete

    DetachProbe()

    DeleteItem()

  Query

    None

  Modify

    None

  Use

    ReadProbe()

  Tags

    None

##src/audio/audiofolio/audio_samples.c::spg/items/sample##
Sample - A digital recording of a sound.

  Description

    A Sample Item is a handle to a digital recording of a sound in memory.
    Samples come in two kinds:
        . Ordinary Samples - sample loaded from a sample file, or
          created from scratch. User memory is used for samples. CreateSample()
          and a myriad of special purpose functions create ordinary samples.
        . Delay Lines - special samples suitable for receiving the DMA
          output from delay instruments (e.g. delaymono.dsp). The memory
          for delay lines is allocated in system memory. Use CreateDelayLine()
          to create a delay line.

    Most sample operations can be performed on both kinds of samples.

  Folio

    audio

  Item Type

    AUDIO_SAMPLE_NODE

  Create

    CreateDelayLine()

    CreateItem()

    CreateSample()

    DefineSampleHere()

    LoadSample()

    LoadSampleHere()

    ScanSample()

  Delete

    DeleteDelayLine()

    DeleteItem()

    UnloadSample()

  Query

    GetAudioItemInfo()

  Modify

    SetAudioItemInfo()

  Use

    AttachSample()

    DebugSample()

  Tags

    Loading:

    AF_TAG_NAME                  (const char *) Create. Name of sample file to
                                 load.

    AF_TAG_IMAGE_ADDRESS         (const char *) Create. Specifies a memory
                                 location containing a sample file image from
                                 which to read sample. Must use in conjunction
                                 with AF_TAG_IMAGE_LENGTH.

    AF_TAG_IMAGE_LENGTH          (uint32) Create. Specifies number of bytes in
                                 sample file image pointed to by
                                 AF_TAG_IMAGE_ADDRESS.

    AF_TAG_SCAN                  (int32) Create. Specifies the maximum number
                                 of bytes of sound data to read from the file.
                                 This can be used to cause the audio folio
                                 to simply load sample parameters without
                                 loading sample data.

    AF_TAG_ALLOC_FUNCTION        (void *(*)(uint32 memsize, uint32 memflags))
                                 Create. Sets custom memory allocation function
                                 to be called to allocate sample memory while
                                 loading sample file. Defaults to AllocMem().
                                 If you supply a custom allocation function you
                                 must also provide a custom free function with
                                 AF_TAG_FREE_FUNCTION.

    AF_TAG_FREE_FUNCTION         (void (*)(void *memptr, uint32 memsize))
                                 Create. Sets custom memory free function to
                                 free sample memory to be called during sample
                                 deletion. Defaults to FreeMem(). If you supply
                                 a custom free function you must also provide a
                                 custom allocation function with
                                 AF_TAG_ALLOC_FUNCTION.

    AF_TAG_LEAVE_IN_PLACE        (bool) When TRUE, causes sample being read
                                 from AF_TAG_IMAGE_ADDRESS to be used in-place
                                 instead of allocating more memory to hold
                                 the sample data. Mutually exclusive with
                                 AF_TAG_ALLOC_FUNCTION. See CreateSample()
                                 for more details and caveats.

    AF_TAG_DATA_OFFSET           (uint32) Query. Byte offset in sample file
                                 of the beginning of the sample data.

    AF_TAG_DATA_SIZE             (uint32) Query. Size of sample data in
                                 sample file in bytes. Note that this may
                                 differ from the length of the sample as loaded
                                 into memory (as returned by AF_TAG_NUMBYTES).

    Data:

    AF_TAG_ADDRESS               (void *) Create, Query, Modify. Address of
                                 sample data.

                                 This tag, and the all the other Data tags, can
                                 be used to query or modify the data
                                 address/length of ordinary samples. They can
                                 only be used to query the address/length of a
                                 delay line.

    AF_TAG_FRAMES                (uint32) Create, Query, Modify. Length of
                                 sample data expressed in frames. In a stereo
                                 sample, this would be the number of stereo
                                 pairs.

    AF_TAG_NUMBYTES              (uint32) Create, Query, Modify. Length of
                                 sample data expressed in bytes.


    Format:

    AF_TAG_CHANNELS              (uint32) Create, Query, Modify. Number of
                                 channels (or samples per sample frame). For
                                 example: 1 for mono, 2 for stereo. Valid range
                                 is 1..255.

    AF_TAG_WIDTH                 (uint32) Create, Query, Modify. Number of
                                 bytes per sample (uncompressed). Valid range
                                 is 1..2.

    AF_TAG_NUMBITS               (uint32) Create, Query, Modify. Number of bits
                                 per sample (uncompressed). Valid range is
                                 1..32. Width is rounded up to the next byte
                                 when computed from this tag.

    AF_TAG_COMPRESSIONTYPE       (uint32) Create, Query, Modify. 32-bit ID
                                 representing AIFC compression type of sample
                                 data (e.g. ID_SDX2). 0 for no compression.

    AF_TAG_COMPRESSIONRATIO      (uint32) Create, Query, Modify. Compression
                                 ratio of sample data. Uncompressed data
                                 has a value of 1. 0 is illegal.

    Loops:

    AF_TAG_SUSTAINBEGIN          (int32) Create, Query, Modify. Frame index of
                                 the first frame of the sustain loop. Valid
                                 range is 0..NumFrames-1. -1 for no sustain
                                 loop. Use in conjunction with
                                 AF_TAG_SUSTAINEND.

    AF_TAG_SUSTAINEND            (int32) Create, Query, Modify. Frame index of
                                 the first frame after the last frame in the
                                 sustain loop. Valid range is 1..NumFrames. -1
                                 for no sustain loop. Use in conjunction with
                                 AF_TAG_SUSTAINBEGIN.

    AF_TAG_RELEASEBEGIN          (int32) Create, Query, Modify. Frame index of
                                 the first frame of the release loop. Valid
                                 range is 0..NumFrames-1. -1 for no release
                                 loop. Use in conjunction with
                                 AF_TAG_RELEASEEND.

    AF_TAG_RELEASEEND            (int32) Create, Query, Modify. Frame index of
                                 the first frame after the last frame in the
                                 release loop. Valid range is 1..NumFrames. -1
                                 for no release loop. Use in conjunction with
                                 AF_TAG_RELEASEBEGIN.

    Tuning:

    AF_TAG_BASENOTE              (uint32) Create, Query, Modify. MIDI note
                                 number for this sample when played at the
                                 original sample rate (as set by
                                 AF_TAG_SAMPLE_RATE). Defaults to middle C
                                 (60). This defines the frequency conversion
                                 reference note for the StartInstrument()
                                 AF_TAG_PITCH tag.

    AF_TAG_DETUNE                (int32) Create, Query, Modify. Amount to
                                 detune the MIDI base note in cents to reach
                                 the original pitch. Must be in the range of
                                 -100 to 100.

    AF_TAG_SAMPLE_RATE           (ufrac16) Create, Query, Modify. Original
                                 sample rate for sample expressed in 16.16
                                 fractional Hz. Defaults to 44,100 Hz.

    AF_TAG_BASEFREQ              (ufrac16) Query. The frequency of the sample,
                                 expressed in 16.16 Hz, when played at the
                                 original sample rate. This value is computed
                                 from the other tuning tag values.

    Multisample:

    AF_TAG_LOWNOTE               (uint32) Create, Query, Modify. Lowest MIDI
                                 note number at which to play this sample when
                                 part of a multisample. StartInstrument()
                                 AF_TAG_PITCH tag is used to perform selection.
                                 Valid range is 0 to 127. Defaults to 0.

    AF_TAG_HIGHNOTE              (uint32) Create, Query, Modify. Highest MIDI
                                 note number at which to play this sample when
                                 part of a multisample. Valid range is 0 to
                                 127. Defaults to 127.

  Notes

    Sample creation tags have a lot mutual interaction. See CreateSample() for
    a complete explanation of this.

  Caveats

    There's currently no way to enforce that memory pointed to by
    AF_TAG_ADDRESS or file image memory used with AF_TAG_LEAVE_IN_PLACE is
    actually of MEMTYPE_AUDIO. Be careful.

    All sample data, loop points, and lengths must be quad-byte aligned. For
    example, a 1-channel, 8-bit sample (which has 1 byte per frame) is only
    legal when the lengths and loop points are at multiples of 4 frames. For
    mono ADPCM samples (which have only 4 bits per frame), lengths and loop
    points must be at multiples of 8 frames. The audio folio, however, does not
    report any kind of an error for using non-quad-byte aligned sample data.
    Sample addresses, lengths, and loop points, are internally truncated to
    quad-byte alignment when performing the DMA without warning. Misalignments
    may result in noise at loop points, or slight popping at the beginning and
    ending of sound playback. It is recommended that you pay very close
    attention to sample lengths and loop points when creating, converting, and
    compressing samples.

    Setting AF_TAG_WIDTH does not set the AF_TAG_NUMBITS attribute (e.g. if you
    create a sample with AF_TAG_WIDTH set to 1, GetAudioItemInfo()
    AF_TAG_NUMBITS will return 16). Setting AF_TAG_NUMBITS does however
    correctly update the AF_TAG_WIDTH field.

  See Also

    Attachment, Instrument, Template, StartInstrument(), sampler.dsp,
    delaymono.dsp

##src/audio/audiofolio/audio_instr.c::spg/items/template##
Template - A description of an audio instrument.

  Description

    A Template is the description of a DSP audio instrument (including the DSP
    code, resource requirements, parameter settings, etc.) from which
    Instrument items are created.

  Folio

    audio

  Item Type

    AUDIO_TEMPLATE_NODE

  Create

    CreateInsTemplate()

    CreateItem()

    DefineInsTemplate()

    LoadInsTemplate()

  Delete

    DeleteItem()

    UnloadInsTemplate()

  Query

    None

  Modify

    None

  Use

    AdoptInstrument()

    AllocInstrument()

    AttachEnvelope()

    AttachSample()

    ScavengeInstrument()

    TuneInsTemplate()

  Tags

    AF_TAG_ALLOC_FUNCTION        (void *(*)(uint32 memsize, uint32
                                 memflags)) Create. Sets custom memory
                                 allocation function to be called during
                                 template creation. Defaults to AllocMem().
                                 If you supply a custom allocation function
                                 you must also provide a custom free function
                                 with AF_TAG_FREE_FUNCTION.

    AF_TAG_DEVICE                (Item) Create. Audio device Item for
                                 instrument template. 0 indicates the default audio
                                 device, the DSP, which is the only valid audio
                                 device item at the present time.

    AF_TAG_FREE_FUNCTION         (void (*)(void *memptr, uint32 memsize))
                                 Create. Sets custom memory free function to
                                 be called during template deletion. Defaults
                                 to FreeMem(). If you supply a custom free
                                 function you must also provide a custom
                                 allocation function with
                                 AF_TAG_ALLOC_FUNCTION.

    AF_TAG_IMAGE_ADDRESS         (const char *) Create. Specifies a memory
                                 location containing a template file image.
                                 Must use in conjunction with
                                 AF_TAG_IMAGE_LENGTH. Mutually exclusive
                                 AF_TAG_NAME.

    AF_TAG_IMAGE_LENGTH          (uint32) Create. Specifies number of bytes
                                 in template file image pointed to by
                                 AF_TAG_IMAGE_ADDRESS.

    AF_TAG_NAME                  (const char *) Create. Name of template file
                                 to load. Mutually exclusive with
                                 AF_TAG_IMAGE_ADDRESS.

  See Also

    Instrument, Attachment

##src/audio/audiofolio/audio_tuning.c::spg/items/tuning##
Tuning - An item that contains information for tuning an instrument.

  Description

    A tuning item contains information for converting MIDI pitch numbers to
    frequency for an instrument or template. The information includes an array
    of frequencies, and 32-bit integer values indicating the number of
    pitches, notes in an octave, and the lowest pitch for the tuning
    frequency. See the CreateTuning() call in the xd2 Audio Folio Callsxd3
    chapter in this manual for more information.

  Folio

    audio

  Item Type

    AUDIO_TUNING_NODE

  Create

    CreateItem()

    CreateTuning()

  Delete

    DeleteItem()

    DeleteTuning()

  Query

    None

  Modify

    SetAudioItemInfo()

  Use

    TuneInsTemplate()

    TuneInstrument()

  Tags

    AF_TAG_ADDRESS               (const ufrac16 *) Create, Modify. Array of
                                 frequencies in 16.16 Hz to be used as a
                                 lookup table.

    AF_TAG_BASENOTE              (uint32) Create, Modify. MIDI note number
                                 that should be given the first frequency in
                                 the frequency array in the range of 0..127.

    AF_TAG_FRAMES                (uint32) Create, Modify. Number of
                                 frequencies in array pointed to by
                                 AF_TAG_ADDRESS. This value must be >=
                                 NotesPerOctave.

    AF_TAG_NOTESPEROCTAVE        (uint32) Create, Modify. Number of notes per
                                 octave. This is used to determine where in
                                 the frequency array to look for notes that
                                 fall outside the range of
                                 BaseNote..BaseNote+Frames-1. This value must
                                 be <= Frames.
##src/jstring/folio/autodocs.c::spg/jstring/convertascii2shiftjis##
ConvertASCII2ShiftJIS - Convert an ASCII string to Shift-JIS.

  Synopsis

    int32 ConvertASCII2ShiftJIS(const char *string,
                                char *result, uint32 resultSize,
                                uint8 unknownFiller);

  Description

    Converts a string from ASCII to Shift-JIS. The conversion
    is done as well as possible. If certain characters from the source
    string cannot be represented in ASCII, the unknownFiller byte will
    be inserted in the result buffer in their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/convertfullkana2halfkana##
ConvertFullKana2HalfKana - Convert a full-width kana string to a
                           half-width kana string.

  Synopsis

    int32 ConvertFullKana2HalfKana(const char *string,
                                   char *result, uint32 resultSize,
                                   uint8 unknownFiller);

  Description

    Converts a string from full-width kana to half-width kana. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/convertfullkana2hiragana##
ConvertFullKana2Hiragana - Convert a full-width kana string to a
                           hiragana string.

  Synopsis

    int32 ConvertFullKana2Hiragana(const char *string,
                                   char *result, uint32 resultSize,
                                   uint8 unknownFiller);

  Description

    Converts a string from full-width kana to hiragana. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/convertfullkana2romaji##
ConvertFullKana2Romaji - Convert a full-width kana string to a
                         romaji string.

  Synopsis

    int32 ConvertFullKana2Romaji(const char *string,
                                 char *result, uint32 resultSize,
                                 uint8 unknownFiller);

  Description

    Converts a string from full-width kana to romaji. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/converthalfkana2fullkana##
ConvertHalfKana2FullKana - Convert a half-width kana string to a
                           full-width kana string.

  Synopsis

    int32 ConvertHalfKana2FullKana(const char *string,
                                   char *result, uint32 resultSize,
                                   uint8 unknownFiller);

  Description

    Converts a string from half-width kana to full-width kana. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/converthalfkana2hiragana##
ConvertHalfKana2Hiragana - Convert a half-width kana string to a
                           hiragana string.

  Synopsis

    int32 ConvertHalfKana2Hiragana(const char *string,
                                   char *result, uint32 resultSize,
                                   uint8 unknownFiller);

  Description

    Converts a string from half-width kana to hiragana. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/converthalfkana2romaji##
ConvertHalfKana2Romaji - Convert a half-width kana string to a
                         romaji string.

  Synopsis

    int32 ConvertHalfKana2Romaji(const char *string,
                                 char *result, uint32 resultSize,
                                 uint8 unknownFiller);

  Description

    Converts a string from half-width kana to romaji. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/converthiragana2fullkana##
ConvertHiragana2FullKana - Convert a hiragana string to a
                           full-width kana string.

  Synopsis

    int32 ConvertHiragana2FullKana(const char *string,
                                   char *result, uint32 resultSize,
                                   uint8 unknownFiller);

  Description

    Converts a string from hiragana to full-width kana. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/converthiragana2halfkana##
ConvertHiragana2HalfKana - Convert a hiragana string to a
                           half-width kana string.

  Synopsis

    int32 ConvertHiragana2HalfKana(const char *string,
                                   char *result, uint32 resultSize,
                                   uint8 unknownFiller);

  Description

    Converts a string from hiragana to half-width kana. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/converthiragana2romaji##
ConvertHiragana2Romaji - Convert a hiragana string to a
                         romaji string.

  Synopsis

    int32 ConvertHiragana2Romaji(const char *string,
                                 char *result, uint32 resultSize,
                                 uint8 unknownFiller);

  Description

    Converts a string from hiragana to romaji. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/convertromaji2fullkana##
ConvertRomaji2FullKana - Convert a romaji string to a
                         full-width kana string.

  Synopsis

    int32 ConvertRomaji2FullKana(const char *string,
                                 char *result, uint32 resultSize,
                                 uint8 unknownFiller);

  Description

    Converts a string from romaji to full-width kana. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/convertromaji2halfkana##
ConvertRomaji2HalfKana - Convert a romaji string to a
                         half-width kana string.

  Synopsis

    int32 ConvertRomaji2HalfKana(const char *string,
                                 char *result, uint32 resultSize,
                                 uint8 unknownFiller);

  Description

    Converts a string from romaji to half-width kana. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/convertromaji2hiragana##
ConvertRomaji2Hiragana - Convert a romaji string to a
                         hiragana string.

  Synopsis

    int32 ConvertRomaji2Hiragana(const char *string,
                                 char *result, uint32 resultSize,
                                 uint8 unknownFiller);

  Description

    Converts a string from romaji to hiragana. The
    conversion is done as well as possible. If certain characters from
    the source string cannot be represented in the target character set,
    the unknownFiller byte will be inserted in the result buffer in
    their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/convertshiftjis2ascii##
ConvertShiftJIS2ASCII - Convert a Shift-JIS string to ASCII.

  Synopsis

    int32 ConvertShiftJIS2ASCII(const char *string,
                                char *result, uint32 resultSize,
                                uint8 unknownFiller);

  Description

    Converts a string from Shift-JIS to ASCII. The conversion
    is done as well as possible. If certain characters from the source
    string cannot be represented in ASCII, the unknownFiller byte will
    be inserted in the result buffer in their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/convertshiftjis2unicode##
ConvertShiftJIS2UniCode - Convert a Shift-JIS string to UniCode.

  Synopsis

    int32 ConvertShiftJIS2UniCode(const char *string,
                                  unichar *result, uint32 resultSize,
                                  uint8 unknownFiller);

  Description

    Converts a string from Shift-JIS to UniCode. The conversion
    is done as well as possible. If certain characters from the source
    string cannot be represented in ASCII, the unknownFiller byte will
    be inserted in the result buffer in their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/jstring/folio/autodocs.c::spg/jstring/convertunicode2shiftjis##
ConvertUniCode2ShiftJIS - Convert a UniCode string to Shift-JIS.

  Synopsis

    int32 ConvertUniCode2ShiftJIS(const unichar *string,
                                  char *result, uint32 resultSize,
                                  uint8 unknownFiller);

  Description

    Converts a string from UniCode to Shift-JIS. The conversion
    is done as well as possible. If certain characters from the source
    string cannot be represented in ASCII, the unknownFiller byte will
    be inserted in the result buffer in their place.

  Arguments

    string                      The string to convert.

    result                      A memory buffer where the result of the
                                conversion can be put.

    resultSize                  The number of bytes available in the
                                result buffer. This limits the number
                                of bytes which are put into the buffer.

    unknownFiller               If a character sequence cannot be
                                adequately converted, then this byte
                                will be put into the result buffer in
                                place of the character sequence.

  Return Value

    If positive, then the number of characters in the result
    buffer. If negative, then an error code.

    >= 0                        Number of characters in the result
                                buffer.

    JSTR_ERR_BUFFERTOOSMALL     There was not enough room in the
                                result buffer.

  Implementation

    Folio call implemented in jstring folio V24.

  Associated Files

    jstring.h
##src/kernel/sendio.c::spg/kernel/abortio##
AbortIO - Abort an I/O operation.

  Synopsis

    Err AbortIO( Item ior )

  Description

    This procedure aborts an I/O operation.  If the I/O operation has
    already completed, calling AbortIO() has no effect.  If it is not
    complete, it will be aborted.

    A task should call WaitIO() immediately after calling AbortIO().
    When WaitIO() returns, the task knows that the I/O operation is no
    longer active.  It can then confirm that the I/O operation was
    aborted before it was finished by checking the io_Error field of
    the IOReq structure.  If the operation aborted, the value of this
    field is ER_Aborted.

  Arguments

    ior                         The item number of the I/O request to
                                abort.

  Return Value

    The procedure returns 0 if the I/O operation was successfully
    aborted or an error code (a negative value) if an error occurs.
    Possible error codes include:

    BADITEM                     The ior argument is not an IOReq.

    NOTOWNER                    The ior argument is an IOReq but the
                                calling task is not its owner.

  Implementation

    SWI implemented in the kernel folio V20.

  Associated Files

    io.h                        ANSI C Prototype

  See Also

    CheckIO(), CreateIOReq(), DeleteIOReq(), DoIO(), SendIO(),
    WaitIO()

##src/kernel/list.s::spg/kernel/addhead##
AddHead - Add a node to the head of a list.

  Synopsis

    void AddHead( List *l, Node *n )

  Description

    This procedure adds a node to the head (the beginning) of the
    specified list.

  Arguments

    l                           A pointer to the list in which to add
                                the node.

    n                           A pointer to the node to add.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    A node can be included in only one list.

  Caveats

    Attempting to insert a node into a list while  it is a member of
    another list is not reported as an error, and may confuse the
    other list.

  See Also

    AddTail(), InitList(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail(), UniversalInsertNode()

##src/misc/list.s::spg/kernel/addhead##
AddHead - Add a node to the head of a list.

  Synopsis

    void AddHead( List *l, Node *n )

  Description

    This procedure adds a node to the head (the beginning) of the
    specified list.

  Arguments

    l                           A pointer to the list in which to add
                                the node.

    n                           A pointer to the node to add.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    A node can be included in only one list.

  Caveats

    Attempting to insert a node into a list while  it is a member of
    another list is not reported as an error, and may confuse the
    other list.

  See Also

    AddTail(), InitList(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail(), UniversalInsertNode()

##src/kernel/list.s::spg/kernel/addtail##
AddTail - Add a node to the tail of a list.

  Synopsis

    void AddTail( List *l, Node *n )

  Description

    This procedure adds the specified node to the tail (the end) of
    the specified list.

  Arguments

    l                           A pointer to the list in which to add
                                the node.

    n                           A pointer to the node to add.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    A node can be included only in one list.

  Caveats

    Attempting to insert a node into a list while  it is a member of
    another list is not reported as an error, and may confuse the
    other list.

  See Also

    AddHead(), InitList(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail(), UniversalInsertNode()

##src/misc/list.s::spg/kernel/addtail##
AddTail - Add a node to the tail of a list.

  Synopsis

    void AddTail( List *l, Node *n )

  Description

    This procedure adds the specified node to the tail (the end) of
    the specified list.

  Arguments

    l                           A pointer to the list in which to add
                                the node.

    n                           A pointer to the node to add.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    A node can be included only in one list.

  Caveats

    Attempting to insert a node into a list while  it is a member of
    another list is not reported as an error, and may confuse the
    other list.

  See Also

    AddHead(), InitList(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail(), UniversalInsertNode()

##src/kernel/allocmem.c::spg/kernel/allocmem##
AllocMem - Allocate a memory block of a specific type.

  Synopsis

    void *AllocMem( int32 s, uint32 t )

  Description

    This macro allocates a memory block of a specific type.

  Arguments

    s                           The size of the memory block to
                                allocate, in bytes.

    t                           Flags that specify the type,
                                alignment, and fill characteristics of
                                memory to allocate.

    One of the following flags must be set:

    MEMTYPE_ANY                 Any memory can be allocated.

    MEMTYPE_VRAM                Allocate only video random-access
                                memory (VRAM).

    MEMTYPE_DRAM                Allocate only dynamic random-access
                                memory (DRAM).

    If a block of VRAM must come from a specific VRAM bank, the
    following flag must be set:

    MEMTYPE_BANKSELECT          Allocate VRAM from a specific VRAM
                                bank.  In addition, one of the
                                following two VRAM bank selection
                                flags must be set:

    MEMTYPE_BANK1               Allocate only memory from VRAM bank 1.

    MEMTYPE_BANK2               Allocate only memory from VRAM bank 2.

    The following flags are provided for compatibility with future
    hardware.  You can set them in addition to the preceding flags.

    MEMTYPE_DMA                 Allocate only memory that is
                                accessible via direct memory access
                                (DMA).  Currently, all memory is
                                accessible via DMA, but this may not
                                be true in future hardware.  Set this
                                flag if you know the memory must be
                                accessible via DMA.

    MEMTYPE_CEL                 Allocate only memory that is
                                accessible to the cel engine.
                                Currently, all memory is accessible to
                                the cel engine, but this may not be
                                true in future hardware.  Set this
                                flag if you know the memory will be
                                used for graphics.

    MEMTYPE_AUDIO               Allocate only memory that can be used
                                for audio data (such as digitized
                                sound).  Currently, all memory can be
                                used for audio, but this may not be
                                true in future hardware.  Set this
                                flag if you know the memory will be
                                used for audio data.

    MEMTYPE_DSP                 Allocate only memory that is
                                accessible to the digital signal
                                processor (DSP).  Currently, all
                                memory is accessible to the DSP, but
                                this may not be true in future
                                hardware.  Set this flag if you know
                                the memory must be accessible to the
                                DSP.

    The following flags specify alignment, fill, and other allocation
    characteristics:

    MEMTYPE_FILL                Set every byte in the memory block to
                                the value of the lower eight bits of
                                the flags.  If this flag is not set,
                                the previous contents of the memory
                                block are not changed.  (Using 0 as
                                the fill value can be useful for
                                debugging: Any memory that is
                                inadvertently changed can easily be
                                detected.)

    MEMTYPE_INPAGE              Allocate a memory block that does not
                                cross page boundaries.

    MEMTYPE_STARTPAGE           Allocate a memory block that starts on
                                a page boundary.

    MEMTYPE_MYPOOL              Specifies that the memory block must
                                be allocated only from the task's free
                                memory pool.  This means that if there
                                is not sufficient memory in the task's
                                pool, the Kernel must not allocate
                                additional memory from the system-wide
                                free memory pool (see `Notes').

    MEMTYPE_SYSTEMPAGESIZE      Use the system's protection page size
                                for that type of memory and not the
                                special feature page size.  This is
                                necessary for MEMTYPE_VRAM to
                                distinguish between allocations on
                                VRAM page boundaries for graphics
                                operations (normally 2 K) and task
                                page sizes (normally 16 K).

  Return Value

    The procedure returns a pointer to the memory block that was
    allocated or NULL if the memory couldn't be allocated.

  Implementation

    Macro implemented in mem.h V20.

  Associated Files

    mem.h                       C Macro Definition

  Notes

    Use FreeMem() to free a block of memory that was allocated with
    AllocMem().

    A memory block allocated with AllocMem() will never overwrite the
    stack.

    If there is insufficient memory in a task's free memory pool to
    allocate the requested memory, the Kernel automatically transfers
    the necessary pages of additional memory from the system-wide free
    memory pool to the task's free memory pool.  The only exceptions
    are (1) when there is not enough memory in both pools together to
    satisfy the request, or (2) when the MEMTYPE_MYPOOL memory flag --
    which specifies that the memory block must be allocated only from
    the task's free memory pool -- is set.

    You can enable memory debugging in your application by
    compiling your entire project with the MEMDEBUG value
    defined on the compiler's command-line. Refer to the
    CreateMemDebug() function for more details.

  See Also

    AllocMemBlocks(), AllocMemFromMemList(), AllocMemList(),
    ControlMem(), FreeMem(), FreeMemList(), FreeMemToMemList(),
    malloc(), ScavengeMem(), USER_ALLOCMEM(), USER_FREEMEM()

##src/kernel/pagemem.c::spg/kernel/allocmemblocks##
AllocMemBlocks - Transfer pages of memory from the system-wide free memory pool.

  Synopsis

    void *AllocMemBlocks( int32 size, uint32 typebits )

  Description

    When there is insufficient memory in a task's free memory pool to
    allocate a block of memory, the Kernel automatically provides
    additional pages memory from the system-wide free memory pool.
    Tasks can also get pages from the system-wide free memory pool by
    calling AllocMemBlocks().

    Note: Normal applications do not need to call this procedure.  It
    should only be used by applications that need additional control
    over the memory allocation process.

    You must set MEMTYPE_TASKMEM otherwise the memory will not be
    allocated to the current task.

    AllocMemBlocks() is different from other memory-allocation
    procedures:

    *   The pages of memory that are transferred are not automatically
        added to the task's free memory pool.  To move the memory into
        its free memory pool, thereby making it available to tasks,
        the task must call one of the procedures for freeing memory
        (FreeMem(), FreeMemToMemList(), or FreeMemToMemLists()) with
        the pointer returned by AllocMemBlocks() as the argument.
        (Note that in the memory returned by AllocMemBlocks(), the
        first four bytes specify the amount of memory, in bytes, that
        was transferred.  You should use this value as the size to be
        freed.)

  Arguments

    size                        The amount of memory to transfer, in
                                bytes.  If the size is not an integer
                                multiple of the page size for the type
                                of memory requested, the system
                                transfers the number of full pages
                                needed to satisfy the request.

    typebits                    Flags that specify the type of memory
                                to transfer.  These flags can include
                                MEMTYPE_ANY, MEMTYPE_VRAM,
                                MEMTYPE_DRAM, MEMTYPE_BANKSELECT,
                                MEMTYPE_BANK1, MEMTYPE_BANK2,
                                MEMTYPE_DMA, MEMTYPE_CEL,
                                MEMTYPE_AUDIO, MEMTYPE_DSP,
                                MEMTYPE_TASKMEM.
                                For information about these flags, see
                                the description of AllocMem().

  Return Value

    The procedure returns a pointer to the pages of memory that were
    transferred or NULL if the memory couldn't be transferred.  The
    first four bytes of the memory specify the amount of memory that
    was transferred, in bytes.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    mem.h                       ARM C "swi" declaration

  Notes

    To return memory to the system-wide free memory pool, use
    ScavengeMem() or ControlMem().  ScavengeMem() finds pages of
    memory in the task's free memory pool from which no memory has
    been allocated and returns those pages to the system-wide memory
    pool.  You can use ControlMem() to transfer ownership of memory to
    the system-wide memory pool.

  See Also

    ControlMem(), FreeMem(), FreeMemToMemList(), FreeMemToMemLists(),
    ScavengeMem()

##src/kernel/allocmem.c::spg/kernel/allocmemfrommemlist##
AllocMemFromMemList - Allocate memory from a private memory pool.

  Synopsis

    void *AllocMemFromMemList( struct MemList *ml, int32 size, uint32
    memflags)

  Description

    A task can do its own memory management by creating one or more
    private memory lists.  Use this procedure to allocate a memory
    block from a private memory list.

    Note: Most applications do not need to do their own memory
    management.  When you use standard memory allocation procedures
    like AllocMem(), the details of memory management are handled for
    you by the Kernel.

    To create a private memory list, use the AllocMemList() procedure.

  Arguments

    ml                          A pointer to the private memory list
                                from which to allocate the memory
                                block.

    size                        The size of the memory block to
                                allocate, in bytes.

    memflags                    Flags that specify the type of memory
                                to allocate.  These flags include
                                MEMTYPE_ANY, MEMTYPE_VRAM,
                                MEMTYPE_DRAM, MEMTYPE_BANKSELECT,
                                MEMTYPE_BANK1, MEMTYPE_BANK2,
                                MEMTYPE_DMA, MEMTYPE_CEL,
                                MEMTYPE_AUDIO, MEMTYPE_DSP,
                                MEMTYPE_FILL, MEMTYPE_INPAGE,
                                MEMTYPE_STARTPAGE, and MEMTYPE_MYPOOL.
                                For information about these flags, see
                                the description of AllocMem().

  Return Value

    The procedure returns a pointer to the allocated memory or NULL if
    the memory couldn't be allocated.

    Note:  If there is not enough memory in the specified memory list
    to satisfy the request, the Kernel returns 0.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    mem.h                       ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    To free a memory block allocated with AllocMemFromMemList(), use
    the FreeMemToMemList() procedure.

  See Also

    AllocMemList(), FreeMemToMemList()

##src/kernel/allocmem.c::spg/kernel/allocmemfrommemlists##
AllocMemFromMemLists - Allocate a memory block from a list of memory lists.

  Synopsis

    void *AllocMemFromMemLists( List *l, int32 size, uint32 memflags)

  Description

    This procedure allocates a memory block of the specified type from
    a list of free memory lists.  Although it used most often by the
    Kernel, it can also be called by user tasks that need to do their
    own memory management.

    Note:  Most applications do not need to do their own memory
    management.  When you use standard memory-allocation procedures
    like AllocMem(), the details of memory management are handled for
    you by the Kernel.

    The `free memory pools' in Portfolio are implemented as lists of
    memory lists:

    *   The system-wide free memory pool is the list of memory lists
        that contain the free memory pages owned by the system.

    *   A task's free memory pool is a list of memory lists that have
        been allocated for the task.  These include (1) the two memory
        lists -- one for VRAM and one for DRAM -- that are allocated
        automatically for a task when the task is created.

    AllocMemFromMemLists() allocates memory directly from a particular
    memory pool.  This is in contrast to AllocMemFromMemList(), which
    allocates memory from a specific memory list, typically one that
    was created by the task for doing its own memory management.

    Note:  Tasks can only allocate memory from memory lists that
    belong to them.  This means that user tasks cannot use
    AllocMemFromMemLists() to allocate memory directly from the
    system-wide free memory pool, because the memory in that pool
    belongs to the system.

    If a task requests more memory from its free memory pool than is
    available, the Kernel automatically allocates the necessary
    additional memory pages from the system-wide free memory pool if
    they are available.  The task gets ownership of the additional
    memory and, when the memory is later freed, it is added to the
    task's free memory pool.

  Arguments

    l                           A pointer to the memory pool from
                                which to allocate the block.

    size                        The size of the memory block to
                                allocate, in bytes.

    memflags                    Flags that specify the type of memory
                                to allocate.  These flags can include
                                MEMTYPE_ANY, MEMTYPE_VRAM,
                                MEMTYPE_DRAM, MEMTYPE_BANKSELECT,
                                MEMTYPE_BANK1, MEMTYPE_BANK2,
                                MEMTYPE_DMA, MEMTYPE_CEL,
                                MEMTYPE_AUDIO, MEMTYPE_DSP,
                                MEMTYPE_FILL, MEMTYPE_INPAGE,
                                MEMTYPE_STARTPAGE, and MEMTYPE_MYPOOL
                                .  For information about these flags,
                                see the description of AllocMem().

  Return Value

    The procedure returns a pointer to memory block that was allocated
    or NULL if the memory couldn't be allocated.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    mem.h                       ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    To free a memory block allocated with AllocMemFromMemLists(), use
    the FreeMemToMemLists() procedure.

    You can enable memory debugging in your application by
    compiling your entire project with the MEMDEBUG value
    defined on the compiler's command-line. Refer to the
    CreateMemDebug() function for more details.

  See Also

    FreeMemToMemLists()

##src/kernel/mem.c::spg/kernel/allocmemlist##
AllocMemList - Create a private memory list.

  Synopsis

    MemList *AllocMemList( const void *p, const char *name )

  Description

    A task can do its own memory management by creating one or more
    private memory lists.  You use this procedure to allocate a
    private memory list.

    A memory list you create with AllocMemList() is initially empty.
    To add memory to the list, use the FreeMemToMemList() procedure.

    Note: A single memory list can store either DRAM or VRAM, but not
    both.  The p argument points to an example of the memory the task
    wants to manage with this MemList.

  Arguments

    p                           A pointer to a memory address whose
                                memory type (either DRAM or VRAM) is
                                the type you want to store in the
                                list.  You control actual type of
                                memory in the list by controlling what
                                you free into the list.

    name                        The name of the memory list.

  Return Value

    The procedure returns a pointer to the MemList structure that is
    created or NULL if an error occurs.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    mem.h                       ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    To deallocate a memory list created with AllocMemList(), use
    FreeMemList().

  See Also

    AllocMemFromMemList(), FreeMemList(), FreeMemToMemList()

##src/kernel/signal.c::spg/kernel/allocsignal##
AllocSignal - Allocate signals

  Synopsis

    int32 AllocSignal( uint32 sigMask )

  Description

    One of the ways tasks communicate is by sending signals to each
    other.  Signals are 1-bit flags that indicate that a particular
    event has occurred.

    Tasks that send and receive signals must agree on which signal
    bits to use and the meanings of the signals.  Except for system
    signals, there are no conventions for

    the meanings of individual signal bits; it is up to software
    developers to define their meanings.

    You allocate bits for new signals by calling AllocSignal().  To
    define one signal at a time -- by far the most common case -- you
    call AllocSignal() with 0 as the argument:

    theSignal = AllocSignal( 0 )

    This allocates the next unused bit in the signal word.  In the
    return value, the bit that was allocated is set.  If the
    allocation fails (which happens if all the non-reserved bits in
    the signal word are already allocated), the procedure returns 0.

    In rare cases, you may need to define more than one signal with a
    single call.  You do this by creating a uint32 value and setting
    any bits you want to allocate for new signals, then calling
    AllocSignal() with this value as the argument.  If all the signals
    are successfully allocated, the bits set in the return value are
    the same as the bits that were set in the argument.

    Signals are implemented as follows:

    *   Each task has a 32-bit signal mask that specifies the signals
        it understands.  Tasks allocate bits for new signals by
        calling AllocSignal().  The bits are numbered from 1 (the
        least significant bit) to 32 (the most significant bit).  Bits
        1 through 8 are reserved for system signals (signals sent by
        the Kernel to all tasks); remaining bits can be allocated for
        other signals.  Note: Bit 32 is also reserved for the system.
        It is set when the Kernel returns an error code to a task
        instead of signals.  For example, trying to allocate a system
        signal or signal number 32.

    *   A task calls SendSignal() to send one or more signals to
        another task.  Each bit set in the signalWord argument
        specifies a signal to send.  Normally, only one signal is sent
        at a time.

    *   When SendSignal() is called, the Kernel gets the incoming
        signal word and ORs it into the received signal mask of the
        target task.  If the task was in the wait queue, it sends the
        received signals with the WaitSignalMask.  If there are any
        bits set in the target, the task is moved from the wait queue
        to the ready queue.

    *   If the SIGF_ABORTED system signal is sent to the task, the
        corresponding bit in the task's signal word is automatically
        set.  This signal cannot be masked.

    *   A task gets incoming signals by calling WaitSignal().  If any
        bits are set in the task's signal-word register, WaitSignal()
        returns immediately.  If no bits are set in the task's
        signal-word register, the task remains in wait state until a
        signal arrives that matches one of the signals the task is
        waiting for.

    The following system signals are currently defined:

    SIGF_MEMLOW                 Informs the task that there is little
                                memory left in the system-wide free
                                memory pool.  When a task receives
                                this signal, it should call
                                ScavengeMem() to return unused memory
                                pages to the system-wide free memory
                                pool. This capability is currently not
                                implemented, so the kernel never sends
                                this signal.

    SIGF_MEMGONE                Informs the task that there is no more
                                memory in the system-wide free memory
                                pool.  When a task receives this
                                signal, it must call ScavengeMem()
                                immediately. This capability is
                                currently not implemented, so the
                                kernel never sends this signal.

    SIGF_ABORT                  Informs the task that the current
                                operation has been aborted.

    SIGF_IODONE                 Informs the task that an asynchronous
                                I/O request is complete.

    SIGF_DEADTASK               Informs the task that one of its child
                                tasks or threads has been deleted.
                                Note:  This signal does not specify
                                which task was deleted.  To find this
                                out, the parent task must check to see
                                which of its child tasks still exist.

    SIGF_SEMAPHORE              Informs a task waiting to lock a
                                semaphore that it can do so.
                                Note:  This signal is for system
                                internal use only.

  Arguments

    signalMask                  An uint32 value in which the bits to
                                be allocated are set, or 0 to allocate
                                the next available bit.  You should
                                use 0 whenever possible (see `Notes').

  Return Value

    The procedure returns a int32 value with bits set for any bits
    that were allocated or 0 if not all of the requested bits could be
    allocated.  It returns ILLEGALSIGNAL if the signalMask specified a
    reserved signal.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    task.h                      ARM C "swi" declaration

  Notes

    Use FreeSignal() to deallocate signals.

    Future versions of Portfolio may define additional system signals.
    To help ensure that the signal bits you allocate in current
    applications do not conflict with future system signals, you
    should always use 0 as the value of the signalMask argument when
    allocating signals.  If you must allocate specific signal bits
    (which is strongly discouraged), use bits 17-31.

  See Also

    FreeSignal(), GetCurrentSignals(), SendSignal(), WaitSignal()

##src/libs/c/availMem.c::spg/kernel/availmem##
AvailMem - Get information about available memory.

  Synopsis

    void AvailMem(MemInfo *minfo, uint32 memflags);

  Description

    This procedure returns information about the amount of memory that
    is currently available.  You can get information about a
    particular kind of memory by setting the corresponding flags, such
    as MEMTYPE_VRAM or MEMTYPE_DRAM, in the flags argument.  To get
    information about all memory that is available to the CPU, use
    MEMTYPE_ANY as the value of the flags argument.

    The information about available memory is returned in a MemInfo
    structure:

    Example 15-1                Memory Information Structure for
                                AvailMem()

    typedef struct MemInfo

    {

                                uint32 minfo_SysFree;

                                uint32 minfo_SysLargest;

                                uint32 minfo_TaskFree;

                                uint32 minfo_TaskLargest;

    }                                   MemInfo;


    The fields contain the following information:

    minfo_SysFree               The amount of memory of the specified
                                memory type in the system-wide free
                                memory pool, in bytes.  The pool
                                contains only full pages of memory.

    minfo_SysLargest            The size, in bytes, of the largest
                                series of contiguous pages of the
                                specified memory type in the
                                system-wide free memory pool.

    minfo_TaskFree              The amount of memory of the specified
                                type in the task's free memory pool,
                                in bytes.

    minfo_TaskLargest           The size, in bytes, of the largest
                                contiguous block of the specified
                                memory type that can be allocated from
                                the task's free memory pool.

  Arguments

    minfo                       A pointer to the MemInfo structure
                                used to return the result.

    memflags                    Flags that specify the type of memory
                                to get information about.  These flags
                                can include MEMTYPE_ANY, MEMTYPE_VRAM,
                                MEMTYPE_DRAM, MEMTYPE_BANKSELECT,
                                MEMTYPE_BANK1, MEMTYPE_BANK2,
                                MEMTYPE_DMA, MEMTYPE_CEL,
                                MEMTYPE_AUDIO, and MEMTYPE_DSP.  For
                                information about these flags, see the
                                description of AllocMem().

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    mem.h                       ANSI C Macro

    clib.lib                    ARM Link Library

  Caveats

    When you call AvailMem(), you must request information about only
    one memory type.  Attempting to find out about more than one
    memory type may produce unexpected results.

    If you pass in a garbage minfo pointer, sparks may fly.

    The information returned by AvailMem() is inherently flawed,
    since you are existing in a multitasking environment. Memory
    can be allocated or freed asynchronous to the operation of the
    task calling AvailMem().

  See Also

    AllocMem(), free(), FreeMem(), malloc()

##src/kernel/otherdocs.c::spg/kernel/callfolio##
CallFolio - Invokes from the folio vector table
            a folio procedure that doesn't return a value.

  Synopsis

    void CallFolio( const Folio *folio, int32 func, args )

  Description

    This macro allows a task to invoke a folio procedure
    directly from the folio vector table, thereby bypassing
    the normal procedure interface.  It can be used only for
    folio procedures that do not return a value.  (To invoke
    a folio procedure that does return a value, use
    CallFolioRet().)  This approach, which is slightly faster
    than invoking the procedure through the normal interface,
    is intended for use by the folios themselves, but it can
    be also be used by applications.

    Note: Most tasks should invoke folio procedures in the
    normal way, using the interfaces described in this
    manual.  Only tasks that require the utmost in speed and
    efficiency should invoke folio procedures directly from
    the vector table which I guess is everyones programs.

    Example of AddTail(listP, nodeP) using CallFolio:
         CallFolio(KernelBase, KBV_ADDTAIL, (listP, nodeP));

    Example of n = RemTail(l) using CallFolioRet
         CallFolioRet(KernelBase, KBV_REMTAIL, (l), n, (Node *));

  Arguments

    folio                       A pointer to the folio item that
                                contains the procedure.  Use
                                LookupItem() to get this pointer.  For
                                the item number of a folio (which you
                                pass to LookupItem() see the Portfolio
                                Items chapter or call
                                OpenFolio(FindFolio()).

    func                        The index of the vector table entry
                                for the procedure.  This index (which
                                is always a negative integer, because
                                the table grows backward in memory) is
                                listed in the header file for the folio
                                that contains the procedure.

    args                        The arguments for the procedure,
                                separated by commas and enclosed within
                                parentheses.

  Implementation

    Macro implemented in folio.h V20.

  Associated Files

    folio.h

  See Also

    CallFolioRet()

##src/kernel/otherdocs.c::spg/kernel/callfolioret##
CallFolioRet - Invokes from the folio vector table
               a folio procedure that returns a value.

  Synopsis

    void CallFolioRet( const Folio *folio, int32 func, args, ret, cast )

  Description

    This macro allows a task to invoke a folio procedure
    directly from the folio vector table, thereby bypassing
    the normal procedure interface.  It can be used only for
    folio procedures that return a value.  (To invoke a folio
    procedure that does not return a value, use CallFolio().)
    This approach, which is slightly faster than invoking the
    procedure through the normal interface, is intended for
    use by the folios themselves, but it can be also be used
    by applications.

    Note: Most tasks should invoke folio procedures in the
    normal way, using the interfaces described in this
    manual.  Only tasks that require the utmost in speed and
    efficiency should invoke folio procedures directly from
    the vector table.

  Arguments

    folio                       A pointer to the folio item that
                                contains the procedure.  Use
                                LookupItem() to get this pointer.  For
                                the item number of a folio (which you
                                pass to LookupItem()), see the
                                Portfolio Items chapter or call
                                OpenItem(FindFolio()).

    func                        The index of the vector table entry
                                for the folio procedure to invoke.
                                This index (a negative integer,
                                because the table grows backward in
                                memory) is listed in the header file
                                for the folio.

    args                        The arguments for the procedure,
                                separated by commas and enclosed
                                within parentheses

    ret                         A variable to receive the result from
                                the folio procedure.  The result is
                                coerced to the type specified by the
                                cast argument before it is assigned to
                                this variable.

    cast                        The desired type for the result,
                                surrounded by parentheses.  The result
                                returned by the folio procedure is
                                cast to this type.

  Implementation

    Macro implemented in folio.h V20.

  Associated Files

    folio.h

  See Also

    CallFolio()

##src/kernel/sendio.c::spg/kernel/checkio##
CheckIO - Check for I/O request completion

  Synopsis

    int32 CheckIO( Item ior )

  Description

    This procedure checks to see if an I/O request has completed.

  Arguments

    ior                         The item number of the I/O request to
                                be checked.

  Return Value

    The procedure returns 0 if the I/O is not complete.
    It returns >0 if it is complete. It returns BADITEM if ior is
    bad.

  Implementation

    Convenience call implemented in clib.lib V20.
    Became a folio call in kernel folio V24.

  Associated Files

    io.h                        ANSI C Prototype

  See Also

    AbortIO(), CreateIOReq(), DeleteIOReq(), DoIO(), SendIO(),
    WaitIO()

##src/kernel/item.c::spg/kernel/checkitem##
CheckItem - Check to see if an item exists.

  Synopsis

    void *CheckItem( Item i, uint8 ftype, uint8 ntype )

  Description

    This procedure checks to see if a specified item exists. To
    specify the item, you use an item number, an item-type number, and
    the item number of the folio in which the item type is defined.
    If all three of these values match those of the item, the
    procedure returns a pointer to the item.

  Arguments

    i                           The item number of the item to be
                                checked.

    ftype                       The item number of the folio that
                                defines the item type.  (This is the
                                same value that is passed to the
                                MkNodeID() macro.) For a list of folio
                                item numbers, see the `Portfolio
                                Items' chapter.

    ntype                       The item-type number for the item.
                                (This is the same value that is passed
                                to the MkNodeID() macro.)  For a list
                                of item-type numbers, see the
                                `Portfolio Items' chapter.

  Return Value

    If the item exists (and the values of all three arguments match
    those of the item), the procedure returns a pointer to the item.
    If the item does not exist, the procedure returns NULL.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    item.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    CreateItem(), FindItem(), FindNamedItem(), FindVersionedItem(),
    LookupItem(), MkNodeID()

##src/kernel/otherdocs.c::spg/kernel/clearcurrentsignals##
ClearCurrentSignals - Clears some received signal bits.

  Synopsis

    Err ClearCurrentSignals( int32 sigMask )

  Description

    This macro resets the requested signal bits of the
    current task to 0.

  Arguments

    sigMask                     A 32-bit word indicating which
                                signal bits should be cleared.

  Return Value

    Returns >= 0 for success or a negative error code for failure.

  Implementation

    Macro implemented in kernel.h V24.

  Associated Files

    kernel.h                      ANSI C Macro definition

  See Also

    AllocSignal(), FreeSignal(), SendSignal(), WaitSignal()

##src/kernel/item.c::spg/kernel/closeitem##
CloseItem - Close a system item.

  Synopsis

    Err CloseItem( Item i )

  Description

    System items are items that are created automatically by the
    operating system, such as folios and device drivers, and thus do
    not need to be created by tasks.  To use a system item, a task
    first opens it by calling OpenItem(). When a task is done using a
    system item, it calls CloseItem() to inform the operating system
    that it is no longer using the item.

  Arguments

    i                           Number of the item to close.

  Return Value

    The procedure returns 0 if the item was closed successfully or an
    error code (a negative value) if an error occurs.  Possible error
    codes include:

    BADITEM                     The i argument is not an item.

    ER_Kr_ItemNotOpen           The i argument is not an opened item.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    item.h                      ARM C "swi" declaration

  See Also

    OpenItem()

##src/kernel/item.c::spg/kernel/closenameddevice##
CloseNamedDevice - Close a device previously opened with
                   OpenNamedDevice().

  Synopsis

    Err CloseNamedDevice(Item devItem);

  Description

    This macro closes a device that was previously opened via a
    call to OpenNamedDevice().

  Arguments

    devItem                     The device's Item, as returned by
                                OpenNamedDevice()

  Return Value

    The procedure returns 0 if the item was closed successfully or an
    error code (a negative value) if an error occurs.  Possible error
    codes include:

    BADITEM                     The devItem argument is not an item.

    ER_Kr_ItemNotOpen           The devItem argument is not an opened
                                item.


  Implementation

    Macro implemented in device.h V22.

  Associated Files

    device.h                    ANSI C Macro definition

  See Also

    OpenNamedItem(), OpenItem(), CloseItem(), FindItem()

##src/kernel/pagemem.c::spg/kernel/controlmem##
ControlMem - Control memory permissions and ownership

  Synopsis

    Err ControlMem( void *p, int32 size, int32 cmd, Item task )

  Description

    When a task allocates memory, it becomes the owner of that memory.
    Other tasks cannot write to the memory unless they are given
    permission by its owner.  A task can give another task permission
    to write to one or more of its memory pages, revoke write
    permission that was previously granted, or transfer ownership of
    memory to another task or the system by calling ControlMem().

    Each page of memory has a control status that specifies which task
    owns the memory and which tasks can write to it.  Calls to
    ControlMem() change the control status for entire pages.  If the p
    and size arguments (which specify the memory to change) specify
    any part of a page, the changes apply to the entire page.

    A task can grant write permission for a page that it owns (or for
    some number of contiguous pages) to any number of tasks.  To
    accomplish this, the task must make a separate call to
    ControlMem() for each task that is to be granted write permission.

    A task that calls ControlMem() must own the memory whose control
    status it is changing, with one exception: A task that has write
    access to memory it doesn't own can relinquish its write access
    (by using MEMC_NOWRITE as the value of the cmd argument).  If a
    task transfers ownership of memory it still retains write access.


  Arguments

    p                           A pointer to the memory whose control
                                status to change.

    size                        The amount of memory for which to
                                change the control status, in bytes.
                                If the size and p arguments specify
                                any part of a page, the control status
                                is changed for the entire page.

    cmd                         A constant that specifies the change
                                to be made to the control status.;
                                possible values are listed below.

    task                        The item-number task for which to
                                change the control status or zero
                                for global changes. See Notes.

    The possible values of "cmd" are:

    MEMC_OKWRITE                Grants permission to write to this
                                memory to the task specified by the
                                task argument.

    MEMC_NOWRITE                Revokes permission to write to this
                                memory from the task specified by the
                                task argument. If task is 0 this
                                revokes write permission for all tasks.

    MEMC_GIVE                   If the calling task is the owner of
                                the memory, this transfers ownership
                                of the memory to the task specified by
                                the task argument. If the specified
                                task is 0, it gives the memory back to
                                the system free-memory pool.

  Return Value

    The procedure returns 0 if the change was successful or an error
    code (a negative value) if an error occur.  Possible error codes
    include:

    BADITEM                     The task argument does not specify a
                                current task.

    ER_Kr_BadMemCm              The cmd argument is not one of the
                                valid values.

    ER_BadPtr                   The p argument is not a valid pointer
                                to memory.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    mem.h                       ARM C "swi" declaration

  Notes

    A task can use ControlMem() to prevent itself from writing to
    memory that it owns.

    A task must own the memory for its I/O buffers.

    A task can use ControlMem() to return ownership of memory pages to
    the system, thereby returning them to the system-wide free memory
    pool.  You can do this by using NULL as the value of the task
    argument.

    A task can use ControlMem() to unshare or write protect memory
    from all other tasks. Specify 0 for the task for this to happen.

    We would like to support making a piece of memory writable by all
    other tasks by using task==0 and MEMC_OKWRITE. But this is not
    implemented yet.

  See Also

    ScavengeMem(), AllocMemBlocks()

##src/libs/c/createBufferedMsg.c::spg/kernel/createbufferedmsg##
CreateBufferedMsg - Create a buffered message.

  Synopsis

    Item CreateBufferedMsg( const char *name, uint8 pri, Item mp,
                            uint32 datasize )

  Description

    One of the ways tasks communicate is by sending messages to each
    other.  This procedure creates an item for a buffered message (a
    message that includes an internal buffer for sending data to the
    receiving task).  You can use this procedure in place of
    CreateItem() to create the message.

  Arguments

    name                        The name of the message (see `Notes').

    pri                         The priority of the message.

    mp                          The item number of the message port at
                                which to receive the reply.

    datasize                    The maximum size of the message's
                                internal buffer, in bytes.

  Return Value

    The procedure returns the item number of the message or an error
    code if an error occurs.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    msgport.h                   ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    The advantage of using a buffered message instead of a standard
    message is that the sending task doesn't need to keep the data
    block containing the message data after the message is sent.  All
    the necessary data is included in the message.

    The same message item can be resent any number of times. When you
    are finished with a message item, use DeleteMsg() to delete it.

    You can use FindNamedItem() to find a message item by name.  When
    creating messages, you should assign unique names whenever
    possible.

    The Kernel may change the priority of a message to help optimize
    throughput.

  Caveats

    The priority value (set with the pri argument) is not used
    consistently.

  See Also

    CreateMsg(), CreateMsgPort(), CreateSmallMsg(), DeleteMsg(),
    DeleteMsgPort(), SendMsg()

##src/kernel/sendio.c::spg/kernel/createioreq##
CreateIOReq - Create an I/O request.

  Synopsis

    Item CreateIOReq( const char *name, uint8 pri, Item dev, Item mp )

  Description

    This convenience procedure creates an I/O request item.

    When you create an I/O request, you must decide how the device
    will notify you when an I/O operation completes. There are two
    choices:

      - Notification by signal

      - Notification by message

    With notification by signal, the device will send your task the
    SIGF_IODONE signal whenever an I/O operation completes. This is
    a low overhead mechanism, which is also low on information. When
    you get the signal, all you know is that an I/O operation has
    completed. You do not know which operation has completed. This
    has to be determined by looking at the state of all outstanding
    I/O requests.

    Notification by message involve very slightly more overhead, but
    provides much more information. When you create the I/O request,
    you indicate a message port. Whenever an I/O operation completes,
    the device will send a message to that message port. The message
    will contain the following information:

      - msg_Result
        Contains the io_Error value from the I/O request. This
        indicates the state of the I/O operation, whether it worked
        or failed.

      - msg_DataPtr
        Contains the item number of the I/O request that completed.

      - msg_DataSize
        Contains the value of the ioi_User field taken from the
        IOInfo structure used when initiating the I/O operation.

  Arguments

    name                        The name of the I/O request (see
                                `Notes').

    pri                         The priority of the I/O request.  For
                                some device drivers, this value
                                determines the order in which I/O
                                requests are processed.  When in doubt
                                about what value to use, use 0.

    dev                         The item number of the device to which
                                to send the I/O request.

    mp                          If a task wants to receive a message
                                when an I/O request is finished, this
                                argument must be the item number of
                                the message port to receive the
                                message.  If the task wants to receive
                                a signal when an I/O request is
                                finished instead of a message, this
                                argument must be 0.

  Return Value

    The procedure returns the item number of the new I/O request or
    one of the following error codes if an error occurs:

    BADITEM                     The mp argument was not zero but did
                                not specify a valid message port.

    ER_Kr_ItemNotOpen           The device specified by the dev
                                argument is not open.

    NOMEM                       There was not enough memory to
                                complete the operation.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    io.h                        ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    When you no longer need an I/O request, use DeleteIOReq() to
    delete it.

    You can use FindNamedItem() to find a I/O request by name.  When
    creating I/O requests, you should assign unique names whenever
    possible.

    The Kernel may change the priority of an I/O request to help
    optimize throughput.

  See Also

    DeleteIOReq()

##src/kernel/item.c::spg/kernel/createitem##
CreateItem - Create an item.

  Synopsis

    Item CreateItem( int32 ct, TagArg *p )

    Item CreateItemVA( int32 ct, uint32 tags, ... );

  Description

    This macro creates an item.

    Note:  There are convenience procedures for creating most types of
    items (such as CreateMsg() to create a message and CreateIOReq()
    to create an I/O request).  You should use CreateItem() only when
    no convenience procedure is available or when you need to supply
    additional arguments for the creation of the item beyond what the
    convenience routine provides.

  Arguments

    ct                          Specifies the type of item to create.
                                Use MkNodeID() to generate this value.

    p                           A pointer to an array of tag
                                arguments.  The tag arguments can be
                                in any order.  The last element of the
                                array must be the value TAG_END.  If
                                there are no tag arguments, this
                                argument must be NULL.  For a list of
                                tag arguments for each item type, see
                                the `Portfolio Items' chapter.

  Return Value

    The procedure returns the item number of the new item or an error
    code if an error occurs.

  Implementation

    Macro implemented in item.h V20.

  Associated Files

    item.h                      ANSI C Macro Definition

  Notes

    When you no longer need an item created with CreateItem(), use
    DeleteItem() to

    delete it.

  See Also

    CheckItem(), CreateDevice(), CreateIOReq(), CreateMsg(),
    CreateMsgPort(), CreateSemaphore(), CreateSmallMsg(),
    CreateThread(), DeleteItem()

##src/libs/memdebug/autodocs.c::spg/kernel/creatememdebug##
CreateMemDebug - Initialize memory debugging package

  Synopsis

    Err CreateMemDebug(uint32 controlFlags, const TagArg *args);

  Description

    This function creates the needed data structures and initializes
    them as needed for memory debugging. This function only actually
    does anything if MEMDEBUG is defined, otherwise it is a NOP.

    Memory debugging provides a general-purpose mechanism to track
    and validate all memory allocations done by an application. Using
    memory debugging, you can easily determine where memory leaks occur
    within a title, and find illegal uses of the memory subsystem.

    To enable memory debugging in a title, do the following:

      - Add a call to CreateMemDebug() as the first instruction in
        the main() routine of your program.

      - Add calls to DumpMemDebug() and DeleteMemDebug() as the
        last instructions in the main() routine of your program.

      - Recompile your entire project with MEMDEBUG defined on
        the compiler's command-line (for the ARM compiler, this is
        done by adding -DMEMDEBUG)

      - Link your code with memdebug.lib

    With these steps taken, all memory allocations done by your
    program will be tracked, and specially managed. On exit of your
    program, any memory left allocated will be displayed to the
    console, along with the line number and source file where the
    memory was allocated from.

    In addition, the memory debugging code makes sure that illegal
    or dangerous uses of memory are detected and flagged. Most
    messages generated by the debugging code indicate the offending
    source file and line within your source code where the problem
    originated from.

    When all options are turned on, the debugging code will check
    and report the following problems:

      - memory allocations with a size of 0.

      - memory free with a NULL or bogus memory pointer

      - memory free with a size not matching the size used when the
        memory was allocated

      - NULL memory list passed to AllocMemFromMemLists() or
        FreeMemToMemLists()

      - cookies on either side of all memory allocations are checked
        to make sure they do not get altered from the time a memory
        allocation is made to the time the memory is released. This
        would indicate that something is writing beyond the
        bounds of allocated memory.

    When MEMDEBUG is defined during compilation, all standard memory
    allocation calls are automatically vectored through the
    debugging code. This includes even memory allocation calls
    made inside of previously compiled .lib files you might be linking
    with. However, you can get better debugging information if you
    recompile everything in your project, including .lib files, with
    MEMDEBUG defined.

    By calling the DumpMemDebug() function at any time within your
    program, you can get a detailled listing of all memory currently
    allocated, showing from which source line and source file the
    allocation occured.

    Link order can be important when using memdebug.lib. The library
    should come before clib.lib, but after everything else. That is,
    the link order should be:

       [many .lib files] memdebug.lib clib.lib

  Arguments

    controlFlags                A set of bit flags controlling various
                                options of the memory debugging code.

                                  MEMDEBUGF_ALLOC_PATTERNS
                                  When this flag is specified, it
                                  instructs the debugging code to
                                  fill newly allocated memory with
                                  the constant MEMDEBUG_ALLOC_PATTERN.
                                  Doing so will likely cause your
                                  program to fail in some way if it
                                  tries to read newly allocated memory
                                  without first initializing it. Note
                                  that this option has no effect if
                                  memory is allocated using the
                                  MEMTYPE_FILL memory flag.

                                  MEMDEBUGF_FREE_PATTERNS
                                  When this flag is specified, it
                                  instructs the debugging code to
                                  fill memory that is being freed
                                  with the constant
                                  MEMDEBUG_FREE_PATTERN. Doing so
                                  will likely cause your program to
                                  fail in some way if it tries to
                                  read memory that has been freed.

                                  MEMDEBUG_PAD_COOKIES
                                  When this flag is specified, it
                                  causes the debugging code to
                                  put special memory cookies in the
                                  16 bytes before and 16 bytes after
                                  every block of memory it allocates.
                                  When a memory block is freed, the
                                  cookies are checked to make sure
                                  that they have not been altered. This
                                  option makes sure that your program
                                  is not writing outside the bounds of
                                  memory it allocates.

                                  MEMDEBUG_DEBUG_ON_ERRORS
                                  When this flag is specified, the
                                  debugging code will automatically
                                  invoke the debugger if any error
                                  is detected. Errors includes such
                                  things as mangled pad cookies,
                                  incorrect size for a FreeMem() call,
                                  etc. Normally, the debugging code
                                  simply prints out the error to the
                                  console and keeps executing.

                                  MEMDEBUG_ALLOW_OWNER_SWITCH
                                  This flag tells the memory debugging
                                  code that it is OK for memory to be
                                  allocated by one thread, and freed
                                  by a different thread. Normally,
                                  this condition would be flagged as
                                  an error.

                                  MEMDEBUGF_CHECK_ALLOC_FAILURES
                                  When this flag is specified, the
                                  debugging code will emit a message
                                  whenever a memory allocation call
                                  fails due to lack of memory. This
                                  can be useful to track down where in
                                  a title memory is running out.

                                  MEMDEBUGF_KEEP_TASK_DATA
                                  The debugging code maintains some
                                  thread-specific statistics about
                                  memory allocations performed by that
                                  thread. This information gets
                                  displayed by DumpMemDebug().
                                  Whenever all of the memory allocated
                                  by a thread is freed, the data
                                  structure holding the statistics
                                  for that thread automatically gets
                                  freed by the debugging code. This
                                  is undesirable if you wish to dump
                                  out statistics of the code just
                                  before a title exits. Specifying
                                  this flag causes the data structure
                                  not to be freed, therefore making
                                  the statistic information available
                                  to DumpMemDebug().

                                  MEMDEBUGF_USE_VRAM
                                  The debugging code needs to allocate
                                  private memory to track information
                                  about every memory allocation call
                                  made. This flag tells the debugging
                                  code to allocate this private memory
                                  using MEMTYPE_VRAM instead of
                                  MEMTYPE_ANY. This is useful if you
                                  need as much DRAM as possible, and do
                                  not want the debugging code to take
                                  any away from you.

    args                        A pointer to an array of tag arguments
                                containing extra data for this
                                function. This must currently always
                                be NULL.

  Return Value

    >= 0 for success or a negative error code. Current possible error
    codes are:

        MEMDEBUG_ERR_BADTAG     An undefined tag was supplied.
                                Currently the 'args' parameter
                                to this function should always be
                                NULL.

        MEMDEBUG_ERR_BADFLAGS   An undefined flag bit was set in the
                                'controlFlags' parameter to this
                                function.

  Implementation

    Library call implemented in memdebug.lib V24.

  Associated Files

    mem.h, memdebug.lib

  Notes

    You should make sure to turn off memory debugging prior to creating
    the final version of your program. Enabling memory debugging
    incurs an overhead of currently 32 bytes per allocation
    made. If you use the MEMDEBUGF_PAD_COOKIES option, this overhead
    grows to 64 bytes per allocation.

    In addition, specifying the MEMDEBUGF_ALLOC_PATTERNS and
    MEMDEBUGF_FREE_PATTERNS options will slow down memory allocations
    and free operations, due to the extra work of filling the memory
    with the patterns.

    When reporting errors to the console, the memory debugging
    subsystem will normally print the source file and line number
    where the error occured. When using link libraries which have
    not been recompiled with MEMDEBUG defined, the memory debugging
    subsystem will still be able to track the allocations, but
    will not report the source file or line number where the error
    occured. It will report <unknown source file> instead.

  Caveat

    If you link your program with memdebug.lib, you must call
    CreateMemDebug() at the beginning of your program. Any attempt to
    allocate memory prior to calling CreateMemDebug() will fail.

  See Also

    DeleteMemDebug(), DumpMemDebug(), SanityCheckMemDebug()

##src/kernel/ports.c::spg/kernel/createmsg##
CreateMsg - Create a standard message.

  Synopsis

    Item CreateMsg( const char *name, uint8 pri, Item mp )

  Description

    One of the ways tasks communicate is by sending messages to each
    other.  This procedure creates an item for a standard message (a
    message where any data to be communicated to the receiving task is
    contained in a data block allocated by the sending task).  You can
    use this procedure in place of CreateItem() to create the item.

    To create a buffered message (a message that includes an internal
    buffer for sending data to the receiving task), use
    CreateBufferedMsg().  To create a small message (a message that
    can contain up to eight bytes of data), use CreateSmallMsg().

  Arguments

    name                        The name of the message (see `Notes').

    pri                         The priority of the message.  This
                                determines the position of the message
                                in the receiving task's message queue
                                and thus, how soon it is likely to be
                                handled (see `Notes').  The priority
                                can be a value from 11 to 199 (0 to 10
                                and 200 to 255 can only be assigned by
                                the system software).  A larger number
                                specifies a higher priority.

    mp                          The item number of the message port at
                                which to receive the reply.

  Return Value

    The procedure returns the item number of the message or an error
    code (a negative value) if an error occurs.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    msgport.h                   ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    The same message item can be reused for any number of messages.
    When you are finished with a message item, use DeleteMsg() to
    delete it.

    You can use FindNamedItem() to find a message item by name.  When
    creating messages, you should assign unique names whenever
    possible.

  See Also

    CreateMsgPort(), CreateBufferedMsg(), CreateSmallMsg(),
    DeleteMsg(), DeleteMsgPort(), SendMsg()

##src/kernel/ports.c::spg/kernel/createmsgport##
CreateMsgPort - Create a message port.

  Synopsis

    Item CreateMsgPort( const char *name, uint8 pri, uint32 signal )

  Description

    This convenience procedure creates a message port item. It also
    creates a message queue for the port in system RAM.  You can use
    this procedure in place of CreateItem() to create the item.

  Arguments

    name                        The name of the message port (see
                                `Notes').

    pri                         The priority of the message port. The
                                priority has no effect on the way
                                message ports operate, but it does
                                determine the order of the message
                                ports in the global list of message
                                ports and thus, the speed in which a
                                particular message port can be found.

    signal                      Specifies the bit in the signal word
                                that is set when a message arrives at
                                this port. If zero is supplied a new
                                signal will be allocated. (See the
                                description of AllocSignal() for
                                information about allocating signal
                                bits.)

  Return Value

    The procedure returns the item number of the new message port or
    an error code if an error occurs.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    msgport.h                   ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    When you no longer need a message port, use DeleteMsgPort() to
    delete it.

    You can use FindMsgPort() to find a message port by name. When
    creating message ports, you should assign unique names whenever
    possible.

    The Kernel may change the priority of a message port to help
    optimize throughput.

  See Also

    CreateMsg(), DeleteMsg(), DeleteMsgPort(), SendMsg(),
    SendSmallMsg()

##src/kernel/semaphore.c::spg/kernel/createsemaphore##
CreateSemaphore - Create a semaphore.

  Synopsis

    Item CreateSemaphore( const char *name, uint8 pri )

  Description

    This convenience procedure creates a semaphore item with the
    specified name and priority.  You can use this procedure in place
    of CreateItem() to create the semaphore.

    For information about semaphores, which are used to control access
    to shared resources, see the `Sharing System Resources' chapter in
    the 3DO Portfolio Programmer's Guide.

  Arguments

    name                        The name of the semaphore (see
                                `Notes').

    pri                         The priority of the semaphore.  Use 0
                                for now.

  Return Value

    The procedure returns the item number of the semaphore or an error
    code if an error occurs.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    semaphore.h                 ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    When you no longer need a semaphore, use DeleteSemaphore() to
    delete it.

    You can use FindSemaphore() to find a semaphore by name. When
    creating semaphores, you should assign unique names whenever
    possible.

  See Also

    DeleteSemaphore(), LockSemaphore(), UnlockSemaphore()

##src/libs/c/createSmallMsg.c::spg/kernel/createsmallmsg##
CreateSmallMsg - Create a small message.

  Synopsis

    Item CreateSmallMsg( const char *name, uint8 pri, Item mp )

  Description

    This convenience procedure creates the item for a small message (a
    message that can contain up to eight bytes of data).  You can use
    this procedure in place of CreateItem() to create the item.

    To create a standard message (a message in which any data to be
    communicated to the receiving task is contained in a data block
    allocated by the sending task), use CreateMsg().  To create a
    buffered message (a message that includes an internal buffer for
    sending data to the receiving task), use CreateBufferedMsg().

  Arguments

    name                        The name of the message (see `Notes').

    pri                         The priority of the message.

    mp                          The item number of the message port
                                for the return message.

  Return Value

    The procedure returns the item number of the message that was
    created or an error code if an error occurs.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    msgport.h                   ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    The same message item can be resent any number of times. When you
    are finished with a message item, use DeleteMsg() to delete it.

    You can use FindNamedItem() to find a message by name. When naming
    messages, you should assign unique names whenever possible.

    The Kernel may change the priority of a message to help optimize
    throughput.

  See Also

    CreateMsg(), CreateMsgPort(), CreateBufferedMsg(), DeleteMsg(),
    DeleteMsgPort(), SendMsg()

##src/libs/c/createThread.c::spg/kernel/createthread##
CreateThread - Create a thread.

  Synopsis

    Item CreateThread( const char *name, uint8 pri, void (*code) (),
                      int32 stacksize )

  Description

    This procedure creates a thread.  The resulting thread belongs to
    the calling task.

  Arguments

    name                        The name of the thread to be created
                                (see `Notes').

    pri                         The priority of the thread.  This can
                                be a value from 11 to 199 (0 to 10 and
                                200 to 255 can only be assigned by
                                system software).  A larger number
                                specifies a higher priority. For all
                                tasks, including threads, the highest
                                priority task -- if there is only one
                                task with that priority -- is always
                                the task that is executed.  If more
                                than one task in the ready queue has
                                the highest priority, the Kernel
                                divides the available CPU time among
                                the tasks by providing each task with
                                a time quantum.

    code                        A pointer to the code that the thread
                                executes.

    stacksize                   The size of the thread's stack, in
                                bytes (see `Notes').

  Return Value

    The procedure returns the item number of the thread or an error
    code if an error occurs.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    task.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    There is no default size for a thread's stack.  To avoid stack
    overflow errors, the stack must be large enough to handle any
    possible uses.  One way to find the proper stack size for a thread
    is to start with a very large stack, reduce its size until a stack
    overflow occurs, and then double its size.

    When you no longer need a thread, use DeleteThread() to delete it.
    Alternatively, the thread can return or call exit().

    You can use FindTask() to find a thread by name.  When naming
    threads, you should assign unique names whenever possible.

  See Also

    DeleteThread(), exit()

##src/kernel/ports.c::spg/kernel/createuniquemsgport##
CreateUniqueMsgPort - Create a message port with a unique name.

  Synopsis

    Item CreateUniqueMsgPort( const char *name, uint8 pri, uint32 signal )

  Description

    This convenience procedure creates a message port item. It also
    creates a message queue for the port in system RAM.  You can use
    this procedure in place of CreateItem() to create the item.

    This function works much like CreateMsgPort(), except that it
    guarantees that no other message port item of the same name
    already exists. And once this port created, no other
    port of the same name will be allowed to be created.

  Arguments

    name                        The name of the message port (see
                                `Notes').

    pri                         The priority of the message port. The
                                priority has no effect on the way
                                message ports operate, but it does
                                determine the order of the message
                                ports in the global list of message
                                ports and thus, the speed in which a
                                particular message port can be found.

    signal                      Specifies the bit in the signal word
                                that is set when a message arrives at
                                this port. If zero is supplied a new
                                signal will be allocated. (See the
                                description of AllocSignal() for
                                information about allocating signal
                                bits.)

  Return Value

    The procedure returns the item number of the new message port or
    an error code if an error occurs. If a port of the same name
    already existed when this call was made, the ER_Kr_UniqueItemExists
    error will be returned.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    msgport.h                   ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    When you no longer need a message port, use DeleteMsgPort() to
    delete it.

    You can use FindMsgPort() to find a message port by name.

    The Kernel may change the priority of a message port to help
    optimize throughput.

  See Also

    CreateMsg(), DeleteMsg(), DeleteMsgPort(), SendMsg(),
    SendSmallMsg()

##src/kernel/semaphore.c::spg/kernel/createuniquesemaphore##
CreateUniqueSemaphore - Create a semaphore with a unique name.

  Synopsis

    Item CreateUniqueSemaphore( const char *name, uint8 pri )

  Description

    This convenience procedure creates a semaphore item with the
    specified name and priority.  You can use this procedure in place
    of CreateItem() to create the semaphore.

    This function works much like CreateSemaphore(), except that it
    guarantees that no other semaphore item of the same name
    already exists. And once this semaphore created, no other
    semaphore of the same name will be allowed to be created.

    For information about semaphores, which are used to control access
    to shared resources, see the `Sharing System Resources' chapter in
    the 3DO Portfolio Programmer's Guide.

  Arguments

    name                        The name of the semaphore (see
                                `Notes').

    pri                         The priority of the semaphore.  Use 0
                                for now.

  Return Value

    The procedure returns the item number of the semaphore or an error
    code if an error occurs. If a semaphore of the same name already
    existed when this call was made, the ER_Kr_UniqueItemExists error
    will be returned.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    semaphore.h                 ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    When you no longer need a semaphore, use DeleteSemaphore() to
    delete it.

    You can use FindSemaphore() to find a semaphore by name.

  See Also

    DeleteSemaphore(), LockSemaphore(), UnlockSemaphore()

##src/kernel/sendio.c::spg/kernel/deleteioreq##
DeleteIOReq - Delete an I/O request.

  Synopsis

    Err DeleteIOReq( Item item )

  Description

    This macro deletes an I/O request item.  You can use this macro in
    place of DeleteItem() to delete the item. If there was any
    outstanding I/O with this IOReq, it will be aborted first.

  Arguments

    item                        The item number of the I/O request to
                                delete.

  Return Value

    The macro returns 0 if the I/O request was successfully deleted or
    an error code (a negative value) if an error occurs.

  Implementation

    Macro implemented in io.h V20.

  Associated Files

    io.h                        ANSI C Macro Definition

  See Also

    CreateIOReq()

##src/kernel/item.c::spg/kernel/deleteitem##
DeleteItem - Delete an item.

  Synopsis

    Err DeleteItem( Item i )

  Description

    This procedure deletes the specified item and frees any resources
    (including memory) that were allocated for the item.

    Note:  There are convenience procedures for deleting most types of
    items (such as DeleteMsg() to delete a message and DeleteIOReq()
    to delete an I/O request).  You should use DeleteItem() only if
    you used CreateItem() to create the item. If you used a
    convenience routine to create an item, you must use the
    corresponding convenience routine to delete the item.

  Arguments

    i                           Number of the item to be deleted.

  Return Value

    The procedure returns 0 if successful or an error code if an error
    occurs.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    item.h                      ARM C "swi" declaration

  Notes

    The item number of a deleted item is not reused.  If a task
    specifies the item number of a deleted item, the Kernel informs
    the task that the item no longer exists.

    Tasks can only delete items that they own.  If a task transfers
    ownership of an item to another task, it can no longer delete the
    item.  The lone exception to this is the task itself.  You can
    always commit sepaku..

    When a task dies, the Kernel automatically deletes all of the
    items in its resource table.

  See Also

    CheckItem(), CreateItem(), DeleteIOReq(), DeleteMsg(),
    DeleteMsgPort(), DeleteThread(), exit()

##src/libs/memdebug/autodocs.c::spg/kernel/deletememdebug##
DeleteMemDebug - Release memory debugging resources

  Synopsis

    Err DeleteMemDebug(void);

  Description

    Deletes any resources allocated by CreateMemDebug().
    This function only actually does anything if MEMDEBUG is
    defined, otherwise it is a NOP.

    This function also frees any memory allocated that has not been
    freed yet.

  Return Value

    >= 0 for success, or a negative error code.

  Implementation

    Library call implemented in memdebug.lib V24.

  Associated Files

    mem.h, memdebug.lib

  See Also

    CreateMemDebug(), DumpMemDebug(), SanityCheckMemDebug()

##src/kernel/ports.c::spg/kernel/deletemsg##
DeleteMsg - Delete a message.

  Synopsis

    Err DeleteMsg( Item it )

  Description

    This macro deletes the specified message and any resources
    (including the internal data buffer for a buffered message) that
    were allocated for it.

  Arguments

    it                          The item number of the message to be
                                deleted.

  Return Value

    The macro returns 0 if successful or an error code if an error
    occurs.

  Implementation

    Macro implemented in msgport.h V20.

  Associated Files

    msgport.h                   ANSI C Macro definition

  See Also

    CreateMsg()

##src/kernel/ports.c::spg/kernel/deletemsgport##
DeleteMsgPort - Delete a message port.

  Synopsis

    Err DeleteMsgPort( Item it )

  Description

    This macro deletes the specified message port.

  Arguments

    it                          The item number of the message port to
                                be deleted.

  Return Value

    The macro returns 0 if successful or an error code if an error
    occurs.

  Implementation

    Macro implemented in msgport.h V20.

  Associated Files

    msgport.h                   ANSI C Macro Definition

  See Also

    CreateMsg(), CreateMsgPort()

##src/kernel/semaphore.c::spg/kernel/deletesemaphore##
DeleteSemaphore - Delete a semaphore

  Synopsis

    Err DeleteSemaphore( Item s )

  Description

    This macro deletes a semaphore.

    For information about semaphores, which are used to control access
    to shared resources, see the `Sharing System Resources' chapter in
    the 3DO Portfolio Programmer's Guide.

  Arguments

    s                           The item number of the semaphore to be
                                deleted.

  Return Value

    The macro returns 0 if successful or an error code if an error
    occurred.

  Implementation

    Macro implemented in semaphore.h V20.

  Associated Files

    semaphore.h                 ANSI C Macro definition

  Notes

    As with all items, the item number of a deleted semaphore is not
    reused.  If a task specifies the item number of a deleted
    semaphore, the Kernel informs the task that the item no longer
    exists.

  See Also

    CreateSemaphore()

##src/libs/c/createThread.c::spg/kernel/deletethread##
DeleteThread - Delete a thread.

  Synopsis

    Err DeleteThread( Item x )

  Description

    This procedure deletes a thread process.

  Arguments

    x                           The item number of the thread to be
                                deleted.

  Return Value

    The procedure returns 0 if the thread was successfully deleted or
    an error code if an error occurs.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    task.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    Although threads may be deleted as soon as the parent task has
    finished using it by calling DeleteThread(), threads are
    automatically deleted when they return, call exit() or their
    parent task is deleted or dies.

    Threads share memory with their parent tasks.  This means that:

    *   Memory that was allocated by a thread also belongs to the
        parent task.

    *   Memory that was allocated by a thread is not automatically
        deallocated when the thread is deleted but instead remains the
        property of the parent task.

    If you create a thread using CreateThread(), you must delete it
    using DeleteThread(), which does special cleanup work needed when
    deleted threads.

  See Also

    CreateThread(), exit()

##src/kernel/sendio.c::spg/kernel/doio##
DoIO - Perform synchronous I/O.

  Synopsis

    Err DoIO( Item ior, const IOInfo *ioiP )

  Description

    This procedure is the most efficient way to perform synchronous
    I/O (I/O in which the task waits for the I/O request to complete
    before continuing).  It automatically requests quick I/O (see
    below), sends the I/O request, and then puts the calling task into
    wait state until the request is complete.

    DoIO() automatically sets the IO_QUICK flag in the IOInfo
    structure.  This flag specifies `quick I/O,' which works as
    follows: The Kernel tries to perform the I/O operation immediately
    and, if it is successful, it sends back the resulting IOReq
    structure immediately and returns 1 as the result code.  The
    calling task can then get the necessary information from the
    IOReq.  If quick I/O is not successful, the Kernel then performs
    normal asynchronous I/O and notifies the task with a signal or
    message when the I/O request is complete.  This wakes up the task
    and DoIO then returns.

    Starting with kernel folio V24, this function will automatically
    sample the io_Error field of the IO request, and return this to
    you. It is therefore no longer necessary to have code such as:

        err = DoIO(iorItem,&ioinfo);
        if (err >= 0)
            err = ior->io_Error;

    You can now just look at the return value of DoIO().

  Arguments

    ior                         The item number of the I/O request to
                                use

    ioiP                        A pointer to the IOInfo structure
                                containing the I/O command to be
                                executed, input and/or output data,
                                and other information.  For more
                                information about this structure, see
                                the `Data Structures and Variable
                                Types' chapter.

  Return Value

    The procedure returns when the I/O was successful (which means
    that the IOReq structure has already been returned and its
    contents can be examined).

  Implementation

    Convenience call implemented in clib.lib V20.
    Became a SWI in kernel folio V24.

  Associated Files

    io.h                        ANSI C Prototype

  See Also

    AbortIO(), CheckIO(), CreateIOReq(), DeleteIOReq(), SendIO(),
    WaitIO()

##src/libs/memdebug/autodocs.c::spg/kernel/dumpmemdebug##
DumpMemDebug - Dump memory allocation debugging information

  Synopsis

    Err DumpMemDebug(const TagArg *args);

  Description

    This function outputs a table showing all memory currently
    allocated through the memory debugging code. This table shows
    the allocation size, address, as well as the source file and
    the source line where the allocation took place.

    This function also outputs statistics about general memory
    allocation patterns. This includes the number of memory allocation
    calls that have been performed, the maximum number of bytes
    allocated at any one time, current amount of allocated memory,
    etc. All this information is displayed on a per-thread basis,
    as well as globally for all threads.

    To use this function, the memory debugging code must have been
    previously initialized using the CreateMemDebug() function.

  Arguments

    args                        A pointer to an array of tag arguments
                                containing extra data for this
                                function. This must currently always
                                be NULL.

  Return Value

    >= 0 for success or a negative error code. Current possible error
    codes are:

        MEMDEBUG_ERR_BADTAG     An undefined tag was supplied.
                                Currently the 'args' parameter
                                to this function should always be
                                NULL.

  Implementation

    Library routine implemented in memdebug.lib V24.

  Associated Files

    mem.h, memdebug.lib

  See Also

    CreateMemDebug(), DeleteMemDebug(), SanityCheckMemDebug()

##src/libs/c/dumptaglist.c::spg/kernel/dumptaglist##
DumpTagList - Print contents of a tag list.

  Synopsis

    void DumpTagList (const TagArg *tagList, const char *desc)

  Description

    This function prints out the contents of a TagArg list.

  Arguments

    tagList                     The list of tags to print.

    desc                        Description of tag list to print.
                                Can be NULL.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    tags.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    NextTagArg(), GetTagArg()

##src/kernel/task.c::spg/kernel/exit##
exit - Exit from a task or thread.

  Synopsis

    void exit( int status )

  Description

    This procedure deletes the calling task or thread process.
    If the CREATETASK_TAG_MSGFROMCHILD tag was set when creating the
    calling task, then the status is sent to the parent process through
    a message.

  Arguments

    status                      The status to be returned to the
                                parent of the calling task or thread.
                                Negative status is reserved for
                                system use.

  Return Value

    This procedure never returns.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    stdlib.h                    ANSI C Prototype

  Notes

    When tasks (including threads) have finished their work, they
    should call exit() to die gracefully.  The system will call exit()
    on behalf of the task that returns from the top-level routine.
    exit() does necessary clean-up work when a task is finished,
    including the cleanup required for a thread created by the
    CreateThread() library routine.

  See Also

    CreateThread(), DeleteItem(), DeleteThread()

##src/libs/c/findandopenitem.c::spg/kernel/findandopendevice##
FindAndOpenDevice - Find a device by name and open it.

  Synopsis

    Item FindAndOpenDevice( const char *name )

  Description

    This macro finds a device whose name matches the name argument.
    The search is not case-sensitive (that is, the Kernel does not
    distinguish uppercase and lowercase letters in device names).
    If the device is found, it is opened.

  Arguments

    name                        The name of the device to find.

  Return Value

    The macro returns the item number of the device or an error code
    if an error occurs.

  Implementation

    Macro implemented in device.h V24.

  Associated Files

    device.h                    ANSI C Macro definition

  See Also

    OpenNamedDevice(), FindAndOpenItem()

##src/libs/c/findandopenitem.c::spg/kernel/findandopenfolio##
FindAndOpenFolio - Find a folio by name and open it.

  Synopsis

    Item FindAndOpenFolio( const char *name )

  Description

    This macro finds a folio whose name matches the name argument.
    The search is not case-sensitive (that is, the Kernel does not
    distinguish uppercase and lowercase letters in folio names).  You
    can use this macro in place of FindAndOpenNamedItem() to find a
    folio and open it.

    The names of folios are contained in the nodes.h header file.

  Arguments

    name                        The name of the folio to find.

  Return Value

    The macro returns the item number of the folio or an error
    code if an error occurs.

  Implementation

    Macro implemented in folio.h V24.

  Associated Files

    folio.h                     ANSI C Macro definition

  See Also

    CallFolio(), CallFolioRet(), FindAndOpenNamedItem()

##src/kernel/item.c::spg/kernel/findandopenitem##
FindAndOpenItem - Find an item by type and tags and open it.

  Synopsis

    Item FindAndOpenItem( int32 cType, TagArg *tp )

    Item FindAndOpenItemVA( int32 cType, uint32 tags, ... );

  Description

    This procedure finds an item of the specified type whose tag
    arguments match those pointed to by the tp argument.  If more than
    one item of the specified type has matching tag arguments, the
    procedure returns the item number for the first matching item.
    When an item is found, it is automatically opened and prepared
    for use.

  Arguments

    cType                       Specifies the type of the item to
                                find.  Use MkNodeID() to create this
                                value.

    tp                          A pointer to an array of tag
                                arguments.  The tag arguments can be
                                in any order.  The array can contain
                                some, all, or none of the possible tag
                                arguments for an item of the specified
                                type; to make the search more
                                specific, include more tag arguments.
                                The last element of the array must be
                                the value TAG_END.  If there are no
                                tag arguments, this argument must be
                                NULL.  For a list of tag arguments for
                                each item type, see the `Portfolio
                                Items' chapter.

  Return Value

    The procedure returns the number of the first item that matches or
    an error code if it can't find the item of if an error occurs.
    The returned item is already opened, so there is no need to
    call OpenItem() on it. You should call CloseItem() on the
    supplied item when you are done with it.

  Implementation

    SWI implemented in kernel folio V24.

  Associated Files

    item.h                      ARM C "swi" declaration

  Notes

    To close an opened item, use CloseItem().

  See Also

    CheckItem(), FindNamedItem(), FindVersionedItem(), LookupItem(),
         MkNodeID(), OpenItem(), FindItem()

##src/libs/c/findandopenitem.c::spg/kernel/findandopennameditem##
FindAndOpenNamedItem - Find an item by name and open it.

  Synopsis

    Item FindAndOpenNamedItem( int32 ctype, const char *name )

  Description

    This procedure finds an item of the specified type whose name
    matches the name argument.  The search is not case-sensitive (that
    is, the Kernel does not distinguish uppercase and lowercase
    letters in item names). When an item is found, it is automatically
    opened and prepared for use.

  Arguments

    ctype                       The type of the item to find.  Use
                                MkNodeID() to create this value.

    name                        The name of the item to find.

  Return Value

    The procedure returns the number of the item that was opened.  It
    returns an error code if an error occurs.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    item.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    FindAndOpenItem()

##src/libs/c/finditem.c::spg/kernel/finddevice##
FindDevice - Find a device by name.

  Synopsis

    Item FindDevice( const char *name )

  Description

    This macro finds a device whose name matches the name argument.
    The search is not case-sensitive (that is, the Kernel does not
    distinguish uppercase and lowercase letters in device names).

  Arguments

    name                        The name of the device to find.

  Return Value

    The macro returns the item number of the device or an error code
    if an error occurs.

  Implementation

    Macro implemented in device.h V20.

  Associated Files

    device.h                    ANSI C Macro definition

  See Also

    OpenNamedDevice(), FindItem()

##src/libs/c/finditem.c::spg/kernel/findfolio##
FindFolio - Find a folio by name.

  Synopsis

    Item FindFolio( const char *name )

  Description

    This macro finds a folio whose name matches the name argument.
    The search is not case-sensitive (that is, the Kernel does not
    distinguish uppercase and lowercase letters in folio names).  You
    can use this macro in place of FindNamedItem() to find a folio.

    The names of folios are contained in the nodes.h header file.

  Arguments

    name                        The name of the folio to find.

  Return Value

    The macro returns the item number of the folio or an error
    code if an error occurs.

  Implementation

    Macro implemented in folio.h V20.

  Associated Files

    folio.h                     ANSI C Macro definition

  See Also

    CallFolio(), CallFolioRet()

##src/kernel/item.c::spg/kernel/finditem##
FindItem - Find an item by type and tags.

  Synopsis

    Item FindItem( int32 cType, TagArg *tp )

    Item FindItemVA( int32 cType, uint32 tags, ...)

  Description

    This procedure finds an item of the specified type whose tag
    arguments match those pointed to by the tp argument.  If more than
    one item of the specified type has matching tag arguments, the
    procedure returns the item number for the first matching item.

  Arguments

    cType                       Specifies the type of the item to
                                find.  Use MkNodeID() to create this
                                value.

    tp                          A pointer to an array of tag
                                arguments.  The tag arguments can be
                                in any order.  The array can contain
                                some, all, or none of the possible tag
                                arguments for an item of the specified
                                type; to make the search more
                                specific, include more tag arguments.
                                The last element of the array must be
                                the value TAG_END.  If there are no
                                tag arguments, this argument must be
                                NULL.  For a list of tag arguments for
                                each item type, see the `Portfolio
                                Items' chapter.

  Return Value

    The procedure returns the number of the first item that matches or
    an error code if it can't find the item of if an error occurs.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    item.h                      ARM C "swi" declaration

  Caveats

    The procedure currently ignores most tag arguments.

  See Also

    CheckItem(), FindNamedItem(), FindVersionedItem(), LookupItem(),

    MkNodeID()

##src/libs/c/finditem.c::spg/kernel/findmsgport##
FindMsgPort - Find a message port by name.

  Synopsis

    Item FindMsgPort( const char *name )

  Description

    This macro finds a message port with the specified name.  The
    search is not case-sensitive (that is, the Kernel does not
    distinguish uppercase and lowercase letters in message port
    names).  You can use this macro in place of FindNamedItem() to
    find a message port.

  Arguments

    name                        The name of the message port to find.

  Return Value

    The macro returns the item number of the message port that
    was found or an error code if an error occurs.

  Implementation

    Macro implemented in msgport.h V20.

  Associated Files

    msgport.h                   ANSI C Macro definition

  See Also

    CreateMsgPort()

##src/libs/c/finditem.c::spg/kernel/findnameditem##
FindNamedItem - Find an item by name.

  Synopsis

    Item FindNamedItem( int32 ctype, const char *name )

  Description

    This procedure finds an item of the specified type whose name
    matches the name argument.  The search is not case-sensitive (that
    is, the Kernel does not distinguish uppercase and lowercase
    letters in item names).

  Arguments

    ctype                       The type of the item to find.  Use
                                MkNodeID() to create this value.

    name                        The name of the item to find.

  Return Value

    The procedure returns the number of the item that was found.  It
    returns an error code if an error occurs.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    item.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    FindItem(), FindVersionedItem()

##src/kernel/mem.c::spg/kernel/findnamednode##
FindNamedNode - Find a node by name.

  Synopsis

    Node *FindNamedNode( const List *l, const char *name )

  Description

    This procedure searches a list for a node with the specified name.
    The search is not case-sensitive (that is, the Kernel does not
    distinguish uppercase and lowercase letters in node names).

  Arguments

    l                           A pointer to the list to search.

    name                        The name of the node to find.

  Return Value

    The procedure returns a pointer to the node structure or NULL if
    the named node couldn't be found.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    FirstNode(), LastNode(), NextNode(), PrevNode()

##src/libs/c/findnodefromhead.c::spg/kernel/findnodefromhead##
FindNodeFromHead - Return a pointer to a node appearing at a given
                   ordinal position from the head of the list.

  Synopsis

    Node *FindNodeFromHead(const List *l, uint32 position);

  Description

    This function scans the supplied list and returns a pointer
    to the node appearing in the list at the given ordinal position.
    NULL is returned if the list doesn't contain that many items.

  Arguments

    l                           A pointer to the list to scan for the
                                node.

    position                    The node position to look for.

  Return Value

    A pointer to the node found, or NULL if the list doesn't contain
    enough nodes.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveats

    GIGO (`garbage in, garbage out')

  See Also

    AddHead(), AddTail(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail()

##src/libs/c/findnodefromtail.c::spg/kernel/findnodefromtail##
FindNodeFromTail - Return a pointer to a node appearing at a given
                   ordinal position from the tail of the list.

  Synopsis

    Node *FindNodeFromTail(const List *l, uint32 position);

  Description

    This function scans the supplied list and returns a pointer
    to the node appearing in the list at the given ordinal position
    counting from the end of the list. NULL is returned if the list
    doesn't contain that many items.

  Arguments

    l                           A pointer to the list to scan for the
                                node.

    position                    The node position to look for,
                                relative to the end of the list.

  Return Value

    A pointer to the node found, or NULL if the list doesn't contain
    enough nodes.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveats

    GIGO (`garbage in, garbage out')

  See Also

    AddHead(), AddTail(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail()

##src/libs/c/finditem.c::spg/kernel/findsemaphore##
FindSemaphore - Find a semaphore by name.

  Synopsis

    Item FindSemaphore( const char *name )

  Description

    This macro finds a semaphore with the specified name.  The search
    is not case-sensitive (that is, the Kernel does not distinguish
    uppercase and lowercase letters in semaphore names).  You can use
    this macro in place of FindNamedItem() to find a semaphore.

    For information about semaphores, which are used to control access
    to shared resources, see the `Sharing System Resources' chapter in
    the 3DO Portfolio Programmer's Guide.

  Arguments

    name                        The name of the semaphore to find.

  Return Value

    The macro returns the item number of the semaphore that
    was found or an error code if an error occurs.

  Implementation

    Macro implemented in semaphore.h V20.

  Associated Files

    semaphore.h                 ANSI C Macro definition

  See Also

    CreateSemaphore()

##src/kernel/tags.c::spg/kernel/findtagarg##
FindTagArg - Look through a tag list for a specific tag.

  Synopsis

    TagArg *FindTagArg( const TagArg *tagList, uint32 tag );

  Desription

    This function scans a tag list looking for a TagArg structure
    with a ta_Tag field equal to the tag parameter. The function
    always returns the last TagArg structure in the list which matches
    the tag. Finally, this function deals with the various control
    tags such as TAG_JUMP and TAG_NOP.

  Arguments

    tagList                     The list of tags to scan.

    tag                         The value to look for.

  Return Value

    This function returns a pointer to a TagArg structure with
    a value of ta_Tag that matches the tag parameter, ot NULL if
    no match can be found. The function always returns the last tag
    in the list which matches.

  Implementation

    Folio call implemented in kernel folio V24.

  Associated Files

    tags.h

  See Also

    NextTagArg()

##src/libs/c/finditem.c::spg/kernel/findtask##
FindTask - Find a task by name.

  Synopsis

    Item FindTask( const char *name )

  Description

    This macro finds a task with the specified name.  The search is
    not case-sensitive (that is, the kernel does not distinguish
    uppercase and lowercase letters in task names).  You can use this
    macro in place of FindNamedItem() to find a task.

  Arguments

    name                        The name of the task to find.

  Return Value

    The macro returns the item number of the task that was
    found or an error code if an error occurs.

  Implementation

    Macro implemented in task.h V20.

  Associated Files

    task.h                      ANSI C M        acro definition

  See Also

    CreateThread()

##src/libs/c/findversioneditem.c::spg/kernel/findversioneditem##
FindVersionedItem - Find an item by name and version.

  Synopsis

    Item FindVersionedItem( int32 ctype, const char *name, uint8 vers,

    uint8 rev )

  Description

    This procedure finds an item of a specified type by its name,
    version number, and revision number.  These values are required
    tag arguments for all items.  If all three values match, the
    procedure returns the item number of the matching item.

  Arguments

    ctype                       The type of the item to find.  Use
                                MkNodeID() to create this value.

    name                        The name of the item to find.

    vers                        The version number of the item to
                                find.

    rev                         The revision number of the item to
                                find.

  Return Value

    The procedure returns the number of the item that matches or an
    error code if an error occurs.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    item.h                      ANSI C P        rototype

    clib.lib                    ARM Link Library

  Caveats

    This currently returns a match if the version number and revision
    number are greater than or equal to the values specified.

  See Also

    CheckItem(), FindItem(), FindNamedItem(), LookupItem()

##src/kernel/list.s::spg/kernel/firstnode##
FirstNode - Get the first node in a list.

  Synopsis

    Node *FirstNode( List *l )

  Description

    This macro returns a pointer to the first node in the specified
    list.  If the list is empty, the macro returns a pointer to the
    tail (end-of-list) anchor.  To determine if the return value is an
    actual node rather than the tail anchor, call the IsNode()
    procedure.

    Example 15-2                Use of FirstNode in forward list
                                traversal

    for (n = FirstNode(list); IsNode(list, n); n = NextNode( n ))

                                        {    . . .    };


  Arguments

    l                           A pointer to the list from which to
                                get the first node.

  Return Value

    The macro returns a pointer to first node in the list or, if the
    list is empty, a pointer to the tail (end-of-list) anchor.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    IsListEmpty(), IsNode(), IsNodeB(), LastNode(), NextNode(),
    PrevNode(), ScanList()

##src/misc/list.s::spg/kernel/firstnode##
FirstNode - Get the first node in a list.

  Synopsis

    Node *FirstNode( List *l )

  Description

    This macro returns a pointer to the first node in the specified
    list.  If the list is empty, the macro returns a pointer to the
    tail (end-of-list) anchor.  To determine if the return value is an
    actual node rather than the tail anchor, call the IsNode()
    procedure.

    Example 15-2                Use of FirstNode in forward list
                                traversal

    for (n = FirstNode(list); IsNode(list, n); n = NextNode( n ))

                                        {    . . .    };


  Arguments

    l                           A pointer to the list from which to
                                get the first node.

  Return Value

    The macro returns a pointer to first node in the list or, if the
    list is empty, a pointer to the tail (end-of-list) anchor.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    IsListEmpty(), IsNode(), IsNodeB(), LastNode(), NextNode(),
    PrevNode(), ScanList()

##src/kernel/allocmem.c::spg/kernel/free##
free - Free memory from malloc().

  Synopsis

    void free( void *p )

  Description

    The procedure frees a memory block that was allocated by a call to
    malloc().  It is identical to the free() procedure in standard C
    library.  The freed memory is automatically returned to the memory
    list from which is was allocated.

    Note:  You should only use malloc() and free() when porting
    existing C programs to Portfolio.  If you are writing programs
    specifically for Portfolio, use AllocMem() and FreeMem(), which
    allow you to specify the type of memory to allocate, such as VRAM
    or memory that begins on a page boundary.

  Arguments

    p                           A pointer to the memory to be freed.
                                This pointer may be NULL, in which case
                                this function just returns.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    stdlib.h                    ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    You can enable memory debugging in your application by
    compiling your entire project with the MEMDEBUG value
    defined on the compiler's command-line. Refer to the
    CreateMemDebug() function for more details.

  Caveats

    Trusts that p is a result of a previous malloc() call.

  See Also

    FreeMem(), FreeMemToMemList(), FreeMemToMemLists(), malloc(),
    USER_FREEMEM()

##src/kernel/allocmem.c::spg/kernel/freemem##
FreeMem - Freememory from AllocMem().

  Synopsis

    void FreeMem( void *p, int32 size )

  Description

    This macro frees memory that was previously allocated by a call to
    AllocMem().  The size argument specifies the number of bytes to
    free.  The freed memory is automatically returned to the memory
    list from which is was allocated.

  Arguments

    p                           A pointer to the memory block to free.
                                This value may be NULL in which
                                case this function just returns.

    size                        The size of the block to free, in
                                bytes.  This must be the same size
                                that was specified when the block was
                                allocated.

  Implementation

    Macro implemented in mem.h V20.

  Associated Files

    mem.h                       ANSI C Macro definition

  Notes

    You can enable memory debugging in your application by
    compiling your entire project with the MEMDEBUG value
    defined on the compiler's command-line. Refer to the
    CreateMemDebug() function for more details.

  See Also

    AllocMem()

##src/kernel/mem.c::spg/kernel/freememlist##
FreeMemList - Free a memory list.

  Synopsis

    void FreeMemList( struct MemList *ml )

  Description

    This procedure frees a memory list that was allocated by a call to
    AllocMemList().

  Arguments

    ml                          A pointer to the memory list to free.
                                This value may be NULL in which case
                                this function just returns.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    mem.h                       ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveats

    If the list is not empty, any memory it contains is lost.

  See Also

    AllocMemList()

##src/kernel/allocmem.c::spg/kernel/freememtomemlist##
FreeMemToMemList - Free a private block of memory.

  Synopsis

    void FreeMemToMemList( struct MemList *ml, void *p, int32 size )

  Description

    This procedure frees a private block of memory that was previously
    allocated by a call to AllocMemFromMemList().  You can also use it
    to add memory to a private memory list created by AllocMemList().

    The block of memory is expected to begin and end on nicely
    aligned bounds; the alignment size can be obtained by
    calling GetMemAllocAlignment() . If the start of the block
    is not properly aligned, the leading partial chunk is
    discarded; if the end of the block is not aligned, it is
    extended to include the entire block.

    Note:  The memory you free to a memory list must be either memory
    that was previously allocated from the list or (when adding new
    memory to the list) memory of the type specified (by the p
    argument of AllocMemList() ) when the memory list was created.

  Arguments

    ml                          A pointer to the memory list to which
                                to free the memory.

    p                           A pointer to the memory to free. This
                                value may be NULL in which case this
                                function just returns.

    size                        The number of bytes to free.  This
                                must be the same size that was passed
                                to AllocMemFromMemList() to allocate
                                the block.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    mem.h                       ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveat

    If you pass a block of memory to FreeMemToMemList that was
    not directly received from AllocMemFromMemList, you MUST
    bear in mind that the end of the block will be *EXTENDED*
    to the next alignment boundrey, not truncated back. Call
    GetMemAllocAlignment() to get the block size.

  See Also

    AllocMemFromMemList(), AllocMemList(), FreeMemList(),
    GetMemAllocAlignment().

##src/kernel/allocmem.c::spg/kernel/freememtomemlists##
FreeMemToMemLists - Return memory to the free pool.

  Synopsis

    void FreeMemToMemLists( List *l, void *p, int32 size )

  Description

    The procedure returns a block of memory that was allocated with
    AllocMemFromMemLists() to the specified free memory pool (a list
    of memory lists).

    Note:  Unless you are trying to move memory from one memory pool
    to another, you should always free memory to the same pool that
    you obtained it from.

  Arguments

    l                           A pointer to the memory pool (a list
                                of memory lists) to which to return
                                the memory block.

    p                           A pointer to the memory to free. This
                                value may be NULL in which case this
                                function just returns.

    size                        Number of bytes to free.  This must be
                                the same size that was passed to
                                AllocMemFromMemLists() to allocate the
                                block.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    mem.h                       ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    You can enable memory debugging in your application by
    compiling your entire project with the MEMDEBUG value
    defined on the compiler's command-line. Refer to the
    CreateMemDebug() function for more details.

  See Also

    AllocMem(), AllocMemFromMemLists(), FreeMem()

##src/kernel/signal.c::spg/kernel/freesignal##
FreeSignal - Free signals.

  Synopsis

    Err FreeSignal( uint32 sigMask )

  Description

    This procedure frees one or more signal bits allocated by
    AllocSignal().  The freed bits can then be reallocated.

    For information about signals, see the description of the
    AllocSignal() procedure and the `Communicating Among Tasks'
    chapter in the 3DO Portfolio Programmer's Guide.

  Arguments

    sigMask                     A 32-bit value in which any signal
                                bits to deallocate are set.  The bits
                                are numbered from 1 (the least
                                significant bit) to 32 (the most
                                significant bit).  Bits 1 through 8
                                and bit 32 cannot be freed.

  Return Value

    The procedure returns 0 if the signal(s) were freed successfully
    or an error code if an error occurs.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    task.h                      ANSI C Macro definition

  See Also

    AllocSignal(), WaitSignal(), SendSignal()

##src/libs/c/typeofmem.c::spg/kernel/getbankbits##
GetBankBits - Find out which VRAM bank contains a memory location.

  Synopsis

    uint32 GetBankBits( void *a )

  Description

    In the current 3DO hardware, 2 MB of video random-access memory
    (VRAM) is divided into two banks, each containing 1MB of VRAM.
    Fast VRAM memory transfers using the SPORT bus can take place only
    between memory locations in the same bank.  You use this procedure
    to find out which VRAM bank contains a specified memory location.

    When a task allocates VRAM, the memory block contains memory from
    one VRAM bank or the other; it never contains memory from both
    banks.  Thus, if any memory location in a block is in one VRAM
    bank, the entire block is guaranteed to be in the same bank.

  Arguments

    a                           A pointer to the memory to be
                                examined.

  Return Value

    The procedure returns a set of memory flags in which the following
    flags can be set:

    MEMTYPE_BANKSELECT          Set if the memory is contained in
                                VRAM.

    MEMTYPE_BANK1               Set if the memory is in the primary
                                VRAM bank.

    MEMTYPE_BANK2               Set if the memory is in the secondary
                                VRAM bank.

    If the memory is not in VRAM, the procedure returns 0.

  Implementation

    Macro implemented in mem.h V20.

  Associated Files

    mem.h                       ANSI C Macro definition

  See Also

    GetMemType()

##src/kernel/otherdocs.c::spg/kernel/getcurrentsignals##
GetCurrentSignals - Gets the currently received signal bits

  Synopsis

    int32 GetCurrentSignals( void )

  Description

    This macro returns the signal bits that have been received for
    the current task.  For information about signals, see the
    description of the AllocSignal() procedure and the Communicating
    Among Tasks chapter in the 3DO Portfolio Programmer's Guide.

  Return Value

    A 32-bit word in which all currently received signal bits are set.

  Implementation

    Macro implemented in kernel.h V20.

  Associated Files

    kernel.h                      ANSI C Macro definition

  See Also

    AllocSignal(), FreeSignal(), SendSignal(), WaitSignal()

##src/kernel/otherdocs.c::spg/kernel/getfoliofunc##
GetFolioFunc - Return pointer to folio function.

  Synopsis

    FolioFunc GetFolioFunc (const Folio *folio, int32 func)

  Description

    This macro returns the address of a folio function from
    a folio vector table.

  Arguments

    folio                       A pointer to the folio item that
                                contains the procedure.  Use
                                LookupItem() to get this pointer.  For
                                the item number of a folio (which you
                                pass to LookupItem()), see the
                                Portfolio Items chapter or call
                                OpenFolio(FindFolio()).

    func                        The index of the vector table entry
                                for the procedure.  This index (which
                                is always a negative integer, because
                                the table grows backward in memory) is
                                listed in the header file for the
                                folio that contains the procedure.

  Implementation

    Macro implemented in folio.h V24.

  Associated Files

    folio.h

  See Also

    CallFolio(), CallFolioRet()

##src/kernel/allocmem.c::spg/kernel/getmemallocalignment##
GetMemAllocAlignment - Get the memory allocation alignment size

  Synopsis

    int32 GetMemAllocAlignment( uint32 memflags )

  Description

    This function returns the alignment guarantted by AllocMem
    and friends, and required by FreeMem and friends.

  Arguments

    memflags                    Similar to the usage in
                                GetPageSize(); different
                                allocators may be in use for
                                different kinds of memory,
                                which may have different
                                alignment guarantees and restrictions.

  Return Value

    The return value is the alignment modulus for the memory
    specified; for example, if AllocMem guaranees (and FreeMem
    requires) long-word alignment, it returns "4". If no
    alignment is guaranteed or required, it returns "1".

  Implementation

    Folio call implemented in kernel folio V22.

  Associated Files

    mem.h                       ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveat

    Note that malloc() does not necessarily provide same
    alignment guarantee as AllocMem, as malloc() reserves some
    space at the front of the block it gets from AllocMem to
    contain the size of the block allocated.

  See Also

    GetMemType(), AllocMem(), FreeMem(), malloc(), free()

##src/kernel/allocmem.c::spg/kernel/getmemtracksize##
GetMemTrackSize - Get the size of a block of memory allocated with
                  MEMTYPE_TRACKSIZE.

  Synopsis

    int32 GetMemTrackSize( const void *p )

  Description

    This function returns the size that was used to allocate a
    block of memory. The block of memory must have been allocated
    using the MEMTYPE_TRACKSIZE flag, otherwise this function will
    return garbage.

  Arguments

    p                           Pointer obtained from a system
                                memory allocation routine. The
                                block of memory must have been
                                allocated using the MEMTYPE_TRACKSIZE
                                flag, otherwise the value returned
                                by this function will be random.

  Return Value

    The function returns the size, in bytes, of the memory block.
    This size corresponds to the size provided to the system memory
    allocation routine when the block was first allocated.

  Implementation

    Folio call implemented in kernel folio V24.

  Associated Files

    mem.h                       ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveats

    This function will not return the correct value for allocations
    made using MEMTYPE_STARTPAGE and using a private MemList
    structure. Allocations done with AllocMem() will always work,
    since they use the task's memory lists and not any private
    MemList.

  See Also

    AllocMem(), FreeMem()

##src/libs/c/typeofmem.c::spg/kernel/getmemtype##
GetMemType - Get the type of the specified memory.

  Synopsis

    uint32 GetMemType( void *p )

  Description

    The procedure returns flags that describe the type of memory at a
    specified memory location.

  Arguments

    p                           A pointer to the memory whose type to
                                return.

  Return Value

    The procedure returns a set of flags that specify the type of
    memory.  For information about these flags, see the description of
    AllocMem().

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    mem.h                       ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    AllocMem()

##src/kernel/ports.c::spg/kernel/getmsg##
GetMsg - Get a message from a message port.

  Synopsis

    Item GetMsg( Item mp )

  Description

    This procedure gets the first message in the message queue for the
    specified message port and removes the message from the queue.

  Arguments

    mp                          The item number of the message port
                                from which to get the message.

  Return Value

    The procedure returns the item number of the first message in the
    message queue or an error code (a negative value) if an error
    occurs.  Possible error codes include the following:

    0                           The queue is empty.

    BADITEM                     The mp argument does not specify a
                                message port.

    NOTOWNER                    The message port specified by the mp
                                argument is not owned by this task.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    msgport.h                   ARM C "swi" declaration

  See Also

    DeleteMsg(), GetThisMsg(), ReplyMsg(), ReplySmallMsg(), SendMsg(),
    SendSmallMsg(), WaitPort()

##src/libs/c/getnodecount.c::spg/kernel/getnodecount##
GetNodeCount - Count the number of nodes in a list.

  Synopsis

    uint32 GetNodeCount(const List *l);

  Description

    This function counts the number of nodes currently in the
    list.

  Arguments

    l                           A pointer to the list to count the
                                nodes of.

  Return Value

    The number of nodes in the list.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveats

    GIGO (`garbage in, garbage out')

  See Also

    AddHead(), AddTail(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail()

##src/libs/c/getnodeposfromhead.c::spg/kernel/getnodeposfromhead##
GetNodePosFromHead - Get the ordinal position of a node within a
                     list, counting from the head of the list.

  Synopsis

    int32 GetNodePosFromHead(const List *l, const Node *n);

  Description

    This function scans the supplied list looking for the supplied
    node, and returns the ordinal position of the node within the
    list. If the node doesn't appear in the list, the function returns
    -1.

  Arguments

    l                           A pointer to the list to scan for
                                the node.

    n                           A pointer to a node to locate in
                                the list.

  Return Value

    The ordinal position of the node within the list counting from
    the head of the list, or -1 if the node isn't in the list. The
    first node in the list has position 0, the second node has position
    1, etc.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveats

    GIGO (`garbage in, garbage out')

  See Also

    AddHead(), AddTail(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail()

##src/libs/c/getnodeposfromtail.c::spg/kernel/getnodeposfromtail##
GetNodePosFromTail - Get the ordinal position of a node within a
                     list, counting from the tail of the list.

  Synopsis

    int32 GetNodePosFromTail(const List *l, const Node *n);

  Description

    This function scans the supplied list backward looking for the
    supplied node, and returns the ordinal position of the node within
    the  list. If the node doesn't appear in the list, the function
    returns -1.

  Arguments

    l                           A pointer to the list to scan for
                                the node.

    n                           A pointer to a node to locate in
                                the list.

  Return Value

    The ordinal position of the node within the list counting from
    the tail of the list, or -1 if the node isn't in the list. The
    last node in the list has position 0, the second to last node has
    position 1, etc.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveats

    GIGO (`garbage in, garbage out')

  See Also

    AddHead(), AddTail(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail()

##src/kernel/allocmem.c::spg/kernel/getpagesize##
GetPageSize - Get the number of bytes in a memory page.

  Synopsis

    int32 GetPageSize( uint32 memflags )

  Description

    This procedure gets the number of bytes in a page of the specified
    type of memory.

  Arguments

    memflags                    Flags that specify the type of memory
                                whose page size to get.  These flags
                                can include MEMTYPE_ANY, MEMTYPE_VRAM,
                                MEMTYPE_DRAM, MEMTYPE_BANKSELECT,
                                MEMTYPE_BANK1, MEMTYPE_BANK2,
                                MEMTYPE_DMA, MEMTYPE_CEL,
                                MEMTYPE_AUDIO, MEMTYPE_DSP, and
                                MEMTYPE_SYSTEMPAGESIZE.  For
                                information about these flags, see the
                                description of AllocMem().

  Return Value

    The procedure returns the size, in bytes, of a page of the
    specified type of RAM.  If there is no memory of the specified
    type, the procedure returns 0.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    mem.h                       ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveats

    If you do not specify the type of memory you're asking about, the
    page size you get may be for memory you're not interested in.  The
    page size for a particular piece of memory may be not what you
    expected if the amount of memory requested causes the allocator to
    jump to a different type of memory that can satisfy your request,
    but which may have a different page size.  To ensure that you get
    the actual page size of the memory you're interested, call
    GetMemType() to get the memory flags for the memory, then call
    GetPageSize() with those flags as the memflags argument.

  See Also

    GetMemType()

##src/kernel/syserr.c::spg/kernel/getsyserr##
GetSysErr - Get the error string for an error.

  Synopsis

    int32 GetSysErr( char *buff, int32 buffsize, Err err )

  Description

    This procedure returns a character string that describes an error
    code.  The resulting string is placed in a buffer.

    The procedure interprets all the fields in the err argument and
    returns corresponding text strings for all of them.  If an
    error-text table is not found for the specific error, the routine
    uses numbers for the final error code value.

  Arguments

    buff                        A pointer to a buffer to hold the
                                error string.

    buffsize                    The size of the error-text buffer, in
                                bytes.  This should be 128.

    err                         The error code whose error string to
                                get.

  Return Value

    The procedure returns the number of bytes in the description
    string, or a negative error code if a bad buffer pointer is
    supplied.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    operror.h                   ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    PrintfSysErr()

##src/libs/c/gettagarg.c::spg/kernel/gettagarg##
GetTagArg - Find TagArg in list and return its ta_Arg field.

  Synopsis

    TagData GetTagArg (const TagArg *tagList, uint32 tag,
                       TagData defaultValue)

  Description

    This function calls FindTagArg() to locate the specified tag.
    If it is found, it returns the ta_Arg value from the found TagArg.
    Otherwise, it returns the default value supplied. This is handy
    when resolving a tag list that has optional tags that have suitable
    default values.

  Arguments

    tagList                     The list of tags to scan. Can be NULL.

    tag                         The tag ID to look for.

    defaultValue                Default value to use when specified tag
                                isn't found in tagList.

  Return Value

    ta_Arg value from found TagArg or defaultValue.

  Implementation

    Convenience call implemented in clib.lib V24.

  Examples

    void dosomething (const TagArg *tags)
    {
        uint32 amplitude = (uint32)GetTagData (tags, MY_TAG_AMPLITUDE, (TagData)0x7fff);
        .
        .
        .
    }

  Caveats

    It's a good idea to always use casts for the default value and
    result. Don't assume anything about the type definition of TagData
    other than it is a 32-bit value.

  Associated Files

    tags.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    FindTagArg(), NextTagArg()

##src/kernel/otherdocs.c::spg/kernel/gettasksignals##
GetTaskSignals - Gets the currently received signal bits

  Synopsis

    int32 GetTaskSignals( Task *t )

  Description

    This macro returns the signal bits that have been received by
    the specified task.  For information about signals, see the
    description of the AllocSignal() procedure and the Communicating
    Among Tasks chapter in the 3DO Portfolio Programmer's Guide.

  Return Value

    A 32-bit word in which all currently received signal bits for
    the task are set.

  Implementation

    Macro implemented in task.h V21.

  Associated Files

    task.h                      ANSI C Macro definition

  See Also

    AllocSignal(), FreeSignal(), SendSignal(), WaitSignal()

##src/kernel/ports.c::spg/kernel/getthismsg##
GetThisMsg - Get a specific message.

  Synopsis

    Item GetThisMsg( Item message )

  Description

    This procedure gets a specific message and removes it from the
    message queue that contains it, if any.

    A task that is receiving messages can use GetThisMsg() to get an
    incoming message.  Unlike GetMsg(), which gets the first message
    in a specific message queue, GetThisMsg() can get any message from
    any of the task's message queues.

    A task that has sent a message can use GetThisMsg() to get it
    back.  If the receiving task hasn't already taken the message from
    its message queue, GetThisMsg() removes it from the queue.  If the
    message is not on any MsgPort a zero is returned.

  Arguments

    message                     The item number of the message to get.

  Return Value

    The procedure returns the item number of the message or an error
    code (a negative value) if an error occurred.  Possible error
    codes include:

    BADITEM                     The message argument does not specify
                                a message.

    BADPRIV                     The calling task is not allowed to get
                                this message.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    msgport.h                   ANSI C Prototype

  Caveats

    Prior to V21, if the message was not on any message port this
    procedure still returned the item number of the message.  In
    V21 and beyond, if the message is not on any port, the procedure
    returns an error.

  See Also

    CreateMsg(), GetMsg(), ReplyMsg(), ReplySmallMsg(), SendMsg(),
    SendSmallMsg(), WaitPort()

##src/kernel/initlist.c::spg/kernel/initlist##
InitList - Initialize a list.

  Synopsis

    void InitList( List *l, const char *name )

  Description

    When you create a List structure, you must initialize it with a
    call to InitList() before using it.  InitList() creates an empty
    list by initializing the head (beginning-of-list) and tail
    (end-of-list) anchors and by providing a name for a list.

  Arguments

    l                           A pointer to the list to be
                                initialized.

    name                        The name of the list, or NULL to
                                get the default name.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveats

    GIGO (`garbage in, garbage out')

  See Also

    AddHead(), AddTail(), InsertNodeFromHead(), InsertNodeFromTail(),
    IsEmptyList(), RemHead(), RemNode(), RemTail(),
    UniversalInsertNode()

##src/misc/initlist.c::spg/kernel/initlist##
InitList - Initialize a list.

  Synopsis

    void InitList( List *l, const char *name )

  Description

    When you create a List structure, you must initialize it with a
    call to InitList() before using it.  InitList() creates an empty
    list by initializing the head (beginning-of-list) and tail
    (end-of-list) anchors and by providing a name for a list.

  Arguments

    l                           A pointer to the list to be
                                initialized.

    name                        The name of the list, or NULL to
                                get the default name.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveats

    GIGO (`garbage in, garbage out')

  See Also

    AddHead(), AddTail(), InsertNodeFromHead(), InsertNodeFromTail(),
    IsEmptyList(), RemHead(), RemNode(), RemTail(),
    UniversalInsertNode()

##src/libs/c/insertnodeafter.c::spg/kernel/insertnodeafter##
InsertNodeAfter - Insert a node into a list after another node already
                  in the list.

  Synopsis

    void InsertNodeAfter(Node *oldNode, Node *newNode);

  Description

    This function lets you insert a new node into a list, AFTER
    another node that is already in the list.

  Arguments

    oldNode                     The node after which to insert the
                                new node.

    newNode                     The node to insert in the list.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    A node can be included only in one list.

  Caveats

    GIGO (`garbage in, garbage out')

  See Also

    AddHead(), AddTail(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail(), InsertNodeBefore()

##src/libs/c/insertnodebefore.c::spg/kernel/insertnodebefore##
InsertNodeBefore - Insert a node into a list before another node
                   already in the list.

  Synopsis

    void InsertNodeBefore(Node *oldNode, Node *newNode);

  Description

    This function lets you insert a new node into a list, BEFORE
    another node that is already in the list.

  Arguments

    oldNode                     The node before which to insert the
                                new node.

    newNode                     The node to insert in the list.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    A node can be included only in one list.

  Caveats

    GIGO (`garbage in, garbage out')

  See Also

    AddHead(), AddTail(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail(), InsertNodeAfter()

##src/kernel/list.s::spg/kernel/insertnodefromhead##
InsertNodeFromHead - Insert a node into a list.

  Synopsis

    void InsertNodeFromHead( List *l, Node *n )

  Description

    This procedure inserts a new node into a list.  The order of nodes
    in a list is normally determined by their priority.  The procedure
    compares the priority of the new node to the priorities of nodes
    currently in the list, beginning at the head of the list, and
    inserts the new node immediately after all nodes whose priority is
    higher.  If the priorities of all the nodes in the list are
    higher, the node is added at the end of the list.

  Arguments

    l                           A pointer to the list into which to
                                insert the node.

    n                           A pointer to the node to insert.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    To arrange the nodes in a list by a value or values other than
    priority, use UniversalInsertNode().

    A node can only be included in one list.

  See Also

    AddHead(), AddTail(), RemHead(), RemNode(), RemTail(),
    InsertNodeFromTail(), UniversalInsertNode()

##src/misc/list.s::spg/kernel/insertnodefromhead##
InsertNodeFromHead - Insert a node into a list.

  Synopsis

    void InsertNodeFromHead( List *l, Node *n )

  Description

    This procedure inserts a new node into a list.  The order of nodes
    in a list is normally determined by their priority.  The procedure
    compares the priority of the new node to the priorities of nodes
    currently in the list, beginning at the head of the list, and
    inserts the new node immediately after all nodes whose priority is
    higher.  If the priorities of all the nodes in the list are
    higher, the node is added at the end of the list.

  Arguments

    l                           A pointer to the list into which to
                                insert the node.

    n                           A pointer to the node to insert.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    To arrange the nodes in a list by a value or values other than
    priority, use UniversalInsertNode().

    A node can only be included in one list.

  See Also

    AddHead(), AddTail(), RemHead(), RemNode(), RemTail(),
    InsertNodeFromTail(), UniversalInsertNode()

##src/kernel/list.s::spg/kernel/insertnodefromtail##
InsertNodeFromTail - Insert a node into a list.

  Synopsis

    void InsertNodeFromTail( List *l, Node *n )

  Description

    This procedure inserts a new node into a list.  The order of nodes
    in a list is determined by their priority.  The procedure compares
    the priority of the new node to the priorities of nodes currently
    in the list, beginning at the tail of the list, and inserts the
    new node immediately before the nodes whose priority is lower.  If
    there are no nodes in the list whose priority is lower, the node
    is added at the head of the list.

  Arguments

    l                           A pointer to the list into which to
                                insert the node.

    n                           A pointer to the node to insert.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    To arrange the nodes in a list by a value or values other than
    priority, use UniversalInsertNode().

    A node can only be included in one list.

  See Also

    AddHead(), AddTail(), RemHead(), RemNode(), RemTail(),
    InsertNodeFromHead(), UniversalInsertNode()

##src/misc/list.s::spg/kernel/insertnodefromtail##
InsertNodeFromTail - Insert a node into a list.

  Synopsis

    void InsertNodeFromTail( List *l, Node *n )

  Description

    This procedure inserts a new node into a list.  The order of nodes
    in a list is determined by their priority.  The procedure compares
    the priority of the new node to the priorities of nodes currently
    in the list, beginning at the tail of the list, and inserts the
    new node immediately before the nodes whose priority is lower.  If
    there are no nodes in the list whose priority is lower, the node
    is added at the head of the list.

  Arguments

    l                           A pointer to the list into which to
                                insert the node.

    n                           A pointer to the node to insert.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    To arrange the nodes in a list by a value or values other than
    priority, use UniversalInsertNode().

    A node can only be included in one list.

  See Also

    AddHead(), AddTail(), RemHead(), RemNode(), RemTail(),
    InsertNodeFromHead(), UniversalInsertNode()

##src/kernel/list.s::spg/kernel/isemptylist##
IsEmptyList - Check whether a list is empty.

  Synopsis

    bool IsEmptyList( List *l )

  Description

    This macro checks whether a list is empty.

  Arguments

    l                           A pointer to the list to check.

  Return Value

    The macro returns TRUE if the list is empty or FALSE if it isn't.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    FirstNode(), IsNode(), IsNodeB(), LastNode(), NextNode(),
    PrevNode(), ScanList(), IsListEmpty()

##src/misc/list.s::spg/kernel/isemptylist##
IsEmptyList - Check whether a list is empty.

  Synopsis

    bool IsEmptyList( List *l )

  Description

    This macro checks whether a list is empty.

  Arguments

    l                           A pointer to the list to check.

  Return Value

    The macro returns TRUE if the list is empty or FALSE if it isn't.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    FirstNode(), IsNode(), IsNodeB(), LastNode(), NextNode(),
    PrevNode(), ScanList(), IsListEmpty()

##src/kernel/item.c::spg/kernel/isitemopened##
IsItemOpened - Determine whether a task or thread has opened a given
               item.

  Synopsis

    Err IsItemOpened( Item task, Item i )

  Description

    This function determines whether a task or thread has
    currently got an item opened.

  Arguments

    task                        The task or thread to inquire
                                about. For the current task, use
                                KernelBase->kb_CurrentTask->t.n_Item

    i                           The number of the item to verify.

  Return Value

    This function returns >= 0 if the item was opened, or a negative
    error code if it is not, or if the parameters are bogus.

  Implementation

    Folio call implemented in kernel folio V24.

  Associated Files

    item.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    OpenItem(), CloseItem(), CheckItem(), LookupItem()

##src/kernel/list.s::spg/kernel/islistempty##
IsListEmpty - Check whether a list is empty.

  Synopsis

    bool IsListEmpty( List *l )

  Description

    This macro checks whether a list is empty.

  Arguments

    l                           A pointer to the list to check.

  Return Value

    The macro returns TRUE if the list is empty or FALSE if it isn't.

  Implementation

    Macro implemented in list.h V24.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    FirstNode(), IsNode(), IsNodeB(), LastNode(), NextNode(),
    PrevNode(), ScanList()

##src/misc/list.s::spg/kernel/islistempty##
IsListEmpty - Check whether a list is empty.

  Synopsis

    bool IsListEmpty( List *l )

  Description

    This macro checks whether a list is empty.

  Arguments

    l                           A pointer to the list to check.

  Return Value

    The macro returns TRUE if the list is empty or FALSE if it isn't.

  Implementation

    Macro implemented in list.h V24.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    FirstNode(), IsNode(), IsNodeB(), LastNode(), NextNode(),
    PrevNode(), ScanList()

##src/kernel/mem.c::spg/kernel/ismemreadable##
IsMemReadable - Decide whether a region of memory is fully
                readable by the current task.

  Synopsis

    bool IsMemReadable( const void *p, int32 size )

  Description

    This function considers the described block of the address
    space in relation to the known locations of RAM in the
    system, and returns TRUE if the block is entirely
    contained within RAM, and FALSE otherwise.

    The low 512 (0x200) bytes of the address space have been
    declared to be "not memory" for all reasonable purposes;
    this function will therefore return FALSE for any block
    of memory that uses any portion of low memory.

  Arguments

    p                           A pointer to the start of the block

    size                        The number of bytes in the block

  Return Value

    This function returns TRUE if the block is entirely
    readable by the current task, or FALSE if any part of the block
    is not.

  Implementation

    Folio call implemented in kernel folio V24.

  Associated Files

    mem.h                 ANSI C Prototype for IsRamAddr

    clib.lib              ARM Link Library

  See Also

    IsMemWritable()
##src/kernel/pagemem.c::spg/kernel/ismemwritable##
IsMemWritable - Decide whether a region of memory is fully writable
                by the current task.

  Synopsis

    bool IsMemWritable( const void *p, int32 size )

  Description

    This function considers the described block of the address
    space in relation to the pages of memory the current task
    has write access to. This function returns TRUE If the current
    task can write to the memory block, and FALSE if it cannot.

  Arguments

    p                           A pointer to the start of the block

    size                        The number of bytes in the block

  Return Value

    This function returns TRUE if the block can be written to by
    the calling task, and FALSE if it cannot.

  Implementation

    Folio call implemented in kernel folio V24.

  Associated Files

    mem.h                 ANSI C Prototype for IsRamAddr

    clib.lib              ARM Link Library

  See Also

    IsMemReadable()
##src/kernel/list.s::spg/kernel/isnode##
IsNode - Checks that a node pointer is not the forward list anchor.

  Synopsis

    bool IsNode( List *l, Node *n )

  Description

    This macro is used to test whether the specified node is an actual
    node or is the tail (end-of-list) anchor.  Use this macro when
    traversing a list from head to tail.  When traversing a list from
    tail to head, use the IsNodeB() macro.

  Arguments

    l                           A pointer to the list containing the
                                node to check.

    n                           A pointer to the node to check.

  Return Value

    The macro returns TRUE if the node is an actual node or FALSE if
    it is the tail (end-of-list) anchor.

    Note:  This macro currently returns TRUE for any node that is not
    the tail anchor, whether or not the node is in the specified list.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro Definition

  See Also

    FirstNode(), IsListEmpty(), IsNodeB(), LastNode(), NextNode(),
    PrevNode(), ScanList()

##src/misc/list.s::spg/kernel/isnode##
IsNode - Checks that a node pointer is not the forward list anchor.

  Synopsis

    bool IsNode( List *l, Node *n )

  Description

    This macro is used to test whether the specified node is an actual
    node or is the tail (end-of-list) anchor.  Use this macro when
    traversing a list from head to tail.  When traversing a list from
    tail to head, use the IsNodeB() macro.

  Arguments

    l                           A pointer to the list containing the
                                node to check.

    n                           A pointer to the node to check.

  Return Value

    The macro returns TRUE if the node is an actual node or FALSE if
    it is the tail (end-of-list) anchor.

    Note:  This macro currently returns TRUE for any node that is not
    the tail anchor, whether or not the node is in the specified list.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro Definition

  See Also

    FirstNode(), IsListEmpty(), IsNodeB(), LastNode(), NextNode(),
    PrevNode(), ScanList()

##src/kernel/list.s::spg/kernel/isnodeb##
IsNodeB - Checks that a node pointer is not the reverse list anchor.

  Synopsis

    bool IsNodeB( List *l, Node *n )

  Description

    This macro is used to test whether the specified node is an actual
    node or is the head (beginning-of-list) anchor.  Use this macro
    when traversing a list from tail to head.  When traversing a list
    from head to tail, use the IsNode() macro.

  Arguments

    l                           A pointer to the list containing the
                                node to check.

    n                           A pointer to the node to check.

  Return Value

    The macro returns TRUE if the node is an actual node or FALSE if
    it is the head (beginning-of-list) anchor.

    Note:  This macro currently returns TRUE for any node that is not
    the head anchor, whether or not the node is in the specified list.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro Definition

  See Also

    FirstNode(), IsListEmpty(), IsNode(), LastNode(), NextNode(),
    PrevNode(), ScanListB()

##src/misc/list.s::spg/kernel/isnodeb##
IsNodeB - Checks that a node pointer is not the reverse list anchor.

  Synopsis

    bool IsNodeB( List *l, Node *n )

  Description

    This macro is used to test whether the specified node is an actual
    node or is the head (beginning-of-list) anchor.  Use this macro
    when traversing a list from tail to head.  When traversing a list
    from head to tail, use the IsNode() macro.

  Arguments

    l                           A pointer to the list containing the
                                node to check.

    n                           A pointer to the node to check.

  Return Value

    The macro returns TRUE if the node is an actual node or FALSE if
    it is the head (beginning-of-list) anchor.

    Note:  This macro currently returns TRUE for any node that is not
    the head anchor, whether or not the node is in the specified list.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro Definition

  See Also

    FirstNode(), IsListEmpty(), IsNode(), LastNode(), NextNode(),
    PrevNode(), ScanListB()

##src/kernel/list.s::spg/kernel/lastnode##
LastNode - Get the last node in a list.

  Synopsis

    Node *LastNode( List *l )

  Description

    This macro returns a pointer to the last node in a list.  If the
    list is empty, the macro returns a pointer to the head
    (beginning-of-list) anchor.  To determine if the return value is
    an actual node rather than the head anchor, call the IsNodeB()
    procedure.

    Example 15-3                Use of LastNode in reverse list
                                traversal

    for (n = LastNode(list); IsNodeB(list, n); n = PrevNode( n ))

                                        {    . . .    };


  Arguments

    l                           A pointer to the list structure to be
                                examined.

  Return Value

    The macro returns a pointer to last node in the list or, if the
    list is empty, a pointer to the head (beginning-of-list) anchor.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    FirstNode(), IsListEmpty(), IsNode(), IsNodeB(), NextNode(),
    PrevNode(), ScanList()

##src/misc/list.s::spg/kernel/lastnode##
LastNode - Get the last node in a list.

  Synopsis

    Node *LastNode( List *l )

  Description

    This macro returns a pointer to the last node in a list.  If the
    list is empty, the macro returns a pointer to the head
    (beginning-of-list) anchor.  To determine if the return value is
    an actual node rather than the head anchor, call the IsNodeB()
    procedure.

    Example 15-3                Use of LastNode in reverse list
                                traversal

    for (n = LastNode(list); IsNodeB(list, n); n = PrevNode( n ))

                                        {    . . .    };


  Arguments

    l                           A pointer to the list structure to be
                                examined.

  Return Value

    The macro returns a pointer to last node in the list or, if the
    list is empty, a pointer to the head (beginning-of-list) anchor.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    FirstNode(), IsListEmpty(), IsNode(), IsNodeB(), NextNode(),
    PrevNode(), ScanList()

##src/kernel/semaphore.c::spg/kernel/lockitem##
LockItem - Lock an item.

  Synopsis

    int32 LockItem( Item s, uint32 flags )

  Description

    This procedure locks an item.

    Note: Currently, semaphores are the only items that can be locked.
    You can lock semaphores by calling LockSemaphore().

  Arguments

    s                           The number of the item to be locked.

    flags                       Semaphore flags.

    Only one flag is currently defined:

    SEM_WAIT                    If the item to be locked is already
                                locked, put the calling task into wait
                                state until the item is available.

  Return Value

    The procedure returns 1 if the item was successfully locked.  If
    the item is already locked and the SEM_WAIT flag is not set (which
    indicates that the calling task does not want to wait until the
    item is available), the procedure returns 0.  If an error occurs,
    the procedure returns an error code.

  Implementation

    SWI implemented in kernel folio V20.

    This is the same SWI as LockSemaphore()

  Associated Files

    item.h                      ARM C "swi" declaration

  Caveats

    Other items should be lockable with some reasonable semantic
    interpretation.

  See Also

    DeleteItem(), UnlockItem()

##src/kernel/semaphore.c::spg/kernel/locksemaphore##
LockSemaphore - Lock a semaphore.

  Synopsis

    int32 LockSemaphore( Item s, uint32 flags )

  Description

    This procedure locks a semaphore.  For information about
    semaphores, which are used to control access to shared resources,
    see the `Sharing System Resources' chapter in the 3DO Portfolio
    Programmer's Guide.

  Arguments

    s                           The number of the semaphore to be
                                locked.

    flags                       Semaphore flags.

    Only one flag is currently defined:

    SEM_WAIT                    If the item to be locked is already
                                locked, put the calling task into wait
                                state until the item is available.

  Return Value

    The procedure returns 1 if the semaphore was successfully locked.
    If the semaphore is already locked and the SEM_WAIT flag is not
    set (which indicates that the calling task does not want to wait
    until the semaphore is available), the procedure returns 0.  If an
    error occurs, the procedure returns an error code.

  Implementation

    SWI implemented in kernel folio V20.

    This is the same SWI as LockItem().

  Associated Files

    semaphore.h                 ARM C "swi" declaration

  Caveats

    There are currently no asynchronous locks or shared read locks.

  See Also

    FindSemaphore(), UnlockSemaphore()

##src/kernel/item.c::spg/kernel/lookupitem##
LookupItem - Get a pointer to an item.

  Synopsis

    void *LookupItem( Item i )

  Description

    This procedure finds an item by its item number and returns the
    pointer to the item.

    Note:  Because items are owned by the system, user tasks cannot
    change the values of their fields.  They can, however, read the
    values contained in the public fields.

  Arguments

    i                           The number of the item to look up.

  Return Value

    The procedure returns the pointer to the item or NULL if the item
    does not exist.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    item.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    CheckItem(), CreateItem(), FindItem(), FindNamedItem(),
    FindVersionedItem()

##src/kernel/allocmem.c::spg/kernel/malloc##
malloc - Allocate memory.

  Synopsis

    void *malloc( int32 size )

  Description

    This procedure allocates a memory block.  It is identical to the
    malloc() procedure in the standard C library.  The memory is
    guaranteed only to be memory that is accessible to the CPU; you
    cannot specify the memory type (such as VRAM), alignment (such as
    a memory block that begins on a page boundary), or any other
    memory characteristics.

    Note:  You should only use malloc() when porting existing C
    programs to Portfolio.  If you are writing programs specifically
    for Portfolio, use AllocMem(), which allows you to specify the
    type of memory to allocate, such as VRAM or memory that begins on
    a page boundary.

  Arguments

    size                        Size of the memory block to allocate,
                                in bytes.

  Return Value

    The procedure returns a pointer to the memory that was allocated
    or NULL if the memory couldn't be allocated.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    stdlib.h                    ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    You can enable memory debugging in your application by
    compiling your entire project with the MEMDEBUG value
    defined on the compiler's command-line. Refer to the
    CreateMemDebug() function for more details.

  See Also

    AllocMem(), availMem(), free()

##src/kernel/otherdocs.c::spg/kernel/mknodeid##
MkNodeID - Create an item type value

  Synopsis

    int32 MkNodeID( uint8 a , uint8 b )

  Description

    This macro creates an item type value, a 32-bit value that
    specifies an item type and the folio in which the item type is
    defined.  This value is required by other procedures that deal
    with items, such as CreateItem() and FindItem().

  Arguments

    a                           The item number of the folio in which
                                the item type of the item is defined.
                                For a list of folio item numbers, see
                                the Portfolio Items chapter.

    b                           The item type number for the item.
                                For a list of item type numbers, see
                                the Portfolio Items chapter.

  Return Value

    The macro returns an item type value or an error code (a negative
    value) if an error occurs.

  Implementation

    Macro implemented in nodes.h V20.

  Associated Files

    nodes.h                     ANSI C Macro definition

  See Also

    CreateItem(), FindItem(), FindNamedItem(), FindVersionedItem()

##src/kernel/list.s::spg/kernel/nextnode##
NextNode - Get the next node in a list.

  Synopsis

    Node *NextNode( Node *n )

  Description

    This macro gets a pointer to the next node in a list.  If the
    current node is the last node in the list, the result is a pointer
    to the tail (end-of-list) anchor.  To determine if the return
    value is an actual node rather than the tail anchor, call the
    IsNode() procedure.

    Example 15-4                Use of NextNode in forward list
                                traversal

    for (n = FirstNode( l ); IsNode( l, n ); n = NextNode( n ))

                                        {   . . .   };


  Arguments

    n                           Pointer to the current node.

  Return Value

    The macro returns a pointer to the next node in the list or, if
    the current node is the last node in the list, to the tail
    (end-of-list) anchor.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro definition

  Caveats

    Assumes that n is a node in a list.  If not, watch out.

  See Also

    FirstNode(), IsListEmpty(), IsNode(), IsNodeB(), LastNode(),
    PrevNode(), ScanList()

##src/misc/list.s::spg/kernel/nextnode##
NextNode - Get the next node in a list.

  Synopsis

    Node *NextNode( Node *n )

  Description

    This macro gets a pointer to the next node in a list.  If the
    current node is the last node in the list, the result is a pointer
    to the tail (end-of-list) anchor.  To determine if the return
    value is an actual node rather than the tail anchor, call the
    IsNode() procedure.

    Example 15-4                Use of NextNode in forward list
                                traversal

    for (n = FirstNode( l ); IsNode( l, n ); n = NextNode( n ))

                                        {   . . .   };


  Arguments

    n                           Pointer to the current node.

  Return Value

    The macro returns a pointer to the next node in the list or, if
    the current node is the last node in the list, to the tail
    (end-of-list) anchor.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro definition

  Caveats

    Assumes that n is a node in a list.  If not, watch out.

  See Also

    FirstNode(), IsListEmpty(), IsNode(), IsNodeB(), LastNode(),
    PrevNode(), ScanList()

##src/kernel/tags.c::spg/kernel/nexttagarg##
NextTagArg - Find the next TagArg in a tag list.

  Synopsis

    TagArg *NextTagArg( const TagArg **tagList );

  Desription

    This function iterates through a tag list, skipping and chaining
    as dictated by control tags. There are three control tags:

       TAG_NOP
       Ignores that single entry and moves to the next one.

       TAG_JUMP
       Has a pointer to another array of tags.

       TAG_END
       Marks the end of the tag list.

    This function only returns TagArgs which are not system tags.
    Each call returns either the next TagArg you should examine,
    or NULL when the end of the list has been reached.

  Arguments

    tagList                     This is a pointer to a storage location
                                used by the iterator to keep track of
                                its current location in the tag list.
                                The variable that this parameter
                                points to should be initialized to
                                point to the first TagArg in the tag
                                list, and should not be changed
                                thereafter.

  Return Value

    This function returns a pointer to a TagArg structure, or NULL if
    all the tags have been visited. None of the control tags are ever
    returned to you, they are handled transparently by this function.

  Example

    void WalkTagList(const TagArg *tags)
    {
    TagArg *state;
    TagArg *currentTag;

        state = tags;
	while ((tag = NextTagItem(&state)) != NULL)
        {
	    switch (tag->ta_Tag)
	    {
 		case TAG1: // process this tag
			   break;

 		case TAG2: // process this tag
			   break;

		default  : // unknown tag, return an error
                           break;
            }
   	}
    }

  Implementation

    Folio call implemented in kernel folio V24.

  Associated Files

    tags.h

  See Also

    FindTagArg()

##src/kernel/item.c::spg/kernel/openitem##
OpenItem - Open a system item.

  Synopsis

    Item OpenItem( Item FoundItem, void *args )

  Description

    This procedure opens a system item for access.

  Arguments

    item                        The number of the item to open.  To
                                find the item number of a system item,
                                use FindItem(), FindDevice(),
                                FindFolio(), or FindNamedItem().

    args                        A pointer to an array of tag
                                arguments.  Currently, there are no
                                system items that require tag
                                arguments; for these and for any
                                future items you're not sending tag
                                arguments to, this argument must be
                                NULL.  If you send tag arguments (for
                                any items in the future that use
                                them), the tag arguments can be in any
                                order, and the last element of the
                                array must be the value TAG_END.  For
                                a list of tag arguments for each item
                                type, see the `Portfolio Items'
                                chapter.

  Return Value

    The procedure returns the number of the item that was opened or an
    error code if an error occurs.

    Note:  The item number for the opened item is not always the same
    as the item number returned by FindItem().  When accessing the
    opened item you should use the return from OpenItem(), not the
    return from FindItem(). You can also call the FindAndOpenItem()
    function for to do both a search and an open operation in an
    atomic manner.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    item.h                      ARM C "swi" declaration

  Notes

    To close an opened item, use CloseItem().

  See Also

    CloseItem(), FindItem()

##src/kernel/item.c::spg/kernel/opennameddevice##
OpenNamedDevice - Open a named device.

  Synopsis

    Item OpenNamedDevice( char *name, a )

  Description

    This macro opens a device that you specify by name.

  Arguments

    name                        The name of the device to open.

    a                           This argument, which is not currently
                                used, must be 0.

  Return Value

    The procedure returns the item number for the opened device or an
    error code if an error occurs.

  Implementation

    Macro implemented in device.h V20.

  Associated Files

    device.h                    ANSI C Macro definition

  See Also

    CloseNamedItem(), OpenItem(), CloseItem(), FindItem()

##src/kernel/list.s::spg/kernel/prevnode##
PrevNode - Get the previous node in a list.

  Synopsis

    Node *PrevNode( Node *node )

  Description

    This macro returns a pointer to the previous node in a list.  If
    the current node is the first node in the list, the result is a
    pointer to the head (beginning-of-list) anchor.  To determine
    whether the return value is an actual node rather than the head
    anchor, use the IsNodeB() procedure.

    Example 15-5                Use of PrevNode in reverse list
                                traversal

    for (n = LastNode( l ); IsNodeB( l, n ); n = PrevNode( n ))

                                        {   . . .   };


  Arguments

    node                        A pointer to the current node.

  Return Value

    The macro returns a pointer to the previous node in the list or,
    if the current node is the first node in the list, to the head
    (beginning-of-list) anchor.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    FirstNode(), IsListEmpty(), IsNode(), IsNodeB(), LastNode(),
    ScanList()

##src/misc/list.s::spg/kernel/prevnode##
PrevNode - Get the previous node in a list.

  Synopsis

    Node *PrevNode( Node *node )

  Description

    This macro returns a pointer to the previous node in a list.  If
    the current node is the first node in the list, the result is a
    pointer to the head (beginning-of-list) anchor.  To determine
    whether the return value is an actual node rather than the head
    anchor, use the IsNodeB() procedure.

    Example 15-5                Use of PrevNode in reverse list
                                traversal

    for (n = LastNode( l ); IsNodeB( l, n ); n = PrevNode( n ))

                                        {   . . .   };


  Arguments

    node                        A pointer to the current node.

  Return Value

    The macro returns a pointer to the previous node in the list or,
    if the current node is the first node in the list, to the head
    (beginning-of-list) anchor.

  Implementation

    Macro implemented in list.h V20.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    FirstNode(), IsListEmpty(), IsNode(), IsNodeB(), LastNode(),
    ScanList()

##src/libs/c/syserr.c::spg/kernel/printfsyserr##
PrintfSysErr - Print the error string for an error.

  Synopsis

    void PrintfSysErr( Err err )

  Description

    This procedure prints the error string for an error to the
    Macintosh console for a 3DO development system.  This has the same
    effect as using Printf() to print the string constructed by
    GetSysErr().  The string is not displayed on production machines.

    To copy an error string into a buffer instead of sending it the
    console, use GetSysErr().

  Arguments

    err                         An error code.

  Implementation

    Convenience call implemented in clib.lib V20.

  Associated Files

    operror.h                   ANSI C Macro definition

    clib.lib                    ARM Link Library

  See Also

    GetSysErr()

##src/kernel/random.c::spg/kernel/readhardwarerandomnumber##
ReadHardwareRandomNumber - Get a 32-bit random number.

  Synopsis

    uint32 ReadHardwareRandomNumber( void )

  Description

    The procedure returns a random number generated by the hardware.
    This is useful for providing a seed to the software random-number
    generator.

  Return Value

    The procedure returns an unsigned 32-bit random number.  The
    number can be any integer from 0 to (2^32 - 1), inclusive.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    hardware.h                  ARM C "swi" declaration

  See Also

    srand(), rand(), urand()

##src/kernel/list.s::spg/kernel/remhead##
RemHead - Remove the first node from a list.

  Synopsis

    Node *RemHead( List *l )

  Description

    This procedure removes the head (first) node from a list.

  Arguments

    l                           A pointer to the list to be beheaded.

  Return Value

    The procedure returns a pointer to the node that was removed from
    the list or NULL if the list is empty.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    AddHead(), AddTail(), InsertNodeFromTail(), RemNode(), RemTail()

##src/misc/list.s::spg/kernel/remhead##
RemHead - Remove the first node from a list.

  Synopsis

    Node *RemHead( List *l )

  Description

    This procedure removes the head (first) node from a list.

  Arguments

    l                           A pointer to the list to be beheaded.

  Return Value

    The procedure returns a pointer to the node that was removed from
    the list or NULL if the list is empty.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    AddHead(), AddTail(), InsertNodeFromTail(), RemNode(), RemTail()

##src/kernel/list.s::spg/kernel/remnode##
RemNode - Remove a node from a list.

  Synopsis

    void RemNode( Node *n )

  Description

    This procedure removes the specified node from a list.

    Note:  If the specified node structure is not in a list you may
    get an abort.

  Arguments

    n                           A pointer to the node to remove.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    AddHead(), AddTail(), InsertNodeFromTail(), RemHead(), RemTail()

##src/misc/list.s::spg/kernel/remnode##
RemNode - Remove a node from a list.

  Synopsis

    void RemNode( Node *n )

  Description

    This procedure removes the specified node from a list.

    Note:  If the specified node structure is not in a list you may
    get an abort.

  Arguments

    n                           A pointer to the node to remove.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    AddHead(), AddTail(), InsertNodeFromTail(), RemHead(), RemTail()

##src/kernel/list.s::spg/kernel/remtail##
RemTail - Remove the last node from a list.

  Synopsis

    Node *RemTail( List *l )

  Description

    This procedure removes the tail (last) node from a list.

  Arguments

    l                           A pointer to the list structure that
                                will have its tail removed.

  Return Value

    The procedure returns a pointer to the node that was removed from
    the list or NULL if the list is empty.  The anchor nodes are never
    returned.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    AddHead(), AddTail(), InsertNodeFromTail(), RemHead(), RemNode()

##src/misc/list.s::spg/kernel/remtail##
RemTail - Remove the last node from a list.

  Synopsis

    Node *RemTail( List *l )

  Description

    This procedure removes the tail (last) node from a list.

  Arguments

    l                           A pointer to the list structure that
                                will have its tail removed.

  Return Value

    The procedure returns a pointer to the node that was removed from
    the list or NULL if the list is empty.  The anchor nodes are never
    returned.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    AddHead(), AddTail(), InsertNodeFromTail(), RemHead(), RemNode()

##src/kernel/ports.c::spg/kernel/replymsg##
ReplyMsg - Send a reply to a message.

  Synopsis

    Err ReplyMsg( Item msg, int32 result, const void *dataptr,
                  int32 datasize )

  Description

    This procedure sends a reply to a message.

    When replying to a message, send back the same message item you
    received.  (Think of this as sending a reply in the same envelope
    as the original letter.)  Note that you must include a result code
    (which you provide in the result argument).

    The meanings of the dataptr and datasize arguments depend on the
    type of the original message.  (You can find out what type of
    message it is by looking at its msg.n_Flags field.  If it's is a
    small message, the value of the field is MESSAGE_SMALL.  If it's a
    buffered message, the value of the field is
    MESSAGE_PASS_BY_VALUE.)

    *   If the original message was a small message, the dataptr and
        datasize are put in the corresponding fields of the message as
        eight bytes of data.

    *   If the original message was a standard message, these refer to
        a data block that your task allocates for returning reply
        data.  For standard messages, the sending task and the
        replying task must each allocate its own memory blocks for
        message data. If the message was also buffered, the data is
        copied into the internal buffer of the message.

  Arguments

    msg                         The item number of the message.  Note:
                                The reply message item must be same
                                message item that was received.

    result                      A result code.  This code is placed in
                                the msg_Result field of the message
                                data structure before the reply is
                                sent.  Note:  There are no standard
                                result codes currently defined; the
                                code must be a value whose meaning is
                                agreed upon by the calling and
                                receiving tasks.  In general, you
                                should use negative values to specify
                                errors and 0 to specify that no error
                                occurred.

    dataptr                     See the `Description' section above
                                for a description of this argument.
                                If the message is not buffered, set
                                this to 0.

    datasize                    See the `Description' section above
                                for a description of this argument.
                                If the message is not buffered, set
                                this to 0.

  Return Value

    The procedure returns 0 if the reply was sent successfully or an
    error code if an error occurs.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    msgport.h                   ARM C "swi" declaration

  Notes

    Most programs handle only one type of message per message port.
    Each type of message moves information in a different way;
    programs choose a particular message type to meet their specific
    needs.

    A reply message is automatically sent to the reply port specified
    by the sending task when the message is created.  For more
    information about message structures, see the `Data Structures and
    Variable Types' chapter.

  See Also

    GetMsg(), GetThisMsg(), ReplySmallMsg(), SendMsg(),
    SendSmallMsg(), WaitPort()

##src/kernel/ports.c::spg/kernel/replysmallmsg##
ReplySmallMsg - Send a reply to a small message.

  Synopsis

    Err ReplySmallMsg( Item msg, int32 result, uint32 val1, uint32
    val2)

  Description

    This procedure sends a reply to a small message.  (To reply to a
    standard or buffered message, use ReplyMsg().)

    This procedure is identical to ReplyMsg() except that arguments
    are cast as (uint32) instead of (void *) and (int32).  A small
    message can return only eight bytes of data: four that you provide
    in the val1 argument, and four that you provide in the val2
    argument.

    When replying to a message, send back the same message item you
    received.  (Think of this as sending a reply in the same envelope
    as the original letter.)  You can include an optional result code
    (which you provide in the result argument).  Note that no standard
    result codes are currently defined; the result code must be a
    value whose meaning is agreed upon by the sending and receiving
    tasks.  For consistency, use negative numbers for errors.

  Arguments

    msg                         The item number of the message.  Note:
                                The reply message item must be same
                                message item that was received.

    result                      A result code.  This code is placed in
                                the msg_Result field of the message
                                data structure before the reply is
                                sent.

    val1                        The first four bytes of data for the
                                reply.  This data is put into the
                                msg_DataPtr field of the message
                                structure.

    val2                        The last four bytes of data for the
                                reply.  This data is put into the
                                msg_DataSize field of the message
                                structure.

  Return Value

    The procedure returns 0 if the reply was sent successfully or an
    error code if there was an error.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    msgport.h                   ARM C "swi" declaration

  Note

    A reply message automatically goes to the reply port specified by
    the sending task when the original message was sent.  For more
    information about message structures, see the `Data Structures and
    Variable Types' chapter.

  See Also

    GetMsg(), GetThisMsg(), ReplyMsg(), SendMsg(), SendSmallMsg(),
    WaitPort()

##src/kernel/samplesystemtime.s::spg/kernel/samplesystemtime##
SampleSystemTime - Sample the system time with very low overhead.

  Synopsis

    uint32 SampleSystemTime( void )

  Description

    This function samples the current system time, and returns
    it to you. The primary return value is the seconds count of
    the system clock. A secondary value available in the r1 register
    on ARM processors is the microseconds count of the system clock.
    For a C-friendly version of this call, see SampleSystemTimeTV().

    This function is very low overhead and is meant for high-accuracy
    timings.

    The time value returned by this function corresponds to the
    time maintained by the TIMERUNIT_USEC unit of the timer device.

  Return Value

    This function returns the seconds count of the system clock. It
    also returns the microseconds count in the r1 ARM processor
    register.

  Implementation

    SWI implemented in kernel folio V24.

  Associated Files

    time.h

  See Also

    SampleSystemTimeTV()                      ANSI C Prototype

##src/libs/c/samplesystemtimetv.s::spg/kernel/samplesystemtimetv##
SampleSystemTimeTV - Sample the system time with very low overhead.

  Synopsis

    void SampleSystemTimeTV( TimeVal *time )

  Description

    This function records the current system time in the supplied
    TimeVal structure. This is a very low overhead call giving a very
    high accuracy timing.

    The time value returned by this function corresponds to the
    time maintained by the TIMERUNIT_USEC unit of the timer device.

  Arguments

    time                        A pointer to a TimeVal structure which
                                will receive the current system time.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    time.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    SampleSystemTime()

##src/libs/memdebug/autodocs.c::spg/kernel/sanitycheckmemdebug##
SanityCheckMemDebug - Check all current memory allocations to
                      make sure all of the allocation cookies are
                      intact

  Synopsis

    Err SanityCheckMemDebug(const TagArg *args);

  Description

    This function checks all current memory allocations to see
    if any of the memory cookies have been corrupted. This is
    useful when trying to track down at which point in a program's
    execution memory cookies are being trashed.

    The routine will also complain about any memory allocated by
    a task or thread that doesn't exist anymore. This only happens
    if the MEMDEBUGF_ALLOW_OWNER_SWITCH flag was not specified
    when calling CreateMemDebug().

  Arguments

    args                        A pointer to an array of tag arguments
                                containing extra data for this
                                function. This must currently always
                                be NULL.

  Return Value

    >= 0 for success or a negative error code. Current possible error
    codes are:

        MEMDEBUG_ERR_BADTAG     An undefined tag was supplied.
                                Currently the 'args' parameter
                                to this function should always be
                                NULL.

  Implementation

    Library routine implemented in memdebug.lib V24.

  Associated Files

    mem.h, memdebug.lib

  See Also

    CreateMemDebug(), DeleteMemDebug(), DumpMemDebug()

##src/kernel/list.s::spg/kernel/scanlist##
ScanList - Walk through all the nodes in a list.

  Synopsis

    ScanList(List *l, void *n, <node type>)

  Description

    This macro lets you easily walk through all the elements
    in a list from the first to the last.

    For example:

    List       *l;
    DataStruct *d;
    uint32      i;

    i = 0;
    ScanList(l,d,DataStruct)
    {
        printf("Node %d is called %sn",i,d->d.n_Name);
        i++;
    }

  Arguments

    l                           A pointer to the list to scan.

    n                           A variable which will be altered
                                to hold a pointer to every node in
                                the list in succession.

    <node type>                 The data type of the nodes on the
                                list. This is used for type casting
                                within the macro.

  Implementation

    Macro implemented in list.h V22.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    ScanListB()

##src/misc/list.s::spg/kernel/scanlist##
ScanList - Walk through all the nodes in a list.

  Synopsis

    ScanList(List *l, void *n, <node type>)

  Description

    This macro lets you easily walk through all the elements
    in a list from the first to the last.

    For example:

    List       *l;
    DataStruct *d;
    uint32      i;

    i = 0;
    ScanList(l,d,DataStruct)
    {
        printf("Node %d is called %sn",i,d->d.n_Name);
        i++;
    }

  Arguments

    l                           A pointer to the list to scan.

    n                           A variable which will be altered
                                to hold a pointer to every node in
                                the list in succession.

    <node type>                 The data type of the nodes on the
                                list. This is used for type casting
                                within the macro.

  Implementation

    Macro implemented in list.h V22.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    ScanListB()

##src/kernel/list.s::spg/kernel/scanlistb##
ScanListB - Walk through all the nodes in a list backwards.

  Synopsis

    ScanListB(List *l, void *n, <node type>)

  Description

    This macro lets you easily walk through all the elements
    in a list from the last to the first.

    For example:

    List       *l;
    DataStruct *d;
    uint32      i;

    i = 0;
    ScanListB(l,d,DataStruct)
    {
        printf("Node %d (counting from the end) is called %sn",i,
               d->d.n_Name);
        i++;
    }

  Arguments

    l                           A pointer to the list to scan.

    n                           A variable which will be altered
                                to hold a pointer to every node in
                                the list in succession.

    <node type>                 The data type of the nodes on the
                                list. This is used for type casting
                                within the macro.

  Implementation

    Macro implemented in list.h V24.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    ScanList()

##src/misc/list.s::spg/kernel/scanlistb##
ScanListB - Walk through all the nodes in a list backwards.

  Synopsis

    ScanListB(List *l, void *n, <node type>)

  Description

    This macro lets you easily walk through all the elements
    in a list from the last to the first.

    For example:

    List       *l;
    DataStruct *d;
    uint32      i;

    i = 0;
    ScanListB(l,d,DataStruct)
    {
        printf("Node %d (counting from the end) is called %sn",i,
               d->d.n_Name);
        i++;
    }

  Arguments

    l                           A pointer to the list to scan.

    n                           A variable which will be altered
                                to hold a pointer to every node in
                                the list in succession.

    <node type>                 The data type of the nodes on the
                                list. This is used for type casting
                                within the macro.

  Implementation

    Macro implemented in list.h V24.

  Associated Files

    list.h                      ANSI C Macro definition

  See Also

    ScanList()

##src/kernel/allocmem.c::spg/kernel/scavengemem##
ScavengeMem - Return task's free memory pages to the system memory  pool.

  Synopsis

    int32 ScavengeMem( void )

  Description

    This procedure finds pages of memory in the task's free memory
    pool from which no memory is allocated and returns those pages to
    the system-wide memory pool.

    Tasks should always call ScavengeMem() when they receive a
    SIGF_MEMLOW signal from the Kernel.  The Kernel sends this signal
    when very little memory is available in the system-wide memory
    pool.  Although tasks should normally wait for a SIGF_MEMLOW
    signal before calling ScavengeMem(), because it is often
    expensive, they can call ScavengeMem() at other times if they want
    to make unused memory available to other tasks.

    If there is not enough memory in a task's free-memory pool to
    satisfy a memory-allocation request, AllocMem() tries to get
    reclaim the necessary memory by calling ScavengeMem().

  Return Value

    The procedure returns the amount of memory that was returned to
    the system-wide memory pool, in bytes.  If no memory was returned,
    the procedure returns 0.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    mem.h                       ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    AllocMem(), AllocMemFromMemLists(), FreeMem(), FreeMemToMemLists()

##src/kernel/sendio.c::spg/kernel/sendio##
SendIO - Request synchronous I/O.

  Synopsis

    Err SendIO( Item ior, const IOInfo *ioiP )

  Description

    This procedure sends an I/O request that is to be executed
    asynchronously.  Because the request is asynchronous, control
    returns to the calling task as soon as the request is sent (unlike
    synchronous I/O, where control doesn't return until after the
    request has been completed).

    Call this procedure after creating the necessary IOReq item (for
    the ior argument, created by calling CreateIOReq() ) and an IOInfo
    structure (for the ioiP argument).  The IOReq item specifies the
    device to which to send the request and the reply port, if any,
    while the IOInfo structure includes the I/O command to be executed
    and a variety of other information.  For descriptions of the IOReq
    and IOInfo data structures, see the `Data Structures and Variable
    Types' chapter.

    To request `quick I/O,' set the IO_QUICK flag in the ioi_Flags
    field of the IOInfo structure.  Quick I/O works as follows: The
    Kernel tries to perform the I/O operation immediately; if it is
    successful, it sends back the resulting IOReq item immediately
    without setting any signal bits or sending a message.  If quick
    I/O was successful, the IO_QUICK bit in the io_Flags field of the
    IOReq is set.  If quick I/O was not successful, the Kernel
    performs normal asynchronous I/O and notifies the task with a
    signal or message when the I/O request is complete.

    The IOInfo structure must be fully initialized before calling
    this function. You can use the ioi_User field of the IOInfo
    structure to contain whatever you want. This is a useful
    place to store a pointer to contextual data that needs to be
    associated with the I/O request. If you use message-based
    notification for your I/O requests, the msg_DataSize field of
    the notification messages will contain the value of ioi_User
    from the IOInfo structure.

  Arguments

    ior                         The item number of the IOReq structure
                                for the request.  This structure is
                                normally created by calling
                                CreateIOReq().

    ioiP                        A pointer to an IOInfo structure.

  Return Value

    The procedure returns 1 if the I/O was completed immediately or 0
    if the I/O request is still in progress (the task will be notified
    with either a signal or message when the request is complete,
    depending on what you specified when you called CreateIOReq()).
    It returns an error code (a negative value) if an error occurs.
    Possible error codes include:

    BADITEM                     The ior argument does not specify an
                                IOReq.

    NOTOWNER                    The I/O request specified by the ior
                                argument is not owned by this task.

    ER_IONotDone                The I/O request is already in
                                progress.

    BADPTR                      A pointer is invalid: Either the
                                IOInfo structure specified by the ioiP
                                argument is not entirely within the
                                task's memory, the IOInfo receive
                                buffer (specified by the ioi_Recv
                                field in the IOInfo structure) is not
                                entirely within the task's memory, or
                                the IOInfo send buffer (specified by
                                the ioi_Send field in the IOInfo
                                structure) is not in legal memory.

    BADIOARG                    One or more reserved I/O flags are set
                                (either reserved flags in the
                                ioi_Flags field of the IOInfo
                                structure or any of the flags in the
                                ioi_Flags2 field of the IOInfo
                                structure).

    BADUNIT                     The unit specified by the ioi_Unit
                                field of the IOInfo structure is not
                                supported by this device.

    If quick I/O occurs, the IO_QUICK flag is set in the io_Flags
    field of the IOReq structure.

    If the ior and ioiP arguments were valid but an error occurred
    during the I/O operation, an error code is returned in the
    io_Error field of the IOReq structure.  If SendIO() returns 0 and
    a error occurs during I/O, the IOReq is returned as if it were
    completed, and it contains the error code in io_Error of the IOReq
    structure.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    io.h                        ARM C "swi" declaration

  Caveats

    SendIO() returns only BADITEM, NOTOWNER, and ER_IONotDone.  All
    other errors codes are returned in the io_Error field of the
    IOReq.

  See Also

    AbortIO(), CheckIO(), DoIO(), WaitIO()

##src/kernel/ports.c::spg/kernel/sendmsg##
SendMsg - Send a message.

  Synopsis

    Err SendMsg( Item mp, Item msg, const void *dataptr, int32 datasize )

  Description

    This procedure sends a message to the specified message port.  (To
    send a small message without having to cast the data to (void *)
    and (int32) use SendSmallMsg().

    The message is queued on the message port's list of messages
    according to its priority.  Messages that have the same priority
    are queued on first come first served basis.

    Whether a message is standard or buffered is determined by the
    procedure you use to create the message: CreateMsg() creates a
    standard message (one whose message data belongs to the sending
    task; the receiving task reads from this block), while
    CreateBufferedMsg creates a buffered message (one in which a
    buffer for the message data is included in the message).  For
    standard messages, the dataptr and datasize arguments refer to the
    data block owned by the message sender.  For buffered messages,
    the dataptr and datasize arguments specify the data to be copied
    into the message's internal buffer before the message is sent.

    If the message is a buffered message, SendMsg() checks the size of
    the data block to see whether it will fit in the message's buffer.
    If it won't fit, SendMsg() returns an error.

  Arguments

    mp                          The item number of the message port to
                                which to send the message.

    msg                         The item number of the message to
                                send.

    dataptr                     A pointer to the message data, or NULL
                                if there is no data to include in the
                                message.  For a standard message, the
                                pointer specifies a data block owned
                                by the sending task, which can later
                                be read by the receiving task.  For a
                                buffered message, the pointer
                                specifies a block of data to be copied
                                into the message's internal data
                                buffer.

    datasize                    The size of the message data, in
                                bytes, or 0 if there is no data to
                                include in the message.

  Return Value

    The procedure returns 0 if the message was sent successfully or an
    error code if an error occurs.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    msgport.h                   ARM C "swi" declaration

  See Also

    GetMsg(), GetThisMsg(), ReplyMsg(), ReplySmallMsg(),
    SendSmallMsg(), WaitPort()

##src/kernel/signal.c::spg/kernel/sendsignal##
SendSignal - Send a signal to another task.

  Synopsis

    Err SendSignal( Item task, uint32 sigMask )

  Description

    This procedure sends one or more signals to the specified task.
    See the description of AllocSignal() for more information about
    signals.

    It is an error for a user task to send a system signal or a signal
    that has not been allocated by the receiving task.

  Arguments

    task                        The item number of the task to send
                                signals to. If this parameter is 0,
                                then the signals are sent to the
                                calling task. This is sometimes useful
                                to set initial conditions.

    sigMask                     The signals to send.

  Return Value

    The procedure returns 0 if successful or an error code (a negative
    value) if an error occurs.  Possible error codes include:

    BADPRIV                     The task attempted to send a system
                                signal.

    ILLEGALSIGNAL               The task attempted to send a signal to
                                a task that was not allocated by that
                                task, or bit 32 in the sigMask
                                argument (which is reserved by the
                                system software) was set.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    task.h                      ARM C "swi" declaration

  See Also

    AllocSignal(), FreeSignal(), GetCurrentSignals(), WaitSignal()

##src/kernel/ports.c::spg/kernel/sendsmallmsg##
SendSmallMsg - Send a small message.

  Synopsis

    Err SendSmallMsg( Item mp, Item msg, uint32 val1, uint32 val2 )

  Description

    This procedure sends a small message (a message that contains no
    more than eight bytes of data) to the specified message port.  (To
    send a standard or buffered message, use SendMsg().) This routine
    is identical to SendMsg().  It is provided only to avoid having to
    cast uint32 to the types needed by SendMsg().

  Arguments

    mp                          The item number of the message port to
                                which to send the message

    msg                         The item number of the message to
                                send.

    val1                        The first four bytes of message data.
                                This data is put into the msg_DataPtr
                                field of the message structure.

    val2                        The last four bytes of message data.
                                This data is put into the msg_DataSize
                                field of the message structure.

  Return Value

    The procedure returns 0 if the message is sent successfully or an
    error code if an error occurs.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    msgport.h                   ARM C "swi" declaration

  See Also

    GetMsg(), GetThisMsg(), ReplyMsg(), ReplySmallMsg(), SendMsg(),
    WaitPort()

##src/kernel/item.c::spg/kernel/setitemowner##
SetItemOwner - Change the owner of an item.

  Synopsis

    Err SetItemOwner( Item i, Item newOwner )

  Description

    This procedure makes another task the owner of an item.  A task
    must be the owner of the item to change its ownership.  The item
    is removed from the current task's resource table and placed in
    the new owner's resource table.

    You normally use this procedure to keep a resource available after
    the task that created it terminates.

    Note:  You cannot change the ownership for these types of items:
    Thread Task, Device, MsgPort. You can only transfer the
    ownership of semaphores if they are currently unlocked.

  Arguments

    i                           The item number of the item to give to
                                a new owner.

    newOwner                    The item number of the new owner task.

  Return Value

    The procedure returns 0 if ownership of the item is changed or an
    error code if an error occurs.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    item.h                      ARM C "swi" declaration

  Caveats

    This is not implemented for all items that should be able to have
    their ownership changed.

  See Also

    CreateItem(), FindItem(), DeleteItem()

##src/kernel/item.c::spg/kernel/setitempri##
SetItemPri - Change the priority of an item.

  Synopsis

    int32 SetItemPri( Item i, uint8 newpri )

  Description

    This procedure changes the priority of an item.  Some items in the
    operating system are maintained in lists, for example, tasks and
    threads.  Some lists are ordered by priority, with higher-priority
    items coming before lower-priority items.  When the priority of an
    item in a list changes, the Kernel automatically rearranges the
    list of items to reflect the new priority.  The item is moved
    immediately before the first item whose priority is lower.

    A task must own an item to change its priority.  A task can change
    its own priority even if it does not own itself.

  Arguments

    i                           The item number of the item whose
                                priority to change.

    newpri                      The new priority for the item.

  Return Value

    The procedure returns the previous priority of the item or an
    error code if an error occurs.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    item.h                      ARM C "swi" declaration

  Notes

    For certain item types, such as devices, the Kernel may change the
    priority of an item to help optimize throughput.

  Caveats

    This function is not implemented for all known item types.

  See Also

    CreateItem()

##src/kernel/mem.c::spg/kernel/setnodepri##
SetNodePri - Change the priority of a list node.

  Synopsis

    uint8 SetNodePri( Node *n, uint8 newpri )

  Description

    This procedure changes the priority of a node in a list.  The
    Kernel arranges lists by priority, with higher-priority nodes
    coming before lower-priority nodes.  When

    the priority of a node changes, the Kernel automatically
    rearranges the list to reflect the new priority.  The node is
    moved immediately before the first node whose priority is lower.

  Arguments

    n                           A pointer to the node whose priority
                                to change.

    newpri                      The new priority for the node.  This
                                can be a value from 0 to 255.

  Return Value

    The procedure returns the previous priority of the node.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Caveats

    GIGO (`garbage in, garbage out')

  See Also

    InsertNodeFromHead(), InsertNodeFromTail(), UniversalInsertNode()

##src/kernel/allocmem.c::spg/kernel/universalinsertnode##
UniversalInsertNode - Insert a node into a list.

  Synopsis

    void UniversalInsertNode( List *l, Node *n, bool (*f)(Node *n,
    Node *m) )

  Description

    Every node in a list has a priority (a value from 0 to 255 that is
    stored in the n_Priority field of the node structure).  When a new
    node is inserted with InsertNodeFromHead() or
    InsertNodeFromTail(), the position at which it is added is
    determined by its priority.  The UniversalInsertNode() procedure
    allows tasks to arrange list nodes according to values other than
    priority.

    UniversalInsertNode() uses a comparison function provided by the
    calling task to determine where to insert a new node.  It compares
    the node to be inserted with nodes already in the list, beginning
    with the first node.  If the comparison function returns TRUE, the
    new node is inserted immediately before the node to which it was
    compared.  If the comparison function never returns TRUE, the new
    node becomes the last node in the list.  The comparison function,
    whose arguments are pointers to two nodes, can use any data in the
    nodes for the comparison.

  Arguments

    l                           A pointer to the list into which to
                                insert the node.

    n                           A pointer to the node to insert.  This
                                same pointer is passed as the first
                                argument to the comparison function.

    f                           A comparison function provided by the
                                calling task that returns TRUE if the
                                node to be inserted (pointed to by the
                                first argument to the function) should
                                be inserted immediately before the
                                node to which it is compared (pointed
                                to by the second argument to the
                                function).

    m                           A pointer to the node in the list to
                                which to compare the node to insert.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    list.h                      ANSI C Prototype

    clib.lib                    ARM Link Library

  Notes

    A node can be included only in one list.

  Caveats

    GIGO (`garbage in, garbage out')

  See Also

    AddHead(), AddTail(), InsertNodeFromHead(), InsertNodeFromTail(),
    RemHead(), RemNode(), RemTail()

##src/kernel/semaphore.c::spg/kernel/unlockitem##
UnlockItem - Unlock a locked item.

  Synopsis

    Err UnlockItem( Item s )

  Description

    This procedure unlocks the specified item.

    Note:  Currently, semaphores are the only items that can be
    locked.  You can also unlock semaphores by calling
    UnlockSemaphore().

  Arguments

    s                           The item number of the item to be
                                unlocked.

  Return Value

    The procedure returns 0 if successful or an error code (a negative
    value) if an error occurs.  Possible error codes include:

    NOTOWNER                    The item specified by the s argument
                                is not owned by the task.

  Implementation

    SWI implemented in kernel folio V20.

    This is the same SWI as UnlockSemaphore().

  Associated Files

    item.h                      ARM C "swi" declaration

  See Also

    DeleteItem(), LockItem(), UnlockSemaphore()

##src/kernel/semaphore.c::spg/kernel/unlocksemaphore##
UnlockSemaphore - Unlock a semaphore.

  Synopsis

    Err UnlockSemaphore( Item s )

  Description

    This is an alternate entry point for UnlockItem().  This procedure
    unlocks the specified semaphore.  For information about
    semaphores, which are used to control access to shared resources,
    see the `Sharing System Resources' chapter in the 3DO Portfolio
    Programmer's Guide.

  Arguments

    s                           The item number of the semaphore to
                                unlock.

  Return Value

    The procedure returns 0 if successful or an error code (a negative
    value) if an error occurs.  Possible error codes include:

    NOTOWNER                    The semaphore specified by the s
                                argument is not owned by the task.

  Implementation

    SWI implemented in kernel folio V20.

    This is the same SWI as UnlockItem().

  Associated Files

    semaphore.h                 ARM C "swi" declaration

  See Also

    LockSemaphore(), LockItem(), UnlockItem()

##src/kernel/sendio.c::spg/kernel/waitio##
WaitIO - Wait for an I/O request to complete.

  Synopsis

    Err WaitIO( Item ior )

  Description

    The procedure puts the calling task into wait state until the
    specified I/O request completes.  When a task is in wait state, it
    uses no CPU time.

    Note:  If the I/O request has already completed, the procedure
    returns immediately.  If the I/O request never completes and it is
    not aborted, the procedure never returns.

    Starting with kernel folio V24, this function will automatically
    sample the io_Error field of the IO request, and return this to
    you. It is therefore no longer necessary to have code such as:

        err = WaitIO(iorItem);
        if (err >= 0)
            err = ior->io_Error;

    You can now just look at the return value of WaitIO().

  Arguments

    ior                         The item number of the I/O request to
                                wait for.

  Return Value

    The procedure returns 0 if the I/O request was successful or an
    error code if an error occurs.

  Implementation

    Convenience call implemented in clib.lib V20.
    Became a folio call in kernel folio V24.

  Associated Files

    io.h                        ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    AbortIO(), CheckIO(), DoIO(), SendIO()

##src/kernel/ports.c::spg/kernel/waitport##
WaitPort - Wait for a message to arrive.

  Synopsis

    Item WaitPort( Item mp, Item msg )

  Description

    The procedure puts the calling task into wait state until a
    message is received at the specified message port.  When a task is
    in wait state, it uses no CPU time.

    The task can wait for a specific message by providing the item
    number of the message

    in the message argument.  To wait for any incoming message, the
    task uses 0 as the

    value of the message argument.

    Note:  If the desired message is already in the message queue for
    the specified message port, the procedure returns immediately.  If
    the message never arrives, the procedure may never return.

    When the message arrives, the task is moved from the wait queue to
    the ready queue, the item number of the message is returned as the
    result, and the message is removed from the message port.

  Arguments

    mp                          The item number of the message port to
                                check for incoming messages.

    msg                         The item number of the message to wait
                                for.  If this argument is 0, control
                                is returned to the task when any
                                message arrives at the specified
                                message port.

  Return Value

    The procedure returns the item number of the incoming message or
    an error code if an error occurs.

  Implementation

    Folio call implemented in kernel folio V20.

  Associated Files

    msgport.h                   ANSI C Prototype

    clib.lib                    ARM Link Library

  See Also

    GetMsg(), ReplyMsg(), SendMsg()

##src/kernel/signal.c::spg/kernel/waitsignal##
WaitSignal - Wait until a signal is sent.

  Synopsis

    int32 WaitSignal( uint32 sigMask )

  Description

    This procedure puts the calling task into wait state until any of
    the signal(s) specified in the sigMask have been received.  When a
    task is in wait state, it uses no CPU time.

    When WaitSignal() returns, bits set in the result indicate which
    of the signal(s) the task was waiting for were received since the
    last call to WaitSignal().  (The SIGF_ABORTED bit is also set if
    that signal was received, even if it is not in the signal mask.)
    If the task was not waiting for certain signals, the bits for
    those signals remain set in the task's signal word, and all other
    bits in the signal word are cleared.

    See AllocSignal for a description of the implementation of
    signals.

  Arguments

    sigMask                     A mask in which bits are set to
                                specify the signals the task wants to
                                wait for.

  Return Value

    The procedure returns a mask that specifies which of the signal(s)
    a task was waiting for have been received or an error code (a
    negative value) if an error occurs.  Possible error codes include:

    ILLEGALSIGNAL               One or more of the signal bits in the
                                sigMask argument was not allocated by
                                the task.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    task.h                      ARM C "swi" declaration

  Notes

    Because it is possible for tasks to send signals in error, it is
    up to tasks to confirm that the actual event occurred when they
    receive a signal.

    For example, if you were waiting for SIGF_IODONE and the return
    value from WaitSignal indicated that the signal was sent, you
    should still call CheckIO using the IOReq to make sure it is
    actually done.  If it was not done you should go back to
    WaitSignal.

  See Also

    SendSignal(), WaitSignal()

##src/kernel/task.c::spg/kernel/yield##
Yield - Give up the CPU to a task of equal priority.

  Synopsis

    void Yield( void )

  Description

    In Portfolio, high-priority tasks always have precedence over
    lower priority tasks. Whenever a high priority task becomes
    ready to execute, it will instantly interrupt lower priority
    tasks and start running. The lower priority tasks do not get
    to finish their time quantum, and just get put into the system's
    ready queue for future scheduling.

    If there are a number of tasks of equal priority which are all
    ready to run, the kernel does round-robin scheduling of these
    tasks. This is a process by which each task is allowed to run
    for a fixed amount of time before the CPU is taken away from it,
    and given to another task of the same priority. The amount of time
    a task is allowed to run before being preempted is called the
    task's "quantum".

    The purpose of the Yield() function is to let a task voluntarily
    give up the remaining time of its quantum. Since the time quantum
    is only an issue when the kernel does round-robin scheduling, it
    means that Yield() actually only does something when there are
    multiple ready tasks at the same priority. However, since the
    yielding task does not know exactly which task, if any, is going
    to run next, Yeild() should not be used for implicit communication
    amongst tasks. The way to cooperate amongst tasks is using signals,
    messages, and semaphores.

    In short, if there are higher-priority tasks in the system, the
    current task will only run if the higher-priority tasks are all in
    the wait queue. If there are lower-priority tasks, these will
    only run if the current task is in the wait queue. And if there
    are other tasks of the same priority, the kernel automatically
    cycles through all the tasks, spending a quantum of time on each
    task, unless a task calls Yield(), which will cut short its
    quantum.

    If there are no other ready tasks of the same priority as the
    task that calls Yield(), then that task will keep running as
    if nothing happened.

  Implementation

    SWI implemented in kernel folio V20.

  Associated Files

    task.h                      ARM C "swi" declaration

  See Also

    WaitSignal()
##src/libs/lib3DO/autodocs.c::spg/lib3do/abortasyncloadfile##
AbortAsyncLoadFile - Abort an async file load in progress.

  Synopsis

    Err AbortAsyncLoadFile(LoadFileInfo *lf)

  Description

    This function aborts an asynchronous load already in progress.  It
    works even if the load operation has already completed.

    If you asked AsyncLoadFile() to allocate the buffer then this
    function frees the buffer.  If you specified an ioDonePort you
    will NOT receive notification at that port after calling this
    function.

    Do not call FinishAsyncLoadFile() after calling this function; this
    function performs the Finish actions internally.

  Arguments

    lf                           A pointer to the LoadFileInfo structure
                                 for the load operation.

  Return Value

    Returns ABORTED.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, blockfile.h

  See Also

    AsyncLoadFile()

##src/libs/lib3DO/autodocs.c::spg/lib3do/asyncloadfile##
AsyncLoadFile - Start an asynchronous file load operation.

  Synopsis

    Err AsyncLoadFile(char *fname, LoadFileInfo *lf)

  Description

    This function starts an asynchronous load of the specified file,
    using the options in the LoadFileInfo structure.

    This function opens the file, gets status information (filesize,
    etc) then starts the I/O.  Upon successful return from this
    function you can refer to the buffer, bufSize, and bf
    (BlockFileInfo) fields of the LoadFileInfo structure, even though
    the I/O is still in progress.  The contents of the buffer, of
    course, are indeterminate until the I/O completes.

    You must eventually follow a call to this function with a call to
    either AbortAsyncLoadFile(), WaitAsyncLoadFile(), or
    FinishAsyncLoadFile().

    The LoadFileInfo structure is defined in blockfile.h.  It contains values
    that control the load operation.   If the buffer pointer in the structure
    is NULL a buffer is allocated for you.  If non-NULL it is a pointer to a
    buffer you allocated for the file.   If the ioDonePort value in the
    structure is non-zero the I/O is set up to notify you via message when the
    load completes.

    If you store a NULL buffer pointer into the LoadFileInfo structure and
    allow this function to allocate a buffer for you, use the UnloadFile()
    function to release the buffer when you no longer need its contents.

  Arguments

    fname                        The name of the file to load.

    lf                           A pointer to a LoadFileInfo structure which
                                 describes the buffer and file
                                 characteristics.

  Return Value

    Returns zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, blockfile.h

  See Also

    LoadFile(), LoadFileHere(), UnloadFile()

##src/libs/lib3DO/autodocs.c::spg/lib3do/blitfontchar##
BlitFontChar - Blit character pixels from font data area into memory
               buffer.

  Synopsis

    int32 BlitFontChar(FontDescriptor *fDesc,
                       uint32 theChar,
                       void *blitInfo,
                       void *dstBuf,
                       int32 dstX,
                       int32 dstY,
                       int32 dstBPR,
                       int32 dstColorIndex,
                       int32 dstBPP)

  Description

    Blits character pixels from the font data area into a memory buffer,
    performing any font formatspecific data decompression as needed.

    BlitFontChar() supports the internals of the text library; it should never
    be necessary to call this function directly from an application program.
    If you are implementing your own replacement text library, use
    BlitFontChar() to render the font character pixels into your own memory
    buffer. You can use the standard text library source code as a guide in
    creating your own text library.

    BlitFontChar() currently supports only 8-bit-per-pixel destination format,
    and always creates pixels suitable for an 8-bit coded cel with AMV
    (alternate multiplier value) used to scale pixels already in the cell for
    anti-aliasing.  Support for other destination formats may be added in the
    future.

  Arguments

    fDesc                        Pointer to a FontDescriptor structure.

    theChar                      The specific character you want to blit to
                                 the buffer.

    blitInfo                     The value returned from GetFontCharInfo()via
                                 its **blitInfo  parameter, or NULL.  If you
                                 pass NULL, an internal call to
                                 GetFontCharInfo() is made.  If you are
                                 already calling GetFontCharInfo() before
                                 blitting each character, you can eliminate
                                 this potentially expensive internal call by
                                 saving the blitInfo from your call and
                                 passing it to this function.

    destBuf                      Pointer to the cel buffer into which you
                                 want to blit the character pixels.

    dstX                         x coordinate within the destBuf.

    dstY                         y coordinate within the destBuf.

    dstBPR                       The bytes-per-row of the destBuf.

    dstColorIndex                For 8-bit-per-pixel destination buffers, the
                                 color index to OR into each pixel as the
                                 character pixels are placed into the buffer.
                                 The value must be in the range of 0 through
                                 3 inclusive.

    dstBPP                       The bits-per-pixel of the destination
                                 buffer.

  Return Value

    The width of the character, in pixels. Zero indicates no pixels were
    placed in the destination buffer because the character is not within the
    range of characters stored in the font.

  Associated Files

    lib3do.lib, fontlib.h

  See Also

    GetFontCharInfo()

##src/libs/lib3DO/autodocs.c::spg/lib3do/cel_dataptr##
CEL_DATAPTR - Get the pointer to a cel's data buffer.

  Synopsis

    CelData * CEL_DATAPTR(ccb)

  Description

    This macro evaluates to a pointer to the cel's data buffer.  It takes the
    CCB_SPABS flag into account and always returns an absolute pointer, even
    when the CCB contains a relative offset in the ccb_SourcePtr field.

    This macro evaluates its argument more than once; be careful of side
    effects.  It is usable in an expression context.

  Arguments

    ccb                          A pointer to a cel.

  Return Value

    A pointer to the cel's data buffer, a CelData* type.

  Implementation

    Macro

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/cel_nextptr##
CEL_NEXTPTR - Get the pointer to the next cel in a list.

  Synopsis

    CCB * CEL_NEXTPTR(ccb)

  Description

    This macro evaluates to a pointer to the next cel.  It takes the CCB_NPABS
    flag into account and always returns an absolute pointer, even when the CCB
    contains a relative offset in the ccb_NextPtr field.  It evaluates to NULL
    if the CCB_LAST flag is set, or if the ccb_NextPtr field is NULL or zero.

    This macro evaluates its argument more than once; be careful of side
    effects.  It is usable in expression context.

  Arguments

    ccb                          A pointer to a cel.

  Return Value

    A pointer to the next cel, a CCB* type.  NULL if there is no next cel.

  Implementation

    Macro

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/cel_plutptr##
CEL_PLUTPTR - Get the pointer to a cel's PLUT.

  Synopsis

    uint16 * CEL_PLUTPTR(ccb)

  Description

    This macro evaluates to a pointer to the cel's PLUT.  It takes the
    CCB_PPABS flag into account and always returns an absolute pointer, even
    when the CCB contains a relative offset in the ccb_PLUTPtr field.

    This macro evaluates its argument more than once; be careful of side
    effects.  It is usable in expression context.

  Arguments

    ccb                          A pointer to a cel.

  Return Value

    A pointer the cel's PLUT, a uint16* type

  Implementation

    Macro

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/cel_pre0word##
CEL_PRE0WORD - Get the Preamble Word 0 value from a cel.

  Synopsis

    uint32 CEL_PRE0WORD(ccb)

  Description

    This macro evaluates to the Preamble Word 0 value for the cel.  It takes
    the CCB_CCBPRE flag into account and retrieves the preamble word from the
    CCB or the cel data buffer as appropriate.

    This macro evaluates its argument more than once; be careful of side
    effects.  It is usable in expression context.

  Arguments

    ccb                          A pointer to a cel.

  Return Value

    The cel's preamble word 0 value, a uint32 type

  Implementation

    Macro

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/cel_pre1word##
CEL_PRE1WORD - Get the Preamble Word 1 value from a cel.

  Synopsis

    uint32 CEL_PRE1WORD(ccb)

  Description

    This macro evaluates to the Preamble Word 1 value for the cel.  It takes
    the CCB_CCBPRE flag into account and retrieves the preamble word from the
    CCB or the cel data buffer as appropriate.

    This macro evaluates its argument more than once; be careful of side
    effects.  It is usable in expression context.

  Arguments

    ccb                          A pointer to a cel.

  Return Value

    The cel's preamble word 1 value, a uint32 type.  The ccb_PRE1 or
    second celdata word are mindlessly returned regardless of whether the cel
    actually requires a PRE1 control word.

  Implementation

    Macro

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/centercrectincrect##
CenterCRectInCRect - Center a CRect over or within another CRect.

  Synopsis

    CRect * CenterCRectInCRect(CRect *dst, CRect *src)

  Description

    This function centers the dst rectangle over or within the src rectangle.
    If the dst rectangle is smaller than the src rectangle, its values are
    modified to center it within the src rectangle.  If the dst rectangle is
    larger than the src rectangle, its values are modified to center it over
    the src rectangle.  In either case, the resulting rectangle retains its
    original sizes; only the position changes.

  Arguments

    dst                          A pointer to the CRect to be centered.

    src                          A pointer to the CRect within which dst is
                                 to be centered.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterSRectInSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centercrectindisplay##
CenterCRectInDisplay - Center a CRect within the display.

  Synopsis

    CRect * CenterCRectInDisplay(CRect *dst)

  Description

    This function centers the dst rectangle over or within the display.
    This routine assumes your display is 320 * 240.

  Arguments

    dst                          A pointer to a CRect where the results are
                                 to be stored.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterSRectInDisplay()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centercrectoveripoint##
CenterCRectOverIPoint - Center a CRect over a point.

  Synopsis

    CRect * CenterCRectOverIPoint(CRect *dst, IPoint *point)

  Description

    This function centers the dst rectangle over the specified point.

  Arguments

    dst                          A pointer to a CRect where the results are
                                 to be stored.

    point                        A pointer to an IPoint over which the dst is
                                 to be centered.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterSRectOverIPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerfpointindisplay##
CenterFPointInDisplay - Return the center point of the display.

  Synopsis

    FPoint* CenterFPointInDisplay(void)

  Description

    This function returns the center point of the display.  Assumes your
    display is 320 * 240.

    The return value points to a static structure which must not be modified.

  Return Value

    Returns a pointer to an FPoint describing the center point of the display.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterIPointInDisplay()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centeripointincrect##
CenterIPointInCRect - Calculate the center point of a CRect.

  Synopsis

    IPoint* CenterIPointInCRect(IPoint *dst, CRect *rect)

  Description

    This function calculates the center point of the specified rectangle and
    stores the result at *dst.

  Arguments

    dst                          A pointer to an IPoint where the results are
                                 to be stored.

    rect                         A pointer to the CRect for which the center
                                 point is to be calculated.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterIPointInSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centeripointindisplay##
CenterIPointInDisplay - Return the center point of the display.

  Synopsis

    IPoint* CenterIPointInDisplay(void)

  Description

    This function returns the center point of the display.

    The return value points to a static structure which must not be modified.

  Return Value

    Returns a pointer to an FPoint describing the center point of the display.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterFPointInDisplay()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centeripointinsrect##
CenterIPointInSRect - Calculate the center point of an SRect.

  Synopsis

    IPoint* CenterIPointInSRect(IPoint *dst, SRect *rect)

  Description

    This function calculates the center point of the specified rectangle and
    stores the result at *dst.

  Arguments

    dst                          A pointer to an IPoint where the results are
                                 to be stored.

    rect                         A pointer to the SRect for which the center
                                 point is to be calculated.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterIPointInCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectaacelincrect##
CenterRectAACelInCRect - Center an anti-aliased cel in a CRect.

  Synopsis

    void CenterRectAACelInCRect(CCB *cel, CRect *rect)

  Description

    This function centers an anti-aliased cel over or within the specified
    rectangle.

    The ccb_XPos and ccb_YPos fields are modified in both the data and alpha-
    channel CCBs; other CCB fields are not modified.  The centering is based
    on the cel's projected size, not its source data size.  If the cel is
    projected to a non-rectangular shape, the result will be invalid.

  Arguments

    cel                          A pointer to the cel to be centered.

    rect                         A pointer to a CRect describing the area
                                 within which the cel is to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectAACelInSRect(), CenterRectCelInCRect(),
    CenterRectCelListInCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectaacelindisplay##
CenterRectAACelInDisplay - Center an anti-aliased cel in the display.

  Synopsis

    void CenterRectAACelInDisplay(CCB *cel)

  Description

    This function centers an anti-aliased cel over or within the the
    display.  The display is assumed to be 320 * 240.

    The ccb_XPos and ccb_YPos fields are modified in both the data and alpha-
    channel CCBs; other CCB fields are not modified.  The centering is based
    on the cel's projected size, not its source data size.  If the cel is
    projected to a non-rectangular shape, the result will be invalid.

  Arguments

    cel                          A pointer to the cel to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectCelInDisplay(), CenterRectCelListInDisplay()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectaacelinsrect##
CenterRectAACelInSRect - Center an anti-aliased cel in an SRect.

  Synopsis

    void CenterRectAACelInSRect(CCB *cel, SRect *rect)

  Description

    This function centers an anti-aliased cel over or within the specified
    rectangle.

    The ccb_XPos and ccb_YPos fields are modified in both the data and alpha-
    channel CCBs; other CCB fields are not modified.  The centering is based
    on the cel's projected size, not its source data size.  If the cel is
    projected to a non-rectangular shape, the result will be invalid.

  Arguments

    cel                          A pointer to the cel to be centered.

    rect                         A pointer to an SRect describing the area
                                 within which the cel is to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectAACelInCRect(), CenterRectCelInSRect(),
    CenterRectCelListInSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectaaceloverfpoint##
CenterRectAACelOverFPoint - Center an anti-aliased cel over a point.

  Synopsis

    void CenterRectAACelOverFPoint(CCB *cel, FPoint *point)

  Description

    This function centers an anti-aliased cel over the specified point.

    The ccb_XPos and ccb_YPos fields are modified in both the data and alpha-
    channel CCBs; other CCB fields are not modified.  The centering is based
    on the cel's projected size, not its source data size.  If the cel is
    projected to a non-rectangular shape, the result will be invalid.

  Arguments

    cel                          A pointer to the cel to be centered.

    point                        A pointer to an FPoint over which the cel is
                                 to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectAACelOverIPoint(), CenterRectCelOverFPoint(),
    CenterCelListOverFPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectaaceloveripoint##
CenterRectAACelOverIPoint - Center an anti-aliased cel over a point.

  Synopsis

    void CenterRectAACelOverIPoint(CCB *cel, IPoint *point)

  Description

    This function centers an anti-aliased cel over the specified point.

    The ccb_XPos and ccb_YPos fields are modified in both the data and alpha-
    channel CCBs; other CCB fields are not modified.  The centering is based
    on the cel's projected size, not its source data size.  If the cel is
    projected to a non-rectangular shape, the result will be invalid.

  Arguments

    cel                          A pointer to the cel to be centered.

    point                        A pointer to an IPoint over which the cel is
                                 to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectAACelOverFPoint(), CenterRectCelOverIPoint(),
    CenterCelListOverIPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectcelincrect##
CenterRectCelInCRect - Center a cel within a CRect.

  Synopsis

    void CenterRectCelInCRect(CCB *cel, CRect *rect)

  Description

    This function centers a single cel over or within the specified rectangle.

    The ccb_XPos and ccb_YPos fields are modified in the CCB; other CCB fields
    are not modified.  The centering is based on the cel's projected size, not
    its source data size.  If the cel is projected to a non-rectangular shape,
    the result will be invalid.

  Arguments

    cel                          A pointer to the cel to be centered.

    rect                         A pointer to a CRect within which the cel is
                                 to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectCelInSRect(), CenterRectAACelInCRect(),
    CenterRectCelListInCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectcelindisplay##
CenterRectCelInDisplay - Center a cel in the display.

  Synopsis

    void CenterRectCelInDisplay(CCB *cel)

  Description

    This function centers a single cel over or within the the display.
    The display is assumed to be 320 * 240.

    The ccb_XPos and ccb_YPos fields are modified in the CCB; other CCB fields
    are not modified.  The centering is based on the cel's projected size, not
    its source data size.  If the cel is projected to a non-rectangular shape,
    the result will be invalid.

  Arguments

    cel                          A pointer to the cel to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectAACelInDisplay(), CenterRectCelListInDisplay()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectcelinsrect##
CenterRectCelInSRect - Center a cel within an SRect

  Synopsis

    void CenterRectCelInSRect(CCB *cel, SRect *rect)

  Description

    This function centers a single cel over or within the specified rectangle.

    The ccb_XPos and ccb_YPos fields are modified in the CCB; other CCB fields
    are not modified.  The centering is based on the cel's projected size, not
    its source data size.  If the cel is projected to a non-rectangular shape,
    the result will be invalid.

  Arguments

    cel                          A pointer to the cel to be centered.

    rect                         A pointer to an SRect within which the cel
                                 is to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectCelInCRect(), CenterRectAACelInSRect(),
    CenterRectCelListInSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectcellistincrect##
CenterRectCelListInCRect - Center a list of cels within a CRect.

  Synopsis

    void CenterRectCelListInCRect(CCB *cel, CRect *rect)

  Description

    This function centers a list of one or more cels over or within the
    specified rectangle.  The list of cels is treated as if it were a single
    logical entity.  The first cel in the list is centered, then the X/Y
    coordinates of all remaining cels in the list are modified so that all
    cels maintain the same positional relationship to each other as they had
    originally.  This is especially useful when the first cel in the list
    encompases the area occupied by all the other cels; the effect is to
    center the group of cels as if they were all one cel.

    The ccb_XPos and ccb_YPos fields are modified in the CCBs; other CCB
    fields are not modified.  The centering is based on the first cel's
    projected size, not its source data size.  If the first cel is projected
    to a non-rectangular shape, the result will be invalid.

  Arguments

    cel                          A pointer to a list of one or more cels to
                                 be centered.

    rect                         A pointer to an SRect within which the cels
                                 are to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectCelListInSRect(), CenterRectAACelInCRect(),
    CenterRectCelInCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectcellistindisplay##
CenterRectCelListInDisplay - Center a list of cels in the display.

  Synopsis

    void CenterRectCelListInDisplay(CCB *cel)

  Description

    This function centers a list of one or more cels over or within the
    display.  The list of cels is treated as if it were a single logical
    entity.  The first cel in the list is centered, then the X/Y coordinates
    of all remaining cels in the list are modified so that all cels maintain
    the same positional relationship to each other as they had originally.
    This is especially useful when the first cel in the list encompases the
    area occupied by all the other cels; the effect is to center the group of
    cels as if they were all one cel.

    The display is assumed to be 320 * 240.

    The ccb_XPos and ccb_YPos fields are modified in the CCBs; other CCB
    fields are not modified.  The centering is based on the first cel's
    projected size, not its source data size.  If the first cel is projected
    to a non-rectangular shape, the result will be invalid.

  Arguments

    cel                          A pointer to a list of one or more cels to
                                 be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectAACelInDisplay(), CenterRectCelInDisplay()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectcellistinsrect##
CenterRectCelListInSRect - Center a list of cels within an SRect.

  Synopsis

    void CenterRectCelListInSRect(CCB *cel, SRect *rect)

  Description

    This function centers a list of one or more cels over or within the
    specified rectangle.  The list of cels is treated as if it were a single
    logical entity.  The first cel in the list is centered, then the X/Y
    coordinates of all remaining cels in the list are modified so that all
    cels maintain the same positional relationship to each other as they had
    originally.  This is especially useful when the first cel in the list
    encompases the area occupied by all the other cels; the effect is to
    center the group of cels as if they were all one cel.

    The ccb_XPos and ccb_YPos fields are modified in the CCBs; other CCB
    fields are not modified.  The centering is based on the first cel's
    projected size, not its source data size.  If the first cel is projected
    to a non-rectangular shape, the result will be invalid.

  Arguments

    cel                          A pointer to a list of one or more cels to
                                 be centered.

    rect                         A pointer to an SRect within which the cels
                                 are to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectCelListInCRect(), CenterRectAACelInSRect(),
    CenterRectCelInSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectcellistoverfpoint##
CenterRectCelListOverFPoint - Center a list of cels over a point.

  Synopsis

    void CenterRectCelListOverFPoint(CCB *cel, FPoint *point)

  Description

    This function centers a list of one or more cels over the specified point.
    The list of cels is treated as if it were a single logical entity.  The
    first cel in the list is centered, then the X/Y coordinates of all
    remaining cels in the list are modified so that all cels maintain the same
    positional relationship to each other as they had originally.  This is
    especially useful when the first cel in the list encompases the area
    occupied by all the other cels; the effect is to center the group of cels
    as if they were all one cel.

    The ccb_XPos and ccb_YPos fields are modified in the CCBs; other CCB
    fields are not modified.  The centering is based on the first cel's
    projected size, not its source data size.  If the first cel is projected
    to a non-rectangular shape, the result will be invalid.

  Arguments

    cel                          A pointer to a list of one or more cels to
                                 be centered.

    point                        A pointer to an FPoint over which the cels
                                 are to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectCelListOverIPoint(), CenterRectAACelOverFPoint(),
    CenterRectCelOverFPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectcellistoveripoint##
CenterRectCelListOverIPoint - Center a list of cels over a point.

  Synopsis

    void CenterRectCelListOverIPoint(CCB *cel, IPoint *point)

  Description

    This function centers a list of one or more cels over the specified point.
    The list of cels is treated as if it were a single logical entity.  The
    first cel in the list is centered, then the X/Y coordinates of all
    remaining cels in the list are modified so that all cels maintain the same
    positional relationship to each other as they had originally.  This is
    especially useful when the first cel in the list encompases the area
    occupied by all the other cels; the effect is to center the group of cels
    as if they were all one cel.

    The ccb_XPos and ccb_YPos fields are modified in the CCBs; other CCB
    fields are not modified.  The centering is based on the first cel's
    projected size, not its source data size.  If the first cel is projected
    to a non-rectangular shape, the result will be invalid.

  Arguments

    cel                          A pointer to a list of one or more cels to
                                 be centered.

    point                        A pointer to an IPoint over which the cels
                                 are to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRectCelListOverFPoint(), CenterRectAACelOverIPoint(),
    CenterRectCelOverIPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectceloverfpoint##
CenterRectCelOverFPoint - Center a cel over a point.

  Synopsis

    void CenterRectCelOverFPoint(CCB *cel, FPoint *point)

  Description

    This function centers a single cel over the specified point.

    The ccb_XPos and ccb_YPos fields are modified in the CCB; other CCB fields
    are not modified.  The centering is based on the cel's projected size, not
    its source data size.  If the cel is projected to a non-rectangular shape,
    the result will be invalid.

  Arguments

    cel                          A pointer to a cel to be centered.

    point                        A pointer to an FPoint over which the cels
                                 are to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRecCelOverIPoint(), CenterRectAACelOverFPoint(),
    CenterRectCelListOverFPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centerrectceloveripoint##
CenterRectCelOverIPoint - Center a cel over a point.

  Synopsis

    void CenterRectCelOverIPoint(CCB *cel, IPoint *point)

  Description

    This function centers a single cel over the specified point.

    The ccb_XPos and ccb_YPos fields are modified in the CCB; other CCB fields
    are not modified.  The centering is based on the cel's projected size, not
    its source data size.  If the cel is projected to a non-rectangular shape,
    the result will be invalid.

  Arguments

    cel                          A pointer to a cel to be centered.

    point                        A pointer to an IPoint over which the cels
                                 are to be centered.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterRecCelOverFPoint(), CenterRectAACelOverIPoint(),
    CenterRectCelListOverIPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centersrectindisplay##
CenterSRectInDisplay - Center an SRect in the display.

  Synopsis

    SRect * CenterSRectInDisplay(SRect *dst)

  Description

    This function centers the dst rectangle over or within the display
    (assumed 320 * 240).

  Arguments

    dst                          A pointer to the SRect to be centered.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterCRectInDisplay()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centersrectinsrect##
CenterSRectInSRect - Center an SRect within an SRect.

  Synopsis

    SRect * CenterSRectInSRect(SRect *dst, SRect *rect)

  Description

    This function centers the dst rectangle over or within the src rectangle.
    If the dst rectangle is smaller than the src rectangle, its position
    values are modified to center it within the src rectangle.  If the dst
    rectangle is larger than the src rectangle, its position values are
    modified to center it over the src rectangle.  In either case, the
    resulting rectangle retains its original sizes; only the position changes.

  Arguments

    dst                          A pointer to the SRect to be centered.

    src                          A pointer to the SRect within which dst is
                                 to be centered.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterCRectInCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/centersrectoveripoint##
CenterSRectOverIPoint - Center an SRect over a point.

  Synopsis

    SRect * CenterSRectOverIPoint(SRect *dst, IPoint *point)

  Description

    This function centers the dst rectangle over the specified point.

  Arguments

    dst                          A pointer to the SRect to be centered.

    point                        A pointer to an IPoint over which dst is to
                                 be centered.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CenterCRectOverIPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/chaincelsathead##
ChainCelsAtHead - Chain together lists of cels.

  Synopsis

    CCB * ChainCelsAtHead(CCB *existingCels, CCB *newCels)

  Description

    This function chains together two lists of cels, puting the new list ahead
    of the existing cels.  The return value is a pointer to the first cel in
    the resulting list.  Either pointer can be NULL, eliminating the need for
    special-case code when iteratively building a list of cels.  For example,
    the following code will work:

    CCB *list = NULL;
    CCB *cels;
    do {
        cels = get_next_antialiased_cel();
        list = ChainCelsAtHead(list, cels);
    } while (cels != NULL);

    This function works properly with anti-aliased cels and similar constructs
    where a list of related cels makes up a single logical entity.

  Arguments

    existingCels                 A pointer to the existing list of cels; may
                                 be NULL.

    newCels                      A pointer to the new list of cels to be
                                 added ahead of the existing list; may be
                                 NULL.

  Return Value

    A pointer to the head of the resulting list of cels.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    ChainCelsAtTail()

##src/libs/lib3DO/autodocs.c::spg/lib3do/chaincelsattail##
ChainCelsAtTail - Chain together lists of cels.

  Synopsis

    CCB * ChainCelsAtTail(CCB *existingCels, CCB *newCels)

  Description

    This function chains together two lists of cels, puting the new list
    behind the existing cels.  The return value is a pointer to the last cel
    in the resulting list.  Either pointer can be NULL, in which case the
    function is essentially a no-op that just returns a pointer to the last
    cel in the list pointed to by the other pointer.

    The most effecient way to iteratively build a list of cels is to use the
    return value from the prior call as the existingCels pointer for the
    current call.  This eliminates long searches for the end of the
    ever-growing list of cels.  For example:

    CCB *list = NULL;
    CCB *tail = NULL;
    CCB *cels;
    do {
        cels = get_next_antialiased_cel();
        tail = ChainCelsAtTail(tail, cels);
        if (list == NULL) {
            list = cels;  // remember head-of-list pointer first time through.
        }
    } while (cels != NULL);

    This function works properly with anti-aliased cels and similar constructs
    where a list of related cels makes up a single logical entity.

  Arguments

    existingCels                 A pointer to the existing list of cels; may
                                 be NULL.

    newCels                      A pointer to the new list of cels to be
                                 added at the end of the existing list; may
                                 be NULL.

  Return Value

    A pointer to the last cel in the resulting list of cels.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    ChainCelsAtHead()

##src/libs/lib3DO/autodocs.c::spg/lib3do/checkasyncloadfile##
CheckAsyncLoadFile - Check for completion of an async file load operation.

  Synopsis

    Err CheckAsyncLoadFile(LoadFileInfo *lf)

  Description

    This function checks the status of an AsyncLoadFile() started earlier.  A
    zero return value means I/O is still in progress.  A negative return value
    indicates error, and a positive return value indicates successful
    completion.

    You must call FinishAsyncLoadFile() after receiving a non-zero status from
    this function.

  Arguments

    lf                           A pointer to the LoadFileInfo structure for
                                 the load operation.

  Return Value

    Returns zero if I/O is still in progress, negative if the I/O failed, or
    positive if the has I/O compeleted successfully.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, blockfile.h

  See Also

    AsyncLoadFile()

##src/libs/lib3DO/autodocs.c::spg/lib3do/cleanupmsevents##
CleanupMSEvents - Release resources acquired by SetupMSEvents.

  Synopsis

    void CleanupMSEvents(MSEventHandle mseHandle)

  Description

    This function releases all resources acquired internally by
    SetupMSEvents().  Any ports or signals which were allocated by
    SeuptMSEvents() are deleted.  If mseHandle is less than or equal to zero 0
    this function quietly returns without doing anything.

  Arguments

    mseHandle                    An MSEventHandle returned by
                                 SetupMSEvents().

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, msgutils.h

  See Also

    SetupMSEvents(), DispatchMSEvents()

##src/libs/lib3DO/autodocs.c::spg/lib3do/clearbitmap##
ClearBitmap - Clear a screen or bitmap.

  Synopsis

    Err ClearBitmap(Item ioreq, Item scr_bm,
                    Bitmap *bmPtr, int32 rgbValue)

  Description

    This function sets all pixels in the screen or bitmap to the specified
    rgbValue.  It uses SetVRAMPages() for fast operation.

    The rgbValue is a pair of RGB555s packed into a 32-bit word.  If you don't
    want simple black (zero), use the MakeRGB15Pair() macro to create this
    value from separate red, green, and blue values.

    For best performance, pass a non-zero ioreq parm and a bitmap pointer
    instead of a screen or bitmap item.  This will avoid LookupItem() and
    CreateIOReq() calls that would otherwise be made internally.

  Arguments

    ioreq                        An IOReq item obtained from GetVRAMIOReq(),
                                 or zero to have an IOReq created and deleted
                                 internally during the call.

    scr_bm                       A Screen or Bitmap item number.  May be zero
                                 if a Bitmap pointer is provided.

    bmPtr                        A Bitmap pointer.  May be NULL if a Screen
                                 or Bitmap item is provided.

    rgbValue                     The color value to store into all screen or
                                 bitmap pixels.

  Return Value

    Returns zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, displayutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/clonecel##
CloneCel - Create a copy of a cel.

  Synopsis

    CCB * CloneCel(CCB *src, int32 options)

  Description

    This function makes a copy of a CCB, and optionally of the pixels and/or
    PLUT.  The values in the cloned CCB are identical to the src CCB, except
    that the CCB_LAST flag will be set and the ccb_NextPtr field will be NULL
    in the clone.

    The options parameter is one or more of the following values, ORed
    together as necessary: CLONECEL_CCB_ONLY, CLONECEL_COPY_PIXELS,
    CLONECEL_COPY_PLUT.

    When COPY_PIXELS is specified, a new cel data buffer is allocated, and the
    pixels in the src cel's buffer are copied to the new buffer.  When
    COPY_PIXELS is not specified, the new cel's ccb_SourcePtr field points to
    the src cel's data buffer.

    When COPY_PLUT is specified, a new PLUT is allocated, and the values from
    the src cel's PLUT are copied to the new PLUT.  When COPY_PLUT is not
    specified, the new cel's ccb_PLUTPtr field points to the src cel's PLUT.
    If the cel is uncoded, the COPY_PLUT option has no effect.

    You may change any of the values in the CCB fields of the newly created
    cel.  Be careful about changing preamble words when the CCB_CCBPRE flag is
    not set and the CLONECEL_COPY_PIXELS option was not used.  In that
    situation, the preamble words you change would be those belonging to the
    original cel, not the copy.

    Use DeleteCel() to release all resources allocated for the clone.

  Arguments

    src                          A pointer to a cel to copy.

    options                      Bitmapped options, as described above.

  Return Value

    A pointer to the new CCB, or NULL if there is not enough memory to make
    the clone.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CreateCel(), DeleteCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/clonetextcel##
CloneTextCel - Clone an existing text cel.

  Synopsis

    TextCel * CloneTextCel(TextCel *templateTextCel,
                           Boolean clonePixels)

  Description

    Creates a new TextCel using a TextCel that already exists as a template.
    If clonePixels is FALSE, the new TextCel contains no text; if TRUE, the
    pixels from the template TextCel are copied into the new TextCel.

    If the template cel has a format buffer attached to it, and that buffer
    was dynamically allocated by the call to SetTextCelFormatBuffer(), a new
    buffer of the same size is allocated and attached to the new cel. If the
    template cel has a format buffer that you provided explicitly (a static
    buffer), the new cel will use the same static buffer.

    This function is useful when you want to create a number of identical
    TextCels.  You can call CreateTextCel(), followed by whatever
    SetTextCel...() functions you need to create a template cel with a given
    size and attributes, then call CloneTextCel() as often as necessary to
    create a number of cels with identical size and attributes.

    Use DeleteTextCel() to dispose of the TextCel when you are finished with
    it.

  Arguments

    templateTextCel              Pointer to the TextCel structure you want to
                                 clone.

    clonePixels                  TRUE if the new TextCel is to contain the
                                 same pixels as those currently in the
                                 template TextCel.

  Return Value

    A pointer to the newly created TextCel structure; NULL if there isn't
    enough memory to create the new TextCel.

  Associated Files

    lib3do.lib, textlib.h

  See Also

    CreateTextCel(), DeleteTextCel

##src/libs/lib3DO/autodocs.c::spg/lib3do/createbackdropcel##
CreateBackdropCel - Create a single-color cel.

  Synopsis

    CCB * CreateBackdropCel(int32 width, int32 height,
                            int32 color, int32 opacityPercent)

  Description

    This function creates a single-colored cel which is useful in serving as a
    backdrop and/or control point for other objects.

    The color is an RGB555-format value.  Use the MakeRGB15() macro to create
    this value from separate red, green, and blue values.

    The cel can be opaque or translucent as specified by opacityPercent.  100
    percent is opaque, smaller values give translucent cels where the cel's
    color intensity is the specified percentage of the projected result.  For
    example, 75% means the projected pixels are 75% of the cel's color, 25% of
    the existing pixel's color.  There are actually only 8 levels of
    translucency available; the percentage you request is mapped to the
    closest available level.  The opacity and color of the cel cannot be
    changed after the cel is created.  (More specifically, you're on your own
    in attempting the PIXC and source pixel manipulations needed to change
    color and opacity; it won't harm anything to try.)

    An opacityPercent of zero results in a 'virtual' cel, which does not
    project any pixels when drawn.  The CCB_SKIP flag is set when
    opacityPercent is zero.  A cel of this sort is useful in anchoring a list
    of related cels.  It can serve as a single point of control for moving,
    centering, mapping, and other projection-related manipulations when used
    with the Library call implemented in lib3do.lib.s that manipulate lists of cels as if they were a
    single entity.

    Regardless of the sizes you specify, the cel requires only sizeof(CCB)
    bytes of memory.  The cel is created with a source size of 1x1 pixel, and
    the HDX and VDY fields are set to project the pixel to the specified width
    and height.  Note that the ccb_Width and ccb_Height fields reflect the
    cel's source data size of 1x1 pixel.  Library call implemented in lib3do.lib.s that are sensitive
    to cel size, such as centering functions, use SRectFromCel() to get the
    projected cel size and thus work correctly.  You should do the same if you
    need to obtain the projected cel size programmatically.

    You may remap the cel to project to any position, size, and shape you
    desire after it is created.

    Use DeleteCel() to release all resources allocated for the cel.

  Arguments

    width                        The width of the cel as it is to appear when
                                 projected.

    height                       The height of the cel as it is to appear
                                 when projected.

    color                        The color of the cel, in RGB555 format.

    opacityPercent               The opacity percentage, from 0 (invisible)
                                 to 100 (opaque).

  Return Value

    A pointer to the new CCB, or NULL if there is not enough memory to make
    the cel.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CreateCel(), DeleteCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/createbasicdisplay##
CreateBasicDisplay - Do everything needed to create a simple
                     display.

  Synopsis

    Item CreateBasicDisplay (ScreenContext *sc, uint32 displayType,
                             uint32 numScreens)

  Description

    This function does all the work needed to prepare a screen display
    on 3DO. It open the graphics folio, creates a screen group,
    and adds the screen group. All you need to view the screen display
    on the monitor is to call DisplayScreen() when you are ready.

    Using this function, you can create a display suitable for NTSC
    or PAL. This is controlled using the displayType argument. The
    different display types are defined in graphics.h and currently
    include:

      DI_TYPE_DEFAULT
      Specifying this value will give you a display which matches the
      current defaults for the system. If the system is PAL, it will
      open a PAL display, and if the machine is NTSC, it will open an
      NTSC display. Be warned that it is very possible that in the
      future, there will be additional display types that can be the
      default. If your code can only cope with either NTSC or PAL,
      you should specify the modes explicitly.

      DI_TYPE_NTSC
      Opens a 320x240 display running at 60Hz.

      DI_TYPE_PAL1
      Opens a 320x240 display running at 50Hz.

      DI_TYPE_PAL2
      Opens a 384x288 display running at 50Hz.

    If your application includes both NTSC and PAL artwork, you
    can use the following approach to determine which set of artwork
    to use:

      QueryGraphics(QUERYGRAF_TAG_DEFAULTDISPLAYTYPE,&displayType);
           if ((displayType == DI_TYPE_PAL1) || (displayType == DI_TYPE_PAL2))
      {
          displayType = DI_TYPE_PAL2;
      }
      else
      {
          displayType = DI_TYPE_NTSC;
      }

    You can then supply the displayType parameter to
    CreateBasicDisplay(). What the above code does is protect
    you against any new display types that can be added to the
    system. Essentially, if the system says the default is PAL,
    you will use the PAL artwork. Any other condition will yield
    an NTSC display.

  Arguments

    sc                           This structure is used for output
                                 only. It contains various fields
                                 that describe the display. This
                                 includes the sc_DisplayType field
                                 which indicates the actual display
                                 type of the display. If this pointer
                                 is NULL, this function returns an
                                 error code.

    displayType                  The type of display to open. See the
                                 explanation above.

    numScreens                   Number of screen buffers to allocate.
                                 This is typically 1 or 2. You allocate
                                 two screen buffers when you wish
                                 to do double-buffering.

  Return Value

    Returns the item number of the screen group that was created, or
    a negative error code upon failure.

  Associated Files

    lib3do.lib, displayutils.h

  See Also

    DeleteBasicDisplay()

##src/libs/lib3DO/autodocs.c::spg/lib3do/createcel##
CreateCel - Create a cel from scratch.

  Synopsis

    CCB * CreateCel(int32 width, int32 height, int32 bitsPerPixel,
                    int32 options, void *dataBuf)

  Description

    This function creates a cel of any arbitrary type.  The parameters provide
    just enough information to create the basic cel.  After the cel is
    created, you are free to modify the CCB in any way you'd like to achieve
    effects not directly implied by the creation parameters.

    If you pass a NULL dataBuf pointer an appropriately-sized buffer is
    allocated when the cel is created.  If you pass a non-NULL dataBuf pointer
    it is stored into the ccb_SourcePtr field instead of allocating a buffer
    internally.

    The options parameter is one or more of the following values, ORed
    together as necessary:
    CREATECEL_UNCODED-
        Create a coded cel.  bitsPerPixel must be <= 8.
        CREATECEL_CODED-
                Create an uncoded cel.  bitsPerPixel must be 8 or 16.

    If the bitsPerPixel value is less than 8, a PLUT is always allocated when
    the cel is created.  When bitsPerPixel is 8 or 16, a PLUT is allocated
    only if the CREATECEL_CODED option is set.  When a PLUT is allocated all
    its entries are initialized to zero.

    The cel is created with a position of 0,0 and size and perspective values
    for a 1:1 mapping.  The Preamble Word 1 Blue LSB handling is set to
    PRE1_TLLSB_PDC0.  The PIXC word is set for standard opaque, 0x1F001F00.
    The cel flags are set to:CCB_LAST | CCB_NPABS | CCB_SPABS | CCB_PPABS |
    CCB_LDSIZE | CCB_LDPRS | CCB_LDPPMP | CCB_CCBPRE | CCB_YOXY | CCB_USEAV  |
    CCB_NOBLK | CCB_ACE | CCB_ACW | CCB_ACCW

    Use DeleteCel() to release all resources allocated for the cel.  The cel
    data buffer and PLUT are released only if they were allocated by
    CreateCel().  If you provided your own dataBuf pointer, you must free the
    buffer yourself.

  Arguments

    width                        The width of the cel, and its data buffer,
                                 in pixels.

    height                       The height of the cel, and its data buffer,
                                 in pixels.

    bitsPerPixel                 The bits per pixel value for the cel.

    options                      Bitmapped options, as described above.

    dataBuf                      Option data buffer pointer; may be NULL to
                                 have a buffer allocated automatically.

  Return Value

    A pointer to the new CCB, or NULL if there is not enough memory to make
    the cel.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CreateBackdropCel(), DeleteCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/createlrformcel##
CreateLRFormCel - Create an LRForm cel.

  Synopsis

    CCB * CreateLRFormCel(CCB *cel, Item screenItem, SRect *subRect)

  Description

    This function creates an LRForm cel from a screen or portion of a screen.
    LRForm cels can be used to 'capture' a screen's pixels and project them to
    another screen (or another portion of the same screen).

    If the cel pointer is NULL, a new cel is allocated for you.  If non-NULL
    it must be an LRForm cel created by an earlier call to this function.
    Passing a non-NULL cel pointer allows you to repeatedly extract different
    subrects from the same screen without having to create a new cel each
    time.

    If the subRect pointer is NULL, the cel will be the same size as the
    source screen.  If it is non-NULL, the cel will access the sub-rectangle
    of pixels described by subRect.

    Unlike other Library call implemented in lib3do.lib.s, you cannot pass a Bitmap item in place of
    the Screen item.  This is because the GetPixelAddress() function used to
    locate the pixels in the screen will not accept a Bitmap item.

    The cel created by this function will use the pixels in the screen's
    bitmap buffer as the cel source pixels.  The pixels are not copied, and if
    you render new pixels into the screen, subsequent projections of the cel
    will use the new pixels.

    The cel is created with a position of 0,0 and size and perspective values
    for a 1:1 mapping.  The Preamble Word 1 Blue LSB handling is set to
    PRE1_TLLSB_PDC0.  The PIXC word is set for standard opaque, 0x1F001F00.
    The cel flags are set to:CCB_LAST | CCB_NPABS | CCB_SPABS | CCB_PPABS |
    CCB_LDSIZE | CCB_LDPRS | CCB_LDPPMP | CCB_CCBPRE | CCB_YOXY | CCB_USEAV |
    CCB_NOBLK | CCB_ACE | CCB_ACW | CCB_ACCW | CCB_BGND | PMODE_ONE

    Use DeleteCel() to release the resources allocated for the cel.

  Arguments

    cel                          A pointer to a cel created earlier by this
                                 function, or NULL to create a new cel.

    screenItem                   The item number of the Screen whose pixels
                                 this cel is to project.

    subRect                      A pointer to an SRect describing the sub-
                                 rectangle to be extracted from the Screen,
                                 or NULL for full-screen.

  Return Value

    The input parameter dst, if dst was non-NULL on input.  A pointer to the
    newly created cel or NULL if there is not enough memory to create the cel,
    if dst was NULL on input.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CreateSubrectCel(), DeleteCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/createsubrectcel##
CreateSubrectCel - Create a cel that projects a sub-rectangle of another
                   cel's pixels.

  Synopsis

    CCB * CreateSubrectCel(CCB *dst, CCB *src, SRect *subRect)

  Description

    This function creates a cel from a portion of another cel's data.  The new
    cel projects a subrectangle of the src cel's pixels.

    If the dst pointer is NULL this function allocates a new cel by doing a
    CloneCel(src, CLONECEL_CCB_ONLY).  The CCB_CCBPRE flag is forced on in the
    new cel so that preamble word changes can be done without affecting the
    source cel.  The new cel's preamble words and ccb_SourcePtr are modified
    to access the specified subrectangle of the src cel's pixels.  The pixels
    are not copied, the dst cel's ccb_SourcePtr will point into the src cel's
    data buffer.

    If the src cel is CODED, the dst cel's ccb_PLUTPtr will point to the src
    cel's PLUT, but you are free to change ccb_PLUTPtr in the dst cel if you
    want.  You are also free to change the dst cel's Flags, PIXC word, and in
    general any CCB values.   Be careful about changing the preamble word
    values that describe the subrectangle of the src cel's data.

    If the dst pointer is non-NULL, the allocation of a new cel is bypassed,
    and only the preamble and ccb_SourcePtr calcs are done.  This option
    provides improved performance; you can allocate the subrect cel just once,
    then continually call this function to have that cel access different
    portions of the src cel's pixels.

    Using a non-NULL dst pointer is an implicit request for high performance,
    so this function does no error or sanity checking.  In particular, it is
    your responsibility to ensure that the dst cel you supply is compatible
    with the src cel you want to extract data from, in terms of bit depth and
    other CCB parameters.  The recommended method is to use this function with
    a NULL dst pointer once to create a subrect cel for a given source cel,
    then only reuse that dst pointer in association with that source cel.

    This function works with all types of cels of any bit depth, except that
    you cannot extract a subrectangle from a PACKED source cel due to way
    packed data is stored.

  Arguments

    dst                          A pointer to a cel created earlier by this
                                 function, or NULL to create a new cel.

    src                          A pointer to an existing cel; NULL is not
                                  allowed.

    subRect                      A pointer to an SRect describing the sub-
                                 rectangle to be extracted from the src cel;
                                 NULL is not allowed.

  Return Value

    The input parameter dst, if dst was non-NULL on input.  A pointer to the
    newly created cel or NULL if there is not enough memory to create the cel,
    if dst was NULL on input.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CreateLRFormCel(), DeleteCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/createtextcel##
CreateTextCel - Create a text cel.

  Synopsis

    TextCel * CreateTextCel(FontDescriptor *fDesc,
                            uint32 formatFlags,
                            int32 width,
                            int32 height)

  Description

    Creates a TextCel using the specified sizes and formatting options.
    Initially, the cel data buffer is empty; until you place text into the cel
    all pixels are zero.

    If width and/or height are zero, the cel is initially created with a 1 x 1
    pixel size. Each time text is placed into the cel, the size automatically
    changes to reflect the size of the text in the cel.

    The formatFlags parameter contains one or more formatting options, ORed
    together.  Available options are:
    TC_FORMAT_LEFT_JUSTIFY
        left-justify text
    TC_FORMAT_RIGHT_JUSTIFY
        right -justify text
    TC_FORMAT_CENTER_JUSTIFY
        center-justify text
    TC_FORMAT_WORDWRAP
        auto-word-wrap text

    Use DeleteTextCel() to dispose of the cel when you are finished with it.

  Arguments

    fDesc                        Pointer to a FontDescriptor structure.

    formatFlags                  Text-formatting options.

    width                        Width of the cel.

    height                       Height of the cel.

  Return Value

    A pointer to the newly created TextCel structure; NULL if there isnxd5 t
    enough memory to create the new TextCel.

  Associated Files

    lib3do.lib, textlib.h

  See Also

    CloneTextCel(), DeleteTextCel(), taCreateTextCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/crectbounds##
CRectBounds - Calculate the bounding box of two CRects.

  Synopsis

    CRect * CRectBounds(CRect *dst, CRect *rect1, CRect *rect2)

  Description

    This function calculates the bounding box of two rectangles, returning a
    rectangle that encompases all the area described by the two source
    rectangles.  The dst rectangle can be the same as either source rectangle.

  Arguments

    dst                          A pointer to a CRect where the results are
                                 to be stored.

    rect1                        A pointer to one of the source CRects.

    rect2                        A pointer to the other source CRect.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CRectIntersection(), SRectBounds()

##src/libs/lib3DO/autodocs.c::spg/lib3do/crectfromcelreturn##
CRectFromCelReturn  - CRect describing cel as currently projected.

  Synopsis

    CRect * CRectFromCel(CRect *dst, CCB *cel)

  Description

    This function calculates a CRect that describes the cel's projection, and
    stores the results into *dst.  If the cel is projected to a
    non-rectangular shape, the result will be invalid.

  Arguments

    dst                          A pointer to a CRect where the results are
                                 to be stored.

    cel                          A pointer to the cel.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    SRectFromCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/crectfromival##
CRectFromIVal - Fill in a CRect from inline values.

  Synopsis

    CRect * CRectFromIVal(CRect *dst, int32 tlx, int32 tly,
                          int32 brx, int32 bry)

  Description

    This function stores the four specified corner values into the CRect at
    *dst.

  Arguments

    dst                          A pointer to a CRect where the results are
                                 to be stored.

    tlx                          The value to assign to dst->tl.x.

    tly                          The value to assign to dst->tl.y.

    brx                          The value to assign to dst->br.x.

    bry                          The value to assign to dst->br.y.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CRectFromSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/crectfromsrect##
CRectFromSRect - Convert an SRect to a CRect.

  Synopsis

    CRect * CRectFromSRect(CRect *dst, SRect *src)

  Description

    This function converts an SRect into a CRect that describes the same area.

  Arguments

    dst                          A pointer to a CRect where the results are
                                 to be stored.

    src                          A pointer to an SRect to convert to a CRect.

  Return Value

    Returns dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CRectFromIVal(), SRectFromCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/crectintersection##
CRectIntersection - Calculate the intersection of two CRects.

  Synopsis

    CRect * CRectIntersection(CRect *dst, CRect *rect1, CRect *rect2)

  Description

    This function calculates the intersection of two rectangles, returning a
    rectangle that describes the common area.  The dst rectangle can be the
    same as either source rectangle.  If there is no common area between the
    two source rectangles, the function return value is NULL, but the values
    in *dst are still modified.

  Arguments

    dst                          A pointer to a CRect where the results are
                                 to be stored.

    rect1                        A pointer to one of the source CRects.

    rect2                        A pointer to the other source CRect.

  Return Value

    Returns dst, or NULL if there is no common area between the source
    rectangles.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CRectBounds(), SRectIntersection()

##src/libs/lib3DO/autodocs.c::spg/lib3do/crossfadecels##
CrossFadeCels - Crossfade between two cels.

  Synopsis

    CCB * CrossFadeCels(Item screen, int32 step,
                        CCB *oldCel, CCB *newCel)

  Description

    This function calculates and optionally draws a 16-level crossfade between
    two cels.  The crossfade is accomplished in 16 equal steps by 16 calls to
    this function with the step parameter varying between 0 and 15 on each
    subsequent call.  Step 0 draws oldCel at 15/16 intensity and newCel at
    1/16 intensity, step 1 draws 14/16 oldCel and 2/16 newCel, and so on up to
    step 15 which is 0/16 oldCel and 16/16 newCel (IE, oldCel is not drawn and
    newCel is drawn as opaque).

    The screen parameter can be either a Screen or Bitmap item, in which case
    the cels are drawn on each call. It can also be zero, in which case the
    calculations are done but the cels are not drawn.  In the latter case, the
    return value is a pointer to the cels you must draw; the oldCel and newCel
    CCBs will be linked together in the right order for drawing.  As the
    crossfade progresses the order in which the cels are drawn changes, so if
    you pass zero for the screen item you must draw the cels based on this
    function's return value.

    This function make certain assumptions about the cels.  If the cels don't
    match the assumptions your mileage may vary, visually.  Both cels should
    be single cels, not lists of cels and not anti-aliased cels.  Both cels
    should project to the same screen area.  If the cels contain transparency
    in differing locations and there are non-black pixels under the
    transparency area in the bitmap, the results may not be what you expect in
    that area.  Coded-8 cels won't work because their AMV-based scaling can't
    be mixed with the PIXC-based scaling set up by this function.  The
    ccb_NextPtr, PIXC word, and CCB_LAST flag values in both cels are modified
    on each call.  After the last call (step=15) both cels' PIXC words are
    reset to 0x1F001F00, both cels' CCB_LAST flags are set, and both cels'
    ccb_NextPtr links are NULL.  If this doesn't work for your needs, save and
    restore these values yourself, or clone the CCBs and pass the clones to
    this function.

    Other than the limitations and assumptions mentioned above, any type of
    cels should work just fine (E.G., coded/uncoded, packed/not-packed, any
    flags settings, any PLUT values, any size/perspective mapping, etc).  The
    two cels can be different types (E.G., oldCel is coded6/newCel is
    uncoded16, oldCel is LRFORM/newCel isn't, etc).

    Each cel is drawn just once; no intermediate prescale-the-bitmap drawing
    is done.

    This function is coded so that you can start at any fade level, and skip
    intermediate levels if you want.  The last step should not be skipped,
    because it's the one that restores the PIXC words.  You can also call any
    step multiple times.

  Arguments

    screen                       A Screen or Bitmap item to which the cels
                                 are drawn, or zero to bypass the internal
                                 drawing step.

    step                         A value between 0 and 15 inclusive.

    oldCel                       A pointer to the old (outgoing) cel.

    newCel                       A pointer to the new (incoming) cel.

  Return Value

    A pointer to the cels to be drawn, useful only if the screen parameter was
    zero to bypass internal drawing.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CrossFadeCels8()

##src/libs/lib3DO/autodocs.c::spg/lib3do/crossfadecels8##
CrossFadeCels8 - Crossfade between two cels.

  Synopsis

    CCB * CrossFadeCels8(Item screen, int32 step,
                         CCB *oldCel, CCB *newCel)

  Description

    This function calculates and optionally draws an 8-level crossfade between
    two cels.  The crossfade is accomplished in 8 equal steps by 8 calls to
    this function with the step parameter varying between 0 and 7 on each
    subsequent call.  Step 0 draws oldCel at 7/8 intensity and newCel at 1/8
    intensity, step 1 draws 6/8 oldCel and 2/8 newCel, and so on up to step 7
    which is 0/8 oldCel and 8/8 newCel (IE, oldCel is not drawn and newCel is
    drawn as opaque).

    The screen parameter can be either a Screen or Bitmap item in which case
    the cels are drawn on each call, or it can be zero in which case the
    calculations are done but the cels are not drawn.  In the latter case, the
    return value is a pointer to the cels you must draw; the oldCel and newCel
    CCBs will be linked together in the right order for drawing.  As the
    crossfade progresses, the order in which the cels are drawn changes, so if
    you pass zero for the screen item you must draw the cels based on this
    function's return value.

    This function make certain assumptions about the cels.  If the cels don't
    match the assumptions your mileage may vary, visually.  Both cels should
    be single cels, not lists of cels and not anti-aliased cels.  Both cels
    should project to the same screen area.  If the cels contain transparency
    in differing locations and there are non-black pixels under the
    transparency area in the bitmap, the results may not be what you expect in
    that area.  Coded-8 cels won't work because their AMV-based scaling can't
    be mixed with the PIXC-based scaling set up by this function.  The
    ccb_NextPtr, PIXC word, and CCB_LAST flag values in both cels are modified
    on each call.  After the last call (step=15) both cels' PIXC words are
    reset to 0x1F001F00, both cels' CCB_LAST flags are set, and both cels'
    ccb_NextPtr links are NULL.  If this doesn't work for your needs, save and
    restore these values yourself, or clone the CCBs and pass the clones to
    this function.

    Other than the limitations/assumptions mentioned above, any type of cels
    should work just fine (EG, coded/uncoded, packed/not-packed, any flags
    settings, any PLUT values, any size/perspective mapping, etc).  The two
    cels can be different types (EG, oldCel is coded6/newCel is uncoded16,
    oldCel is LRFORM/newCel isn't, etc).

    Each cel is drawn just once; no intermediate pre-scale-the-bitmap drawing
    is done.

    This function is coded so that you can start at any fade level, and skip
    intermediate levels if you want.  The last step should not be skipped,
    because it's the one that restores the PIXC words.  You can also call any
    step multiple times.

  Arguments

    screen                       A Screen or Bitmap item to which the cels
                                 are drawn, or zero to bypass the internal
                                 drawing step.

    step                         A value between 0 and 15 inclusive.

    oldCel                       A pointer to the old (outgoing) cel.

    newCel                       A pointer to the new (incoming) cel.

  Return Value

    A pointer to the cels to be drawn, useful only if the screen parameter was
    zero to bypass internal drawing.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CrossFadeCels()

##src/libs/lib3DO/autodocs.c::spg/lib3do/deletebasicdisplay##
DeleteBasicDisplay - Deletes a display created with
                     CreateBasicDisplay()

  Synopsis

    Err DeleteBasicDisplay(ScreenContext *sc)

  Description

    This function releases all resources acquired internally by
    CreateBasicDisplay(), and it closes the graphics folio.

  Arguments

    sc                           A pointer to the ScreenContext structure
                                 which CreateBasicDisplay() filled in.
                                 If this pointer is NULL, this function
                                 returns an error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, displayutils.h

  See Also

    CreateBasicDisplay()

##src/libs/lib3DO/autodocs.c::spg/lib3do/deletecel##
DeleteCel - Delete a cel created by any Library call implemented in lib3do.lib..

  Synopsis

    CCB * DeleteCel(CCB *cel)

  Description

    This function deletes any type of cel created by Lib3DO library functions.
    A NULL pointer is valid as input, and is quietly treated as a no-op.  If
    extra resources, such as a data buffer or PLUT, were allocated by the
    creating function they are also released.

    This function correctly handles anti-aliased cels, cels loaded as a group
    from a single cel file, and other such constructs where several related
    cels were created and treated as if they were a single cel.  If a Lib3DO
    function gives you back a single CCB* return value even when it creates
    several linked cels at once, then you need pass only that single CCB* to
    DeleteCel() to release everything allocated when the group of cels was
    created.

    This function works correctly with cels loaded from a file via LoadCel(),
    and is equivelent to UnloadCel().  It also works on TextCels created by
    the TextLib functions; DeleteCel() on the tc_CCB value of a TextCel is
    equivelent to DeleteTextCel().

    If you have custom functions for creating cels and those functions do not
    use the standard library CreateCel() function as their basis, you can
    provide  DeleteCel() support for your custom cels.  Doing so is a somewhat
    complex procedure which is fully documented in the Implementation Notes
    section of the source code file DeleteCelMagic.c in the Lib3DO source
    code.

  Arguments

    cel                          A pointer to a cel created by any Lib3DO
                                 function; may be NULL.

  Return Value

    NULL, always.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    DeleteCelList()

##src/libs/lib3DO/autodocs.c::spg/lib3do/deletecellist##
DeleteCelList - Delete a list of cels created by any Library call implemented in lib3do.lib.

  Synopsis

    CCB * DeleteCelList(CCB *celList)

  Description

    This function deletes a list of one or more cels.  It walks the
    ccb_NextPtr links calling DeleteCel() on each cel, implying that all the
    cels in the list must be ones created by DeleteCel-compatible functions.
    A NULL pointer is valid as input, and is quietly treated as a no-op.

    This function contains special logic for handling cels where the library
    function creates a related group of cels and returns a single CCB* value
    to you.  In this sense, it is not exactly equivelent to walking the
    ccb_NextPtr links.  When a group of related cels is linked into a larger
    list, you need to call DeleteCel() only for the first cel in the group of
    related cels.  This function contains logic to call DeleteCel() only on
    the first cel in such a related group, then skip over the related cels
    that get deleted all at once, and continue processing with any other cels
    linked after the related group.  For this reason, it is best to use
    DeleteCelList() if you have acquired cels from various Library call implemented in lib3do.lib.s
    and linked them together into a larger list.  If you attempt to walk the
    list yourself calling DeleteCel() on each cel, you have to keep track of
    whether any of the cels need to be skipped as you go.

  Arguments

    celList                      A pointer to a list of one or more cels
                                 created by Library call implemented in lib3do.lib.s; may be NULL.

  Return Value

    NULL, always.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    DeleteCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/deletetextcel##
DeleteTextCel - Delete a text cel and associated resources.

  Synopsis

    void DeleteTextCel(TextCel *tCel)

  Description

    Deletes the specified text cel and all resources it acquired internally
    when it was created.  If SetTextCelFormatBuffer()dynamically allocates a
    format buffer for the cel, that buffer is also released.

    Text cels are also compatible with the Lib3DO DeleteCel() and
    DeleteCelList() functions.  Those functions require a pointer to a CCB.
    When they receive a pointer to a CCB associated with a text cel,
    processing is automatically handed off to DeleteTextCel() internally.

  Arguments

    tCel                           Pointer to a TextCel structure (okay to
                                 pass NULL).

  Associated Files

    lib3do.lib, textlib.h

  See Also

    CloneTextCel(), CreateTextCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/detachtextcelccb##
DetachTextCelCCB - Release text-related resources, retaining rendered
                   pixels.

  Synopsis

    CCB * DetachTextCelCCB(TextCel *tCel)

  Description

    Releases resources required for rendering new text into a cel, but retains
    pixels already rendered.  In addition to freeing resources, this function
    removes the reference to the FontDescriptor.  You can safely unload a font
    after calling this function, and still retain text you've already
    rendered for drawing to the screen later when needed.

    Use DeleteCel()orDeleteCelList() to dispose of the CCB and cel data buffer
    when you no longer need them.  You cannot  use DeleteTextCel() on the cel
    after calling this function, since the TextCel structure has been
    discarded.

  Arguments

    tCel                         pointer to a TextCel structure.

  Return Value

    A pointer to the CCB, the value that was originally in tCel->tc_CCB.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/disablemsevent##
DisableMSEvent - Halt dispatching for one event.

  Synopsis

    void DisableMSEvent(MSEventData *theEvent, int32 reserved)

  Description

    This function temporarily disables dispatching of the specified event.  If
    a message or signal is pending at the time this function is called that
    fact is remembered and the event will be dispatched after it is
    re-enabled.  You can safely call this from within the handler for the
    event being disabled, or from a handler for another event being controlled
    by the same MSEventData array.

  Arguments

    theEvent                     A pointer to the element of the MSEventData
                                 array that describes the event to disable.

    reserved                     Reserved for future expansion; pass zero.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, msgutils.h

  See Also

    EnableMSEvent()

##src/libs/lib3DO/autodocs.c::spg/lib3do/dispatchmsevents##
DispatchMSEvents - Dispatch message and signal events to their handler
                   routines.

  Synopsis

    int32 DispatchMSEvents(MSEventHandle mseHandle,
                           void *userContext,
                           int32 reserved)

  Description

    This function waits for events and dispatches processing to the events'
    handlers.  It loops internally, waiting for messages and signals,
    dispatching the handlers when they are received, then looping back to wait
    again after the handlers return.  As long as the handlers keep returning
    zero status this function loops internally.  As soon as a handler returns
    a non-zero value this function returns that value to the caller.

    By convention, a negative return value is an error.  This may be an error
    returned by a handler function, or an error detected in waiting for and
    decoding an event.  The latter should be very rare; the process of waiting
    for a message or signal, looking up the message, and so on, is relatively
    foolproof.  It's likely to fail only if a message or port item is
    DeleteItem()'d out from under the dispatcher (so don't do that!).

  Arguments

    mseHandle                    An MSEventHandle returned by
                                 SetupMSEvents().

    userContext                  Any value you want; it is passed to the
                                 handler functions as they are dispatched.

    reserved                     Reserved for future expansion; pass zero.

  Return Value

    Returns negative on error, or any non-zero status returned by your event
    handler routines.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, msgutils.h

  See Also

    SetupMSEvents()

##src/libs/lib3DO/autodocs.c::spg/lib3do/drawanimcel##
DrawAnimCel - Draw a cel in an animation and give it a hotspot

  Synopsis

    void DrawAnimCel (ANIM *pAnim, Item bitmapItem,
                      long xPos, long YPos,
                      frac16 frameIncrement,
                      long hotSpot)

  Description

    Determines the next cel to draw in the animation specified by pAnim and
    draws it. Lets you draw a hotspot on that frame.

  Arguments

    pAnim                        Pointer to an ANIM structure returned by
                                 LoadAnim().

    An ANIM structure, defined in parse3do.h, looks as follows:

                typedef struct tag_ANIM {
                        long    num_Frames;     // max number of PDATs or CCBs in file
                        frac16  cur_Fram        // allows fract values for smooth speed
                        long    num_Alloced_Frames;
                        AnimFrame *pentries;
                } ANIM;

    bitmapItem                   item  describing the bitmap into which the
                                 cel will be drawn.

    xPos                          x (horizontal) position for a hotspot in
                                 the cel.

    YPos                          y (vertical) position for a hotspot in the
                                 cel.

    frameIncrement               a frac16, 16.16 fixed point number to add to
                                 the current frame count. This is rounded to
                                 an integer to determine the next frame in
                                 the animation. If frameIncrement increments
                                 the current frame past the end of the
                                 animation, cur_Frame will be reset to the
                                 beginning. Note that this works backwards as
                                 well.

    hotSpot                       A integer (enum) equal to one of the
                                 following (defined in utils3do.h).
                        #define CenterHotSpot           1
                        #define UpperLeftHotSpot        2
                        #define LowerLeftHotSpot        3
                        #define UpperRightHotSpot       4
                        #define LowerRightHotSpot       5

    The cel is positioned with the hotspot at xPos, YPos.

  Associated Files

    lib3do.lib, animutils.h

  See Also

    GetAnimCel(), LoadAnim()

##src/libs/lib3DO/autodocs.c::spg/lib3do/drawimage##
DrawImage - Use CopyVRAMPages() to draw an image

  Synopsis

    bool DrawImage (Item iScreen, ubyte *pbImage,
                    ScreenContext *sc)

  Description

    Uses the fast SPORT mechanism, CopyVRAMPages(), to project an image into a
    frame buffer. The image must be stored in page aligned VRAM. The function
    executes during a vertical blank.

    Note that this function creates and deletes an IOReq item to
    communicate with the SPORT device every single time it is called.
    This is not efficient and decreases performance. It is better
    to allocate the IOReq once at the beginning of a program, and
    reuse it throughout. Therefore, you're better off not using
    DrawImage(), and just call CopyVRAMPages() yourself. This
    function is useful only in a quicky do-it-just-once type of
    situation.

  Arguments

    iScreen                      Item for the screen into which to project
                                 the image.

    pbImage                      Pointer to a page-aligned buffer in VRAM
                                 containing a full-screen 16-bit image.

    sc                           Pointer to a screen context.

  Return Value

    TRUE if successful, FALSE if not.

  Associated Files

    lib3do.lib, displayutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/drawtextchar##
DrawTextChar - Draw a character into a bitmap.

  Synopsis

    void DrawTextChar (FontDescriptor *fDesc,
                       GrafCon *gcon,
                       Item bitmapItem,
                       uint32 character)

  Description

    Draws a character directly into a bitmap, using the colors and x/y
    coordinates specified in the GrafCon.

    The GrafCon's pen coordinates are interpreted as integer (not Frac16)
    values. The call updates the GrafCon's gc_PenX and gc_PenY fields to
    reflect the space the character pixels occupy within the bitmap. A newline
    (n) character moves the gc_PenY value down by the font's
    height+leading value and sets the gc_PenX value to zero.

    The foreground and background colors follow the usual rules for cels: A
    color of 000 results in transparent output, for opaque black use 001.

    This function is an extremely inefficient way to get characters onto the
    screen.  To draw more than one character, use the DrawTextString() or
    TextCel functions.

  Arguments

    fDesc                        Pointer to a FontDescriptor structure.

    gcon                         Pointer to a GrafCon structure containing
                                 the foreground and background colors and pen
                                 x/y coordinates to use in rendering the
                                 character.

    bitmapItem                   The bitmap into which the character is
                                 rendered.

    character                    The character to render.

  Associated Files

    lib3do.lib, textlib.h

  See Also

    DrawTextString()

##src/libs/lib3DO/autodocs.c::spg/lib3do/drawtextstring##
DrawTextString - Draw a text string into a bitmap.

  Synopsis

    void DrawTextString(FontDescriptor *fDesc,
                        GrafCon *gcon,
                        Item bitmapItem,
                        char *text, ...)

  Description

    Draws a text string directly into a bitmap, using the colors and x/y
    coordinates specified in the GrafCon. The text string can be a simple
    string of characters or a printf-style format string followed by
    additional arguments. If you use printf-style formatting, the resulting
    formatted string cannot exceed 1024 characters. A maximum of ten
    printf-style % formatting directives can appear in the string.  <<This
    limitation will be lifted when proper sprintf() support is added to the
    runtime library.>>

    The GrafCon's pen coordinates are interpreted as integer (not Frac16)
    values. After the call, the GrafCon's gc_PenX and gc_PenY fields have been
    updated to reflect the space the character pixels occupy within the
    bitmap. A newline (n) character moves the gc_PenY value down by the
    font's height + leading value, and sets gc_PenX to its entry-time value.
    The net effect is that when there are multiple lines of text, each line
    begins in the column specified by the initial value of gc_PenX.

    The foreground and background colors follow the usual rules for cels: a
    color of 000 results in transparent output, for opaque black use 001.

    If you use typical double-buffering screen logic, it is more efficient to
    use a TextCel to hold your text string and redraw it on each frame with
    DrawScreenCels() than to rerender the string directly into the screen
    bitmap on each frame update.

  Arguments

    fDesc                        Pointer to a FontDescriptor structure.

    gcon                         Pointer to a GrafCon structure containing
                                 the foreground and background colors and pen
                                 x/y coordinates to use in rendering the
                                 character.

    bitmapItem                   The bitmap into which the character is
                                 rendered.

    text                         The string of characters to be rendered,
                                 optionally including printf-style %
                                 formatting commands.

    ...                          Optional arguments for printf-style
                                 formatting.

  Associated Files

    lib3do.lib, textlib.h

  See Also

    DrawTextChar()

##src/libs/lib3DO/autodocs.c::spg/lib3do/enablemsevent##
EnableMSEvent - Enable dispatching for one event.

  Synopsis

    void EnableMSEvent(MSEventData *theEvent, int32 reserved)

  Description

    This function re-enables dispatching of an event previously disabled by
    DisableMSEvent().  If a message or signal was pending at the time you
    called DisableMSEvent(), or if an event arrived while the handler was
    disabled, the event is dispatched to the handler as soon as it is
    re-enabled by this function.

  Arguments

    theEvent                     A pointer to the element of the MSEventData
                                 array that describes the event to disable.

    reserved                     Reserved for future expansion; pass zero.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, msgutils.h

  See Also

    DisableMSEvent()

##src/libs/lib3DO/autodocs.c::spg/lib3do/erasetextincel##
EraseTextInCel - Clear pixels in a text cel.

  Synopsis

    void EraseTextInCel(TextCel *tCel)

  Description

    Clears existing pixels from a text cel's data buffer.  All pixels are set
    to zero.

  Arguments

    tCel                         Pointer to a TextCel structure.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/fadefromblack##
FadeFromBlack - Fade in the screen from black

  Synopsis

    void FadeFromBlack (ScreenContext *sc, int32 frameCount)

  Description

    Fades all the screens in the ScreenContext from black over frameCount.

  Arguments

    sc                           Pointer to a ScreenContext

    frameCount                   Number of frames over which the fade will
                                 occur. After nFrames, all the color entries
                                 in the CLUT have their correct color value.

  Associated Files

    lib3do.lib, displayutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/fadetoblack##
FadeToBlack - Fade the screen to black

  Synopsis

    void FadeToBlack (ScreenContext *sc, int32 nFrames)

  Description

    Fades all the screens in the nFrames to black over nFrames.

  Arguments

    sc                           Pointer to a ScreenContext

    nFrames                      Number of frames over which the fade will
                                 occur. After nFrames, all the color entries
                                 in the CLUT will be zero, or black.

  Associated Files

    lib3do.lib, displayutils.h

  See Also

    FadeFromBlack()

##src/libs/lib3DO/autodocs.c::spg/lib3do/findchunk##
FindChunk - Find a chunk of specified chunk ID

  Synopsis

    char *FindChunk (ulong chunk_ID, char **buffer, long *bufLen)

  Description

    Searches buffer until it finds chunk_ID. On exit, updates the buffer
    pointer that is to point to the next chunk and bufLen to contain the
    number of bytes remaining in the buffer.

  Arguments

    chunk_ID                     ID of the chunk you are looking for.

    *buffer                      Pointer to the buffer you are looking for.

    bufLen                       Number of bytes in the buffer that follow
                                 the chunk.

  Return Value

    Returns NULL or a pointer to the chunk.

##src/libs/lib3DO/autodocs.c::spg/lib3do/finishasyncloadfile##
FinishAsyncLoadFile - Finalize an async file load operation.

  Synopsis

    Err FinishAsyncLoadFile(LoadFileInfo *lf, Err loadStatus)

  Description

    This function releases resources no longer needed after completion of an
    async file load, leaving just the file data in the buffer (if the load was
    successful).

    If you received I/O completion nofitication via message, call this
    function passing ioreqPtr->io_Error as the loadStatus value and
    ioreqPtr->io_User as the LoadFileInfo pointer.  If you detected I/O
    completion using CheckAsyncLoadFile(), pass the return value from that
    function as the loadStatus value.

    If the loadStatus value is negative and a buffer was automatically
    allocated by AsyncLoadFile() this function frees the buffer.  It release
    other resources (IOReq, etc) in all cases.

  Arguments

    lf                           A pointer to the LoadFileInfo structure for
                                 the load operation.

    loadStatus                   The status returned by CheckAsyncLoadFile()
                                 or contained in the I/O completion message
                                 you received.

  Return Value

    Returns the loadStatus value you passed in.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, blockfile.h

  See Also

    AsyncLoadFile()

##src/libs/lib3DO/autodocs.c::spg/lib3do/fpointfromfval##
FPointFromFVal - Create an FPoint from inline values.

  Synopsis

    FPoint * FPointFromFVal(FPoint *dst, frac16 x, frac16 y)

  Description

    This function stores the specified x and y values into *dst.  It is useful
    for writing inline calls such as:

    FPoint    wrk;
    OffsetCelListByFDelta (cel, FPointFromFVal (&wrk, my_x, my_y));

  Arguments

    dst                          A pointer to the FPoint where the results
                                 are to be stored.

    x                            The value to assign to dst->x.

    y                            The value to assign to dst->y.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    FPointFromIVal()

##src/libs/lib3DO/autodocs.c::spg/lib3do/fpointfromipoint##
FPointFromIPoint - Convert an IPoint to an FPoint.

  Synopsis

    FPoint * FPointFromIPoint(FPoint *dst, IPoint *src)

  Description

    This function converts an IPoint to an FPoint.

  Arguments

    dst                          A pointer to the FPoint where the results
                                 are to be stored.

    src                          A pointer to the IPoint to be converted.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    IPointFromFPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/fpointfromival##
FPointFromIVal - Create an FPoint from inline values.

  Synopsis

    FPoint * FPointFromIVal(FPoint *dst, int32 x, int32 y)

  Description

    This function converts the specified values from integer to frac16 and
    stores them in *dst.  It is useful for writing inline calls such as:

    FPoint      wrk;
    OffsetCelListByFDelta (cel, FPointFromIVal (&wrk, 2, 2));

  Arguments

    dst                          A pointer to the FPoint where the results
                                 are to be stored.

    x                            The value to be converted into dst->x.

    y                            The value to be converted into dst->y.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    FPointFromFVal()

##src/libs/lib3DO/autodocs.c::spg/lib3do/getanimcel##
GetAnimCel - Return a pointer to the CCB of the next animation cel

  Synopsis

    CCB * GetAnimCel (ANIM *pAnim, frac16 frameIncrement)

  Description

    Returns a pointer to the CCB of the next cel in an animation sequence.
    Adds frameIncrement to the current frame counter within the ANIM. Does not
    draw the cel.

  Arguments

    pAnim                        pointer to an ANIM structure returned by
                                 LoadAnim().  The ANIM structure is defined as
                                 follows:

                typedef struct tag_ANIM {
                        long    num_Frames;     // max number of PDATs or CCBs in file
                        frac16  cur_Frame;      // allows fract values for smooth speed
                        long    num_Alloced_Frames;
                        AnimFrame *pentries;
                } ANIM;

    frameIncrement               a frac16 (16.16) fixed point number.

  Return Value

    Pointer to the CCB that was found at the specified position in the
    animation.

  Associated Files

    lib3do.lib, animutils.h

  See Also

    DrawAnimCel(), LoadAnim()

##src/libs/lib3DO/autodocs.c::spg/lib3do/getcelbitsperpixel##
GetCelBitsPerPixel - Return a cel's bits per pixel value.

  Synopsis

    int32 GetCelBitsPerPixel(CCB *cel)

  Description

    This function returns the bits-per-pixel value for the cel, determined by
    examining the cel's preamble data.

    This function exists primarily to support library internals, but may be
    useful for applications as well.

  Arguments

    cel                          A pointer to a cel.

  Return Value

    Bits per pixel, one of 1, 2, 4, 6, 8, or 16.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/getcelbytesperrow##
GetCelBytesPerRow - Return a cel's bytes per row value.

  Synopsis

    int32 GetCelBytesPerRow(CCB *cel)

  Description

    This function returns the bytes-per-row value for the cel, determined by
    examing the cel's preamble data.  The calculations take into account the
    cel's bit per pixel and source width values, and padding for the cel
    engine's alignment and lookahead requirements.

    This function exists primarily to support library internals, but may be
    useful for applications as well.

  Arguments

    cel                          A pointer to a cel.

  Return Value

    Bytes per row.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/getceldatabuffersize##
GetCelDataBufferSize - Return a celxd5 s data buffer size.

  Synopsis

    int32 GetCelDataBufferSize(CCB *cel)

  Description

    This function calculates the size needed for a cel data buffer based on
    the values found in the cel's preamble words.  The calculations take into
    account the cel's bit per pixel and source width and height values, and
    padding for the cel engine's alignment and lookahead requirements.

    The return value is the size needed for the buffer, and not necessarily
    the size of the buffer currently attached to the cel.  For example, using
    this function on a SubRect cel would return the size needed for the
    sub-rectangle, not the size currently used by the full-size source data
    attached to the cel.

    This function can be called when the cel has no buffer yet, providing that
    the CCB_CCBPRE flag is set.  In this sense, it can be useful for
    calculating how big a data buffer to allocate.

    This function exists primarily to support library internals, but may be
    useful for applications as well.

  Arguments

    cel                          A pointer to a cel.

  Return Value

    Bytes needed for the buffer.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/getfontcharinfo##
GetFontCharInfo - Retrieve character information.

  Synopsis

    int32 GetFontCharInfo(FontDescriptor *fDesc,
                          int32 character, void **blitInfo)

  Description

    Returns information about the specified character. The return value is the
    width of the character (not including intercharacter spacing). The void
    pointer at *blitInfo will contain a special value to speed up processing
    within BlitFontChar().

    GetFontCharInfo() supports the internals of the text library; it should
    never be necessary to call this function directly from an application
    program. If you are implementing your own replacement text library, use
    GetFontcharInfo() to obtain information about font character pixels before
    blitting them into your own memory buffer. You can use the standard text
    library source code as a guide in creating your own text library.

  Arguments

    fDesc                        Pointer to a FontDescriptor structure.

    character                    The specific character you're looking for.

    blitInfo                     A void pointer updated by this call and then
                                 passed to the BlitFontChar() call.

  Return Value

    The width of the character; zero if the character is not present in the
    font.

  Associated Files

    lib3do.lib, fontlib.h

  See Also

    BlitFontChar(), GetFontCharWidth()

##src/libs/lib3DO/autodocs.c::spg/lib3do/getfontcharwidest##
GetFontCharWidest - Retrieve width of the widest character in a string.

  Synopsis

    int32 GetFontCharWidest(FontDescriptor *fDesc, char *string)

  Description

    Returns the width in pixels of the widest character in the string.

  Arguments

    fDesc                          Pointer to a FontDescriptor structure.

    string                         The string to be scanned for the widest
                                 character width.

  Return Value

    The width of the widest character.

  Associated Files

    lib3do.lib, fontlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/getfontcharwidth##
GetFontCharWidth - Retrieve character width.

  Synopsis

    int32 GetFontCharWidth(FontDescriptor *fDesc, int32 character)

  Description

    Retrieves the width of the specified character in the font. The return
    value is the width of the character (not including intercharacter
    spacing).

  Arguments

    fDesc                          Pointer to a FontDescriptor structure.

    character                      The specific character you're looking for.

  Return Value

    The width of the character; zero if the character is not present in the
    font.

  Associated Files

    lib3do.lib, fontlib.h

  See Also

    GetFontStringWidth()

##src/libs/lib3DO/autodocs.c::spg/lib3do/getfontstringwidth##
GetFontStringWidth - Calculate width of a string.

  Synopsis

    int32 GetFontStringWidth(FontDescriptor *fDesc, char *string)

  Description

    Calculates the  width of the specified string.  The return value is the
    sum of the widths of the characters in the string.  The sum includes the
    spacing between each character, but not following the final character.

  Arguments

    fDesc                          Pointer to a FontDescriptor structure.

    string                         The character string.

  Return Value

    The width of the string.

  Associated Files

    lib3do.lib, fontlib.h

  See Also

    GetFontCharWidth()

##src/libs/lib3DO/autodocs.c::spg/lib3do/gethsectime##
GetHSecTime - Obtain the current time in hundreths of a second.

  Synopsis

    int32 GetHSecTime(Item ioreq)

  Description

    This function obtains the current value of the system microsecond timer,
    converts the seconds and microseconds into a single hundreths-of-a-second
    value, and returns the converted value.

    The return value will overflow an int32 representation after the machine
    has been powered on for about 250 days.  In other words, this function is
    probably appropriate for debugging and performance measurement, but may
    NOT be appropriate for a final application, since some application
    environments (such as cable TV) are almost certain to run on a machine
    powered on for months at a time.

  Arguments

    ioreq                        An IOReq item obtained from GetTimerIOReq(),
                                 or zero to have an IOReq dynamically
                                 created/deleted during the call.

  Return Value

    Returns positive number of hundreths-of-a-second or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    GetTimerIOReq()

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextcelcolor##
GetTextCelColor - Retrieve background and foreground colors when cel is
                  drawn.

  Synopsis

    void GetTextCelColor(TextCel *tCel,  int32 *bgColor,
                         int32 *fgColor0)

  Description

    Retrieves the background and foreground colors used when the cel is drawn.

  Arguments

    t                            Cel  Pointer to a TextCel structure.

    bgColor                      Pointer to a variable to receive the
                                 background color value.  May be NULL.

    fgColor                      Pointer to a variable to receive the
                                 foreground color value.  May be NULL.

  Associated Files

    lib3do.lib, textlib.h

  See Also

    GetTextCelColors()

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextcelcolors##
GetTextCelColors - Retrieve background and all four foreground colors.

  Synopsis

    void GetTextCelColors(TextCel *tCel, int32 bgColor,
                          int32 fgColors[4])

  Description

    Retrieves the background and foreground colors used when the cel is drawn.
    This function gets all four foreground colors; use it with the features
    that allow multiple text colors within a single cel. The fgColors
    parameter must be a pointer to an array of exactly four int32 values.

  Arguments

    tCel                         Pointer to a TextCel structure.

    bgColor                      Pointer to a variable to receive the
                                 background color value.  May be NULL.

    fgColor                      Pointer to an array to receive the
                                 foreground color values.  May be NULL.

  Associated Files

    lib3do.lib, textlib.h

  See Also

    GetTextCelColor()

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextcelcoords##
GetTextCelCoords - Retrieve text cel's CCB coordinates.

  Synopsis

    void GetTextCelCoords(TextCel *tCel, Coord *ccbX, Coord *ccbY)

  Description

    Retrieves the TextCel CCB coordinates (ccb_XPos and ccb_YPos).

    If you find it convenient to do so, work with the CCB's position,
    size, and perspective fields directly; you don't have to use this
    function to safely obtain the on screen position.

    The ccbX and ccbY values are interpreted as frac16 values (the same as the
    ccb_XPos and ccb_YPos fields themselves).

  Arguments

    tCel                         Pointer to a TextCel structure.

    ccbX                         Pointer to a variable to receive the x
                                 coordinate for the text cel CCB.

    ccbY                         Pointer to a variable to receive the y
                                 coordinate for the text cel CCB.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextcelformatbuffer##
GetTextCelFormatBuffer - Retrieve text cel format buffer and size.

  Synopsis

    void GetTextCelFormatBuffer(TextCel *tCel, char **buffer,
                                uint32 *bufSize)

  Description

    Retrieves the cel's formatting buffer and size. The format buffer is
    used for printf-style formatting of text during rendering. If the buffer
    size is zero, the buffer pointer is not valid.

  Arguments

    tCel                         Pointer to a TextCel structure.

    buffer                       Pointer to a variable to receive the pointer
                                 to the format buffer.

    bufsize                      Pointer to a variable to receive the size of
                                 the format buffer.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextcelformatflags##
GetTextCelFormatFlags - Retrieve text cel format flags.

  Synopsis

    uint32 GetTextCelFormatFlags(TextCel *tCel, uint32 *flags)

  Description

    Retrieves the cel's formatting flags.

  Arguments

    tCel                         Pointer to a TextCel structure.

    flags                        If non-NULL, the format flags are stored at
                                 *flags.

  Return Value

    The format flags.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextcelleadingadjust##
GetTextCelLeadingAdjust - Retrieve text cel leading adjustment.

  Synopsis

    void GetTextCelLeadingAdjust(TextCel *tCel, int32 *adjustLeading)

  Description

    Retrieves the leading adjustment for text rendered in the cel. (Leading is
    the extra vertical space between lines of text.)

  Arguments

    tCel                         Pointer to a TextCel structure.

    adjustLeading                Pointer to a variable to receive the value
                                 added to the base leading value for the
                                 font.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextcelmargins##
GetTextCelMargins - Retrieve top and left margins.

  Synopsis

    void GetTextCelMargins(TextCel *tCel, int32 *leftMargin,
                           int32 *topMargin)

  Description

    Retrieves the top and left margins within the cel data buffer.

  Arguments

    tCel                         Pointer to a TextCel structure.

    leftMargin                   Pointer to a variable to receive the left
                                 margin for the cel.

    topMargin                    Pointer to a variable to receive the top
                                 margin for the cel.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextcelpennumber##
GetTextCelPenNumber - Retrieve text cel pen number.

  Synopsis

    void GetTextCelPenNumber(TextCel *tCel, int32 *penNumber)

  Description

    Retrieves pen number used for text rendering.

  Arguments

    tCel                         Pointer to a TextCel structure.

    penNumber                    Pointer to a variable to receive the pen
                                 number.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextcelsize##
GetTextCelSize - Retrieve text cel's current size.

  Synopsis

    void GetTextCelSize(TextCel *tCel, int32 *width, int32 *height)

  Description

    Retrieves the current size for the text cel. You can also obtain the
    current size of a cel by reading the ccb_Width and ccb_Height fields in
    the cel's CCB. Note that this retrieves the on screen size of the cel,
    not the size of the text currently in the cel. (The text currently in the
    cel may not fill the complete width or height of the cel.)

  Arguments

    tCel                         Pointer to a TextCel structure.

    width                        Pointer to a variable to receive the width
                                 for the cel.

    height                       Pointer to a variable to receive the height
                                 for the cel.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextcelspacingadjust##
GetTextCelSpacingAdjust - Retrieve spacing adjustment.

  Synopsis

    void GetTextCelSpacingAdjust(TextCel *tCel, int32 *adjustSpacing)

  Description

    Retrieves the spacing adjustment for text rendered in the cel. Spacing is
    the extra horizontal space between characters in the text.

  Arguments

    tCel                         Pointer to a TextCel structure.

    adjustSpacing                Pointer to a variable to receive the value
                                 added to the base spacing value for the
                                 font.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextceltabstops##
GetTextCelTabStops - Retrieve tab stops table.

  Synopsis

    void GetTextCelTabStops(TextCel *tCel, uint16 tabStops[16])

  Description

    Retrieves the tab stops table for the text cel.  A full table of 16 values
    is stored even if some of the values are unused.  The end of the valid
    entries in the table is marked with a zero.

  Arguments

    tCel                         Pointer to a TextCel structure.

    tabStops                     Pointer to an array of uint16 that receives
                                 the tab stops table.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettextextent##
GetTextExtent - Retrieve width and height for formatted text.

  Synopsis

    char * GetTextExtent(TextCel *tCel, int32 *pWidth,
                         int32 *pHeight, char *fmtString, ...)

  Description

    Calculates the on-screen extent that would be used by the formatted text.
    GetTextExtent formats text (if necessary), calculates the pixel width and
    height required to display the text, and returns width/height values via
    the pointers you provide.  The function return value is a pointer to the
    formatted text (with printf-style formatting already resolved), a feature
    that is mainly a convenience for the text library internals.

    This function does not take clipping into account; the returned width and
    height may be larger than the current size of the text cel specified. As a
    result, you can use this function to determine whether a cel needs to be
    expanded by comparing the width and height it returns with the ccb_Width
    and ccb_Height fields in the current cel.

    The related vGetTextExtent() function works exactly the same, but takes a
    va_list type instead of the ... parameters.

  Arguments

    tCel                         Pointer to a TextCel structure.

    pWidth                       Pointer to the variable into which the width
                                 is returned.

    pHeight                      Pointer to the variable into which the
                                 height is returned.

    fmtString                    The string of characters to be rendered,
                                 optionally including printf-style %
                                 formatting commands.

    ...                          Arguments for printf-style formatting
                                 (optional).

  Return Value

    A pointer to the formatted text.

  Associated Files

    lib3do.lib, textlib.h

  See Also

    vGetTextExtent()

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettime##
GetTime - Obtain the current time in seconds.

  Synopsis

    int32 GetTime(Item ioreq)

  Description

    This function obtains the current value of the system microsecond timer
    and returns just the seconds portion.

  Arguments

    ioreq                        An IOReq item obtained from GetTimerIOReq(),
                                 or zero to have an IOReq dynamically
                                 created/deleted during the call.

  Return Value

    Positive number of seconds or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    GetTimerIOReq()

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettimerioreq##
GetTimerIOReq - Get an IOReq for use with timer utilities.

  Synopsis

    Item GetTimerIOReq(void)

  Description

    This function obtains an IOReq item for use with the other timer utilties
    that take an IOReq parm.  Use DeleteItem() to release the IOReq item when
    you no longer need it.

    The timer-relatated functions which take an IOReq parm will perform much
    faster if you allocate an IOReq using this function and pass it to the
    other functions.  Letting the other functions create and delete an IOReq
    on each call is appropriate only if you're planning to call the function
    just a couple times throughout the run of your program.

  Return Value

    An IOReq item number, or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/gettsectime##
GetTSecTime - Obtain the current time in tenths of a second.

  Synopsis

    int32 GetTSecTime(Item ioreq)

  Description

    This function obtains the current value of the system microsecond timer,
    converts the seconds and microseconds into a single tenths-of-a-second
    value, and returns the converted value.

    The return value will overflow an int32 representation after the machine
    has been powered on for about 7 years.  Chances are good that this is safe
    even in a cable TV or other long-running environment.

  Arguments

    ioreq                        An IOReq item obtained from GetTimerIOReq(),
                                 or zero to have an IOReq dynamically
                                 created/deleted during the call.

  Return Value

    Positive number of tenths-of-a-second or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    GetTimerIOReq()

##src/libs/lib3DO/autodocs.c::spg/lib3do/getusectime##
GetUSecTime - Obtain the current time in microseconds.

  Synopsis

    int32 GetUSecTime(Item ioreq, uint32 *seconds, uint32 *useconds)

  Description

    This function obtains the current value of the system microsecond timer
    and stores the results at *seconds and *useconds.  Either pointer can be
    NULL if you don't need that part of the result.

  Arguments

    ioreq                        An IOReq item obtained from GetTimerIOReq(),
                                 or zero to have an IOReq dynamically
                                 created/deleted during the call.

    seconds                      A pointer to a variable into which the
                                 high-order (full seconds) portion of the
                                 time is stored

    useconds                     A pointer to a variable into which the
                                 low-order (microseconds) portion of the time
                                 is stored.

  Return Value

    The high-order portion of the time (full seconds, a positive value), or a
    negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    GetTimerIOReq()

##src/libs/lib3DO/autodocs.c::spg/lib3do/getvbltime##
GetVBLTime - Obtain the current VBL timer values.

  Synopsis

    int32 GetVBLTime(Item ioreq, uint32 *hiorder, uint32 *loworder)

  Description

    This function obtains the current value of the system VBL timer and stores
    the results at *hiorder and *loworder.  Either pointer can be NULL if you
    don't need that part of the result.  The low-order part of the VBL timer
    is generally of the most interest; it doesn't roll over into the
    high-order part until after roughly 800 days of continuous running without
    a reboot.

  Arguments

    ioreq                        An IOReq item obtained from GetTimerIOReq(),
                                 or zero to have an IOReq dynamically
                                 created/deleted during the call.

    hiorder                      A pointer to a variable into which the
                                 high-order portion of the VBL time is
                                 stored.

    loworder                     A pointer to a variable into which the
                                 low-order portion of the VBL time is stored.

  Return Value

    The low-order portion of the VBL time (a positive value), or a negative
    error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    GetTimerIOReq()

##src/libs/lib3DO/autodocs.c::spg/lib3do/hz_to_usec##
HZ_TO_USEC - Convert hertz to microseconds.

  Synopsis

    int32 HZ_TO_USEC(value)

  Description

    This macro converts a value expressed in hertz (cycles or ticks per
    second) to the equivelent number of microseconds for each tick.  True
    floating point constant values are legal, for example HZ_TO_USEC(2.5).
    The compiler will resolve the constant at compile time without needing
    runtime floating point support.  The macro is usable in expression context
    and only evaluates its argument once.

  Arguments

    value                        An integer constant or variable, or a
                                 floating point constant to be converted to
                                 microseconds.

  Return Value

    The number of microseconds.

  Implementation

    Macro

  Associated Files

    lib3do.lib, timerutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/icornerfromsrect##
ICornerFromSRect - Calculate the opposite corner in an SRect.

  Synopsis

    IPoint * ICornerFromSRect(IPoint *dst, SRect *src)

  Description

    This function calculates the opposite corner of the area described by the
    src rectangle, and stores the results at *dst.

  Arguments

    dst                          A pointer to the IPoint where the results
                                 are to be stored.

    src                          A pointer to an SRect.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    XCORNERFROMSRECT(), YCORNERFROMSRECT(), ISizeFromCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/insetcrect##
InsetCRect - Shrink or enlarge a CRect.

  Synopsis

    CRect * InsetCRect(CRect *dst, IPoint *delta)

  Description

    This function shrinks or enlarges the amount of area described by the dst
    rectangle.  Positive delta values shrink the area, negative values enlarge
    the area.

  Arguments

    dst                          A pointer to the CRect to manipulate.

    delta                        A pointer to the delta values to apply to
                                 dst.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    InsetSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/insetsrect##
InsetSRect - Shrink or enlarge an SRect.

  Synopsis

    SRect * InsetSRect(SRect *dst, IPoint *delta)

  Description

    This function shrinks or enlarges the amount of area described by the dst
    rectangle.  Positive delta values shrink the area, negative values enlarge
    the area.

  Arguments

    dst                          A pointer to the SRect to manipulate.

    delta                        A pointer to the delta values to apply to
                                 dst.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    InsetCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/ipointfromfpoint##
IPointFromFPoint - Convert an FPoint to an IPoint.

  Synopsis

    IPoint * IPointFromFPoint(IPoint *dst, FPoint *src)

  Description

    This function converts an FPoint to an IPoint.

  Arguments

    dst                          A pointer to the IPoint where the results
                                 are to be stored.

    src                          A pointer to the FPoint to be converted.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    FPointFromIPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/ipointfromfval##
IPointFromFVal - Create an IPoint from inline values.

  Synopsis

    IPoint * IPointFromFVal(IPoint *dst, frac16 x, frac16 y)

  Description

    This functions converts the specified values from frac16 to integer and
    stores them at *dst.  It is useful for writing inline calls such as:

    IPoint      wrk;
    OffsetCelListByIDelta (cel, IPointFromFVal (&wrk, my_x, my_y));

  Arguments

    dst                          A pointer to the IPoint where the results
                                 are to be stored.

    x                            The value to be converted into dst->x.

    y                            The value to be converted into dst->y.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    IPointFromIVal(), FPointFromFVal()

##src/libs/lib3DO/autodocs.c::spg/lib3do/ipointfromival##
IPointFromIVal - Create an IPoint from inline values.

  Synopsis

    IPoint * IPointFromIVal(IPoint *dst, int32 x, int32 y)

  Description

    This functions stores the specified values at *dst.  It is useful for
    writing inline calls such as:

    IPoint    wrk;
    OffsetCelListByIDelta (cel, IPointFromFVal(&wrk, my_x, my_y));

  Arguments

    dst                          A pointer to the IPoint where the results
                                 are to be stored.

    x                            The value to be stored into dst->x.

    y                            The value to be stored into dst->y.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    IPointFromFVal(), FPointFromIVal()

##src/libs/lib3DO/autodocs.c::spg/lib3do/ipointisincrect##
IPointIsInCRect - Determine whether a point is within a rectangle.

  Synopsis

    Boolean IPointIsInCRect(IPoint *point, CRect *rect)

  Description

    This function determines whether the point is within the rectangle.
    Points on the edge are considered within the rectange.

  Arguments

    point                        A pointer to an IPoint.

    rect                         A pointer to a CRect.

  Return Value

    TRUE if the point is in the rectangle, FALSE if it is not.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    IPointIsInSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/ipointisinsrect##
IPointIsInSRect - Determine whether a point is within a rectangle.

  Synopsis

    Boolean IPointIsInSRect(IPoint *point, SRect *rect)

  Description

    This function determines whether the point is within the rectangle.
    Points on the edge are considered within the rectange.

  Arguments

    point                        A pointer to an IPoint.

    rect                         A pointer to an SRect.

  Return Value

    TRUE if the point is in the rectangle, FALSE if it is not.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    IPointIsInCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/is_lastcel##
IS_LASTCEL - Determine whether a cel is the last in a list.

  Synopsis

    Boolean IS_LASTCEL(CCB *ccb)

  Description

    This macro evaluates to TRUE if no cels are linked to ccb, or FALSE if
    other cels are linked to ccb.

    This macro evaluates its argument more than once; be careful of side
    effects.   It is usable in expression context.

  Arguments

    ccb                          A pointer to a cel.

  Return Value

    TRUE if no cels are linked to this one; FALSE if cels are linked to this
    one.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    LastCelInList()

##src/libs/lib3DO/autodocs.c::spg/lib3do/isizefromcrect##
ISizeFromCRect - Calculate the size of a CRect.

  Synopsis

    IPoint * ISizeFromCRect(IPoint *dst, CRect *src)

  Description

    This function calculates the width and height of the area described by the
    src rectangle and stores the results at *dst.

  Arguments

    dst                          A pointer to the IPoint where the results
                                 are to be stored.

    src                          A pointer to a CRECT.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    XSIZEFROMCRECT(), YSIZEFROMCRECT(), ICornerFromSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/lastcelinlist##
LastCelInList - Find the last cel in a list.

  Synopsis

    CCB * LastCelInList(CCB *list)

  Description

    This function returns a pointer to the last cel in a list of one or more
    cels.

  Arguments

    list                         A pointer to a list of cels; may be NULL.

  Return Value

    A pointer to the last cel in the list, or NULL if the list pointer is
    NULL.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    IS_LASTCEL()

##src/libs/lib3DO/autodocs.c::spg/lib3do/linkcel##
LinkCel - Links two cels

  Synopsis

    void LinkCel( CCB *ccb, CCB *nextCCB )

  Description

    Links nextCCB to ccb by setting ccb's NextPtr field to nextCCB turning
    off the CCB_LAST flag in ccb's ccb_Flags field by setting CCB_LAST to
    NULL

    This function does not splice nextCCB into an existing list. It only
    replaces value of ccb_NextPtr in ccb to point to nextCCB.

  Arguments

    ccb                          Pointer to the CCB being linked.

    nextCCB                      Pointer to the CCB being added to the list.

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/loadanim##
LoadAnim - Load an animation

  Synopsis

    ANIM * LoadAnim (char *fileName, uint32 memTypeBits)

  Description

    Loads an animation file from disk. Parses the cels within the animation
    into an ANIM structure and returns a pointer to the ANIM.

    The animation file can be single-CCB or multi-CCB format. An optional ANIM
    chunk may appear at the start of the file. The file can contain pixel and
    color chunks in either PDAT, PLUT or PLUT, PDAT order, but the chunks must
    appear in the same order throughout the file. (3DO Animator creates PLUT,
    PDAT files; PDAT, PLUT files result from concatenating cel files using
    MPW.)

    When you are finished with the animation, use UnloadAnim() to free all
    resources acquired by LoadAnim() for a given animation file.

    The frames within an animation are allocated incrementally. Initially a
    block large enough to hold N_FRAMES_PER_CHUNK frames is allocated. If this
    is exceeded while reading the ANIM then a block with space for
    N_FRAMES_PER_CHUNK additional frames is allocated, the previously computed
    frames are copied into this new space, and the old full buffer space is
    deallocated

    The following structures are used by LoadAnim().

                typedef struct tag_AnimFrame {
                        CCB             *af_CCB;// Pointer to CCB for this frame
                        char    *af_PLUT;       // Pointer to PLUT for this frame
                        char    *af_pix;        // Pointer to pixels for this frame
                        int32   reserved;
                } AnimFrame;

                typedef struct tag_ANIM {
                        long    num_Frames;     // max number of PDATs or CCBs in file
                        frac16  cur_Frame;      // allows fract values for smooth speed
                        long    num_Alloced_Frames;
                        AnimFrame *pentries;
                } ANIM;

    The frames within an ANIM are allocated incrementally. Initially a block
    large enough to hold N_FRAMES_PER_CHUNK frames is allocated. If this is
    exceeded while reading the ANIM then a block with space for
    N_FRAMES_PER_CHUNK additional AnimFrames is allocated, the previously
    computed frames are copied into this new space, and the old full AnimFrame
     buffer space is deallocated

  Arguments

    fileName                     Pointer to the file name string.

    memTypeBits                  Type of memory to use when loading the file;
                                 usually MEMTYPE_ANY.

  Return Value

    A pointer to an ANIM structure, or NULL if an error occurred.

  Associated Files

    lib3do.lib, animutils.h

  See Also

    UnloadAnim(), GetAnimCel(), DrawAnimCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/loadcel##
LoadCel  - Load one or more cels from a file.

  Synopsis

    CCB * LoadCel (char *filename, uint32 memTypeBits)

  Description

    This function loads a cel or related group of  cels from a file.  Memory
    for the file is allocated according to memTypeBits, then the entire file
    is loaded into the buffer using fast block I/O.  After the file is loaded,
    the cel(s) in the buffer are parsed by the ParseCel() function.

    If the file contains more than one cel, the CCBs are strung together via
    their ccb_NextPtr fields in the same order as they are encountered in the
    buffer.  This allows you to store a group of related cels in one file, and
    treat them as a single logical entity using the other CelUtils library
    functions that work with lists of cels.

    This function also contains special handling for anti-aliased cels.
    AACels are two cels stored together in the same file, but the CCBs are
    stored in reverse order of the way they must be drawn.  AACels are
    recognized by a characteristic signature (exactly two cels, one is 4-bit
    coded the other 16-bit uncoded, same size and coordinates, etc), and when
    detected the CCB links are automatically reversed so the return value is a
    list of two cels linked in the proper order for drawing.  One drawback to
    the signature-detection logic is that it prevents the storage of multiple
    related anti-aliased cels in the same file.

    Use DeleteCel() or UnloadCel() to release the resources acquired when the
    cel file is loaded.  When the file contains several cels, or an
    anti-aliased cel, use DeleteCel() or UnloadCel() only on the first cel in
    the file.  That is, pass the pointer returned by this function.
    DeleteCel() will delete all the cels at once.

    DeleteCelList() contains special logic to treat a group of cels loaded
    from the same file as if they were one cel.  If more cels were linked in
    the list following a group loaded from the same file, DeleteCelList()
    calls DeleteCel() for the first cel in the group, then skips to the end of
    the group and resumes walking the ccb_NextPtr links as normal for the rest
    of the cels.  This implies that you cannot load a group of cels from a
    file and then break apart the links built by LoadCel() and relink the cels
    into different lists.  Doing so would confuse the logic in
    DeleteCelList().

  Arguments

    filename                     desc

    memTypeBits                  desc

  Return Value

    A pointer to the cel or list of cels loaded from the file.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    ParseCel(), DeleteCel, DeleteCelList, UnloadCel

##src/libs/lib3DO/autodocs.c::spg/lib3do/loadfile##
LoadFile - Loads a cel file from disk

  Synopsis

    void * LoadFile (char *fileName, long *fileSizePtr,
                     uint32 memTypeBits)

  Description

    Loads an entire file into a buffer in memory. This function allocates a
    buffer, loads the file into it, and returns a pointer to the allocated
    buffer. The size of the file is returned into a longword via the
    fileSizePtr parameter.

    Note that the buffer is allocated to an even multiple of the device's
    blocksize (2 KB for CD-ROM and the Mac link), and thus may be slightly
    larger than the actual size of the file. The file size returned via
    fileSizePtr, however, reflects the actual size of the file without the
    extra padding required to achieve an integral device block size.

    This function is approximately 3-4 times as fast as the old method of
    loading a file using GetFileSize(), allocating a buffer, calling
    ReadFile(). When you are finished with the file, use UnloadFile() to free
    the file buffer.

    If an error returns, the function return value is NULL and the longword at
    the *fileSizePtr contains the error status. A return value of NULL with an
    error status of zero indicates that the file exists but contains no data;
    in this cas, no buffer was allocated.

  Arguments

    fileName                     Pointer to the file name string.

    fileSizePtr                  Pointer to a longword which receives the
                                 length of file (in bytes). If you donxd5 t
                                 need the length, a NULL pointer can be
                                 passed for this parameter.

    memTypeBits                  Type of memory to use when loading the file;
                                 usually MEMTYPE_ANY or MEMTYPE_VRAM.

  Return Value

    A pointer to loaded file in memory, or NULL if an error occurred.

  Associated Files

    lib3do.lib, blockfile.h

  See Also

    UnloadFile(), LoadFileHere(), AsyncLoadFile()

##src/libs/lib3DO/autodocs.c::spg/lib3do/loadfilehere##
LoadFileHere - Load a file into a pre-allocated buffer.

  Synopsis

    void * LoadFileHere(char *fname, int32 *pfsize,
                        void *buffer, int32 bufsize)

  Description

    This function loads a file into a buffer you allocate.  It is identical to
    LoadFile() except that it lets you allocate the buffer.  If the bufsize
    parameter is non-zero, this function checks to ensure that the file will
    fit in the specified buffer.  The actual size of the file, which may be
    smaller than the buffer, is stored at *pfsize.  If an error occurs the
    word at *pfsize will contain a negative error code.

    When allocating a buffer, remember that the buffer has to be an integral
    multiple of the file device's blocksize.  That is, loading a 700 byte file
    from a CD still requires a 2k buffer.  A useful space-saving technique
    involves loading a small file into the inactive screen buffer in VRAM then
    copying it (or perhaps just a small portion of it that you need) to a
    right-sized buffer elsewhere in memory.

  Arguments

    fname                        The name of the file to load.

    pfsize                       A pointer to a word which, after the call,
                                 holds the actual size of the file.

    buffer                       A pointer to a buffer large enough to hold
                                 the file.

    bufsize                      The size of the buffer, or zero to disable
                                 overflow checking.

  Return Value

    Returns a pointer to the buffer, or NULL on error.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, blockfile.h

  See Also

    LoadFile(), AsyncLoadFile()

##src/libs/lib3DO/autodocs.c::spg/lib3do/loadfont##
LoadFont - Load 3DO font file.

  Synopsis

    FontDescriptor * LoadFont(char *fileName, uint32 memTypeBits)

  Description

    Loads a font from the specified file and prepares it for use.

    Use UnloadFont() to release all resources acquired by LoadFont().

  Arguments

    fileName                     The font file to load.

    memTypeBits                  The type of memory to load the font into
                                 (usually MEMTYPE_ANY).

  Return Value

    A pointer to a FontDescriptor structure that describes the font; returns
    NULL if the file is not found, is not a valid font file, or there is not
    enough memory to process the file.

  Associated Files

    lib3do.lib, fontlib.h

  See Also

    UnloadFont(), ParseFont()

##src/libs/lib3DO/autodocs.c::spg/lib3do/loadimage##
LoadImage - Loads an image

  Synopsis

    ubyte * LoadImage (char *name, ubyte *dest, VdlChunk **rawVDLPtr,
                       ScreenContext *sc)

  Description

    Loads a 3DO file format image file specified by name into the buffer
    pointed to by dest. May optionally return a VDL (Video Display List) if
    the image file specifies per line CLUTs (Color Lookup Tables).

  Arguments

    name                         Pointer to char string containing a path
                                 name of an image file in 3DO file format.

    dest                         Pointer to destination buffer. If dest is
                                 NULL, a page aligned VRAM buffer large
                                 enough to hold an image is allocated. If
                                 dest is not NULL, it is assumed to point to
                                 a page aligned VRAM buffer large enough to
                                 hold a screen image.

    rawVDLPtr                    Pointer to a pointer to a VDL structure.
                                 LoadImage() fills this structure if the
                                 image file contains a custom VDL .

    sc                           Pointer to a screen context.

  Associated Files

    lib3do.lib, displayutils.h

  Return Value

    Returns a pointer to the destination buffer if successful, NULL if not.
    Note that the returned buffer may have been allocated by LoadImage() if
    the dest input parameter was NULL.

  See Also

    UnloadImage()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapaaceltocquad##
MapAACelToCQuad - Map an anti-aliased cel to a quad.

  Synopsis

    void MapAACelToCQuad(CCB *aacel, CQuad *quad)

  Description

    This function maps an anti-aliased cel to the specified quad.  It is
    effectively a standard MapCel() call that stores its results into both the
    data and alpha-channel CCBs.  It also works correctly if aacel points to a
    single standalone cel.

  Arguments

    aacel                        A pointer to the cel to be mapped.

    quad                         A pointer to the CQuad to which the cel is
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapCelToCQuad(), MapCelListToCQuad()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapaaceltocrect##
MapAACelToCRect - Map an anti-aliased cel to a CRect.

  Synopsis

    void MapAACelToCRect(CCB *aacel, CRect *rect)

  Description

    This function maps an anti-aliased cel to the specified rectangle.  It is
    much faster than a standard MapCel() call because it only has to calculate
    a simple rectangular projection.  It stores its results into both the data
    and alpha-channel CCBs.  It also works correctly if aacel points to a
    single standalone cel.

  Arguments

    aacel                        A pointer to the cel to be mapped.

    rect                         A pointer to the CRect to which the cel is
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapAACelToSRect(), MapCelToCRect(), MapCelListToCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapaaceltofpoint##
MapAACelToFPoint - Set an anti-aliased cel's location to a point.

  Synopsis

    void MapAACelToFPoint(CCB *aacel, FPoint *newPosition)

  Description

    This function sets an anti-aliased cel's location to the given
    coordinates.  It stores the coordinates into both the data and
    alpha-channel CCBs.  It also works correctly if aacel points to a single
    standalone cel.  Only the ccb_XPos and ccb_YPos values in the CCB are
    modified; other CCB fields are not touched.

  Arguments

    aacel                        A pointer to the cel to be mapped.

    newPosition                  A pointer to the FPoint to which the cel is
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapAACelToIPoint(), MapCelToFPoint(), MapCelListToFPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapaaceltoipoint##
MapAACelToIPoint - Set an anti-aliased cel's location to a point.

  Synopsis

    void MapAACelToIPoint(CCB *aacel, IPoint *newPosition)

  Description

    This function sets an anti-aliased cel's location to the given
    coordinates.  It stores the coordinates into both the data and
    alpha-channel CCBs.  It also works correctly if aacel points to a single
    standalone cel.  Only the ccb_XPos and ccb_YPos values in the CCB are
    modified; other CCB fields are not touched.

  Arguments

    aacel                        A pointer to the cel to be mapped.

    newPosition                  A pointer to the FPoint to which the cel is
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapAACelToFPoint(), MapCelToIPoint(), MapCelListToIPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapaaceltosrect##
MapAACelToSRect - Map an anti-aliased cel to an SRect.

  Synopsis

    void MapAACelToSRect(CCB *aacel, SRect *rect)

  Description

    This function maps an anti-aliased cel to the specified rectangle.  It is
    much faster than a standard MapCel() call because it only has to calculate
    a simple rectangular projection.  It stores its results into both the data
    and alpha-channel CCBs.  It also works correctly if aacel points to a
    single standalone cel.

  Arguments

    aacel                        A pointer to the cel to be mapped.

    rect                         A pointer to the SRect to which the cel is
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapAACelToCRect(), MapCelToSRect(), MapCelListToSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapcellisttocquad##
MapCelListToCQuad - Map a list of cels to a quad.

  Synopsis

    void MapCelListToCQuad(CCB *list, CQuad *quad)

  Description

    This function maps a list of cels to the specified quad.  It performs a
    standard MapCel() on the first cel in the list.  It then adjusts the X/Y
    coordinates of the rest of the cels in the list such that all the cels
    maintain the same relative X/Y relationships to each other.  It also
    copies the size and perspective fields from the first cel into all the
    rest of the cels in the list.  The net effect is that the list of cels
    moves as if it were a single unit, although the operation doesn't include
    true 3D parallax calculations.

  Arguments

    list                         A pointer to a list of one or more cels to
                                 be mapped.

    quad                         A pointer to the CQuad to which the cels are
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapAACelToCQuad(), MapCelToCQuad()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapcellisttocrect##
MapCelListToCRect - Map a list of cels to a CRect.

  Synopsis

    void MapCelListToCRect(CCB *list, CRect *rect)

  Description

    This function maps a list of cels to the specified rectangle.  It is much
    faster than a standard MapCel() call because it only has to calculate a
    simple rectangular projection.  It performs a MapCelToCRect() on the first
    cel in the list.  It then adjusts the X/Y coordinates of the rest of the
    cels in the list such that all the cels maintain the same relative X/Y
    relationships to each other.  It also copies the size and perspective
    fields from the first cel into all the rest of the cels in the list.  The
    net effect is that the list of cels moves and scales as if it were a
    single unit.

  Arguments

    list                         A pointer to a list of one or more cels to
                                 be mapped.

    rect                         A pointer to the CRect to which the cels are
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapAACelToCRect(), MapCelToCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapcellisttofpoint##
MapCelListToFPoint - Set a list of cels' locations to a point.

  Synopsis

    void MapCelListToFPoint(CCB *list, FPoint *newPosition,
                            Boolean copyPerspective)

  Description

    This function sets a list of cels to the given coordinates.  It sets the
    X/Y coordinates of the first cel to the specified values.  It then adjusts
    the X/Y coordinates of the rest of the cels in the list such that the cels
    maintain the same relative X/Y relationships to each other.  The net
    effect is that the list of cels moves as if it were a single unit.

    This function can optionally propagate the size and perspective values
    already present in the first cel to the rest of the cels in the list.
    This is useful if you are manipulating size and perspective values
    manually.  To propagate the size and perspective without changing the
    positions, use one of the OffsetCelList() functions with delta values of
    zero.

  Arguments

    list                         A pointer to a list of one or more cels to
                                 be mapped.

    newPosition                  A pointer to the FPoint to which the cel is
                                 to be mapped.

    copyPerspective              TRUE to copy the size and perspective fields
                                 from the first cel to the rest of the list.
                                 FALSE to leave all size and perspective
                                 fields as is.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapCelListToIPoint(), MapAACelToFPoint(), MapCelToFPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapcellisttoipoint##
MapCelListToIPoint - Set a list of cels' locations to a point.

  Synopsis

    void MapCelListToIPoint(CCB *list, IPoint *newPosition,
                            Boolean copyPerspective)

  Description

    This function sets a list of cels to the given coordinates.  It then
    adjusts the X/Y coordinates of the rest of the cels in the list such that
    the cels maintain the same relative X/Y relationships to each other.  The
    net effect is that the list of cels moves as if it were a single unit.

    This function can optionally propagate the size and perspective values
    already present in the first cel to the rest of the cels in the list.
    This is useful if you are manipulating size and perspective values
    manually.  To propagate the size and perspective without changing the
    positions, use one of the OffsetCelList() functions with delta values of
    zero.

  Arguments

    list                         A pointer to a list of one or more cels to
                                 be mapped.

    newPosition                  A pointer to the FPoint to which the cel is
                                 to be mapped.

    copyPerspective              TRUE to copy the size and perspective fields
                                 from the first cel to the rest of the list.
                                 FALSE to leave all size and perspective
                                 fields as is.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapCelListToFPoint(), MapAACelToIPoint(), MapCelToIPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapcellisttosrect##
MapCelListToSRect - Map a list of cels to a CRect.

  Synopsis

    void MapCelListToSRect(CCB *list, SRect *rect)

  Description

    This function maps a list of cels to the specified rectangle.  It is much
    faster than a standard MapCel() call because it only has to calculate a
    simple rectangular projection.  It performs a MapCelToCRect() on the first
    cel in the list.  It then adjusts the X/Y coordinates of the rest of the
    cels in the list such that all the cels maintain the same relative X/Y
    relationships to each other.  It also copies the size and perspective
    fields from the first cel into all the rest of the cels in the list.  The
    net effect is that the list of cels moves and scales as if it were a
    single unit.

  Arguments

    list                         A pointer to a list of one or more cels to
                                 be mapped.

    rect                         A pointer to the CRect to which the cels are
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapCelListToCRect(), MapAACelToSRect(), MapCelToSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapceltocquad##
MapCelToCQuad - Map a cel to a quad.

  Synopsis

    void MapCelToCQuad(CCB *cel, CQuad *quad)

  Description

    This function performs a standard MapCel() on a single cel.  It differs
    from the standard MapCel() call only in that it accepts a CQuad* datatype.

  Arguments

    cel                          A pointer to the cel to be mapped.

    quad                         A pointer to the CQuad to which the cel is
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapAACelToCQuad(), MapCelListToCQuad()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapceltocrect##
MapCelToCRect - Map a cel to a CRect.

  Synopsis

    void MapCelToCRect(CCB *cel, CRect *rect)

  Description

    This function maps a single cel to the specified rectangle.  It is much
    faster than a standard MapCel() call because it only has to calculate a
    simple rectangular projection.

  Arguments

    cel                          A pointer to the cel to be mapped.

    rect                         A pointer to the CRect to which the cel is
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapCelToSRect(), MapAACelToCRect(), MapCelListToCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapceltofpoint##
MapCelToFPoint - Set a cel's location to a point.

  Synopsis

    void MapCelToFPoint(CCB *cel, FPoint *newPosition)

  Description

    This function sets a single cel to the specified coordinates.  It simply
    stores the coordinates in the CCB X/Y position fields.

  Arguments

    cel                          A pointer to the cel to be mapped.

    newPosition                  A pointer to the FPoint to which the cel is
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapCelToIPoint(), MapAACelToFPoint(), MapCelListToFPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapceltoipoint##
MapCelToIPoint - Set a cel's location to a point.

  Synopsis

    void MapCelToIPoint(CCB *cel, IPoint *newPosition)

  Description

    This function sets a single cel to the specified coordinates.  It converts
    the coordinates to frac16 and stores them in the CCB X/Y position fields.

  Arguments

    cel                          A pointer to the cel to be mapped.

    newPosition                  A pointer to the FPoint to which the cel is
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapCelToFPoint(), MapAACelToIPoint(), MapCelListToIPoint()

##src/libs/lib3DO/autodocs.c::spg/lib3do/mapceltosrect##
MapCelToSRect - Map a cel to an SRect.

  Synopsis

    void MapCelToSRect(CCB *cel, SRect *rect)

  Description

    This function maps a single cel to the specified rectangle.  It is much
    faster than a standard MapCel() call because it only has to calculate a
    simple rectangular projection.

  Arguments

    cel                          A pointer to the cel to be mapped.

    rect                         A pointer to the CRect to which the cel is
                                 to be mapped.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    MapCelToCRect(), MapAACelToSRect(), MapCelListToSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/msec_to_usec##
MSEC_TO_USEC - Convert milliseconds to microseconds.

  Synopsis

    int32 MSEC_TO_USEC(value)

  Description

    This macro converts a number of milliseconds to the equivelent number of
    microseconds.  True floating point constant values are legal, for example
    MSEC_TO_USEC(2730.52).  The compiler will resolve the constant at compile
    time without needing runtime floating point support.  Values up to
    2,147,000 milliseconds (about 35 minutes) can be expressed without
    overflowing an int32.  The macro is usable in expression context and only
    evaluates its argument once.

  Arguments

    value                        An integer constant or variable, or a
                                 floating point constant to be converted to
                                 microseconds.

  Return Value

    The number of microseconds.

  Implementation

    Macro

  Associated Files

    lib3do.lib, timerutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/offsetaacelbyfdelta##
OffsetAACelByFDelta - Move an anti-aliased cel.

  Synopsis

    void OffsetAACelByFDelta(CCB *aacel, FPoint *deltaXY)

  Description

    This function adjusts an anti-aliased cel's location by the specified
    delta.  It adds the delta values to the X/Y coordinates in both the data
    and alpha-channel CCBs.  It also works correctly if aacel points to a
    single standalone cel.

  Arguments

    aacel                        A pointer to the cel to be moved.

    deltaXY                      A point to an FPoint containing the movement
                                 delta values.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    OffsetAACelByIDelta(), OffsetCelByFDelta(), OffsetCelListByFDelta()

##src/libs/lib3DO/autodocs.c::spg/lib3do/offsetaacelbyidelta##
OffsetAACelByIDelta - Move an anti-aliased cel.

  Synopsis

    void OffsetAACelByIDelta(CCB *aacel, IPoint *deltaXY)

  Description

    This function adjusts an anti-aliased cel's location by the specified
    delta.  It adds the delta values to the X/Y coordinates in both the data
    and alpha-channel CCBs.  It also works correctly if aacel points to a
    single standalone cel.

  Arguments

    aacel                        A pointer to the cel to be moved.

    deltaXY                      A pointer to an IPoint containing the
                                 movement delta values.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    OffsetAACelByFDelta(), OffsetCelByIDelta(), OffsetCelListByIDelta()

##src/libs/lib3DO/autodocs.c::spg/lib3do/offsetcel##
OffsetCel - Add offsets to a CCB's position fields

  Synopsis

    void OffsetCel (CCB *ccb, int32 xOffset, int32 yOffset)

  Description

    Adds the specified offsets to the position fields of the CCB identified by
    ccb.

  Arguments

    ccb                          Pointer to the CCB of the cel.

    xOffset                      Integer x offset.

    yOffset                      Integer y offset.

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/offsetcelbyfdelta##
OffsetCelByFDelta - Move a cel.

  Synopsis

    void OffsetCelByFDelta(CCB *cel, FPoint *deltaXY)

  Description

    This function adjusts a single cel's location by the specified delta.  It
    adds the delta values to the X/Y coordinates in the CCB.

  Arguments

    cel                          A pointer to the cel to be moved.

    deltaXY                      A pointer to an FPoint containing the
                                 movement delta values.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    OffsetCelByIDelta(), OffsetAACelByFDelta(), OffsetCelListByFDelta()

##src/libs/lib3DO/autodocs.c::spg/lib3do/offsetcelbyidelta##
OffsetCelByIDelta - Move a cel.

  Synopsis

    void OffsetCelByIDelta(CCB *cel, IPoint *deltaXY)

  Description

    This function adjusts a single cel's location by the specified delta.  It
    adds the delta values to the X/Y coordinates in the CCB.

  Arguments

    cel                          A pointer to the cel to be moved.

    deltaXY                      A pointer to an IPoint containing the
                                 movement delta values.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    OffsetCelByFDelta(), OffsetAACelByIDelta(), OffsetCelListByIDelta()

##src/libs/lib3DO/autodocs.c::spg/lib3do/offsetcellistbyfdelta##
OffsetCelListByFDelta - Move a list of cels.

  Synopsis

    void OffsetCelListByFDelta(CCB *list, FPoint *deltaXY,
                               Boolean copyPerspective)

  Description

    This function adjusts the location of all the cels in a list by adding the
    delta values to the X/Y coordinates in cels' CCBs.

    This function can optionally propagate the size and perspective values
    already present in the first cel to the rest of the cels in the list.
    This is useful if you are manipulating size and perspective values
    manually.  If you want to just copy the size and perspective values from
    the first cel to the rest of the cels without changing the cel positions,
    use a NULL deltaXY pointer and TRUE for copyPerspective.

  Arguments

    list                         A pointer to the list of cels to be moved.

    deltaXY                      A pointer to an FPoint containing the
                                 movement delta values.

    copyPerspective              TRUE to copy the size and perspective fields
                                 from the first cel to the rest of the list.
                                 FALSE to leave all size and perspective
                                 fields as is.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    OffsetCelListByIDelta(), OffsetAACelByFDelta(), OffsetCelByFDelta()

##src/libs/lib3DO/autodocs.c::spg/lib3do/offsetcellistbyidelta##
OffsetCelListByIDelta - Move a list of cels.

  Synopsis

    void OffsetCelListByIDelta(CCB *list, IPoint *deltaXY,
                               Boolean copyPerspective)

  Description

    This function adjusts the location of all the cels in a list by adding the
    delta values to the X/Y coordinates in cels' CCBs.

    This function can optionally propagate the size and perspective values
    already present in the first cel to the rest of the cels in the list.
    This is useful if you are manipulating size and perspective values
    manually.  If you want to just copy the size and perspective values from
    the first cel to the rest of the cels without changing the cel positions,
    use a NULL deltaXY pointer and TRUE for copyPerspective.

  Arguments

    list                         A pointer to the list of cels to be moved.

    deltaXY                      A pointer to an IPoint containing the
                                 movement delta values.

    copyPerspective              TRUE to copy the size and perspective fields
                                 from the first cel to the rest of the list.
                                 FALSE to leave all size and perspective
                                 fields as is.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    OffsetCelListByFDelta(), OffsetAACelByIDelta(), OffsetCelByIDelta()

##src/libs/lib3DO/autodocs.c::spg/lib3do/offsetcrect##
OffsetCRect - Move a rectangle.

  Synopsis

    CRect * OffsetCRect(CRect *dst, IPoint *deltaXY)

  Description

    This function adjusts the location described by the dst rectangle by
    adding the specified delta values to the rectangle's corner values.

  Arguments

    dst                          A pointer to the CRect to move.

    deltaXY                      A pointer to an IPoint containing the
                                 movement delta values.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    OffsetSRect(), InsetCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/offsetsrect##
OffsetSRect - Move an SRect.

  Synopsis

    SRect * OffsetSRect(SRect *dst, IPoint *deltaXY)

  Description

    This function adjusts the location described by the dst rectangle by
    adding the specified delta values to the rectangle's position values.

  Arguments

    dst                          A pointer to the CRect to move.

    deltaXY                      A pointer to an IPoint containing the
                                 movement delta values.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    OffsetCRect(), InsetSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/parsecel##
ParseCel - Parse a cel file image in memory.

  Synopsis

    CCB * ParseCel(void *inBuf, long inBufSize)

  Description

    This function parses cel(s) in a memory buffer.  It is useful when you
    have loaded a cel file using some method other than LoadCel() and you need
    to parse the cels in the buffer.

    If the buffer contains more than one cel, the CCBs are strung together via
    their ccb_NextPtr fields in the same order as they are encountered in the
    buffer.  This allows you to store a group of related cels in one file, and
    treat them as a single logical entity using the other CelUtils library
    functions that work with lists of cels.

    This function also contains special handling for anti-aliased cels.
    AACels are two cels stored together in the same file, but the CCBs are
    stored in reverse order of the way they must be drawn.  AACels are
    recognized by a characteristic signature (exactly two cels, one is 4-bit
    coded the other 16-bit uncoded, same size and coordinates, etc), and when
    detected the CCB links are automatically reversed so the return value is a
    list of two cels linked in the proper order for drawing.  One drawback to
    the signature-detection logic is that it prevents the storage of multiple
    related anti-aliased cels in the same file.

  Arguments

    inBuf                        A pointer to a buffer containing the cel
                                 file image.

    inBufSize                    The size of cel file image in the buffer.

  Return Value

    A pointer to the list of cels parsed from the buffer.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    LoadCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/parsefont##
ParseFont - Parse a font and prepare it for use.

  Synopsis

    FontDescriptor * ParseFont(void *fontImage)

  Description

    Parses an in-memory image of a font file, creating a FontDescriptor for it
    and preparing it for use. Use this function when you've loaded a font
    file yourself (using data streaming or some other custom I/O method) and
    you want to prepare the font for use by the font and text API routines.

    Use UnloadFont() to release resources acquired by ParseFont(). You must
    release the font image memory yourself; UnloadFont() only releases
    resources acquired internally by ParseFont().

  Arguments

    fontImage                    A pointer to a font file image that you have
                                 loaded into memory.

  Return Value

    A pointer to a FontDescriptor structure that describes the font; NULL if
    the image is not a valid font file, or there is not enough memory to
    create a FontDescriptor structure.

  Associated Files

    lib3do.lib, fontlib.h

  See Also

    LoadFont(), UnloadFont()

##src/libs/lib3DO/autodocs.c::spg/lib3do/readfile##
ReadFile - Read a file or a portion of one into memory

  Synopsis

    int ReadFile (char *filename, int32 size, long *buffer,
                  long offset)

  Description

    ReadFile() uses the file system to read a file or a portion of a file into
    memory. It performs up to four retries on each block read if the file
    system returns an error.

    ReadFile() is useful for loading a portion of a file, optionally starting
    at some offset into the file. For loading an entire file starting at
    offset zero, the LoadFile() function is three to four times faster.

    ReadFile()fills the buffer with size bytes, beginning at offset.

  Arguments

    filename                     Pointer to a string containing a valid
                                 pathname for a file in the currently mounted
                                 file system.

    size                         Number of bytes to read.

    buffer                       Pointer to a buffer into which the data will
                                 be read. Must be large enough to hold size
                                 bytes.

    offset                       Offset from the beginning of the file at
                                 which the read begins.

  Return Value

    The number of bytes read, or -1 if an error occurred.

  Associated Files

    lib3do.lib, parse3do.h

  See Also

    LoadFile()

##src/libs/lib3DO/autodocs.c::spg/lib3do/rendercelfillrect##
RenderCelFillRect - Render a filled rectangle into a cel's data buffer.

  Synopsis

    void RenderCelFillRect(CCB *cel, int32 pixel,
                           int32 x, int32 y, int32 w, int32 h)

  Description

    This function renders a filled rectangle into the cel's data buffer.

    This function performs no clipping internally.  You must be careful not to
    pass coordinates that would result in rendering outside the cel's data
    buffer.

    This function supports all cel formats and bit depths except:

         Packed cels.

         LRForm cels.

         6-bit coded cels.

  Arguments

    cel                          A pointer to the cel.

    pixel                        The value to store into each pixel in the
                                 area.

    x                            The X coordinate within the cel data buffer.

    y                            The Y coordinate within the cel data buffer.

    w                            The width of the area to fill in the cel
                                 data buffer.

    h                            The height of the area to fill in the cel
                                 data buffer.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/rendercelhline##
RenderCelHLine - Render a horizontal line into a cel's data buffer.

  Synopsis

    void RenderCelHLine(CCB *cel, int32 pixel,
                        int32 x, int32 y, int32 w)

  Description

    This function renders a horizontal line into the cel's data buffer.

    This function performs no clipping internally.  You must be careful not to
    pass coordinates that would result in rendering outside the cel's data
    buffer.

    This function supports all cel formats and bit depths except:

         Packed cels.

         LRForm cels.

         6-bit coded cels.

  Arguments

    cel                          A pointer to the cel.

    pixel                        The value to store into each pixel in the
                                 line.

    x                            The X coordinate within the cel data buffer.

    y                            The Y coordinate within the cel data buffer.

    w                            The width of the line to render in the cel
                                 data buffer.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/renderceloutlinerect##
RenderCelOutlineRect - Render an unfilled rectangle into a cel's data
                       buffer.

  Synopsis

    void RenderCelOutlineRect(CCB *cel, int32 pixel,
                              int32 x, int32 y, int32 w, int32 h)

  Description

    This function renders an outline (unfilled) rectangle into the cel's data
    buffer.

    This function performs no clipping internally.  You must be careful not to
    pass coordinates that would result in rendering outside the cel's data
    buffer.

    This function supports all cel formats and bit depths except packed
    cels, LRForm cels, and 6-bit coded cels.

  Arguments

    cel                          A pointer to the cel.

    pixel                        The value to store into each pixel in the
                                 outline.

    x                            The X coordinate within the cel data buffer.

    y                            The Y coordinate within the cel data buffer.

    w                            The width of the area to outline in the cel
                                 data buffer.

    h                            The height of the area to outline in the cel
                                 data buffer.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/rendercelpixel##
RenderCelPixel - Render a single pixel into a cel's data buffer.

  Synopsis

    void RenderCelPixel(CCB *cel, int32 pixel, int32 x, int32 y)

  Description

    This function renders a single pixel into the cel's data buffer.

    This function performs no clipping internally.  You must be careful not to
    pass coordinates that would result in rendering outside the cel's data
    buffer.

    This function supports all cel formats and bit depths except packed
    cels, LRForm cels, and 6-bit coded cels.

  Arguments

    cel                          A pointer to the cel.

    pixel                        The value to store into the pixel.

    x                            The X coordinate within the cel data buffer.

    y                            The Y coordinate within the cel data buffer.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/rendercelvline##
RenderCelVLine - Render a vertical line within a cel's data buffer.

  Synopsis

    void RenderCelVLine(CCB *cel, int32 pixel,
                        int32 x, int32 y, int32 h)

  Description

    This function renders a vertical line into the cel's data buffer.

    This function performs no clipping internally.  You must be careful not to
    pass coordinates that would result in rendering outside the cel's data
    buffer.

    This function supports all cel formats and bit depths except packed
    cels, LRForm cels, and 6-bit coded cels.

  Arguments

    cel                          A pointer to the cel.

    pixel                        The value to store into each pixel in the
                                 line.

    x                            The X coordinate within the cel data buffer.

    y                            The Y coordinate within the cel data buffer.

    h                            The height of the line to render in the cel
                                 data buffer.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/returncelpixel##
ReturnCelPixel - Return the value of a pixel from a cel's data buffer.

  Synopsis

    int32 ReturnCelPixel(CCB *cel, int32 x, int32 y)

  Description

    This function returns the value of the specified pixel from the cel's data
    buffer.

    This function performs no clipping internally.  You must be careful not to
    pass coordinates that would result in reading from outside the cel's data
    buffer.

    This function supports all cel formats and bit depths except:

         Packed cels.

         LRForm cels.

         6-bit coded cels.

  Arguments

    cel                          A pointer to the cel.

    x                            The X coordinate within the cel data buffer.

    y                            The Y coordinate within the cel data buffer.

  Return Value

    The value of the specified pixel.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/savefile##
SaveFile - Save a file to NVRAM.

  Synopsis

    Err SaveFile(char *filename, void *buffer, int32 bufsize,
                 int32 extrabytes)

  Description

    This function stores the contents of a buffer to the named file.
    Currently the file has to be in NVRAM (IE, the filename must start with
    /NRVRAM/) but if other writable filesystems become available this function
    will work with them too.

    If the file doesn't already exist it is created.  If it does exist, its
    contents are completely replaced by the contents of the specified buffer.
    When the file is created it is pre-sized to bufsize+extrabytes.  If the
    file exists but needs to be expanded to hold the output it is expanded to
    the size needed+extrabytes.

    The point of the extrabytes parm is that expanding a file is relatively
    expensive. By specifying a non-zero extrabytes parameter you can ensure
    that the file will grow enough to handle a few more slightly-growing
    outputs before an expansion has to be done again.  If the nature of the
    data you're saving is that it never grows, use an extrabytes value of
    zero.  Remember that NVRAM is a precious limited resource; please don't
    needlessly usurp it with large extrabytes values.

  Arguments

    filename                     The name of the file to save.

    buffer                       A pointer to a buffer full of data to be
                                 saved.

    bufsize                      The size of the data in the buffer.

    extrabytes                   The amount of extra space to allocate if and
                                 when the file is expanded.

  Return Value

    Returns zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, blockfile.h

  See Also

    LoadFile()

##src/libs/lib3DO/autodocs.c::spg/lib3do/sec_to_use##
SEC_TO_USE - CConvert seconds to microseconds.

  Synopsis

    int32 SEC_TO_USEC(value)

  Description

    This macro converts a number of seconds to the equivelent number of
    microseconds.  True floating point constant values are legal, for example
    SEC_TO_USEC(2.5).  The compiler will resolve the constant at compile time
    without needing runtime floating point support.  Values up to 2147 seconds
    (about 35 minutes) can be expressed without overflowing an int32.  The
    macro is usable in expression context and only evaluates its argument
    once.

  Arguments

    value                        An integer constant or variable, or a
                                 floating point constant to be converted to
                                 microseconds.

  Return Value

    The number of microseconds.

  Implementation

    Macro

  Associated Files

    lib3do.lib, timerutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/settextcelcolor##
SetTextCelColor - Set background and foreground colors for text cel.

  Synopsis

    void SetTextCelColor(TextCel *tCel, int32 bgColor, int32 fgColor0)

  Description

    Sets the background and foreground colors to use when the cel is drawn.
    Because of special internal logic that calculates scaled colors for
    anti-aliasing, you must use this function to change the colors, rather
    than manipulating the cel's PLUT directly. After you use this call to
    change the colors, the next DrawCels() call renders the existing contents
    of the cel using the new colors.

    Colors follow the usual rules for 3DO cels. The bgColor and fgColor values
    are interpreted as RGB555 values.  A color of 0,0,0 is transparent. To get
    opaque black,  use MakeRGB15(0,0,1).  If bgColor or fgColor0 is passed as
    -1L, the corresponding values in the text cel remain unchanged.

    When created, a text cel has default colors of transparent for background,
    and pure white for foreground.

  Arguments

    tCel                         Pointer to a TextCel structure.

    bgColor                      The background color, used by zero-value
                                 pixels in the character bitmap.

    fgColor                      The foreground color, used by non-zero-value
                                 pixels in the character bitmap.

  Associated Files

    lib3do.lib, textlib.h

  See Also

    SetTextCelColors()

##src/libs/lib3DO/autodocs.c::spg/lib3do/settextcelcolors##
SetTextCelColors - Set background and foreground colors for a cel.

  Synopsis

    void SetTextCelColors(TextCel *tCel, int32 bgColor,
                          int32 fgColors[4])

  Description

    Sets the background and foreground colors to  use when the cel is drawn.
    This Function sets all four foreground colors; use it with features that
    allow multiple text colors within a single cel. Because of special
    internal logic that calculates scaled colors for anti-aliasing, you must
    use this function to change the colors, rather than manipulating the
    cel's PLUT directly. After you use this call to change the colors,
    the next DrawCels() call renders the contents already in the cel in  new
    colors.

    Colors follow the usual rules for 3DO cels.  The bgColor and fgColor
     values are interpreted as RGB555 values.  A color of 0,0,0 is
    transparent.  To get opaque black,  use MakeRGB15(0,0,1). If bgColoror any
    of the fgColorsare passed as -1L, the corresponding values in the text cel
    remain unchanged.

    When created, a TextCel has default colors of transparent for background,
    pure white for foreground pen 0, and no color (transparent) for foreground
    pens 1-3.

  Arguments

    tCel                         Pointer to a TextCel structure.

    bgColor                      The background color, used by zero-value
                                 pixels in the character bitmap.

    fgColor                      The foreground colors, used by
                                 non-zero-value pixels in the character
                                 bitmap, according the TextCelxd5 s pen
                                 color value when the pixels were rendered.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/settextcelcoords##
SetTextCelCoords - Set x and y coordinates for a cel.

  Synopsis

    void SetTextCelCoords(TextCel *tCel, Coord ccbX, Coord ccbY)

  Description

    Sets the TextCel CCB coordinates (ccb_XPos and ccb_YPos).  Use this call
    as a convenience so that you don't need to dereference through two
    levels of pointers to update the CCB's on-screen position.

    If it's convenient, you can manipulate the CCB's position, size,
    and perspective fields directly; you don't have to use this function
    to safely modify the on-screen position. Other utility routines for
    positioning cels, such as MapCel(), may also be safely used.

    The ccbX and ccbY values are interpreted as integer values if, when viewed
    as a longword, they are in the range of -1024<value<1024.  (That is, if
    interpreting the values as frac16 types would result in a very small
    fraction  almost zero they are assumed to be integers.)  In this case,
    SetTextCelCoords() converts the values to frac16 before storing them into
    the CCB. Values outside that range are considered to be frac16 values
    already, and are stored into the CCB without conversion.

  Arguments

    tCel                         Pointer to a TextCel structure.

    ccbX                         The x coordinate for the text cel CCB.

    ccbY                         The y coordinate for the text cel CCB.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/settextcelformatbuffer##
SetTextCelFormatBuffer - Attach a format buffer to a text cel.

  Synopsis

    Err SetTextCelFormatBuffer(TextCel *tCel, char *buffer,
                               uint32 bufSize)

  Description

    Attaches a text-formatting buffer to a TextCel. The buffer is used for
    printf-style formatting of text during rendering. If a text cel has a
    format buffer, text rendered into the cel passes first through sprintf()
    for formatting. If there is no format buffer attached to the cel (the
    default), sprintf() is not invoked at render time.

    If the bufSize parameter is zero, any buffer already in the cel is
    removed, and if the buffer was acquired internally, it is released.
    (DeleteTextCel() also automatically releases an internally acquired
    buffer.)

    If the bufSize parameter is non-zero, a format buffer is attached to the
    cel. In this case, if the buffer parameter is NULL, a buffer of the
    specified size is dynamically allocated internally. If the buffer
    parameter is non-NULL, it is a pointer to a buffer that you have either
    dynamically allocated or a static buffer within your application. When you
    specify your own buffer, you are responsible for releasing it; the library
    internals will not attempt to release a buffer you provided via a non-NULL
    buffer parameter.

    A format buffer must be large enough to hold the largest possible
    formatted string that you try to render. Internally, at rendering time,
    the printf-style format string and arguments you supply are passed to
    sprintf() for formatting. If the resulting string is larger than the
    format buffer, the Debugger window displays a message, but memory beyond
    the end of the buffer has already been corrupted at that point. (This is a
    typical limitation of sprintf() processing.)

    Many text cels can share the same format buffer to save memory. The buffer
    is only used while text is being rendered into the cel. Once
    UpdateTextInCel() returns, the buffer is no longer in use by that cel, and
    can be used in formatting the contents of another cel. The only time it is
    not safe to use the same format buffer for multiple text cels is in a
    multithreaded application where more than one thread might be calling
    UpdateTextInCel() simultaneously.

  Arguments

    tCel                         Pointer to a TextCel structure.

    buffer                       Pointer to a buffer to use for text
                                 formatting, or NULL to have a buffer
                                 dynamically allocated for you.

    bufsize                      Size of the format buffer.

  Return Value

    Zero if successful, or -1 if dynamic buffer allocation fails; that is, if
    there is not enough memory.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/settextcelformatflags##
SetTextCelFormatFlags - Set text formatting flags.

  Synopsis

    void SetTextCelFormatFlags(TextCel *tCel, uint32 formatFlags)

  Description

    Set the text formatting options used for subsequent rendering.

    The formatFlags parameter contains one or more formatting options, ORed
    together.   Available options are:

    TC_FORMAT_LEFT_JUSTIFY - left-justify text
    TC_FORMAT_RIGHT_JUSTIFY - right-justify text
    TC_FORMAT_CENTER_JUSTIFY - center-justify text
    TC_FORMAT_WORDWRAP - auto-word-wrap text

    Changing the formatting options does not affect pixels already in the cel.
    You can make a series of calls to UpdateTextInCel()with the
    replaceExisting flag set to FALSE, intermixed with calls to
    SetTextCelFormatFlags().   This allows you to create, for example, a
    paragraph of word-wrapped text, followed by a line of centered text,
    followed by another word-wrapped paragraph.  Turning word wrap on and off
    at locations other than a paragraph boundary might produce undesirable
    results.  Word wrapping should only be changed immediately following a
    newline.

  Arguments

    tCel                           Pointer to a TextCel structure.

    formatFlags                    The new formatting options.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/settextcelleadingadjust##
SetTextCelLeadingAdjust - Set leading adjustment for text cel.

  Synopsis

    void SetTextCelLeadingAdjust(TextCel *tCel, int32 adjustLeading)

  Description

    Sets a leading adjustment for text rendered in the cel. Leading is the
    extra vertical space between lines of text. The base leading value comes
    from theFontDescriptor attached to the cel. The value you specify in this
    call is a signed adjustment to the leading. Negative values render lines
    of text closer together; positive values render lines farther apart.

  Arguments

    tCel                           Pointer to a TextCel structure.

    adjustLeading                  The value (in pixels) to add to the base
                                 leading value for the font.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/settextcelmargins##
SetTextCelMargins - Set top and left margin in cel data buffer.

  Synopsis

    void SetTextCelMargins(TextCel *tCel, int32 leftMargin,
                           int32 topMargin)

  Description

    Sets the top and left margins within the cel data buffer. When you erase
    the text in a cel, the pen returns to the top and left margin values. When
    the pen encounters a newline in the text, the pen returns to the
    left-margin value (and down to the next text line).

    If you set a margin value greater than the width and/or height of the cel,
    all text rendered into the cel will be clipped.

  Arguments

    tCel                           Pointer to a TextCel structure.

    leftMargin                     New left margin for the cel.

    topMargin                      New top margin for the cel.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/settextcelpennumber##
SetTextCelPenNumber - Set pen number for text rendering.

  Synopsis

    void SetTextCelPenNumber(TextCel *tCel, int32 penNumber)

  Description

    Sets the pen number used for subsequent text rendering. The pen number,
    which must be in the range of 0 through 3, indexes to one of the four
    possible foreground colors.

    Whenyou create a text cel, only pen 0 has a default color assigned; other
    pens are initialized to no color (transparent). Therefore you must use
    SetTextCelColors() and specify nontransparent colors for pens 1-3 before
    text you render with those pens will appear.

  Arguments

    tCel                           Pointer to a TextCel structure.

    penNumber                      Pen number to use for text subsequently
                                 rendered into the cel.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/settextcelsize##
SetTextCelSize - Set new size for text in cel.

  Synopsis

    Err SetTextCelSize(TextCel *tCel, int32 width, int32 height)

  Description

    Sets a new size for the text cel. If width and/or height are zero, the cel
    is set to a 1 x 1 pixel size initially, and each time text is placed into
    the cel the size automatically changes to reflect the size of the
    characters actually in the cel.

    Whenever you change a cel's size, you lose the cel's  current
    contents, because the data buffer is discarded and reallocated at the new
    size, and after allocation all pixels in the buffer are set to zero.

  Arguments

    tCel                           Pointer to a TextCel structure.

    width                          New width for the cel.

    height                         New height for the cel.

  Return Value

    Non-negative if successful, or negative if a new cel data buffer can't
    be allocated.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/settextcelspacingadjust##
SetTextCelSpacingAdjust - Set spacing adjustment for text in text cel.

  Synopsis

    void SetTextCelSpacingAdjust(TextCel *tCel, int32 adjustSpacing)

  Description

    Sets a spacing adjustment for text rendered in the cel. Spacing is the
    extra horizontal space between characters in the text. The base spacing
    value comes from the FontDescriptor attached to the cel. The value you
    specify in this call is a signed adjustment to the spacing. Negative
    values render characters in the text closer together; positive values
    render characters farther apart.

  Arguments

    tCel                         Pointer to a TextCel structure.

    adjustSpacing                The value (in pixels) to add to the base
                                 spacing value for the font.

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/settextceltabstops##
SetTextCelTabStops - Specify tab stops for a text cel.

  Synopsis

    void SetTextCelTabStops(TextCel *tCel, uint16 tabStops[16], ...)

  Description

    Sets the tab stops table for the text cel.  The tabStops parameter is a
    pointer to an array of up to 16 uint16 values, or it is NULL to indicate
    that up to 15 tab stops are available as a comma-delimited list in the ...
    args.  In either case, the list of tab stops must be in ascending numeric
    order.  Entering a zero value terminates the list.  If more than 15 tab
    stops are read without encountering a terminating zero, a zero is forced
    into the 16th array element in the text cel's internal tabs table.

    Tab stops are specified in terms of pixels from the left edge of the cel.
    The tab stops are relative to zero, not to the left margin.

  Arguments

    t                            Cel  Pointer to a TextCel structure.

    tabStops                     Pointer to an array of uint16 that contains
                                 the new tab stops table.  NULL means read
                                 tab stops from ... args.

    ...                          List of tab stops, terminated with a zero.
                                 Used if tabStops parameter is NULL.
                                 (Optional.)

  Associated Files

    lib3do.lib, textlib.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/setupmsevents##
SetupMSEvents - Set up message and signal event handling.

  Synopsis

    MSEventHandle SetupMSEvents(MSEventData eventData[],
                                int32 numEvents, int32 reserved)

  Description

    This function creates resources needed to dispatch message and signal
    events.  It uses the array of MSEventData structures you pass in to decide
    what type of setups to do.  It allocates signal and port items that you
    didn't allocate yourself, and also builds internal control data to assist
    in waiting for and dispatching the events.

    The MSEventData structure is defined in msgutils.h as follows:

                typedef struct MSEventData {
                        char    *name;
                        int32   (*handler)(MSEventData *eventData, void *userContext);
                        void    *userData;
                        int32   signal;
                        Item    port;
                        Item    msgItem;
                        Message *msgPtr;
                        MsgValueTypes   *msgValues;
                        MSEventHandle   backLink;
                } MSEventData;

    The values you place in the MSEventData structures before calling this
    function control resource allocation, as described in the following
    paragraphs.

    If you provide a non-NULL name pointer the MSEventData describes a message
    port.  If the name field is NULL it describes a signal.  For message
    ports, the port is created using the name you provide; if you don't need a
    name just provide an empty string ("") for the name.

    The handler field is a pointer to your function to handle events for the
    message port or signal.  Every event must have a non-NULL handler pointer.

    If you set the signal field to zero and the name field is NULL,
    SetupMSEvents() will allocate a signal for you and store it in this field.
    If the signal field is non-zero and the name field is NULL the signal
    field is used as the signal(s) to be waited on for this event.  If the
    name field is non-NULL (IE, this is a message event) any value already
    existing in the signal field is replaced with the port's signal mask
    during setup.

    If you set the port field to zero and the name field is non-NULL,
    SetupMSEvents() will allocate a message port for you and store it in this
    field.  If the port field is non-zero, it is assumed to be a message port
    item number for a port you allocated yourself.  If the name field is NULL
    (IE, this is a signal event) the port field is ignored.

    The remaining fields, (msgItem, msgPtr, msgValues, and backLink) are
    read-only fields from your point of view.  When a message event arrives,
    the dispatcher fills in the msgItem, msgPtr, and msgValues fields before
    calling your handler function.  Your handler can refer to these values
    when processing the message.

    The MSEventData array can contain some elements for which you've allocated
    your own signal or port and other elements with zero values that request
    automatic allocation at setup time.  The internals keep track of who
    allocated which resources and at cleanup time only automatically allocated
    resources are freed automatically.

  Arguments

    eventData                    A pointer to an array of MSEventData
                                 structures which describe the event(s).

    numEvents                    The number of elements in the MSEventData
                                 array.

    reserved                     Reserved for future expansion; pass zero.

  Return Value

    Returns negative on error, or non-negative on success.  The non-negative
    return value is a handle which must be passed to the Dispatch and Cleanup
    routines.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, msgutils.h

  See Also

    CleanupMSEvents(), DispatchMSEvents()

##src/libs/lib3DO/autodocs.c::spg/lib3do/sleep##
Sleep - Sleep for a number of seconds.

  Synopsis

    Err Sleep(Item ioreq, uint32 seconds)

  Description

    This function puts the calling task in a wait state for the specified
    number of seconds.  The function does not return until the time has
    passed.

  Arguments

    ioreq                        An IOReq item obtained from GetTimerIOReq(),
                                 or zero to have an IOReq dynamically
                                 created/deleted during the call.

    seconds                      The number of seconds to sleep.

  Return Value

    Zero for success, or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    GetTimerIOReq()

##src/libs/lib3DO/autodocs.c::spg/lib3do/sleephsec##
SleepHSec - Sleep for a number of hundreths of a second.

  Synopsis

    Err SleepHSec(Item ioreq, uint32 hseconds)

  Description

    This function puts the calling task in a wait state for the specified
    number of hundreths-of-a-second. The function does not return until the
    time has passed.

  Arguments

    ioreq                        An IOReq item obtained from GetTimerIOReq(),
                                 or zero to have an IOReq dynamically
                                 created/deleted during the call.

    hseconds                     The number of hundredths-of-a-second to
                                 sleep.  This value can be larger than 100.

  Return Value

    Zero for success, or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    GetTimerIOReq()

##src/libs/lib3DO/autodocs.c::spg/lib3do/sleepmsec##
SleepMSec - Sleep for a number of milliseconds.

  Synopsis

    Err SleepMSec(Item ioreq, uint32 mseconds)

  Description

    This function puts the calling task in a wait state for the specified
    number of milliseconds. The function does not return until the time has
    passed.

  Arguments

    ioreq                        An IOReq item obtained from GetTimerIOReq(),
                                 or zero to have an IOReq dynamically
                                 created/deleted during the call.

    mseconds                     The number of milliseconds to sleep.  This
                                 value can be larger than 1000.

  Return Value

    Zero for success, or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    GetTimerIOReq()

##src/libs/lib3DO/autodocs.c::spg/lib3do/sleeptsec##
SleepTSec - Sleep for a number of tenths of a second.

  Synopsis

    Err SleepTSec(Item ioreq, uint32 tseconds)

  Description

    This function puts the calling task in a wait state for the specified
    number of tenths-of-a-second.  The function does not return until the time
    has passed.

  Arguments

    ioreq                        An IOReq item obtained from GetTimerIOReq(),
                                 or zero to have an IOReq dynamically
                                 created/deleted during the call.

    tseconds                     The number of tenths-of-a-second to sleep.
                                 This value can be larger than 10.

  Return Value

    Zero for success, or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    GetTimerIOReq()

##src/libs/lib3DO/autodocs.c::spg/lib3do/sleepusec##
SleepUSec - Sleep for a number of microseconds.

  Synopsis

    Err SleepUSec(Item ioreq, uint32 seconds, uint32 useconds)

  Description

    This function puts the calling task in a wait state for the specified
    period of time.  The function does not return until the time has passed.

  Arguments

    ioreq                        An IOReq item obtained from GetTimerIOReq(),
                                 or zero to have an IOReq dynamically
                                 created/deleted during the call.

    seconds                      The number of seconds to sleep.

    useconds                     The number of microseconds to sleep.

  Return Value

    Zero for success, or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    GetTimerIOReq()

##src/libs/lib3DO/autodocs.c::spg/lib3do/srectbounds##
SRectBounds - Calculate the union of two SRects.

  Synopsis

    SRect * SRectBounds(SRect *dst, SRect *rect1, SRect *rect2)

  Description

    This function calculates the bounding box of two rectangles, returning a
    rectangle that encompases all the area described by the two source
    rectangles.  The dst rectangle can be the same as either source rectangle.

  Arguments

    dst                          A pointer to an SRect where the results are
                                 to be stored.

    rect1                        A pointer to one of the source SRects.

    rect2                        A pointer to the other source SRect.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    SRectIntersection(), CRectBounds()

##src/libs/lib3DO/autodocs.c::spg/lib3do/srectfromcel##
SRectFromCel - Return SRect describing cel as currently projected.

  Synopsis

    SRect * SRectFromCel(SRect *dst, CCB *cel)

  Description

    This function calculates the rectangle occupied by a cel as projected and
    stores the results into *dst.  If the cel is projected to a
    non-rectangular shape the results will be invalid.

  Arguments

    dst                          A pointer to an SRect where the results are
                                 to be stored.

    cel                          A pointer to the cel.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CRectFromCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/srectfromcrect##
SRectFromCRect - Convert a CRect to an SRect.

  Synopsis

    SRect * SRectFromCRect(SRect *dst, CRect *src)

  Description

    This function converts a CRect to an SRect that describes the same area.

  Arguments

    dst                          A pointer to an SRect where the results are
                                 to be stored.

    src                          A pointer to a CRect to be converted to an
                                 SRect.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    CRectFromSRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/srectfromival##
SRectFromIVal - Fill in an SRect from inline values.

  Synopsis

    SRect * SRectFromIVal(SRect *dst, int32 x, int32 y,
                          int32 w, int32 h)

  Description

    This function stores the specified position and size value into *dst.

  Arguments

    dst                          A pointer to an SRect where the results are
                                 to be stored.

    x                            The value to assign to dst->pos.x.

    y                            The value to assign to dst->pos.y.

    w                            The value to assign to dst->size.x.

    h                            The value to assign to dst->size.y.

  Return Value

    The input parameter dst.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    SRectFromCRect()

##src/libs/lib3DO/autodocs.c::spg/lib3do/srectintersection##
SRectIntersection - Calculate the intersection of two SRects.

  Synopsis

    SRect * SRectIntersection(SRect *dst, SRect *rect1, SRect *rect2)

  Description

    This function calculates the intersection of two rectangles, returning a
    rectangle that describes the common area.  The dst rectangle can be the
    same as either source rectangle.  If there is no common area between the
    two source rectangles, the function return value is NULL, but the values
    in *dst are still modified.

  Arguments

    dst                          A pointer to an SRect where the results are
                                 to be stored.

    rect1                        A pointer to one of the source SRects.

    rect2                        A pointer to the other source SRect.

  Return Value

    The input parameter dst, or NULL if there is no common area between the
    source rectangles.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    SRectBounds(), CRectIntersection()

##src/libs/lib3DO/autodocs.c::spg/lib3do/tacreatetextcel##
taCreateTextCel - Create a text cel from tag args.

  Synopsis

    TextCel * taCreateTextCel(TagArg *tags)

  Description

    Creates a new text cel.  Specifying appropriate tags and values during cel
    creation sets all configurable attributes of the text cel.   If you
    include TCEL_TAG_UPDATE_TEXT_STRING in the tags, the specified text is
    rendered into the cel after processing all other tags.

    The only required tag is TCEL_TAG_FONT.  All unspecified attributes are
    set to default values as per CreateTextCel().  If width and/or height tags
    are not specified, the associated values are set to zero, resulting in an
    auto size cel.  Tags are documented in Appendix A of this document.

  Arguments

    tags                         Pointer to an array of tags and associated
                                 values.

  Return Value

    A pointer to the newly created TextCel structure; returns NULL if there
    isn't enough memory to create the new TextCel, which indicates that
    invalid tags are present.

  Associated Files

    lib3do.lib, textlib.h

  See Also

    CreateTextCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/tamodifytextcel##
taModifyTextCel - Change text cel attributes from tag args.

  Synopsis

    TextCel * taModifyTextCel(TextCel *tCel, TagArg *tags)

  Description

    Changes attributes already in a text cel.  You can set all configurable
    attributes of the text cel by specifying appropriate tags and values.   If
    you include TCEL_TAG_UPDATE_TEXT_STRING  in the tags, the specified text
    is rendered into the cel after processing all other tags.

    A negative return value is possible when the text cel size or format
    buffer attributes are changed and a memory allocation failure occurs.  A
    positive non-zero return value is possible if TCEL_TAG_UPDATE_TEXT_STRING
    is specified and characters are clipped.  Otherwise, the return value is
    zero.

    Tags are documented in Appendix A of this document.

  Arguments

    tCel                         Pointer to a TextCel structure.

    tags                         Pointer to an array of tags and associated
                                 values.

  Return Value

    Negative on error, non-negative if successful.

  Associated Files

    lib3do.lib, textlib.h

  See Also

    SetTextCel...() functions

##src/libs/lib3DO/autodocs.c::spg/lib3do/timercancel##
TimerCancel - Cancel and delete an existing timer.

  Synopsis

    Err TimerCancel(TimerHandle thandle)

  Description

    This function cancels a timer (if active) and releases all resources
    acquired when it was created.  The timer's handle is no longer valid after
    this call.

    If an event had occurred for this timer and a notification message was
    sent, this function withdraws the notification message from your port.  If
    you had already received the message but not yet replied to it, the
    timer's resources are released after you reply to the message.  In other
    words, you can respond to a timer event message by cancelling the timer
    that sent the message, and you can safely do so before replying to the
    message.

    If the timer notification was signal-based and a notification signal was
    sent, you will still receive it since there is no way to withdraw a signal
    once it has been sent.

  Arguments

    thandle                      The handle for a timer created by one of the
                                 TimerMsg or TimerSignal functions.

  Return Value

    Zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerSuspend()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timerchangeuserdata##
TimerChangeUserdata - Change user data values for a timer.

  Synopsis

    Err TimerChangeUserdata(TimerHandle thandle,
                            uint32 userdata1, uint32 userdata2)

  Description

    This function changes the user data associated with a timer.  The user
    data is delivered to you as part of the notification message for
    message-based timers.  The user data is not meaningful for signal-based
    timers.

  Arguments

    thandle                      The handle for a timer created by one of the
                                 TimerMsg or TimerSignal functions.

    userdata1                    A value passed back to you in the
                                 msg_DataPtr field of the notification
                                 message.

    userdata2                    A value passed back to you in the
                                 msg_DataSize field of the notification
                                 message.

  Return Value

    Zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/timermsgafterdelay##
TimerMsgAfterDelay - Send a message after a delay.

  Synopsis

    TimerHandle TimerMsgAfterDelay(Item msgport,
                                   uint32 seconds, uint32 microseconds,
                                   uint32 userdata1, uint32 userdata2)

  Description

    This function creates a timer that notifies you by message after the
    specified delay.  The timer is a one-shot; after sending a notification
    message the timer enters a suspended state.  Use TimerReset() to
    reactivate the timer using new time values, TimerRestart() to start
    another delay period of the same length as last time, or TimerCancel() to
    delete the timer.

    The TimerServices thread must be active before calling this function.

  Arguments

    msgport                      The port to which the notification message
                                 is sent.

    seconds                      The seconds portion of the delay.

    microseconds                 The microseconds portion of the delay.  This
                                 value can be larger than 1 million.

    userdata1                    A value passed back to you in the
                                 msg_DataPtr field of the notification
                                 message.

    userdata2                    A value passed back to you in the
                                 msg_DataSize field of the notification
                                 message.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerMsgAtTime(), TimerMsgHeartbeat()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timermsgafterdelayvbl##
TimerMsgAfterDelayVBL - Send a message after the specified number of VBLs
                        occur.

  Synopsis

    TimerHandle TimerMsgAfterDelayVBL(Item msgport, uint32 fields,
                                      uint32 userdata1,
                                      uint32 userdata2)

  Description

    This function creates a timer that notifies you by message after the
    specified number of VBLs have occurred.  The timer is a one-shot; after
    sending a notification message the timer enters a suspended state.  Use
    TimerReset() to reactivate the timer using new time values, TimerRestart()
    to start another delay period of the same length as last time, or
    TimerCancel() to delete the timer.

    The TimerServices thread must be active before calling this function.

  Arguments

    msgport                      The port to which the notification message
                                 is sent.

    fields                       The number of VBLs to occur before sending
                                 the message.

    userdata1                    A value passed back to you in the
                                 msg_DataPtr field of the notification
                                 message.

    userdata2                    A value passed back to you in the
                                 msg_DataSize field of the notification
                                 message.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerMsgAtTimeVBL(), TimerMsgHeartbeatVBL()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timermsgattime##
TimerMsgAtTime - Send a message at a specific time.

  Synopsis

    TimerHandle TimerMsgAtTime(Item msgport,
                               uint32 seconds, uint32 microseconds,
                               uint32 userdata1, uint32 userdata2)

  Description

    This function creates a timer that notifies you by message at the
    specified time.  The timer is a one-shot; after sending a notification
    message the timer enters a suspended state.  Use TimerReset() to
    reactivate the timer using new time values, or TimerCancel() to delete the
    timer.

    The notification message is a SMALL message containing as values the
    userdata1 and userdata2 values specified in this call.

    AtTime messages are useful primarily for synchronizing with real-world
    events.  For a one-shot delay use TimerMsgDelay().  For a periodic series
    of messages, use TimerMsgHeartbeat().

    The TimerServices thread must be active before calling this function.

  Arguments

    msgport                      The port to which the notification message
                                 is sent.

    seconds                      The seconds portion of the time.

    microseconds                 The microseconds portion of the time.  This
                                 value can be larger than 1 million.

    userdata1                    A value passed back to you in the
                                 msg_DataPtr field of the notification
                                 message.

    userdata2                    A value passed back to you in the
                                 msg_DataSize field of the notification
                                 message.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerMsgAfterDelay(), TimerMsgHeartbeat()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timermsgattimevbl##
TimerMsgAtTimeVBL - Send a message at the specified VBL time.

  Synopsis

    TimerHandle TimerMsgAtTimeVBL(Item msgport, uint32 fields,
                                  uint32 userdata1, uint32 userdata2)

  Description

    This function creates a timer that notifies you by message at the
    specified VBL time.  The timer is a one-shot; after sending a notification
    message the timer enters a suspended state.  Use TimerReset() to
    reactivate the timer using new time values, or TimerCancel() to delete the
    timer.

    The notification message is a SMALL message containing as values the
    userdata1 and userdata2 values specified in this call.

    The TimerServices thread must be active before calling this function.

  Arguments

    msgport                      The port to which the notification message
                                 is sent.

    fields                       The VBL field count at which the event
                                 occurs.

    userdata1                    A value passed back to you in the
                                 msg_DataPtr field of the notification
                                 message.

    userdata2                    A value passed back to you in the
                                 msg_DataSize field of the notification
                                 message.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerMsgAfterDelayVBL(), TimerMsgHeartbeatVBL()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timermsgheartbeat##
TimerMsgHeartbeat - Send a message periodically.

  Synopsis

    TimerHandle TimerMsgHeartbeat(Item msgport,
                                  uint32 seconds, uint32 microseconds,
                                  uint32 userdata1, uint32 userdata2)

  Description

    This function creates a timer that repeatedly notifies you by message at
    the specified interval.  The timer continues sending notifications on a
    regular interval until you use TimerSuspend() to temporarily halt it or
    TimerCancel() to delete it.

    The Heartbeat support in the TimerServices thread contains logic to
    prevent drift in the frequency of timer events.  Messages are delivered at
    the specified frequency even if it takes you significant time to respond
    to each message event.  If an entire frequency interval elapses and you
    still haven't replied to the prior message you will miss one timer event,
    but the frequency of subsequent events is not disturbed.

    The TimerServices thread must be active before calling this function.

  Arguments

    msgport                      The port to which the notification message
                                 is sent.

    seconds                      The seconds portion of the frequency.

    microseconds                 The microseconds portion of the frequency.
                                 This value can be larger than 1 million.

    userdata1                    A value passed back to you in the
                                 msg_DataPtr field of the notification
                                 message.

    userdata2                    A value passed back to you in the
                                 msg_DataSize field of the notification
                                 message.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerMsgAtTime(), TimerMsgAfterDelay(), HZ_TO_USEC()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timermsgheartbeatvbl##
TimerMsgHeartbeatVBL - Send a message periodically based on VBLs.

  Synopsis

    TimerHandle TimerMsgHeartbeatVBL(Item msgport, uint32 fields,
                                     uint32 userdata1,
                                     uint32 userdata2)

  Description

    This function creates a timer that repeatedly notifies you by message
    after the specified number of VBLs have occurred.  The timer continues
    sending notifications on a regular interval until you use TimerSuspend()
    to temporarily halt it or TimerCancel() to delete it.

    The Heartbeat support in the TimerServices thread contains logic to
    prevent drift in the frequency of timer events.  Signals are delivered at
    the specified frequency even if it takes you significant time to respond
    to each signal event.

    The TimerServices thread must be active before calling this function.

  Arguments

    msgport                      The port to which the notification message
                                 is sent.

    fields                       The number of VBLs to occur between each
                                 event.

    userdata1                    A value passed back to you in the
                                 msg_DataPtr field of the notification
                                 message.

    userdata2                    A value passed back to you in the
                                 msg_DataSize field of the notification
                                 message.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerMsgAtTimeVBL(), TimerMsgAfterDelayVBL()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timerreset##
TimerReset - Restart a timer using new values.

  Synopsis

    Err TimerReset(TimerHandle thandle,
                   uint32 seconds, uint32 usecs_or_fields)

  Description

    This function restarts a timer using new time values.  If the timer was
    suspended, this reactivates it.  If the timer was active, this stops the
    current action and restarts the timer with the new time values.  This can
    be used to start a new delay even if the old one hadn't triggered yet.

    For microsecond-based timers, pass both seconds and microseconds values.
    For VBL-based timers, pass zero for seconds and put the new field count in
    the usecs_or_fields parm.

    If an event had occurred for this timer and a notification message was
    sent, this function withdraws the notification message from your port.  If
    you had already received the message but not yet replied to it, the timer
    is still restarted properly.  In other words, you can respond to a timer
    event message by resetting the timer that sent the message, and you can
    safely do so before replying to the message.

  Arguments

    thandle                      The handle for a timer created by one of the
                                 TimerMsg or TimerSignal functions.

    seconds                      The new seconds value for the timer.

    usecs_or_fields              The new microseconds or field-count value
                                 for the timer.

  Return Value

    Zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerRestart()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timerrestart##
TimerRestart - Restart a timer using current values.

  Synopsis

    Err TimerRestart(TimerHandle thandle)

  Description

    This function restarts a timer using the same time values as the last time
    the timer was active.  If the timer was suspended, this reactivates it.
    If the timer was active, this stops the current action and restarts the
    timer.  This can be used to start a new delay even if the old one hadn't
    triggered yet.  It can also be used to re-sync a heartbeat timer to some
    external event.

    If an event had occurred for this timer and a notification message was
    sent, this function withdraws the notification message from your port.  If
    you had already received the message but not yet replied to it, the timer
    is still restarted properly.  In other words, you can respond to a timer
    event message by restarting the timer that sent the message, and you can
    safely do so before replying to the message.

  Arguments

    thandle                      The handle for a timer created by one of the
                                 TimerMsg or TimerSignal functions.

  Return Value

    Zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerReset()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timerservicesclose##
TimerServicesClose - Close the connection to a running TimerServices
                     thread.

  Synopsis

    void TimerServicesClose(void)

  Description

    This function closes your task's connection to a TimerServices thread
    started by some other task.  Before calling this function, ensure that
    your task and all its child threads have called TimerCancel() to release
    any timers they were using.

  Return Value

    Zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerServicesShutdown()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timerservicesopen##
TimerServicesOpen - Open a connection to a running TimerServices thread.

  Synopsis

    Err TimerServicesOpen(void)

  Description

    This function establishes your task's connection to a TimerServices thread
    started by some other task.  After a successful return from this function
    your task and all its child threads can use timer services.

  Return Value

    Zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerServicesStartup()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timerservicesshutdown##
TimerServicesShutdown - Shut down the TimerServices thread.

  Synopsis

    void TimerServicesShutdown(void)

  Description

    This function shuts down the TimerServices thread.  Before calling this
    function, ensure that your task and all its child threads have called
    TimerCancel() to release any timers they were using.

    Only the task which started the TimerServices thread may shut it down.

  Return Value

    Zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerServicesClose()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timerservicesstartup##
TimerServicesStartup - Start the TimerServices thread.

  Synopsis

    Err TimerServicesStartup(int32 delta_priority)

  Description

    This function starts the timer services thread.  The thread's priority is
    set to your task's priority plus the delta_priority.  After calling this
    function your task and all its child threads can use timer services.

    The service thread doesn't use many CPU cycles, and it uses them only when
    you make requests for services and when time events occur.  Generally, you
    should run the service thread at a slightly higher priority than the rest
    of your tasks/threads, especially if timely notifications are critical.

    If this function returns positive 1, that indicates that someone else has
    already started the service thread.  In this case, you should respond by
    calling TimerServicesOpen() to connect with the already-running thread.

  Arguments

    delta_priority               A value added to your task's priority, the
                                 result becomes the thread's priority.

  Return Value

    Zero on success, one if the thread is already running, or a negative error
    code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerServicesOpen()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timerservicesverify##
TimerServicesVerify - Verify timer owners.

  Synopsis

    Err TimerServicesVerify(void)

  Description

    This function causes the TimerServices thread to check all outstanding
    timers to make sure the tasks and threads that created them are still
    running.  If any tasks or threads have died without releasing their
    timers, this function releases them.

    This function is intended to be called by the task that started the
    service thread.  If a main task starts the service thread and then spawns
    other tasks that may use the services, it can call this function after
    each child task has completed.  This function forces a cleanup of any
    timers a child task left outstanding, which can help prevent the leaking
    away of resources from the main task's memory/item pools.  The cleanup
    will not affect any timers belonging to child tasks or threads which are
    still running.

    When the library is compiled with DEBUG=1 in effect, this function reports
    in the debugger terminal window any cleanup actions it has to take .  This
    can help you identify tasks or threads which are leaving timers
    outstanding when they terminate.

  Return Value

    Zero on success or a negative error code.  If some timers had to be
    released because their owners died, that is NOT considered to be an error.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

##src/libs/lib3DO/autodocs.c::spg/lib3do/timersignalafterdelay##
TimerSignalAfterDelay - Send a signal after a delay.

  Synopsis

    TimerHandle TimerSignalAfterDelay(int32 signal, uint32 seconds,
                                      uint32 microseconds)

  Description

    This function creates a timer that notifies you by signal after the
    specified delay.  The timer is a one-shot; after sending a notification
    message the timer enters a suspended state.  Use TimerReset() to
    reactivate the timer using new time values, TimerRestart() to start
    another delay period of the same length as last time, or TimerCancel() to
    delete the timer.

    The TimerServices thread must be active before calling this function.

  Arguments

    signal                       The signal to send to your task.

    seconds                      The seconds portion of the delay.

    microseconds                 The microseconds portion of the delay.  This
                                 value can be larger than 1 million.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerSignalAtTime(), TimerSignalHeartbeat()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timersignalafterdelayvbl##
TimerSignalAfterDelayVBL - Send a signal after the specified number of
                           VBLs occur .

  Synopsis

    TimerHandle TimerSignalAfterDelayVBL(int32 signal, uint32 fields)

  Description

    This function creates a timer that notifies you by signal after the
    specified number of VBLs have occurred.  The timer is a one-shot; after
    sending a notification message the timer enters a suspended state.  Use
    TimerReset() to reactivate the timer using new time values, TimerRestart()
    to start another delay period of the same length as last time, or
    TimerCancel() to delete the timer.

    The TimerServices thread must be active before calling this function.

  Arguments

    signal                       The signal to send to your task.

    fields                       The number of VBLs to occur before sending
                                 the message.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerSignalAtTimeVBL(), TimerSignalHeartbeatVBL()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timersignalattime##
TimerSignalAtTime - Send a signal at the specified time.

  Synopsis

    TimerHandle TimerSignalAtTime(int32 signal, uint32 seconds,
                                  uint32 microseconds)

  Description

    This function creates a timer that notifies you by signal at the specified
    time.  The timer is a one-shot; after sending a notification message the
    timer enters a suspended state.  Use TimerReset() to reactivate the timer
    using new time values, or TimerCancel() to delete the timer.

    AtTime signals are useful primarily for synchronizing with real-world
    events.  For a one-shot delay use TimerSignalDelay().  For a periodic
    series of signals, use TimerSignalHeartbeat().

    The TimerServices thread must be active before calling this function.

  Arguments

    signal                       The signal to send to your task.

    seconds                      The seconds portion of the time.

    microseconds                 The microseconds portion of the time.  This
                                 value can be larger than 1 million.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerSignalAfterDelay(), TimerSignalHeartbeat()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timersignalattimevbl##
TimerSignalAtTimeVBL - Send a signal at the specified VBL.

  Synopsis

    TimerHandle TimerSignalAtTimeVBL(int32 signal, uint32 fields)

  Description

    This function creates a timer that notifies you by signal at the specified
    VBL time.  The timer is a one-shot; after sending a notification message
    the timer enters a suspended state.  Use TimerReset() to reactivate the
    timer using new time values, or TimerCancel() to delete the timer.

    The TimerServices thread must be active before calling this function.

  Arguments

    signal                       The signal to send to your task.

    fields                       The VBL field count at which the event
                                 occurs.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerSignalAfterDelayVBL(), TimerSignalHeartbeatVBL()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timersignalheartbeat##
TimerSignalHeartbeat - Send a signal periodically.

  Synopsis

    TimerHandle TimerSignalHeartbeat(int32 signal, uint32 seconds,
                                     uint32 microseconds)

  Description

    This function creates a timer that repeatedly notifies you by signal at
    the specified intervals..  The timer continues sending notifications on a
    regular interval until you use TimerSuspend() to temporarily halt it or
    TimerCancel() to delete.

    The Heartbeat support in the TimerServices thread contains logic to
    prevent drift in the frequency of timer events.  Signals are delivered at
    the specified frequency even if it takes you significant time to respond
    to each signal event.

    The TimerServices thread must be active before calling this function.

  Arguments

    signal                       The signal to send to your task.

    seconds                      The seconds portion of the frequency.

    microseconds                 The microseconds portion of the frequency.
                                 This value can be larger than 1 million.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerSignalAtTime(), TimerSignalAfterDelay(), HZ_TO_USEC()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timersignalheartbeatvbl##
TimerSignalHeartbeatVBL - Send a signal periodically based on VBLs.

  Synopsis

    TimerHandle TimerSignalHeartbeatVBL(int32 signal, uint32 fields)

  Description

    This function creates a timer that repeatedly notifies you by signal after
    the specified number of VBLs have occurred.  The timer continues sending
    notifications on a regular interval until you use TimerSuspend() to
    temporarily halt it or TimerCancel() to delete it.

    The Heartbeat support in the TimerServices thread contains logic to
    prevent drift in the frequency of timer events.  Signals are delivered at
    the specified frequency even if it takes you significant time to respond
    to each signal event.

    The TimerServices thread must be active before calling this function.

  Arguments

    signal                       The signal to send to your task.

    fields                       The number of VBLs to occur between each
                                 event.

  Return Value

    A TimerHandle (a positive value) on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerSignalAtTimeVBL(), TimerSignalAfterDelayVBL()

##src/libs/lib3DO/autodocs.c::spg/lib3do/timersuspend##
TimerSuspend - Suspend a timer.

  Synopsis

    Err TimerSuspend(TimerHandle thandle)

  Description

    This function suspends an active timer but does not release resources
    associated with the timer.  If the timer was already suspended this
    function acts as a no-op.

    If an event had occurred for this timer and a notification message was
    sent, this function withdraws the notification message from your port.  If
    you had already received the message but not yet replied to it, the timer
    is still properly suspended.  In other words, you can respond to a timer
    event message by suspending the timer that sent the message, and you can
    safely do so before replying to the message.

    Use TimerRestart() to reactivate the timer using the old time values.  Use
    TimerReset() to reactivate it using new time values.   If the timer is
    delay-based, suspending then restarting the timer does not resume the
    delay count from the point it was suspended, it starts a new delay of the
    specified period.

  Arguments

    thandle                      The handle for a timer created by one of the
                                 TimerMsg or TimerSignal functions.

  Return Value

    Zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, timerutils.h

  See Also

    TimerCancel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/unloadanim##
UnloadAnim - Unload an animation

  Synopsis

    void UnloadAnim (ANIM * animPtr)

  Description

    Unloads an animation file previously loaded with LoadAnim(), and frees all
    resources acquired during the load process.

  Arguments

    animPtr                      Pointer to an ANIM structure which was
                                 returned from the LoadAnim() function.

  Associated Files

    lib3do.lib, parse3do.h

  See Also

    LoadAnim()

##src/libs/lib3DO/autodocs.c::spg/lib3do/unloadcel##
UnloadCel - Unload a cel file loaded by LoadCel().

  Synopsis

    void UnloadCel(CCB *cel)

  Description

    This function releases all resources acquired when a cel was loaded via
    LoadCel().  A NULL pointer is valid as input, and is quietly treated as a
    no-op.

    UnloadCel() just calls DeleteCel(); it differs only in that it doesn't
    return a NULL pointer.

    DeleteCel() and DeleteCelList() may also be used on files loaded via
    LoadCel().

  Arguments

    cel                          A pointer to a cel loaded via LoadCel().

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, celutils.h

  See Also

    LoadCel(), DeleteCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/unloadfile##
UnloadFile - Unload a file

  Synopsis

    void UnloadFile (void *buffer)

  Description

    Unloads a file previously loaded with LoadFile(), and frees all resources
    acquired during the load process.

  Arguments

    buffer                       Pointer to a file buffer which was returned
                                 from the LoadFile() function.

  Associated Files

    lib3do.lib, blockfile.h

  See Also

    LoadFile()

##src/libs/lib3DO/autodocs.c::spg/lib3do/unloadfont##
UnloadFont - Release font resources.

  Synopsis

    void UnloadFont(FontDescriptor * fDesc)

  Description

    Releases resources acquired during LoadFont() or ParseFont() processing.
    If the font was loaded via LoadFont(), releases the FontDescriptor and
    unloads the file image, releasing the memory it occupied. If you loaded
    the font file image yourself and called ParseFont(),UnloadFont() releases
    the FontDescriptor. In that case, you must unload/release the font file
    image yourself.

    Because TextCel structures contain a reference to a FontDescriptor, you
    must delete all TextCels that reference a FontDescriptor before you call
    UnloadFont()for that descriptor.

  Arguments

    FontDescriptor               Pointer to a FontDescriptor structure.

  Associated Files

    lib3do.lib, fontlib.h

  See Also

    LoadFont(), ParseFont()

##src/libs/lib3DO/autodocs.c::spg/lib3do/unloadimage##
UnloadImage - Unload an image

  Synopsis

    void UnloadImage (void *imageBuffer)

  Description

    Unloads an image file previously loaded with LoadImage(), and frees all
    resources acquired during the load process.

    Call this function only if you allowed LoadImage() to allocate the
    destination buffer for you by passing a NULL buffer pointer to
    LoadImage(). If you allocated your own image buffer and passed it to
    LoadImage(), you must free the buffer yourself.

  Arguments

    imageBuffer                  Pointer to a buffer which was allocated
                                 previously by the LoadImage() function.

  Associated Files

    lib3do.lib, parse3do.h

  See Also

    LoadImage()

##src/libs/lib3DO/autodocs.c::spg/lib3do/updatetextincel##
UpdateTextInCel - Render text into a text cel.

  Synopsis

    Err UpdateTextInCel(TextCel *tCel, Boolean replaceExisting,
                        char *fmtString, ...)

  Description

    Renders text into a cel.  If the cel has a format buffer attached to it,
    the fmtString and related arguments pass first through sprintf() for
    formatting.

    If replaceExisting is TRUE, the new text replaces any text already in the
    cel. The cel data buffer is zeroed, the pen position within the cel data
    buffer is set back to the top- and left-margin values, and the new text is
    rendered.

    If replaceExisting is FALSE, the new text is added to the text already in
    the cel, using the cel's current pen position.  This effectively adds
    new characters to the end of the text already in the cel.

    If you created the cel with a width or height of zero (an autosize cel),
    its size is adjusted to fit the formatted text exactly, if the
    replaceExisting flag is TRUE. If the replaceExisting flag is FALSE for an
    autosize cel, the net effect is that no characters are rendered.  This
    happens  because the cel was sized exactly right for the characters
    rendered last time replaceExisting was TRUE. Attempting to add more
    characters to the cel always results in those characters falling outside
    the cel's boundaries, where they will be clipped.

    The related vUpdateTextInCel() function works exactly the same, but takes
    a va_list type instead of the ... parameters.

  Arguments

    tCel                         Pointer to a TextCel structure.

    replaceExisting              Flag indicating whether the new text is
                                 added to or replaces text already in the
                                 cel.

    fmtString                    The string of characters to be rendered,
                                 optionally including printf-style %
                                 formatting commands.

    ...                          Arguments for printf-style formatting.
                                 (Optional.)

  Return Value

    Zero if all characters were rendered, positive if any characters were
    clipped, negative if a bigger data buffer could not be allocated for an
    autosize cel. If the cel is not an autosize type, it canxd5 t return a
    negative value.

  Associated Files

    lib3do.lib, textlib.h

  See Also

    vUpdateTextInCel()

##src/libs/lib3DO/autodocs.c::spg/lib3do/vgettextextent##
vGetTextExtent - Get text width and height if formatted using format
                 arguments.

  Synopsis

    char * vGetTextExtent(TextCel *tCel,
                          int32 *pWidth, int32 *pHeight,
                          char *fmtString, va_list fmtArgs)

  Description

    Identical to GetTextExtent() except that it takes a va_list rather than a
    variable argument list for printf-style formatting.

##src/libs/lib3DO/autodocs.c::spg/lib3do/vupdatetextincel##
vUpdateTextInCel - Render into text cel using printf-style formatting.

  Synopsis

    Err vUpdateTextInCel(TextCel *tCel, Boolean replaceExisting,
                         char *fmtString, va_list fmtArgs)

  Description

    Identical to UpdateTextInCel() except that it takes a va_list rather than
    a variable argument list for printf-style formatting.

##src/libs/lib3DO/autodocs.c::spg/lib3do/waitasyncloadfile##
WaitAsyncLoadFile - Wait for an async file load operation to complete.

  Synopsis

    Err WaitAsyncLoadFile(LoadFileInfo *lf)

  Description

    This function waits for completion of an async file load started earlier.

    Do not call FinishAsyncLoadFile() after calling this function; this
    function performs the Finish actions internally.

  Arguments

    lf                           A pointer to the LoadFileInfo structure for
                                 the load operation.

  Return Value

    Returns zero on success or a negative error code.

  Implementation

    Library call implemented in lib3do.lib.

  Associated Files

    lib3do.lib, blockfile.h

  See Also

    AsyncLoadFile()

##src/libs/lib3DO/autodocs.c::spg/lib3do/writemacfile##
WriteMacFile - Write from buffer to Mac file

  Synopsis

    long WriteMacFile (char *filename, char *buf, long count)

  Description

    Writes count bytes from the specified buffer into the file named by
    filename, creating the MAC file, writing the specified number of bytes,
    and closing the Macintosh file. Returns the number of bytes written to the
    Macintosh file.

  Arguments

    filename                     pointer to char string specifying the name
                                 of the file to write on the Macintosh.

    buf                          pointer to the data bytes to write.

    count                         number of bytes to write.

  Associated Files

    lib3do.lib, utils3do.h

  Return Value

    The number of bytes written to the Macintosh file.

##src/libs/lib3DO/autodocs.c::spg/lib3do/xcornerfromsrect##
XCORNERFROMSRECT - Calculate the opposite corner X location for an SRect.

  Synopsis

    int32 XCORNERFROMSRECT(SRect *rect)

  Description

    This macro evaluates to the X location for the corner opposite to the
    corner described by rect->pos.

    This macro evaluates its argument more than once; be careful of side
    effects.  It is usable in expression context.

  Arguments

    rect                         A pointer to an SRect.

  Return Value

    The X location of the opposite corner.

  Implementation

    Macro

  Associated Files

    lib3do.lib, celutils.h

  See Also

    ICornerFromSRect(), YCORNERFROMSRECT()

##src/libs/lib3DO/autodocs.c::spg/lib3do/xsizefromcrect##
XSIZEFROMCRECT - Calculate the X coordinate size for a CRect.

  Synopsis

    CCB * XSIZEFROMCRECT(CRect *rect)

  Description

    This macro evaluates to the size in the X dimension of the area described
    by rect.

    This macro evaluates its argument more than once; be careful of side
    effects.  It is usable in expression context.

  Arguments

    rect                         A pointer to a CRect.

  Return Value

    The size of the area in the X dimension.

  Implementation

    Macro

  Associated Files

    lib3do.lib, celutils.h

  See Also

    ISizeFromCRect(), YSIZEFROMCRECT()

##src/libs/lib3DO/autodocs.c::spg/lib3do/ycornerfromsrect##
YCORNERFROMSRECT - Calculate the opposite corner Y location for an SRect.

  Synopsis

    CCB * YCORNERFROMSRECT(SRect *rect)

  Description

    This macro evaluates to the Y location for the corner opposite to the
    corner described by rect->pos.

    This macro evaluates its argument more than once; be careful of side
    effects.  It is usable in expression context.

  Arguments

    rect                         A pointer to an SRect.

  Return Value

    The Y location of the opposite corner.

  Implementation

    Macro

  Associated Files

    lib3do.lib, celutils.h

  See Also

    ICornerFromSRect(), XCORNERFROMSRECT()

##src/libs/lib3DO/autodocs.c::spg/lib3do/ysizefromcrect##
YSIZEFROMCRECT - Calculate the Y coordinate size for a CRect.

  Synopsis

    CCB * YSIZEFROMCRECT(CRect *rect)

  Description

    This macro evaluates to the size in the Y dimension of the area described
    by rect.

    This macro evaluates its argument more than once; be careful of side
    effects.  It is usable in expression context.

  Arguments

    rect                         A pointer to an SRect.

  Return Value

    The size of the area in the Y dimension.

  Implementation

    Macro

  Associated Files

    lib3do.lib, celutils.h

  See Also

    ISizeFromCRect(), XSIZEFROMCRECT()

##src/libs/operamath/autodocs.c::spg/math/absvec3_f16##
AbsVec3_F16 - Computes the absolute value of a vector of 16.16 values.

  Synopsis

    frac16 AbsVec3_F16( vec3f16 vec )

  Description

    This function computes the absolute value of a vector of 16.16 values.

  Arguments

    vec                          The vector whose absolute value to compute.

  Return Value

    The function returns the absolute value (a 16.16 fraction).

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  Caveats

    This function does not detect overflow conditions and will return
    unpredictable results in case of overflow.

  See Also

    AbsVec4_F16()

##src/libs/operamath/autodocs.c::spg/math/absvec4_f16##
AbsVec4_F16 - Computes the absolute value of a vector of 16.16 values.

  Synopsis

    frac16 AbsVec4_F16( vec4f16 vec )

  Description

    This function computes the absolute value of a vector of 16.16 values.

  Arguments

    vec                          The vector whose absolute value to compute.

  Return Value

    The function returns the absolute value (a 16.16 fraction).

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  Caveats

    This function does not detect overflow conditions and will return
    unpredictable results in case of overflow.

  See Also

    AbsVec3_F16()

##src/libs/operamath/autodocs.c::spg/math/add32##
Add32 - Adds two 32-bit integer quantities together.

  Synopsis

    int32 Add32( int32 x, int32 y )

  Description

    This macro adds two 32-bit numbers together and returns the result.  The
    macro is included for completeness.

    The macro is actually defined as simple addition of its arguments, and
    does not check for or enforce any type cast requirements.

  Arguments

    x, y                         32-bit integers.

  Return Value

    The macro returns the sum of its arguments.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    AddF16(), AddF14(), AddF30()

##src/libs/operamath/autodocs.c::spg/math/add64##
Add64 - Adds two 64-bit integers together.

  Synopsis

    void Add64( int64 *r, int64 *a1, int64 *a2 )

  Description

    This function adds two 64-bit integers together and returns the result.
    The value deposited in r is the sum of the arguments.  This function is
    actually the same function as AddF32().

  Arguments

    r                            A pointer to a 64-bit integer structure to
                                 store the result.

    a1, a2                       Pointers to 64-bit integer addends.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    AddF32(), AddF60()

##src/libs/operamath/autodocs.c::spg/math/addf14##
AddF14 - Adds two 2.14 format fixed point fractions together.

  Synopsis

    frac14 AddF14( frac14 x, frac14 y )

  Description

    This macro adds two 2.14 format fixed point fractions together and returns
    the result.  The macro is included for completeness.

    The macro is actually defined as simple addition of its arguments, and
    does not check for or enforce any type cast requirements.

  Arguments

    x, y                         2.14 format fixed point fractions.

  Return Value

    The macro returns the sum of the arguments.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    Add32(), AddF16(), AddF30()

##src/libs/operamath/autodocs.c::spg/math/addf16##
AddF16 - Adds two 16.16 format fixed point fractions together.

  Synopsis

    frac16 AddF16( frac16 x, frac16 y )

  Description

    This macro adds two 16.16 format fixed point fractions together and
    returns the result.  The macro is included for completeness.

    The macro is actually defined as simple addition of its arguments, and
    does not check for or enforce any type cast requirements.

  Arguments

    x, y                         16.16 format fixed point fractions.

  Return Value

    The function returns the sum of the arguments.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    Add32(), AddF14(), AddF30()

##src/libs/operamath/autodocs.c::spg/math/addf30##
AddF30 - Adds two 2.30-format fixed-point fractions together.

  Synopsis

    frac30 AddF30( frac30 x, frac30 y )

  Description

    This macro adds two 2.30 format fixed-point fractions together and returns
    the result.  The macro is included for completeness.

    The macro is actually defined as the simple addition of its arguments.  It
    does not check for or enforce any type cast requirements.

  Arguments

    x, y                         2.30-format fixed-point fractions.

  Return Value

    The macro returns the sum of its arguments.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    Add32(), AddF16(), AddF14()

##src/libs/operamath/autodocs.c::spg/math/addf32##
AddF32 - Adds two 32.32-format fixed-point fractions together.

  Synopsis

    void AddF32( frac32 *r, frac32 *a1, frac32 *a2 )

  Description

    This function adds two 32.3- format fixed-point fractions together and
    deposits the result in the location pointed to by the r argument.  This
    function is actually the same function as Add64().

  Arguments

    r                            A pointer to a 32.32-fraction structure to
                                 store the result.

    a1, a2                       Pointers to 32.32-format fixed-point
                                 fraction addends.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Add64(), AddF60()

##src/libs/operamath/autodocs.c::spg/math/addf60##
AddF60 - Adds two 4.60-format fixed-point fractions together.

  Synopsis

    void AddF60( frac60 *r, frac60 *a1, frac60 *a2 )

  Description

    This function adds two 4.60-format fixed-point fractions together and
    deposits the result in the location pointed to by the r argument.

  Arguments

    r                            A pointer to a 4.60-fraction structure to
                                 store the result.

    a1, a2                       Pointers to 4.60-format fixed-point fraction
                                 addends.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Add64(), AddF32()

##src/libs/operamath/autodocs.c::spg/math/atan2f16##
Atan2F16 - Computes the arctangent of a ratio.

  Synopsis

    frac16 Atan2F16( frac16 x, frac16 y )

  Description

    This function computes the arctangent of the ratio y/x.

    The result assumes 256.0 units in the circle (or 16,777,216 units if used
    as an integer).  A correct 16.16 result is returned if the arguments are
    int32, frac30 or frac14, as long as both arguments are the same type.

  Arguments

    x, y                         16.16 format fractions.

  Return Value

    The function returns the arctangent of the ratio of the arguments.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

##src/libs/operamath/autodocs.c::spg/math/closemathfolio##
CloseMathFolio - Closes the math folio and resets the mathbase global
                 variable to zero.

  Synopsis

    Err CloseMathFolio(void)

  Description

    CloseMathFolio attempts to clsoe the math folio structure.  If successful,
    it also sets _Mathfolio to zero and returns zero.  On failure a negative
    error is returend.

  Implementation

    Convenience call implemented in operamath.lib V22.

  See Also

    OpenMathFolio()

##src/libs/operamath/autodocs.c::spg/math/compares64##
CompareS64 - Compares two signed 64-bit integer quantities.

  Synopsis

    int32 CompareS64( int64 *s1, int64 *s2 )

  Description

    This function compares two signed 64-bit integers.  This function is
    actually the same function as CompareSF32() and CompareSF60().

  Arguments

    s1, s2                       Pointers to signed 64-bit integers.

  Return Value

    The result is positive if s1 > s2, negative if s1 < s2 and zero if
         s1 == s2.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    CompareSF32(), CompareU64(), CompareUF32(), CompareUF60(), CompareSF60()

##src/libs/operamath/autodocs.c::spg/math/comparesf32##
CompareSF32 - Compares two signed 32.32-format fractions.

  Synopsis

    int32 CompareSF32( frac32 *s1, frac32 *s2 )

  Description

    This function compares two signed 32.32-format fractions.  This function
    is actually the same function as CompareS64() and CompareSF60().

  Arguments

    s1, s2                       Pointers to signed 32.32 fractions.

  Return Value

    The result is positive if s1 > s2, negative if s1 < s2 and zero if
         s1 == s2.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    CompareS64(), CompareU64(), CompareUF32(), CompareUF60(), CompareSF60()

##src/libs/operamath/autodocs.c::spg/math/comparesf60##
CompareSF60 - Compares two signed 4.60-format fractions.

  Synopsis

    int32 CompareSF60( frac60 *s1, frac60 *s2 )

  Description

    This function compares two signed 4.60-format fractions.  This function
    is actually the same function as CompareS64() and CompareSF32().

  Arguments

    s1, s2                       Pointers to signed 4.60 fractions.

  Return Value

    The result is positive if s1 > s2, negative if s1 < s2 and zero if
         s1 == s2.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    CompareS64(), CompareU64(), CompareUF32(), CompareUF60(), CompareSF32()

##src/libs/operamath/autodocs.c::spg/math/compareu64##
CompareU64 - Compares two unsigned 64-bit integer quantities.

  Synopsis

    int32 CompareU64( uint64 *s1, uint64 *s2 )

  Description

    This function compares two unsigned 64-bit integers.  This function is
    actually the same function as CompareUF32() and CompareUF60().

  Arguments

    s1, s2                       Pointers to unsigned 64-bit integers.

  Return Value

    The function returns 1 if s1 > s2, zero if s1 == s2, or -1 if s1 < s2.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    CompareSF32(), CompareS64(), CompareUF32(), CompareSF60(), CompareUF60()

##src/libs/operamath/autodocs.c::spg/math/compareuf32##
CompareUF32 - Compares two unsigned 32.32-format fractions.

  Synopsis

    int32 CompareUF32( ufrac32 *s1, ufrac32 *s2 )

  Description

    This function compares two unsigned 32.32-format fractions.  This
    function is actually the same function as CompareU64() and
    CompareUF60().

  Arguments

    s1, s2                       Pointers to unsigned 32.32 fractions.

  Return Value

    The function returns 1 if s1 > s2, zero if s1 == s2, or -1 if s1 < s2.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    CompareS64(), CompareSF32(), CompareU64(), CompareUF60(), CompareSF60()

##src/libs/operamath/autodocs.c::spg/math/compareuf60##
CompareUF60 - Compares two unsigned 4.60-format fractions.

  Synopsis

    int32 CompareUF60( ufrac60 *s1, ufrac60 *s2 )

  Description

    This function compares two unsigned 4.60-format fractions.  This
    function is actually the same function as CompareU64() and
    CompareUF32().

  Arguments

    s1, s2                       Pointers to unsigned 4.60 fractions.

  Return Value

    The function returns 1 if s1 > s2, zero if s1 == s2, or -1 if s1 < s2.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    CompareS64(), CompareSF32(), CompareU64(), CompareUF32(), CompareSF60()

##src/libs/operamath/autodocs.c::spg/math/convert32_f16##
Convert32_F16 - Converts a 32-bit integer to a 16.16 fraction.

  Synopsis

    frac16 Convert32_F16( int32 x )

  Description

    This macro converts a 32-bit integer into a 16.16 fraction.

  Arguments

    x                            The 32-bit integer to be converted.

  Return Value

    The function returns the 16.16 result of the conversion.  The fractional
    16 bits of the result are zero, and the upper 16 bits of the argument are
    lost.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF14_F16(), ConvertF16_F14(), ConvertF16_30(), ConvertF30_F16(),
    Convert32_F32(), ConvertF16_32(), ConvertF32_F16(), ConvertS32_64(),
    ConvertSF16_F32(), ConvertU32_64(), ConvertUF16_F32()

##src/libs/operamath/autodocs.c::spg/math/convert32_f32##
Convert32_F32 - Converts a 32-bit integer to a 32.32 fraction.

  Synopsis

    void Convert32_F32( frac32 *d, int32 x )

  Description

    This macro converts a 32-bit integer to a 32.32 fraction.  The fractional
    portion of the result is zero.  The 32.32 result of the conversion is
    deposited in the location pointed to by the dest argument.

  Arguments

    d                            A pointer to a 32.32 structure to store the
                                 result.

    x                            A 32-bit integer to be converted.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF14_F16(), ConvertF16_F14(), ConvertF16_30(), ConvertF30_F16(),
    Convert32_F16(), ConvertF16_32(), ConvertF32_F16(), ConvertS32_64(),
    ConvertSF16_F32(), ConvertU32_64(), ConvertUF16_F32()

##src/libs/operamath/autodocs.c::spg/math/convertf14_f16##
ConvertF14_F16 - Converts a 2.14 fraction to a 16.16 fraction.

  Synopsis

    frac16 ConvertF14_F16( frac14 x )

  Description

    This macro converts a 2.14 fraction to a 16.16 fraction.

  Arguments

    x                            The 2.14 fraction to be converted.

  Return Value

    The function returns the 16.16 fraction result of the conversion.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF16_F14(), ConvertF16_F30(), ConvertF16_32(), ConvertF30_F16(),
    Convert32_F16(), Convert32_F32(), Convert32_F16(), ConvertS32_64(),
    ConvertSF16_F32(), ConvertU32_64(), ConvertUF16_F32()

##src/libs/operamath/autodocs.c::spg/math/convertf16_32##
ConvertF16_32 - Converts a 16.16 fraction to a 32-bit integer.

  Synopsis

    int32 ConvertF16_32( frac16 x )

  Description

    This macro converts a 16.16 fraction to a 32-bit integer.  The upper 16
    bits are zero or are filled with the sign bit of the argument.  The
    fraction bits of the argument are lost.

  Arguments

    x                            The 16.16 fraction to be converted.

  Return Value

    The function returns the 32-bit integer result of the conversion.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF14_F16(), ConvertF16_F14(), ConvertF16_30(), ConvertF30_F16(),
    Convert32_F16(), Convert32_F32(), Convert32_F16(), ConvertS32_64(),
    ConvertSF16_F32(), ConvertU32_64(), ConvertUF16_F32()

##src/libs/operamath/autodocs.c::spg/math/convertf16_f14##
ConvertF16_F14 - Converts a 16.16 fraction to a 2.14 fraction.

  Synopsis

    frac14 ConvertF16_F14( frac16 x )

  Description

    This macro converts a 16.16 fraction to a 2.14 fraction, using the upper
    16 bits of a 32-bit quantity.

  Arguments

    x                            The 16.16 fraction to be converted.

  Return Value

    The function returns the 2.14 fraction result of the conversion.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF14_F16(), ConvertF16_F30(), ConvertF16_32(), ConvertF30_F16(),
    Convert32_F16(), Convert32_F32(), Convert32_F16(), ConvertS32_64(),
    ConvertSF16_F32(), ConvertU32_64(), ConvertUF16_F32()

##src/libs/operamath/autodocs.c::spg/math/convertf16_f30##
ConvertF16_F30 - Converts a 16.16 fraction to a 2.30 fraction.

  Synopsis

    frac30 ConvertF16_F30( frac16 x )

  Description

    This macro converts a 16.16 fraction to a 2.30 fraction.

  Arguments

    x                            The 16.16 fraction to be converted.

  Return Value

    The function returns the 2.30 fraction result of the conversion.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF14_F16(), ConvertF16_F14(), ConvertF16_32(), ConvertF30_F16(),
    Convert32_F16(), Convert32_F32(), Convert32_F16(), ConvertS32_64(),
    ConvertSF16_F32(), ConvertU32_64(), ConvertUF16_F32()

##src/libs/operamath/autodocs.c::spg/math/convertf30_f16##
ConvertF30_F16 - Converts a 2.30 fraction to a 16.16 fraction.

  Synopsis

    frac16 ConvertF30_F16( frac30 x )

  Description

    This macro converts a 2.30 fraction to a 16.16 fraction.  The upper 14
    bits will be filled with the sign bit of the argument.

  Arguments

    x                            A 2.30 fraction to be converted.

  Return Value

    The function returns the 16.16 fraction result of the conversion.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF14_F16(), ConvertF16_F14(), ConvertF16_30(), ConvertF16_32,
    Convert32_F16(), Convert32_F32(), Convert32_F16(), ConvertS32_64(),
    ConvertSF16_F32(), ConvertU32_64(), ConvertUF16_F32()

##src/libs/operamath/autodocs.c::spg/math/convertf32_f16##
ConvertF32_F16 - Converts a 32.32 fraction to a 16.16 fraction.

  Synopsis

    frac16 ConvertF32_F16( frac32 *x )

  Description

    This macro converts a 32.32 fraction to a 16.16 fraction.  The result will
    be correct only if the integer part of the argument can be expressed in 16
    bits.  Only the most significant 16 bits of the fractional part of the
    argument are preserved.

  Arguments

    x                            A pointer to a 32.32 fraction to be
                                 converted.

  Return Value

    The function returns the 16.16 fraction result of the conversion.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF14_F16(), ConvertF16_F14(), ConvertF16_30(), ConvertF30_F16(),
    Convert32_F16(), Convert32_F32(), Convert32_F16(), ConvertS32_64(),
    ConvertSF16_F32(), ConvertU32_64(), ConvertUF16_F32()

##src/libs/operamath/autodocs.c::spg/math/converts32_64##
ConvertS32_64 - Converts a 32-bit integer to a 64-bit integer.

  Synopsis

    void ConvertS32_64( int64 *d, int32 x )

  Description

    This macro converts a 32-bit integer to a 64-bit integer.  The upper 32
    bits of the result are the sign bit of the argument.  The 64-bit integer
    result is deposited in the location pointed to by the d argument.

  Arguments

    d                            A pointer to a 64-bit integer structure to
                                 store the result.

    x                            A 32-bit integer to be converted.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF14_F16(), ConvertF16_F14(), ConvertF16_30(), ConvertF30_F16(),
    ConvertF16_32(), Convert32_F32(), ConvertF32_F16(), Convert32_F16(),
    ConvertSF16_F32(), ConvertU32_64(), ConvertUF16_F32()

##src/libs/operamath/autodocs.c::spg/math/convertsf16_f32##
ConvertSF16_F32 - Converts a 16.16 fraction to a 32.32 fraction.

  Synopsis

    void ConvertSF16_F32( frac32 *d, frac16 x )

  Description

    This macro converts a 16.16 fraction to a 32.32 fraction.  The upper 16
    bits of the result are the sign bit of the argument, the least 16 bits of
    the result are zero.  The 32.32 fraction result is deposited in the
    location pointed to by the d argument.

  Arguments

    d                            A pointer to a 32.32 fraction structure to
                                 store the result.

    x                            A 16.16 fraction to be converted.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF14_F16(), ConvertF16_F14(), ConvertF16_30(), ConvertF30_F16(),
    ConvertF16_32(), Convert32_F32(), ConvertF32_F16(), ConvertS32_64(),
    Convert32_F16(), ConvertU32_64(), ConvertUF16_F32()

##src/libs/operamath/autodocs.c::spg/math/convertu32_64##
ConvertU32_64 - Converts an unsigned 32-bit integer to an unsigned 64-bit
                integer.

  Synopsis

    void ConvertU32_64( uint64 *d, uint32 x )

  Description

    This macro converts an unsigned 32-bit integer to an unsigned 64-bit
    integer.  The upper 32 bits of the result are zero.  The 64-bit unsigned
    integer result is deposited in the location pointed to by the d argument.

  Arguments

    d                            A pointer to a unsigned 64-bit integer
                                 structure to store the result.

    x                            The unsigned 32-bit integer to be converted.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF14_F16(), ConvertF16_F14(), ConvertF16_30(), ConvertF30_F16(),
    ConvertF16_32(), Convert32_F32(), ConvertF32_F16(), Convert32_F16(),
    ConvertSF16_F32(), ConvertUF16_F32()

##src/libs/operamath/autodocs.c::spg/math/convertuf16_f32##
ConvertUF16_F32 - Converts an unsigned 16.16 fraction to an unsigned 32.32
                  fraction.

  Synopsis

    void ConvertUF16_F32( frac32 *d, ufrac16 x )

  Description

    This macro converts an unsigned 16.16 fraction to a 32.32 fraction.  The
    upper 16 bits of the result and the least 16 bits of the result are zero.
    The 32.32 fraction result is deposited in the location pointed to by the d
    argument.

  Arguments

    d                            A pointer to a 32.32 fraction to store the
                                 result.

    x                            An unsigned 16.16 fraction to be converted.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    ConvertF14_F16(), ConvertF16_F14(), ConvertF16_30(), ConvertF30_F16(),
    ConvertF16_32(), Convert32_F32(), ConvertF32_F16(), ConvertS32_64(),
    Convert32_F16(), ConvertU32_64()

##src/libs/operamath/autodocs.c::spg/math/cosf16##
CosF16 - Computes the 16.16 operamath cosine of a 16.16 fraction angle.

  Synopsis

    frac16 CosF16( frac16 x )

  Description

    This function returns the 16.16 operamath cosine of a 16.16 fraction
    angle.  In operamath coordinates, there are 256.0 units in a circle.

  Arguments

    x                            A 16.16 fraction describing the angle of the
                                 circle.

  Return Value

    The value returned is the cosine of the input angle.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    SinF16(), CosF32(), SinF32(), CosF30(), SinF30()

##src/libs/operamath/autodocs.c::spg/math/cosf30##
CosF30 - Computes the operamath 2.30 cosine of a 16.16 fraction.

  Synopsis

    frac30 CosF30( frac16 x )

  Description

    This function returns the operamath 2.30 cosine of a 16.16 fraction.  In
    operamath coordinates, there are 256.0 units in a circle.

  Arguments

    x                            A 16.16 fraction describing the angle of the
                                 circle.

  Return Value

    The function returns the 2.30 cosine of the input angle.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    SinF16(), CosF16(), SinF32(), CosF32(), SinF30()

##src/libs/operamath/autodocs.c::spg/math/cosf32##
CosF32 - Computes the operamath 32.32 cosine of a 16.16 fraction.

  Synopsis

    frac32 CosF32( frac32 *c, frac16 x )

  Description

    This macro returns the operamath 32.32 cosine of a 16.16 fraction.  In
    operamath coordinates, there are 256.0 units in a circle.

    The macro actually calls the SinF32() function with one quarter circle
    added to the input value.

  Arguments

    c                            A pointer to a 32.32 fraction containing the
                                 result.

    x                            A 16.16 fraction describing the angle of the
                                 circle.

  Return Value

    The macro returns the cosine of the input angle.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    SinF16(), CosF16(), SinF32(), CosF30(), SinF30()

##src/libs/operamath/autodocs.c::spg/math/cross3_f16##
Cross3_F16 - Computes the cross product of two vectors of 16.16 values.

  Synopsis

    void Cross3_F16( vec3f16 *dest, vec3f16 v1, vec3f16 v2 )

  Description

    This function multiplies two 3-coordinate vectors of 16.16 values
    together and deposits the cross product in the location pointed to by
    dest.

  Arguments

    dest                         A pointer to a destination vector to store
                                 the resulting cross product.

    v1, v2                       3-coordinate vector multiplicands.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

##src/libs/operamath/autodocs.c::spg/math/divrems32##
DivRemS32 - Computes the quotient and remainder of a 32-bit division.

  Synopsis

    int32 DivRemS32( int32 *rem, int32 d1, int32 d2 )

  Description

    This function divides one 32-bit integer by another and returns the
    quotient and remainder.

    This function calls the standard C function for division.  If you need
    only the quotient or only the remainder, use the standard C notation for
    division instead.

  Arguments

    rem                          A pointer to a 32-bit integer to store the
                                 remainder.

    d1                           The dividend.

    d2                           The divisor.

  Return Value

    The function returns the quotient of the division.  The remainder is
    deposited in the location pointed to by the rem argument.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    DivRemU32(), DivS64(), DivU64(), DivSF16(), DivUF16(), DivRemUF16(),
    DivRemSF16()

##src/libs/operamath/autodocs.c::spg/math/divremsf16##
DivRemSF16 - Computes the quotient and remainder of a 16.16 division.

  Synopsis

    frac16 DivRemSF16( frac16 *rem, frac16 d1, frac16 d2 )

  Description

    This function divides one signed 16.16 fraction by another and returns
    the quotient and remainder.  This function returns a correct result if
    the arguments are int32 or frac30, as long as both d1 and d2 are the same
    type.

    The remainder is not a 16.16 fraction; instead, it is a signed fraction in
    0.32 format.  The most significant bit of the remainder is a sign bit, and
    this must be extended if the remainder is to be used in subsequent
    calculations.  An overflow value is denoted by maximum positive return in
    both values.

  Arguments

    rem                          A pointer to the remainder of the division,
                                 a signed fraction in 0.32 format.

    d1                           The dividend.

    d2                           The divisor.

  Return Value

    The function returns the quotient of the division.  The remainder is
    deposited in the location pointed to by the rem argument.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    DivRemU32(), DivRemS32(), DivU64(), DivSF16(), DivUF16(), DivRemUF16(),
    DivS64()

##src/libs/operamath/autodocs.c::spg/math/divremu32##
DivRemU32 - Computes the quotient and remainder of a 32-bit division.

  Synopsis

    uint32 DivRemU32( uint32 *rem, uint32 d1, uint32 d2 )

  Description

    This function divides one unsigned 32-bit integer by another and returns
    the quotient and remainder.

    This function calls the standard C function for division.  If only the
    quotient or only the remainder is desired, the standard C notation for
    divide should be used.

  Arguments

    rem                          A pointer to a unsigned 32-bit integer to
                                 store the remainder.

    d1                           The dividend.

    d2                           The divisor.

  Return Value

    The function returns the quotient of the division.  The remainder is
    deposited in the location pointed to by the rem argument.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    DivRemSF16(), DivRemS32(), DivU64(), DivSF16(), DivUF16(), DivRemUF16(),
    DivS64()

##src/libs/operamath/autodocs.c::spg/math/divremuf16##
DivRemUF16 - Computes the quotient and remainder of a 16.16 division.

  Synopsis

    ufrac16 DivRemUF16( ufrac16 *rem, ufrac16 d1, ufrac16 d2 )

  Description

    This function divides one unsigned 16.16 fraction by another and returns
    the quotient and remainder.  This function returns a correct 16.16 result
    if the arguments are uint32 or ufrac30, as long as both arguments, d1 and
    d2, are the same type.

    The remainder is not a 16.16 fraction; instead, it is an unsigned fraction
    in 0.32 format.   An overflow condition is signaled by maximum return in
    both values.

  Arguments

    rem                          A pointer to a unsigned fraction in 0.32
                                 format to store the remainder.

    d1                           The dividend.

    d2                           The divisor.

  Return Value

    The function returns the quotient of the division.  The remainder is
    deposited in the location pointed to by the rem argument.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    DivRemSF16(), DivRemS32(), DivRemU32(), DivSF16(), DivUF16(), DivU64(),
    DivS64()

##src/libs/operamath/autodocs.c::spg/math/divs64##
DivS64 - Computes the quotient and remainder of a 64-bit division.

  Synopsis

    int64 *DivS64( int64 *q, int64 *r, int64 *d1, int64 *d2 )

  Description

    This function divides one 64-bit integer by another and returns the
    quotient and remainder.

  Arguments

    q                            A pointer to a 64-bit integer to store the
                                 quotient.

    r                            A pointer to a 64-bit integer to store the
                                 remainder.

    d1                           A pointer to a dividend.

    d2                           A pointer to a divisor.

  Return Value

    The function returns a pointer to q.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    DivRemU32(), DivRemS32(), DivU64(), DivSF16(), DivUF16(), DivRemUF16(),
    DivRemSF16()

##src/libs/operamath/autodocs.c::spg/math/divsf16##
DivSF16 - Computes the quotient of a 16.16 division.

  Synopsis

    frac16 DivSF16( frac16 d1, frac16 d2 )

  Description

    This function divides one 16.16 fraction by another and returns the
    quotient.

    This function also returns a correct result if the arguments are int32 or
    frac30, as long as both d1 and d2 are the same type.

  Arguments

    d1                           The dividend.

    d2                           The divisor.

  Return Value

    The function returns the quotient of the division.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    DivRemU32(), DivRemS32(), DivU64(), DivRemSF16(), DivUF16(), DivRemUF16(),
    DivS64()

##src/libs/operamath/autodocs.c::spg/math/divu64##
DivU64 - Computes the quotient and remainder of a 64-bit division.

  Synopsis

    int64 *DivU64( uint64 *q, uint64 *r, uint64 *d1, uint64 *d2 )

  Description

    This function divides one unsigned 64-bit integer by another and returns
    the quotient and remainder.

  Arguments

    q                            A pointer to a 64-bit integer to store the
                                 quotient.

    r                            A pointer to a 64-bit integer to store the
                                 remainder.

    d1                           A pointer to the dividend.

    d2                           A pointer to the divisor.

  Return Value

    The function returns a pointer to q.  The quotient is deposited in the
    location pointed to by q.  The remainder is deposited in the location
    pointed to by r.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    DivRemSF16(), DivRemS32(), DivRemU32(), DivSF16(), DivUF16(),
    DivRemUF16(), DivS64()

##src/libs/operamath/autodocs.c::spg/math/divuf16##
DivUF16 - Computes the quotient of a 16.16 division.

  Synopsis

    ufrac16 DivUF16( ufrac16 d1, ufrac16 d2 )

  Description

    This function divides one unsigned 16.16 fraction by another and returns
    the quotient.  This function returns a correct 16.16 result if the
    arguments are uint32 or ufrac30, as long as both arguments, d1 and d2, are
    the same type.

  Arguments

    d1                           The dividend.

    d2                           The divisor.

  Return Value

    The function returns the quotient of the division.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    DivRemSF16(), DivRemS32(), DivRemU32(), DivSF16(), DivRemUF16(), DivU64(),
    DivS64()

##src/libs/operamath/autodocs.c::spg/math/dot3_f16##
Dot3_F16 - Multiplies two vectors of 16.16 values.

  Synopsis

    frac16 Dot3_F16( vec3f16 v1, vec3f16 v2 )

  Description

    This function multiplies two 3 coordinate vectors of 16.16 values
    together and returns the dot product.

  Arguments

    v1, v2                       3-coordinate vector multiplicands.

  Return Value

    The function returns the dot product of the two vectors.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    Dot4_F16()

##src/libs/operamath/autodocs.c::spg/math/dot4_f16##
Dot4_F16 - Multiplies two vectors of 16.16 values.

  Synopsis

    frac16 Dot4_F16( vec4f16 v1, vec4f16 v2 )

  Description

    This function multiplies two 4-coordinate vectors of 16.16 values
    together and returns the dot product.

  Arguments

    v1, v2                       4-coordinate vector multiplicands.

  Return Value

    The function returns the dot product of the two vectors.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    Dot3_F16()

##src/libs/operamath/autodocs.c::spg/math/mul32##
Mul32 - Multiplies two 32-bit integers.

  Synopsis

    int32 Mul32( int32 x, int32 y )

  Description

    This macro multiplies two 32-bit integers together and returns the
    product.  The macro is only included for completeness.

  Arguments

    x, y                         The multiplicands.

  Return Value

    The function returns the product of the two arguments.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    Mul64(), MulS32_64(), MulU32_64(), MulF14(), MulSF16(), MulSF30(),
    MulUF16(), MulSF16_F32(), MulUF16_F32(), MulSF30_F60(), MulUF30_F60()

##src/libs/operamath/autodocs.c::spg/math/mul64##
Mul64 - Multiplies two 64-bit integers.

  Synopsis

    void Mul64( int64 *p, int64 *m1, int64 *m2 )

  Description

    This function multiplies two 64-bit integers together and returns the
    product.  An overflow condition is not detected.  The 64-bit integer
    result is deposited in the location pointed to by the p argument.

  Arguments

    p                            A pointer to a the location to store the
                                 64-bit integer result.

    m1, m2                       Pointers to the locations of the two 64-bit
                                 integer multiplicands.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    Mul32(), MulS32_64(), MulU32_64(), MulF14(), MulSF16(), MulSF30(),
    MulUF16(), MulSF16_F32(), MulUF16_F32(), MulSF30_F60(), MulUF30_F60()

##src/libs/operamath/autodocs.c::spg/math/mulf14##
MulF14 - Multiplies two 2.14 fractions.

  Synopsis

    frac14 MulF14( frac14 x, frac14 y )

  Description

    This macro multiplies two 2.14 fractions together and returns the product.

  Arguments

    x, y                         The multiplicands.

  Return Value

    The function returns the product of the two arguments.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  Caveats

    The function does not detect overflows.

  See Also

    Mul32(), Mul64(), MulS32_64(), MulU32_64(), MulSF16(), MulUF16(),
    MulSF30(), MulSF16_F32(), MulUF16_F32(), MulSF30_F60(), MulUF30_F60()

##src/libs/operamath/autodocs.c::spg/math/mulmanyf16##
MulManyF16 - Multiplies an array of 16.16 values by another array of 16.16
             values.

  Synopsis

    void MulManyF16( frac16 *dest, frac16 *src1, frac16 *src2,
    int32 count )

  Description

    This function multiplies an array of 16.16 fractions by another array of
    16.16 fractions.  Every element of the first array is multiplied by the
    corresponding element in the other array, and the results are deposited in
    the destination array.

  Arguments

    dest                         A pointer to the destination array to store
                                 the results.

    src1                         Pointer to source array of 16.16 fractions
                                 to be multiplied.

    src2                         Pointer to source array of 16.16 fractions
                                 to be multiplied.

    count                        Number of vectors for the multiplication.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulScalarF16()

##src/libs/operamath/autodocs.c::spg/math/mulmanyvec3mat33_f16##
MulManyVec3Mat33_F16 - Multiplies one or more vectors by a 3x3 matrix of
                       16.16 values.

  Synopsis

    void MulManyVec3Mat33_F16( vec3f16 *dest, vec3f16 *src,
    mat33f16 mat, int32 count )

  Description

    This function multiplies an array of one or more vectors by a 3x3 matrix
    of 16.16 fractions.  The results of the products are deposited in the
    array of vectors pointed to by the dest argument.

  Arguments

    dest                         A pointer to the array of destination
                                 vectors to store the results.

    src                          A pointer to the array of source vectors to
                                 be multiplied with the matrix.

    mat                          A 3x3 matrix of 16.16 fractions.

    count                        The number of vectors for the
                                 multiplication.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulManyVec4Mat44_F16()

##src/libs/operamath/autodocs.c::spg/math/mulmanyvec3mat33divz_f16##
MulManyVec3Mat33DivZ_F16 - Multiplies a 3x3 matrix of 16.16 values by 1 or
                           more 3-coordinate vectors of 16.16 values, then
                           multiplies x and y elements of the result vector
                           by ratio of n/z.

  Synopsis

    void MulManyVec3Mat33DivZ_F16( mmv3m33d *s )

  Description

    This function multiplies a 3x3 matrix of 16.16 fractions by one or more
    3-coordinate vectors of 16.16 values.  It then multiplies the x and y
    elements of the result vector {x, y, z} by the ratio of n/z, and deposits
    the result vector {x*n/z, y*n/z, z} in the product vector dest.  This
    function can be used to perform the final projection transformation on
    points just before rendering.

    This function uses the structure mmv3m33d.  Here is its definition:

      // structure to pass arguments to MulManyVec3Mat33DivZ_F16 function
      typedef struct mmv3m3dd{vec3f16*dest;
      vec3f16*src;mat33f16*mat;
      frac16n;
      uint32count;
      }  mmv3m33d;

  Arguments

    s->dest                      A pointer to the destination vector to store
                                 results.

    s->vec                       A pointer to the vector to multiply.

    s->mat                       A pointer to the 3x3 matrix of 16.16
                                 fractions to multiply.

    s->n                         Scale factor to be multiplied by x and y
                                 projected results.

    s->count                     Number of vectors for the multiplication.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulManyVec3Mat33_F16()

##src/libs/operamath/autodocs.c::spg/math/mulmanyvec4mat44_f16##
MulManyVec4Mat44_F16 - Multiplies one or more vectors by a 4x4 matrix of
                       16.16 values.

  Synopsis

    void MulManyVec4Mat44_F16( vec4f16 *dest, vec4f16 *src,
    mat44f16 mat, int32 count )

  Description

    This function multiplies an array of one or more vectors by a 3x3 matrix
    of 16.16 fractions.  The results of the products are deposited in the
    array of vectors pointed to by the dest argument.

  Arguments

    dest                         A pointer to the array of destination
                                 vectors to store the results.

    src                          A pointer to the array of source vectors to
                                 be multiplied with the matrix.

    mat                          A 4x4 matrix of 16.16 fractions.

    count                        The number of vectors for the
                                 multiplication.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulManyVec3Mat33_F16()

##src/libs/operamath/autodocs.c::spg/math/mulmat33mat33_f16##
MulMat33Mat33_F16 - Computes the product of two 3x3 matrices of 16.16
                    values.

  Synopsis

    void MulMat33Mat33_F16( mat33f16 dest, mat33f16 src1,
    mat33f16 src2 )

  Description

    This function multiplies two 3x3 matrices of 16.16 fractions together.
    The results of the product are deposited in the location for the matrix
    dest.  Note that incorrect results may occur if the destination matrix is
    the same matrix as one of the source matrices.

  Arguments

    dest                         A pointer to the destination matrix to store
                                 the results.

    src1, src2                   The source matrices to be multiplied.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulVec3Mat33_F16(), MulVec4Mat44_F16(), MulMat44Mat44_F16()

##src/libs/operamath/autodocs.c::spg/math/mulmat44mat44_f16##
MulMat44Mat44_F16 - Computes the product of two 4x4 matrices of 16.16
                    values.

  Synopsis

    void MulMat44Mat44_F16( mat44f16 dest, mat44f16 src1,
    mat44f16 src2 )

  Description

    This function multiplies two 4x4 matrices of 16.16 fractions together.
    The results of the product are deposited in the matrix dest.  Note that
    incorrect results may occur if the destination matrix is the same matrix
    as one of the source matrices.

  Arguments

    dest                         The destination matrix to store the results.

    src1, src2                   The source matrices to be multiplied
                                 together.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulVec3Mat33_F16(), MulVec4Mat44_F16(), MulMat33Mat33_F16()

##src/libs/operamath/autodocs.c::spg/math/mulobjectmat33_f16##
MulObjectMat33_F16 - Multiplies a matrix within an object structure by an
                     external 3x3 matrix of 16.16 values.

  Synopsis

    void MulObjectMat33_F16( void *objectlist[],
    ObjOffset2 *offsetstruct, mat33f16 mat, int32 count )

  Description

    This function multiplies a matrix within object structures by an external
    3x3 matrix of 16.16 fractions, and repeats over a number of objects.  The
    results of the product are deposited in the destination matrix in each
    object structure pointed to by the objectlist array.

    The object structure argument defines offsets within objects to the
    elements to be manipulated.  The definition for ObjOffset2 is as follows:

    typedef struct ObjOffset2 {
       int32 oo2_DestMatOffset;
       int32 oo2_SrcMatOffset;
       } ObjOffset2;

    * oo2_DestMatOffset is the offset (in bytes) from the beginning of an object
      structure to where to write the result of the matrix multiply.

    * oo2_SrcMatOffset is the offset (in bytes) from the beginning of an object
      structure to the location of the matrix to be multiplied.

  Arguments

    objectlist                   An array of pointers to object structures to
                                 modify.

    offsetstruct                 A pointer to the source object structure
                                 that defines offsets within object to the
                                 elements to be multiplied.

    mat                          A 3x3 matrix of 16.16 fractions to be
                                 multiplied.

    count                        The number of vectors for the
                                 multiplication.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulObjectMat44_F16()

##src/libs/operamath/autodocs.c::spg/math/mulobjectmat44_f16##
MulObjectMat44_F16 - Multiplies a matrix within an object structure by an
                     external 4x4 matrix of 16.16 values.

  Synopsis

    void MulObjectMat44_F16( void *objectlist[],
    ObjOffset2 *offsetstruct, mat44f16 mat, int32 count )

  Description

    This function multiplies a matrix within object structures by an external
    4x4 matrix of 16.16 fractions, and repeats over a number of objects.  The
    results of the product are deposited in the destination matrix in each
    object structure pointed to by the objectlist array.

    The object structure argument defines offsets within objects to the
    elements to be manipulated.  The definition for ObjOffset2 is as follows:

    typedef struct ObjOffset2 {
       int32 oo2_DestMatOffset;
       int32 oo2_SrcMatOffset;
       } ObjOffset2;

    * oo2_DestMatOffset is the offset (in bytes) from the beginning of an object
     structure to where to write the result of the matrix multiply.

    * oo2_SrcMatOffset is the offset (in bytes) from the beginning of an object
     structure to the location of the matrix to be multiplied.

  Arguments

    objectlist                   An array of pointers to object structures to
                                 modify.

    offsetstruct                 A pointer to the source object structure
                                 that defines offsets within object to the
                                 elements to be multiplied.

    mat                          A 4x4 matrix of 16.16 fractions to be
                                 multiplied.

    count                        The number of vectors for the
                                 multiplication.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulObjectMat33_F16()

##src/libs/operamath/autodocs.c::spg/math/mulobjectvec3mat33_f16##
MulObjectVec3Mat33_F16 - Multiplies many vectors within an object
                         structure by a 3x3 matrix of 16.16 values.

  Synopsis

    void MulObjectVec3Mat33_F16( void *objectlist[],
    ObjOffset1 *offsetstruct, int32 count )

  Description

    This function multiplies one or more vectors within object structures by
    a 3x3 matrix of 16.16 fractions also within that structure, and repeats
    over a number of objects.  The results of the product are deposited in the
    destination arrays pointed to by object structures pointed to by the
    objectlist array.

    The object structure argument defines offsets within objects to the
    elements to be manipulated.  The object structure has a pointer to an
    array of points associated with the object, a pointer to an array of
    transformed points, a count of the number of points, and an orientation
    matrix.  The definition for ObjOffset1 is as follows:

    typedef struct ObjOffset1 {
       int32 oo1_DestArrayPtrOffset;
       int32 oo1_SrcArrayPtrOffset;
       int32 oo1_MatOffset;
       int32 oo1_CountOffset;
       } ObjOffset1;

    * oo1_DestArrayPtrOffset is the offset (in bytes) from the beginning of an
      object structure to the location of the pointer to an array of vectors to
      fill with the results of the multiplies.

    * oo1_SrcArrayPtrOffset is the offset (in bytes) from the beginning of an
      object structure to the location of the pointer to an array of vectors to
      be multiplied.

    * oo1_MatOffset is the offset (in bytes) from the beginning of an object
      structure to the location of the matrix to be multiplied.

   * oo1_CountOffset is the offset (in bytes) from the beginning of an object
     structure to the location of the count of the number of vectors to be
     multiplied.

  Arguments

    objectlist                   An array of pointers to object structures to
                                 modify.

    offsetstruct                 A pointer to the source object structure
                                 that defines offsets within object to the
                                 elements to be multiplied.

    count                        The number of vectors for the
                                 multiplication.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulObjectVec4Mat44_F16()

##src/libs/operamath/autodocs.c::spg/math/mulobjectvec4mat44_f16##
MulObjectVec4Mat44_F16 - Multiplies many vectors within an object
                         structure by a 4x4 matrix of 16.16 values.

  Synopsis

    void MulObjectVec4Mat44_F16( void *objectlist[],
    ObjOffset1 *offsetstruct, int32 count )

  Description

    This function multiplies one or more vectors within object structures by
    a 3x3 matrix of 16.16 fractions also within that structure, and repeats
    over a number of objects.  The results of the product are deposited in the
    destination arrays pointed to by object structures pointed to by the
    objectlist array.

    The object structure argument defines offsets within objects to the
    elements to be manipulated.  The object structure has a pointer to an
    array of points associated with the object, a pointer to an array of
    transformed points, a count of the number of points, and an orientation
    matrix.  The definition for ObjOffset1 is as follows:

    typedef struct ObjOffset1 {
         int32 oo1_DestArrayPtrOffset;
         int32 oo1_SrcArrayPtrOffset;
         int32 oo1_MatOffset;
         int32 oo1_CountOffset;
         } ObjOffset1;

    * oo1_DestArrayPtrOffset is the offset (in bytes) from the beginning of an
      object structure to the location of the pointer to an array of vectors to
      fill with the results of the multiplies.

    * oo1_SrcArrayPtrOffset is the offset (in bytes) from the beginning of an
      object structure to the location of the pointer to an array of vectors to
      be multiplied.

    * oo1_MatOffset is the offset (in bytes) from the beginning of an object
      structure to the location of the matrix to be multiplied.

    * oo1_CountOffset is the offset (in bytes) from the beginning of an object
      structure to the location of the count of the number of vectors to be
      multiplied.

  Arguments

    objectlist                   An array of pointers to object structures to
                                 modify.

    offsetstruct                 A pointer to the source object structure
                                 that defines offsets within object to the
                                 elements to be multiplied.

    count                        The number of vectors for the
                                 multiplication.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulObjectVec3Mat33_F16()

##src/libs/operamath/autodocs.c::spg/math/muls32_64##
MulS32_64 - Multiplies two 32-bit integers and returns a 64-bit result.

  Synopsis

    void MulS32_64( int64 *prod, int32 m1, int32 m2 )

  Description

    This function multiplies two signed 32-bit integers together and deposits
    the 64-bit product in the location pointed to by the prod argument.

  Arguments

    prod                         A pointer to the location to store the
                                 64-bit result.

    m1, m2                       Two 32-bit multiplicands.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Mul32(), Mul64(), MulSF16(), MulU32_64(), MulF14(), MulSF30(), MulUF16(),
    MulSF16_F32(), MulUF16_F32(), MulSF30_F60(), MulUF30_F60()

##src/libs/operamath/autodocs.c::spg/math/mulscalarf16##
MulScalarF16 - Multiplies a 16.16 scalar by an array of 16.16 values.

  Synopsis

    void MulScalarF16( frac16 *dest, frac16 *src, frac16 scalar,
    int32 count )

  Description

    This function multiplies a 16.16 scalar by an array of 16.16 fractions.
    Every element of the array of frac16 values is multiplied by the same
    value, and the results are deposited in the destination array.

  Arguments

    dest                         A pointer to the destination array to store
                                 the results.

    src                          A pointer to the source array of 16.16
                                 fractions to be multiplied.

    scalar                       A 16.16 scalar.

    count                        The number of elements in the vector.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulScalarF16()

##src/libs/operamath/autodocs.c::spg/math/mulsf16##
MulSF16 - Multiplies two signed 16.16 fractions.

  Synopsis

    frac16 MulSF16( frac16 m1, frac16 m2 )

  Description

    This function multiplies two signed 16.16 fractions together and returns
    the 16.16 resulting product.  The lower bits of the result are truncated.

  Arguments

    m1, m2                       The multiplicands.

  Return Value

    The function returns the product of the two arguments.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    Mul32(), Mul64(), MulS32_64(), MulU32_64(), MulF14(), MulSF30(),
    MulUF16(), MulSF16_F32(), MulUF16_F32(), MulSF30_F60(), MulUF30_F60()

##src/libs/operamath/autodocs.c::spg/math/mulsf16_f32##
MulSF16_F32 - Multiplies two signed 16.16 numbers and returns a 32.32
              result.

  Synopsis

    void MulSF16_F32( frac32 *prod, frac16 m1, frac16 m2 )

  Description

    This function multiplies two signed 16.16 numbers together and deposits
    the 32.32 result in the location pointed to by the prod argument.

  Arguments

    prod                         A pointer to the location to store the
                                 32-bit result.

    m1, m2                       Two 16.16 multiplicands.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Mul32(), Mul64(), MulSF16(), MulU32_64(), MulF14(), MulSF30(), MulUF16(),
    MulS32_64(), MulUF16_F32(), MulSF30_F60(), MulUF30_F60()

##src/libs/operamath/autodocs.c::spg/math/mulsf30##
MulSF30 - Multiplies two 2.30 fractions.

  Synopsis

    frac30 MulSF30( frac30 m1, frac30 m2 )

  Description

    This function multiplies two 2.30 fractions together and returns the 2.30
    resulting product.  The lower bits of the result are truncated.

  Arguments

    m1, m2                       The multiplicands.

  Return Value

    The function returns the product of the two arguments.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    Mul32(), Mul64(), MulS32_64(), MulU32_64(), MulF14(), MulSF16(),
    MulUF16(), MulSF16_F32(), MulUF16_F32(), MulSF30_F60(), MulUF30_F60()

##src/libs/operamath/autodocs.c::spg/math/mulsf30_f60##
MulSF30_F60 - Multiplies two signed 2.30 numbers and returns a 4.60
              result.

  Synopsis

    void MulSF30_F60( frac60 *prod, frac30 m1, frac30 m2 )

  Description

    This function multiplies two signed 2.30 numbers together and deposits
    the 4.60 result in the location pointed to by the prod argument.

  Arguments

    prod                         A pointer to the location to store the 4.60
                                 result.

    m1, m2                       Two 2.30 multiplicands.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Mul32(), Mul64(), MulSF16(), MulU32_64(), MulF14(), MulSF30(), MulUF16(),
    MulS32_64(), MulUF16_F32(), MulSF16_F32(), MulUF30_F60()

##src/libs/operamath/autodocs.c::spg/math/mulu32_64##
MulU32_64 - Multiplies two unsigned 32-bit integers and returns a 64-bit
            result.

  Synopsis

    void MulU32_64( uint64 *prod, uint32 m1, uint32 m2 )

  Description

    This function multiplies two unsigned 32-bit integers together and
    deposits the unsigned 64-bit result in the location pointed to by the prod
    argument.

  Arguments

    prod                         A pointer to the location to store the
                                 64-bit result.

    m1, m2                       Two unsigned 32-bit multiplicands.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Mul32(), Mul64(), MulSF16(), MulS32_64(), MulF14(), MulSF30(), MulUF16(),
    MulSF16_F32(), MulUF16_F32(), MulSF30_F60(), MulUF30_F60()

##src/libs/operamath/autodocs.c::spg/math/muluf16##
MulUF16 - Multiplies two unsigned 16.16 fractions.

  Synopsis

    ufrac16 MulUF16( ufrac16 m1, ufrac16 m2 )

  Description

    This function multiplies two unsigned 16.16 fractions together and
    returns the 16.16 resulting product.  The lower bits of the result are
    truncated.

  Arguments

    m1, m2                       The multiplicands.

  Return Value

    The function returns the product of the two arguments.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    Mul32(), Mul64(), MulS32_64(), MulU32_64(), MulF14(), MulSF30(),
    MulSF16(), MulSF16_F32(), MulUF16_F32(), MulSF30_F60(), MulUF30_F60()

##src/libs/operamath/autodocs.c::spg/math/muluf16_f32##
MulUF16_F32 - Multiplies two unsigned 16.16 numbers and returns a 32.32
              result.

  Synopsis

    void MulUF16_F32( ufrac32 *prod, ufrac16 m1, ufrac16 m2 )

  Description

    This function multiplies two unsigned 16.16 numbers together and deposits
    the unsigned 32.32 result in the location pointed to by the prod argument.

  Arguments

    prod                         A pointer to the location to store the
                                 result.

    m1, m2                       Two unsigned 16.16 multiplicands.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Mul32(), Mul64(), MulSF16(), MulU32_64(), MulF14(), MulSF30(), MulUF16(),
    MulS32_64(), MulSF16_F32(), MulSF30_F60(), MulUF30_F60()

##src/libs/operamath/autodocs.c::spg/math/muluf30_f60##
MulUF30_F60 - Multiplies two unsigned 2.30 numbers and returns a 4.60
              result.

  Synopsis

    void MulUF30_F60( ufrac60 *prod, ufrac30 m1, ufrac30 m2 )

  Description

    This function multiplies two unsigned 2.30 numbers together and deposits
    the unsigned 4.60 result in the location pointed to by the prod argument.

  Arguments

    prod                         A pointer to the location to store the
                                 unsigned 4.60 result.

    m1, m2                       Two unsigned 2.30 multiplicands.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Mul32(), Mul64(), MulSF16(), MulU32_64(), MulF14(), MulSF30(), MulUF16(),
    MulS32_64(), MulUF16_F32(), MulSF16_F32(), MulSF30_F60()

##src/libs/operamath/autodocs.c::spg/math/mulvec3mat33_f16##
MulVec3Mat33_F16 - Computes the product of a 3x3 matrix and a vector.

  Synopsis

    void MulVec3Mat33_F16( vec3f16 dest, vec3f16 vec, mat33f16
    mat )

  Description

    This function multiplies a 3x3 matrix of 16.16 fractions by a 3
    coordinate vector of 16.16 values and deposits the results of the product
    in the vector dest.

  Arguments

    dest                         The destination vector to store the results.

    vec                          The vector to multiply.

    mat                          The matrix to multiply.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulVec4Mat44_F16(), MulMat33Mat33_F16(), MulMat44Mat44_F16()

##src/libs/operamath/autodocs.c::spg/math/mulvec3mat33divz_f16##
MulVec3Mat33DivZ_F16 - Computes the product of a 3x3 matrix and a vector,
                       then multiply the x, y elements of the result by
                       the ratio n/z.

  Synopsis

    void MulVec3Mat33DivZ_F16( vec3f16 dest, vec3f16 vec,
    mat33f16 mat, frac16 n )

  Description

    This function multiplies a 3x3 matrix of 16.16 fractions by a
    3-coordinate vector of 16.16 values, then multiplies the x and y elements
    of the result vector {x, y, z} by the ratio n/z, and deposits the result
    vector {x*n/z, y*n/z, z} in the product vector dest.  This function can
    be used to perform the final projection transformation on points just
    before rendering.

  Arguments

    dest                         The destination vector to store the results.

    vec                          The vector to multiply.

    mat                          The matrix to multiply.

    n                            The scale factor to be multiplied by x and y
                                 projected results.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulVec3Mat33_F16(), MulManyVec3Mat33DivZ_F16()

##src/libs/operamath/autodocs.c::spg/math/mulvec4mat44_f16##
MulVec4Mat44_F16 - Computes the product of a 4x4 matrix and a vector.

  Synopsis

    void MulVec4Mat44_F16( vec4f16 dest, vec4f16 vec, mat44f16
    mat )

  Description

    This function multiplies a 4x4 matrix of 16.16 fractions by a
    4-coordinate vector of 16.16 values and deposits the results of the
    product in the vector dest.

  Arguments

    dest                         The destination vector to store the results.

    vec                          The vector to multiply.

    mat                          The matrix to multiply.

  Implementation

    SWI implemented in operamath V20.

  Associated Files

    operamath.h

  See Also

    MulVec3Mat33_F16(), MulMat33Mat33_F16(), MulMat44Mat44_F16()

##src/libs/operamath/autodocs.c::spg/math/neg32##
Neg32 - Computes the two's complement of a 32-bit integer.

  Synopsis

    int32 Neg32( int32 x )

  Description

    This macro returns the two's complement of a 32-bit integer.

  Arguments

    x                            A 32-bit integer for which to get the
                                 two's complement.

  Return Value

    The function returns the two's complement of x.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    NegF16(), NegF30(), NegF14(), Neg64(), NegF32()

##src/libs/operamath/autodocs.c::spg/math/neg64##
Neg64 - Computes the two's complement of a 64-bit integer.

  Synopsis

    void Neg64( int64 *dest, int64 *src )

  Description

    This function computes the two's complement of a 64-bit integer.  The
    two's complement of the location pointed to by src is deposited in the
    location pointed to by dest.

  Arguments

    dest                         A pointer to the location to store the
                                 64-bit integer result.

    src                          A pointer to the location of the 64-bit
                                 integer to be acted upon.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    NegF16(), NegF14(), Neg32(), NegF30(), NegF32()

##src/libs/operamath/autodocs.c::spg/math/negf14##
NegF14 - Computes the two's complement of a 2.14 fraction.

  Synopsis

    frac14 NegF14( frac14 x )

  Description

    This macro returns the two's complement of a 2.14 fraction.

  Arguments

    x                            A 2.14 fraction for which the two's
                                 complement is desired.

  Return Value

    The function returns the two's complement of x.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    NegF16(), NegF30(), Neg32(), Neg64(), NegF32()

##src/libs/operamath/autodocs.c::spg/math/negf16##
NegF16 - Computes the two's complement of a 16.16 fraction.

  Synopsis

    frac16 NegF16( frac16 x )

  Description

    This macro returns the two's complement of a 16.16 fraction.

  Arguments

    x                            A 16.16 fraction for which the two's
                                 complement is desired.

  Return Value

    The function returns the two's complement of x.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    NegF14(), NegF30(), Neg32(), Neg64(), NegF32()

##src/libs/operamath/autodocs.c::spg/math/negf30##
NegF30 - Computes the twos complement of a 2.30 fraction.

  Synopsis

    frac30 NegF30( frac30 x )

  Description

    This function returns the two's complement of a 2.30 fraction.

  Arguments

    x                            A 2.30 fraction for which the two's
                                 complement is desired.

  Return Value

    The function returns the two's complement of x.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    NegF16(), NegF14(), Neg32(), Neg64(), NegF32()

##src/libs/operamath/autodocs.c::spg/math/negf32##
NegF32 - Computes the two's complement of a 32.32 fraction.

  Synopsis

    void NegF32( frac32 *dest, frac32 *src )

  Description

    This function returns the two's complement of a 32.32 fraction.

  Arguments

    dest                         A pointer to the location to store the
                                 frac32 result.

    src                          A pointer to the location of the 32.32
                                 fraction to be acted upon.

  Return Value

    The function returns the two's complement of x.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    NegF16(), NegF14(), Neg32(), Neg64(), NegF30()

##src/libs/operamath/autodocs.c::spg/math/negf60##
NegF60 - Computes the two's complement of a 4.60 fraction.

  Synopsis

    void NegF60( frac60 *dest, frac60 *src )

  Description

    This function returns the two's complement of a 4.60 fraction.

  Arguments

    dest                         A pointer to the location to store the 4.60
                                 fraction result.

    src                          A pointer to the location of the 4.60
                                 fraction to be acted upon.

  Return Value

    The function returns the two's complement of x.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    NegF16(), NegF14(), Neg32(), Neg64(), NegF30(), NegF32()

##src/libs/operamath/autodocs.c::spg/math/not32##
Not32 - Computes one's complement of a 32-bit integer.

  Synopsis

    int32 Not32( int32 x )

  Description

    This macro returns the one's complement of a 32-bit integer.

  Arguments

    x                            A 32-bit integer for which the one's
                                 complement is desired.

  Return Value

    The function returns the one's complement of x.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    NotF16(), NotF30(), NotF14(), Not64(), NotF32()

##src/libs/operamath/autodocs.c::spg/math/not64##
Not64 - Computes one's complement of a 64-bit integer.

  Synopsis

    void Not64( int64 *dest, int64 *src )

  Description

    This function computes the one's complement of a 64-bit integer in
    the location pointed to by src.  The result is deposited in the location
    pointed to by dest.

  Arguments

    dest                         A pointer to the location to store the
                                 64-bit integer result.

    src                          A pointer to the location of the 64-bit
                                 integer to be acted upon.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    NotF16(), NotF14(), Not32(), NotF30(), NotF32()

##src/libs/operamath/autodocs.c::spg/math/notf14##
NotF14 - Computes one's complement of a 2.14 fraction.

  Synopsis

    frac14 NotF14( frac14 x )

  Description

    This macro returns the one's complement of a 2.14 fraction.

  Arguments

    x                            A 2.14 fraction for which the one's
                                 complement is desired.

  Return Value

    The function returns the one's complement of x.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    NotF16(), NotF30(), Not32(), Not64(), NotF32()

##src/libs/operamath/autodocs.c::spg/math/notf16##
NotF16 - Computes one's complement of a 16.16 fraction.

  Synopsis

    frac16 NotF16( frac16 x )

  Description

    This macro returns the one's complement of a 16.16 fraction.

  Arguments

    x                            A 16.16 fraction for which the one's
                                 complement is desired.

  Return Value

    The function returns the one's complement of x.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    NotF14(), NotF30(), Not32(), Not64(), NotF32()

##src/libs/operamath/autodocs.c::spg/math/notf30##
NotF30 - Computes one's complement of a 2.30 fraction.

  Synopsis

    frac30 NotF30( frac30 x )

  Description

    This macro returns the one's complement of a 2.30 fraction.

  Arguments

    x                            A 2.30 fraction for which the one's
                                 complement is desired.

  Return Value

    The function returns the one's complement of x.

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    NotF16(), NotF14(), Not32(), Not64(), NotF32()

##src/libs/operamath/autodocs.c::spg/math/notf32##
NotF32 - Computes one's complement of a 32.32 number.

  Synopsis

    void NotF32( frac32 *dest, frac32 *src )

  Description

    This function computes the one's complement of a 32.32 number in the
    location pointed to by src.  The result is deposited in the location
    pointed to by dest.

  Arguments

    dest                         A pointer to the location to store the 32.32
                                 number result.

    src                          A pointer to the location of the 32.32
                                 number to be acted upon.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    NotF16(), NotF14(), Not32(), NotF30(), NotF60(), Not64()

##src/libs/operamath/autodocs.c::spg/math/notf60##
NotF60 - Computes one's complement of a 4.60 number.

  Synopsis

    void NotF60( frac60 *dest, frac60 *src )

  Description

    This function computes the one's complement of a 4.60 number in the
    location pointed to by src.  The result is deposited in the location
    pointed to by dest.

  Arguments

    dest                         A pointer to the location to store the 4.60
                                 number result.

    src                          A pointer to the location of the 4.60 number
                                 to be acted upon.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    NotF16(), NotF14(), Not32(), NotF30(), Not64(), NotF32()

##src/libs/operamath/autodocs.c::spg/math/openmathfolio##
OpenMathFolio - Opens the math folio and set _MathBase global variable.

  Synopsis

    int32 OpenMathFolio( void )

  Description

    This function attempts to open the math folio structure.  If it
    successfully locates the math folio, it sets the global variable _MathBase
    to point to the math folio structure.  If it fails to open the folio, it
    returns a negative number that can be printed with the PrintfSysError
     function.

    Programs must call OpenMathFolio before attempting to use any of the math
    folio functions.

  Return Value

    If successful, the function sets the global variable _MathBase to point
    to the math folio structure.  If unsuccessful, it returns a negative
    number.

  Implementation

    Convenience call implemented in operamath.lib V20.

  Associated Files

    operamath.h, operamath.lib

##src/libs/operamath/autodocs.c::spg/math/recipsf16##
RecipSF16 - Computes the reciprocal of a signed 16.16 number.

  Synopsis

    frac16 RecipSF16( frac16 d )

  Description

    This function computes the reciprocal of a signed 16.16 number and
    returns the 16.16 result.  An overflow is signaled by all bits set in the
    return value.

  Arguments

    d                            16.16 format fractions.

  Return Value

    The function returns the reciprocal number.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    RecipUF16()

##src/libs/operamath/autodocs.c::spg/math/recipuf16##
RecipUF16 - Computes the reciprocal of an unsigned 16.16 number.

  Synopsis

    ufrac16 RecipUF16( ufrac16 d )

  Description

    This function computes the reciprocal of an unsigned 16.16 number and
    returns the 16.16 result.  An overflow is signaled by all bits set in the
    return value.

  Arguments

    d                            16.16 format fractions.

  Return Value

    The function returns the reciprocal number.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    RecipSF16()

##src/libs/operamath/autodocs.c::spg/math/sinf16##
SinF16 - Computes the 16.16 sine of a 16.16 fraction angle.

  Synopsis

    frac16 SinF16( frac16 x )

  Description

    This function returns the 16.16 sine of a 16.16 fraction angle.  In
    operamath coordinates, there are 256.0 units in a circle.

  Arguments

    x                            A 16.16 fraction describing the angle of the
                                 circle.

  Return Value

    The value returned is the sine of the input angle.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    CosF16(), CosF32(), SinF32(), CosF30(), SinF30()

##src/libs/operamath/autodocs.c::spg/math/sinf30##
SinF30 - Computes the operamath 2.30 sine of a 16.16 fraction.

  Synopsis

    frac30 SinF30( frac16 x )

  Description

    This function returns the operamath 2.30 sine of a 16.16 fraction.  In
    operamath coordinates, there are 256.0 units in a circle.

  Arguments

    x                            A 16.16 fraction describing the angle of the
                                 circle.

  Return Value

    The function returns the 2.30 sine of the input angle.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    SinF16(), CosF16(), SinF32(), CosF32(), CosF30()

##src/libs/operamath/autodocs.c::spg/math/sinf32##
SinF32 - Computes the operamath 32.32 sine of a 16.16 fraction.

  Synopsis

    void SinF32( frac32 *dest, frac16 x )

  Description

    This function returns the operamath 32.32 sine of a 16.16 fraction.  In
    operamath coordinates, there are 256.0 units in a circle.

  Arguments

    dest                         A pointer to a 32.32 fraction containing the
                                 result.

    x                            A 16.16 fraction describing the angle of the
                                 circle.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    SinF16(), CosF16(), CosF32(), CosF30(), SinF30()

##src/libs/operamath/autodocs.c::spg/math/sqrt32##
Sqrt32 - Computes square root of an unsigned 32-bit number.

  Synopsis

    uint32 Sqrt32( uint32 x )

  Description

    This function computes the positive square root of an unsigned 32-bit
    number.

  Arguments

    x                            The number for which the square root is
                                 desired.

  Return Value

    The function returns the square root of x.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    SqrtF16(), Sqrt64_32(), SqrtF32_F16()

##src/libs/operamath/autodocs.c::spg/math/sqrt64_32##
Sqrt64_32 - Computes the 32-bit square root of an unsigned 64-bit integer.

  Synopsis

    uint32 Sqrt64_32( uint64 *x )

  Description

    This function computes the 32-bit square root of an unsigned 64-bit
    integer.

  Arguments

    x                            A pointer to the 64  bit number for which
                                 the square root is desired.

  Return Value

    The function returns the 32-bit square root of x.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Sqrt32(), SqrtF32_F16(), SqrtF32_F16(), SqrtF60_F30()

##src/libs/operamath/autodocs.c::spg/math/sqrtf16##
SqrtF16 - Computes the square root of an unsigned 16.16 number.

  Synopsis

    ufrac16 SqrtF16( ufrac16 x )

  Description

    This function computes the positive square root of an unsigned 16.16
    number.

  Arguments

    x                            The number for which the square root is
                                 desired.

  Return Value

    The function returns the square root of x.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Sqrt32(), Sqrt64_32(), SqrtF32_F16()

##src/libs/operamath/autodocs.c::spg/math/sqrtf32_f16##
SqrtF32_F16 - Computes the square root of a 32.32 fraction.

  Synopsis

    ufrac16 SqrtF32_F16( ufrac32 *x )

  Description

    This function computes the 16.16 fraction square root of a 32.32
    fraction.

  Arguments

    x                            A pointer to the 32.32 fraction for which
                                 the square root is desired.

  Return Value

    The function returns the 16.16 fraction square root of x.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Sqrt32(), Sqrt64_32(), SqrtF60_F30()

##src/libs/operamath/autodocs.c::spg/math/sqrtf60_f30##
SqrtF60_F30 - Computes the square root of a 4.60 fraction as a 2.30
              fraction.

  Synopsis

    frac30 SqrtF60_F30( frac60 *x )

  Description

    This function computes the 2.30 fraction square root of a 4.60 fraction.

  Arguments

    x                            A pointer to the 4.60 fraction for which the
                                 square root is desired.

  Return Value

    The function returns the 2.30 fraction square root of x.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Sqrt32(), Sqrt64_32(), SqrtF32_F16()

##src/libs/operamath/autodocs.c::spg/math/square64##
Square64 - Squares a 64-bit integer.

  Synopsis

    void Square64( uint64 *p, int64 *m )

  Description

    This function computes the square of a 64-bit integer in the location
    pointed to by m.  The result is deposited in the location pointed to by p.

  Arguments

    p                            A pointer to the result of the square
                                 operation.

    m                            A pointer to the location of the 64-bit
                                 integer to be squared.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    SquareUF16(), SquareSF16()

##src/libs/operamath/autodocs.c::spg/math/squaresf16##
SquareSF16 - Squares a signed 16.16 fraction.

  Synopsis

    ufrac16 SquareSF16( frac16 m )

  Description

    This function computes the square of a 16.16 number.  The lower bits of
    the result are truncated.

  Arguments

    m                            The number to be squared.

  Return Value

    The function returns the square of m.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    SquareUF16(), Square64()

##src/libs/operamath/autodocs.c::spg/math/squareuf16##
SquareUF16 - Squares an unsigned 16.16 fraction.

  Synopsis

    ufrac16 SquareUF16( ufrac16 m )

  Description

    This function computes the square of an unsigned 16.16 number.  The lower
    bits of the result are truncated.

  Arguments

    m                            The number to be squared.

  Return Value

    The function returns the square of m.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  Caveats

    The function does not detect overflows.

  See Also

    SquareSF16(), Square64()

##src/libs/operamath/autodocs.c::spg/math/sub32##
Sub32 - Subtracts a 32-bit integer from another.

  Synopsis

    int32 Sub32( int32 x, int32 y )

  Description

    This macro returns the difference between two 32-bit integers.

  Arguments

    x, y                         Two 32-bit integers for the subtraction.  y
                                 is subtracted from x.

  Return Value

    The macro returns the value (x - y).

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    SubF32(), SubF60(), SubF16(), SubF30(), SubF14(), Sub64()

##src/libs/operamath/autodocs.c::spg/math/sub64##
Sub64 - Subtracts a 64-bit integer from another.

  Synopsis

    void Sub64( int64 *r, int64 *s1, int64 *s2 )

  Description

    This function subtracts one 64-bit integer from another and deposits the
    64-bit result in the location pointed to by r.

  Arguments

    r                            A pointer to the 64-bit result of the
                                 subtraction.

    s1, s2                       Pointers to the two 64-bit numbers for the
                                 subtraction.  s2 is subtracted from s1.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    SubF32(), SubF60(), SubF16(), SubF30(), SubF14(), Sub32()

##src/libs/operamath/autodocs.c::spg/math/subf14##
SubF14 - Subtracts a 2.14 fraction from another.

  Synopsis

    frac14 SubF14( frac14 x, frac14 y )

  Description

    This macro returns the difference between two 2.14 fractions.

  Arguments

    x, y                         Two 2.14 fractions for the subtraction.  y
                                 is subtracted from x.

  Return Value

    The macro returns the the value (x - y).

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    SubF32(), SubF60(), Sub32(), SubF30(), SubF16(), Sub64()

##src/libs/operamath/autodocs.c::spg/math/subf16##
SubF16 - Subtracts a 16.16 fraction from another.

  Synopsis

    frac16 SubF16( frac16 x, frac16 y )

  Description

    This macro returns the difference between two 16.16 fractions.

  Arguments

    x, y                         Two 16.16 fractions for the subtraction.  y
                                 is subtracted from x.

  Return Value

    The macro returns the value (x - y).

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    SubF32(), SubF60(), Sub32(), SubF30(), SubF14(), Sub64()

##src/libs/operamath/autodocs.c::spg/math/subf30##
SubF30 - Subtracts a 2.30 fraction from another.

  Synopsis

    frac30 SubF30( frac30 x, frac30 y )

  Description

    This macro returns the difference between two 2.30 fractions.

  Arguments

    x, y                         Two 2.30 fractions for the subtraction.  y
                                 is subtracted from x.

  Return Value

    The macro returns the value (x - y).

  Implementation

    Macro implemented in operamath.h V20.

  Associated Files

    operamath.h

  See Also

    SubF32(), SubF60(), Sub32(), SubF16(), SubF14(), Sub64()

##src/libs/operamath/autodocs.c::spg/math/subf32##
SubF32 - Subtracts a 32.32 fraction from another.

  Synopsis

    void SubF32( frac32 *r, frac32 *s1, frac32 *s2 )

  Description

    This function subtracts two 32.32 fractions and deposits the result in
    the location pointed to by r.

  Arguments

    r                            A pointer to the 32.32 fraction result of
                                 the subtraction.

    s1, s2                       Pointers to the two 32.32 fractions for the
                                 subtraction.  s2 is subtracted from s1.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Sub64(), SubF60(), SubF16(), SubF30(), SubF14(), Sub32()

##src/libs/operamath/autodocs.c::spg/math/subf60##
SubF60 - Subtracts a 4.60 fraction from another.

  Synopsis

    void SubF60( frac60 *r, frac60 *s1, frac60 *s2 )

  Description

    This function subtracts two 4.60 fractions and deposits the result in the
    location pointed to by r.

  Arguments

    r                            A pointer to the 4.60 fraction result of the
                                 subtraction.

    s1, s2                       Pointers to the two 4.60 fractions for the
                                 subtraction.  s2 is subtracted from s1.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Sub64(), SubF32(), SubF16(), SubF30(), SubF14(), Sub32()

##src/libs/operamath/autodocs.c::spg/math/transpose33_f16##
Transpose33_F16 - Transposes a 3x3 matrix of 16.16 values.

  Synopsis

    void Transpose33_F16( mat33f16 dest, mat33f16 src )

  Description

    This function transposes a 3-by-3 matrix of 16.16 values and deposits the
    result in the matrix dest.

  Arguments

    dest                         Pointer to destination matrix to store the
                                 result.

    src                          The matrix to transpose.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Transpose44_F16()

##src/libs/operamath/autodocs.c::spg/math/transpose44_f16##
Transpose44_F16 - Transposes a 4x4 matrix of 16.16 values.

  Synopsis

    void Transpose44_F16( mat44f16 dest, mat44f16 src )

  Description

    This function transposes a 4-by-4 matrix of 16.16 values and deposits the
    result in the matrix dest.

  Arguments

    dest                         Pointer to destination matrix to store the
                                 result.

    src                          The matrix to transpose.

  Implementation

    Folio call implemented in operamath V20.

  Associated Files

    operamath.h, operamath.lib

  See Also

    Transpose33_F16()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/centercelonscreen##
CenterCelOnScreen - Center a cel on the screen

  Synopsis

    void CenterCelOnScreen (CCB *ccb)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases. Use
    CenterRectCelInDisplay() as a replacement.

    Centers the cel named by ccb.  This function calls MapCel() to set
    the relevant ccb fields.  This function also assumes your screen
    dimensions are 320 * 240.

  Arguments

    ccb                          Pointer to the CCB you want to center.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    SetQuad(), SetRectf16(), CenterRectf16(), CenterRectCelInDiplay()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/centerrectf16##
CenterRectf16 - Center a rectangle in a frame

  Synopsis

    void CenterRectf16 (Point *q, Rectf16 *rect, Rectf16 *frame)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Sets the coordinates of the four points q[0] through q[3]. Determines
    these coordinates by centering the Rectf16 rectangle within the Rectf16
    frame. The Rectf16 structure has the following definition:

    typedef struct tag_Rectf16 {
        frac16 rectf16_XLeft;
        frac16 rectf16_YTop;
        frac16 rectf16_XRight;
        frac16 rectf16_YBottom;
    } Rectf16;

  Arguments

    q                            Pointer to an array of 4 points.

    rect                         Pointer to a Rectf16 structure.

    frame                        Pointer to a Rectf16 structure.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    SetQuad, SetRectf16, CenterCelOnScreen, CenterCRectInCRect,
    CenterCRectInDisplay, CenterCRectOverIPoint, CenterSRectInSRect,
    CenterSRectInDisplay, CenterSRectOverIPoint

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/fadeincel##
FadeInCel - Fade in a cel

  Synopsis

    bool FadeInCel (CCB *ccb, CCB *maskccb, int32 *stepValue)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Calls SetCelScale() to set up the parameters for the next step in the
    fade-in of the cel and then increments stepValue. To fade in a cel, call
    SetFadeInCel() to initialize the CCBs, then iteratively call FadeInCel()
    and DrawCels() MAX_SCALE times. MAX_SCALE is defined in utils3do.h.

  Arguments

    ccb                          Pointer to the CCB of the cel to fade in.

    maskccb                      Pointer to the scratch CCB already
                                 initialized by SetFadeInCel().

    stepValue                    Pointer to an int32 which will be
                                 incremented.

  Return Value

    TRUE if successful, FALSE if not. Returns FALSE when stepValue reaches
    MAX_SCALE.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    SetCelScale(), SetFadeInCel(), SetFadeOutCel(), FadeOutCel()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/fadeoutcel##
FadeOutCel - Fade out a cel

  Synopsis

    bool FadeOutCel (CCB *ccb, CCB *maskccb, int32 *stepValue)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Calls SetCelScale() to set up the parameters for the next step in the
    fade-out of the cel and then increments stepValue. To fade out a cel, call
    SetFadeInCel() to initialize the CCBs, then iteratively call FadeOutCel()
    and DrawCels() MAX_SCALE times.

  Arguments

    ccb                          Pointer to a CCB.

    maskccb                      Pointer to the scratch CCB already
                                 initialized by SetFadeOutCel().

    stepValue                    Pointer to an int32 which will be
                                 incremented.

  Return Value

    TRUE if successful, FALSE if not.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    SetCelScale(), SetFadeInCel(), FadeInCel(), SetFadeOutCel()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/framebuffertocel##
FrameBufferToCel - Convert a frame buffer image to a cel

  Synopsis

    bool FrameBufferToCel (Item iScreen, CCB* cel)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.
    Use CreateLRFormCel() as a replacement.

  Return Value

    TRUE if successful, FALSE if not.

  Associated Files

    obsoletelib3do.lib, utils3do.h

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/free##
Free - Free memory allocated by Malloc

  Synopsis

    void * Free (void *block)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Frees a block of memory previously allocated via Malloc(). Do not use this
    function to free blocks of memory allocated by any method other than
    Malloc().

  Arguments

    block                        Pointer to the memory block to be freed.

  Return Value

    Always returns NULL.

  Associated Files

    obsoletelib3do.lib, umemory.h

  See Also

    Malloc(), MemBlockSize()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/freebuffer##
FreeBuffer - Free a buffer allocated by LoadAnim(), LoadImage(), or
             LoadCel()

  Synopsis

    void FreeBuffer (char *filename, long *fileBuffer)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    This function is obsolete

  Arguments

    filename                     Address of a character string which
                                 specifies a filename.

    filebuffer                   Pointer to the memory buffer being released.
                                 Assumes the buffer is the same size as the
                                 file specified by filename.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    LoadAnim(), LoadCel(), LoadImage()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/loadsoundeffect##
LoadSoundEffect - Load a sound effect

  Synopsis

    Item LoadSoundEffect (char* sFilename, int nNumVoices)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Loads a sound effect from the specified file and assigns it nNumVoices. It
    does this by loading the Instrument template "sampler.ofx",
    allocating an instrument for the sound effect, loading the sample
    specified by sFilename, and then attaching the sample to the allocated
    instrument.

    This function is being pased out and will not appear in future releases of
    the library. It uses global variables and inappropriate audio folio
    techniques wwhich result in audio pops and clicks. The tsc_soundfx source
    code in the Examples folder demonstrates proper techniques for managing
    sound effects.

  Arguments

    sFilename                    pointer to character string containing the
                                 path name of an audio sample file in AIFF
                                 format.

    nNumVoices                   number of voices to assign to this sound
                                 effect. 1 for Mono, 2 for stereo.

  Return Value

    The item representing the allocated instrument.

  Associated Files

    obsoletelib3do.lib, parse3do.h

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/makenewcel##
MakeNewCel - Create a new cel of specified size

  Synopsis

    CCB * MakeNewCel (Rectf16 *r)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases. Use
    CreateCel() or CreateBackdropCel() as a replacement.

    Creates a new cel with default CCB values and fills it with white
    pixels.

  Arguments

    r                            Pointer to a Rectf16 which specifies the
                                 size of the cel.

  Return Value

    A pointer to the CCB of the cel that was created.

  Associated Files

    obsoletelib3do.lib, utils3do.h

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/malloc##
Malloc - Allocate a block of memory

  Synopsis

    void * Malloc (uint32 size, uint32 memTypeBits)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Allocates a block of memory of the requested size and type.

    This function supports allocation of all memory types defined in the
    system header file mem.h, including valid combinations of types (for
    example, MEMTYPE_CEL|MEMTYPE_FILL|0xFF to allocate cel memory which is
    pre-initialized to contain 0xFF in all bytes). The umemory.h header file
    automatically includes the mem.h header file for you.

    This function correctly handles page-aligned VRAM allocations, returning a
    pointer to the beginning of a VRAM memory page.

    A block of memory allocated with this function must be freed with the
    Free() -- not free() or FreeMem() -- function.

  Arguments

    size                         Size (in bytes) of the block to be
                                 allocated.

    memTypeBits                  Type of memory to allocate.

  Return Value

    A pointer to the allocated block, or NULL if the memory couldn't be
    allocated.

  Associated Files

    obsoletelib3do.lib, umemory.h

  See Also

    Free(), MemBlockSize()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/mapp2cel##
MapP2Cel - Optimized version of MapCel()

  Synopsis

    void MapP2Cel (Point *q, CCB *ccb)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Sets the CCB fields of a cel to draw that cel with its four corners
    specified by the array of four points addressed by q. Assumes that both
    the width and height of the cel are integral powers of 2. This is a
    special case of the more general MapCel()call in the graphics folio,
    optimized for power of 2 cels.

    This routine sets the CCB fields ccb_X, ccb_Y, ccb_HDX, ccb_HDY, ccb_VDX,
    ccb_VDY, ccb_DDX, and ccb_DDY. MapP2Cel() achieves its optimizations by
    performing right shifts instead of divides.

  Arguments

    q                            Pointer to an array of four points which
                                 specify the destination coordinates of the
                                 cel.

    ccb                          Pointer to the CCB for the cel. The celxd5
                                 s width and height must both be integral
                                 powers of 2 for this function to work
                                 properly.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    MapCel()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/movecel##
MoveCel - Move a cel

  Synopsis

    void MoveCel (CCB *ccb, MoveRec *pMove)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Moves a cel from beginQuad to endQuad over numberOfFrames, using the
    MoveRec structure defined by PreMoveCel(). Each time MoveCel() is called,
    the increments calculated in PreMoveCel() are added to the current corner
    values and the results are applied to the corners of the cel using
    MapCel().

    MoveCel() does not draw the cel into a frame buffer.

  Arguments

    ccb                          Pointer to the CCB for the cel you want to
                                 move. This CCB's position fields will be
                                 updated

    pMove                        Pointer to the MoveRec structure that
                                 contains the increments and to the current
                                 quad.

        The MoveRec structure is defined as:

                typedef struct tag_MoveRec {
                        MoveVect        curQuadf16[4];  // the current coords for the cel
                        MoveVect        quadIncr[4];    // x and y increments for the corners
                } MoveRec

        This structure, in turn, uses the MoveVect structure, which is defined as
        follows:

                typedef struct tag_MoveVect {
                        frac16 xVector;
                        frac16 yVector;
                } MoveVect

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    PreMoveCel()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/openaudio##
OpenAudio - Opens the audio folio and loads a default mixer

  Synopsis

    bool OpenAudio( void )

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases. Use
    OpenAudioFolio() instead.

    OpenAudio() initializes the audio folio, opening it and loading a default
    mixer.It initializes the global variable TheMixer to make it accessible by
    other applications. TheMixer provides four "voices," each with two
    separate audio channels.

  Return Value

    TRUE if successful, FALSE if not.

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/openmaclink##
OpenMacLink - Open the MAC device

  Synopsis

    bool OpenMacLink (void)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases. The
    function does absolutely nothing.

  Return Value

    Returns TRUE.

  Associated Files

    obsoletelib3do.lib, init3do.h

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/opensport##
OpenSPORT - Set up items for the SPORT device

  Synopsis

    bool OpenSPORT (void)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases. The
    function does absolutely nothing.

  Return Value

    Returns TRUE.

  Associated Files

    obsoletelib3do.lib, init3do.h

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/premovecel##
PreMoveCel - Set up a cel for a MoveCel() call

  Synopsis

    void PreMoveCel (CCB *ccb,
                     Point *beginQuad, Point *endQuad,
                     int32 numberOfFrames, MoveRec *pMove)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Calculates the increments for each corner of a cel you want to move from
    the quadrilateral defined by beginQuad to the quadrilateral defined by
    endQuad. The numberOfFrames parameter specifies how many iterations are
    needed to complete the movement.

  Arguments

    ccb                          The CCB to be moved.

    beginQuad                    Four coordinates that define the starting
                                 position of the cel.

    endQuad                      Four coordinates that define the ending
                                 position of the cel.

    numberOfFrames               Number of iterations to go from beginning to
                                 end. Should be between 1 and 32767.

    pMove                        Pointer to the MoveRec to contain increments
                                 and the quadrilateral defined by beginQuad
                                 and endQuad.

    A MoveRec structure is defined as follows:

                typedef struct tag_MoveRec {
                        MoveVect        curQuadf16[4];  // the current coords for the cel
                        MoveVect        quadIncr[4];    // x and y increments for the corners
                } MoveRec

    This structure, in turn, uses the MoveVect structure, which is defined as
    follows:

                typedef struct tag_MoveVect {
                        frac16 xVector;
                        frac16 yVector;
                } MoveVect

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    MoveCel()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/readcontrolpad##
ReadControlPad - Return the state of the first controlpad

  Synopsis

    long ReadControlPad (long lControlMask)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Returns the state of the first control pad:Returns the current state of
    the button for all bits that have a 1 in the corresponding position of the
    control mask. Reports only down transitions for bits which have a 0 in the
    control mask.

    The mask functions as a report continuous mask. Relevant constants are
    defined in hardware.h

        // === JOYSTICK/JOYSTICK1 flags ===
        #define JOYSTART        0x00000080
        #define JOYFIREC        0x00000040
        #define JOYFIREA        0x00000020
        #define JOYFIREB        0x00000010
        #define JOYDOWN         0x00000008
        #define JOYUP           0x00000004
        #define JOYRIGHT        0x00000002
        #define JOYLEFT         0x00000001
        #define JOYSELECT       JOYFIREC
        #define JOYMOVE         (JOYLEFT+JOYRIGHT+JOYUP+JOYDOWN)
        #define JOYBUTTONS      (JOYFIREA+JOYFIREB+JOYFIREC+JOYSTART)

  Arguments

    lControlMask                 A long word control mask.

  Associated Files

    obsoletelib3do.lib, utils3do.h

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/reportmemoryusage##
ReportMemoryUsage - Free memory allocated by Malloc  #### SAY WHAT?

  Synopsis

    void ReportMemoryUsage (void)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases. Use
    AvailMem() as a replacement.

  Associated Files

    obsoletelib3do.lib, umemory.h

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/setcelscale##
SetCelScale - Called by FadeInCel() and FadeOutCel()

  Synopsis

    void SetCelScale (CCB *ccb, CCB *maskccb, int32 stepValue)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    SetCelScale() sets up the multipliers and dividers of both ccb and maskccb
    to the level determined by stepValue. This provides a finer grained fade
    in by drawing the cel twice, once with ccb and once with maskccb.

    This function assumes that the cel has a checkerboard or random dither
    P-Mode mask. The high and low words of the PPMPC are updated alternately.
    If the cel does not have a per pixel P-Mode mask, it fades in on even
    steps only.

    This function is used by FadeInCel() and FadeOutCel(), and is not normally
    called by the user.

  Arguments

    ccb                          Pointer to the CCB to be faded in.

    maskccb                      Pointer to a CCB. This CCB should be
                                 previously initialized by SetFadeInCel() to
                                 point to the same pixel data as ccb.

    stepValue                    Determines which scalar values entry to
                                 apply to the cel. The value is between 0 and
                                 22.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    SetFadeInCel(), SetFadeInCel(), SetFadeOutCel(), FadeOutCel()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/setchannel##
SetChannel - Assign an instrument to an audio channel

  Synopsis

    bool SetChannel (Item iInstrument, int nChannel)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Assigns an instrument to an audio channel.

  Arguments

    iInstrument                  Item descriptor for an instrument. Usually
                                 obtained from LoadSoundEffect().

    nChannel                     The channel to use.

  Return Value

    TRUE if successful, FALSE if not.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    LoadSoundEffect()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/setfadeincel##
SetFadeInCel - Set up a cel for a FadeInCel() call

  Synopsis

    void SetFadeInCel (CCB *ccb, CCB *maskccb, int32 *stepValue)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Sets up a cel for a FadeInCel() call as follows:copies the CCB data from
    ccb into maskccbinitializes the relevant CCB control fields in ccb and
    maskccbinitializes stepValue to 0

    SetFadeInCel() also links maskccb to cbb so that drawing ccb is
    automatically followed by drawing maskccb. The two CCBs together allow a
    finer grained fade-in than is possible with a single CCB.

  Arguments

    ccb                          Pointer to the CCB of a cel to be faded in.

    maskccb                      Pointer to a scratch CCB.

    stepValue                    Pointer to an Int32 used to hold the current
                                 step value index.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    SetCelScale(), FadeInCel(), SetFadeOutCel(), FadeOutCel()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/setfadeoutcel##
SetFadeOutCel - Set up a cel for a FadeOutCel() call

  Synopsis

    void SetFadeOutCel (CCB *ccb, CCB *maskccb, int32 *stepValue)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Sets up the cel ccb points to for the FadeOutCel() function:

        copies the CCB data from ccb into maskccb
        sets up the proper CCB control fields in the two CCBs
        initializes stepValue to 0

    This function also links maskccb to cbb, so that drawing cbb will
    automatically draw maskccb in succession. The two CCBs together allow a
    finer grained fade-in than a single CCB would allow.

  Arguments

    ccb                          Pointer to the CCB of a cel to be faded out.

    maskccb                      Pointer to a scratch CCB.

    stepValue                    Pointer to an Int32 used to hold the current
                                 stepValue index.

  Return Value

    TRUE if successful, FALSE if not.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    SetCelScale(), SetFadeInCel(), FadeInCel(), FadeOutCel()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/setmixer##
SetMixer - Set volume and balance of an audio channel

  Synopsis

    bool SetMixer (int nChannel, int32 nVolume, int32 nBalance)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Sets the overall volume and balance of a given audio channel.

  Arguments

    nChannel                     Audio channel to set.

    nVolume                      Overall volume for this channel. Ranges from
                                 0 to 0x7FFF. The volume passed in is
                                 actually divided by four, assuming a 4x2
                                 mixer.

    nBalance                     Balance setting for this channel. 0x4000 is
                                 the mid point. 0x7FFF is full right.

  Return Value

    TRUE if successful, FALSE if not.

  Associated Files

    obsoletelib3do.lib, utils3do.h

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/setquad##
SetQuad - Set a Quad defined by the specified coordinates

  Synopsis

    void SetQuad (Point *r, Coord left, Coord top,
                  Coord right, Coord bottom)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Set an array of four points (a quad) to conform to the rectangle defined
    by the values of left, top, right, and bottom.

  Arguments

    r                            pointer to an array of four Point
                                 structures.

    left                         Coordinate of the left edge of the
                                 rectangle.

    top                          Coordinate of the top edge of the rectangle.

    right                        Coordinate of the right edge of the
                                 rectangle.

    bottom                       Coordinate of the bottom edge of the
                                 rectangle.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    SetRect()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/setrectf16##
SetRectf16 - Convert integer coordinates to 16.16 coordinates

  Synopsis

    void SetRectf16 (Rectf16 *r, Coord left, Coord top,
                     Coord right, Coord bottom)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases.

    Sets the four corners of the specified rectangle to be fixed point 16.16
    conversions of the four integer coordinates passed to the function. The
    Rectf16 structure is defined as follows:

                typedef struct tag_Rectf16 {
                        frac16  rectf16_XLeft;
                        frac16  rectf16_YTop;
                        frac16  rectf16_XRight;
                        frac16  rectf16_YBottom;
                } Rectf16;

  Arguments

    r                            Pointer to a Rectf16 structure.

    left                         Integer Coord.

    top                          Integer Coord.

    right                        Integer Coord.

    bottom                       Integer Coord.

  Associated Files

    obsoletelib3do.lib, utils3do.h

  See Also

    SetQuad()

##src/libs/obsoletelib3do/autodocs.c::spg/obsoletelib3do/shutdown##
ShutDown - Shut down the system cleanly

  Synopsis

    void ShutDown (void)

  Description

    This function is obsolete and should not be used by new code.
    It will be eliminated for future Portfolio releases. Use
    CloseAudioFolio() as a replacement.

  Associated Files

    obsoletelib3do.lib, init3do.h

  See Also

    CloseAudioFolio()

##src/libs/c/addtimes.c::spg/timer/addtimes##
AddTimes - Adds two time values together

  Synopsis

    void AddTimes(const TimeVal *tv1, const TimeVal *tv2,
                  TimeVal *result);

  Description

    Adds two time values together, yielding the total time for both.

  Arguments

    tv1                         The first time value to add.

    tv2                         The second time value to add.

    result                      A pointer to the location where
                                the resulting time value will be
                                stored. This pointer can match either
                                of 'tv1' or 'tv2'.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    time.h, clib.lib

  See Also

    SubTimes(), CompareTimes()

##src/libs/c/comparetimes.c::spg/timer/comparetimes##
CompareTimes - compare two time values

  Synopsis

    int32 CompareTimes(const TimeVal *tv1,
                       const TimeVal *tv2);

  Description

    Compares two time values to determine which came first.

  Arguments

    tv1                         The first time value.

    tv2                         The second time value.

  Return Value

    < 0                         if (tv1 < tv2)

    == 0                        if (tv1 == tv2)

    > 0                         if (tv1 > tv2)

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    time.h, clib.lib

  See Also

    AddTimes(), SubTimes(), TimeLaterThan(), TimeLaterThanOrEqual()

##src/libs/c/createtimerio.c::spg/timer/createtimerioreq##
CreateTimerIOReq - Create a timer device IO request

  Synopsis

    Item CreateTimerIOReq(void);

  Description

    Creates an IO request for communication with the timer device.

  Return Value

    Returns a timer IO request Item, or a negative error code
    for failure.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    time.h, clib.lib

  See Also

    DeleteTimerIOReq(), WaitTime(), WaitUntil()

##src/libs/c/deletetimerio.c::spg/timer/deletetimerioreq##
DeleteTimerIOReq - Delete a timer device IO request

  Synopsis

    Err DeleteTimerIOReq(Item ioreq);

  Description

    Frees any resources used by a previous call to CreateTimerIOReq().

  Arguments

    ioreq                       The IO request Item, as returned by
                                a previous call to CreateTimerIOReq().

  Return Value

    >= 0 for success, or a negative error code for failure.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    time.h, clib.lib

  See Also

    CreateTimerIOReq(), WaitTime(), WaitUntil()

##src/libs/c/subtimes.c::spg/timer/subtimes##
SubTimes - Subtract one time value from another

  Synopsis

    void SubTimes(const TimeVal *tv1, const TimeVal *tv2,
                  TimeVal *result);

  Description

    Subtracts two time values, yielding the difference in time
    between the two.

  Arguments

    tv1                         The first time value.

    tv2                         The second time value.

    result                      A pointer to the location where
                                the resulting time value will be
                                stored. This pointer can match either
                                of 'tv1' or 'tv2'. The value which
                                is stored corresponds to (tv2 - tv1)

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    time.h, clib.lib

  See Also

    AddTimes(), CompareTimes()

##src/libs/c/comparetimes.c::spg/timer/timelaterthan##
TimeLaterThan - Returns whether a time value comes before another

  Synopsis

    bool TimeLaterThan(const TimeVal *tv1,
                       const TimeVal *tv2);

  Description

    Returns whether tv1 come chronologically after tv2.

  Arguments

    tv1                         The first time value.

    tv2                         The second time value.

  Return Value

    TRUE                        if tv1 comes after tv2

    FALSE                       if tv1 comes before or is the same as
                                tv2

  Implementation

    Macro implemented in time.h V24.

  Associated Files

    time.h

  See Also

    CompareTimes(), TimeLaterThanOrEqual()

##src/libs/c/comparetimes.c::spg/timer/timelaterthanorequal##
TimeLaterThanOrEqual - Returns whether a time value comes before or
                       at the same time as another

  Synopsis

    bool TimeLaterThanOrEqual(const TimeVal *tv1,
                              const TimeVal *tv2);

  Description

    Returns whether tv1 come chronologically after tv2, or is the same
    as tv2.

  Arguments

    tv1                         The first time value.

    tv2                         The second time value.

  Return Value

    TRUE                        if tv1 comes after tv2 or is the
                                same as tv2

    FALSE                       if tv1 comes before tv2

  Implementation

    Macro implemented in time.h V24.

  Associated Files

    time.h

  See Also

    CompareTimes(), TimeLaterThan()

##src/libs/c/waittime.c::spg/timer/waittime##
WaitTime - Wait for a given amount of time to pass

  Synopsis

    Err WaitTime(Item ioreq, uint32 seconds, uint32 micros);

  Description

    Puts the current context to sleep for a specific amount of
    time.

  Arguments

    ioreq                       An active timer device IO request, as
                                obtained from CreateTimerIOReq().

    seconds                     The number of seconds to wait for.

    micros                      The number of microseconds to wait for.

  Return Value

    >= 0 for success, or a negative error code for failure.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    time.h, clib.lib

  See Also

    CreateTimerIOReq(), DeleteTimerIOReq(), WaitUntil()

##src/libs/c/waituntil.c::spg/timer/waituntil##
WaitUntil - Wait for a given amount of time to pass

  Synopsis

    Err WaitTime(Item ioreq, uint32 seconds, uint32 micros);

  Description

    Puts the current context to sleep until the system clock reaches
    a given time.

  Arguments

    ioreq                       An active timer device IO request, as
                                obtained from CreateTimerIOReq().

    seconds                     The seconds value that the timer
                                must reach.

    micros                      The microseconds value that the timer
                                must reach.

  Return Value

    >= 0 for success, or a negative error code for failure.

  Implementation

    Convenience call implemented in clib.lib V24.

  Associated Files

    time.h, clib.lib

  See Also

    CreateTimerIOReq(), DeleteTimerIOReq(), WaitTime()

##src/audio/examples/audiomon.c::tpg/shell/audiomon##
audiomon - display DSP resource usage

  Format

    audiomon

  Description

    Displays how the resources of the DSP are currently being used by the
    executing programs. This allows audio programmers to find out why new
    instruments are not being loaded or allocated, and why new voices cannot be
    started.

    To use this program, execute this program while your audio track is playing
    on the 3DO. A debug screen will appear with the following resource use
    information:

        TKR     DSP audio ticks remaining.

        TKA     DSP audio ticks available.

        COD     Instruction (N) memory available, in words.

        KNB     External input (EI) memory available.

        VAR     Internal (I) memory available.

        EOM     External output (EO) memory available.

        Rb4     For system-level use only.

        Rb8     For system-level use only.

        InF     FIFOs available from main memory to the DSP.

        OtF     FIFOs available from the DSP to main memory.

  Arguments

    None

  Implementation

    Released as an example in V20.

    Implemented as a command in V24 (source code no longer available).

  Location

    $c/audiomon

  Caveats

    This program was written to deal with Opera and Anvil hardware only. Future
    versions of DSP hardware may have different memory configurations.

    If this program is running while your application is writing to the screen,
    the screen will flicker as both tasks attempt to write to the screen.

    Note that there's no built-in way to quit this program. It must be killed
    from the shell.

##src/audio/examples/ta_faders.c::tpg/shell/dspfaders##
dspfaders - demo a DSP instrument

  Format

    dspfaders <instrument name> [<sample name>]

  Description

    This program is a diagnostic and experimentation tool to work with DSP
    instruments. It loads the named DSP instrument, connects up a noise source
    (to instruments with a signal input), connects up the named sample (for
    sample player instruments), and connects the outputs to directout.dsp.
    The instrument is then played and a set of faders is presented on the 3DO
    display that can be used to control the knobs of the instrument being
    tested.

    Control pad buttons:

        A                       Toggle between Start and Release of instrument.

        B                       Start instrument when pressed, Release instrument
                                when released (like a key on a MIDI keyboard).

        X                       Quit

        Up or Down              Select a fader by moving up or down.

        Left or Right           Adjust current fader (coarse).

        LShift + Left or Right  Adjust current fader (fine).

    Also displays benchmarking information about the instrument being tested:

        CT      Current ticks used.

        MT      Max ticks used.

    This program is somewhat similar to patchdemo in nature, but is far handier
    than patchdemo for testing out single instruments.

  Arguments

    <instrument name>           Name of a DSP instrument to demo
                                (e.g. svfilter.dsp).

    <sample name>               Sample to connect to sample playing
                                instruments (e.g. sampler.dsp). If not
                                specified, no sample is connected to
                                the instrument. There is also no
                                provision to insure that the sample
                                format and the sample player match.

  Implementation

    Released as an example in V20.

    Implemented as a command in V24 (source code no longer available).

  Location

    $c/dspfaders

  See Also

    patchdemo

##src/international/utilities/intl.c::tpg/shell/intl##
intl - get/set the international settings of the machine.

  Format

    intl [-language <2 letter ISO-639 language code>]
         [-country ]

  Description

    This command lets you display the current country and language
    as reported by the international folio. The information
    displayed corresponds to the country codes and language codes
    listed in the intl.h include file.

    By using the -language option, you can adjust the machine's
    language code. This is useful in order to test a title's
    multilingual support. Changing the language will affect how
    many of the international folio's routines behave.

    By using the -country option, you can adjust the machine's
    country code. Changing the language code will affect the
    information presented by the international folio in the Locale
    structure.

  Arguments

    -language <language code>   Change the machine's language code.
                                The language code is a two letter ASCII
                                code, as listed in the ISO-639
                                standard. Many of these codes appear
                                in the intl.h include file. For
                                example, the code for English is "en",
                                while the one for Japanese is "ja".

                                If you ask for a language that the
                                international folio doesn't support,
                                defaults will be used instead.

    -country <country code>     Change the machine's country code.
                                The language code is a three digit
                                numeric code, as listed in the ISO-3166
                                standard. Many of these codes appear
                                in the intl.h include file.

  Implementation

    Command implemented in V24.

  Location

    $c/intl
##src/app/other/iostress.c::tpg/shell/iostress##
iostress - Put some stress of the IO subsystem to uncover title bugs

  Format

    iostress [-quit]

  Description

    This command installs a set of monitoring routines which
    catch incorrect use of the IO subsystem.

    The monitoring routines ensure the following things:

      - When writing data, the routines guarantee that the buffer used
        for the IO remains consistent and does not get altered while
        the write operation occurs. This guarantees that a title is not
        fiddling with data that is in the process of being fetched by
        an IO module.

      - When reading data, the routines guarantee that it is not
        possible to read any data associated with the IO request
        until the IO request has completed. This guarantees that a
        title is not reading data before it has been completely
        transfered.

    The monitoring routines do their work by allocating temporary
    buffers and using these for the IO transactions. Doing so
    requires some extra memory, and requires some extra CPU time to
    copy data between the buffers. This can affect the performance
    of a title, possibly causing some jerky animations, but should
    never cause a crash, or trashed sound or graphics. If these
    things happen, then the title has a bug.

  Arguments

    -quit                       Tells a previously started version of
                                iostress to exit. (Quiting is
                                a tricky operation and may not always
                                work. The safest way to "quit" is by
                                resetting the system)

  Implementation

    Command implemented in V24.

  Location

    $c/iostress
##src/app/other/items.c::tpg/shell/items##
items - display lists of active items

  Format

    items []
          [-name ]
          [-type ]
          [-owner <task name>]
          [-full]

  Description

    This command displays information about the items that
    currently exist in the system. The information is sent
    out to the debugging terminal.

  Arguments

                   Requests that only information on the
                                item supplied be displayed. The item
                                number can be in decimal, or in
                                hexadecimal starting with 0x or $.

    -name            Requests that only items with the
                                supplied name be listed.

    -type            Requests that only items with the
                                supplied type be listed. The
                                currently supported types are:

                                  Folio
                                  Task
                                  FIRQ
                                  Sema4
                                  Message
                                  MsgPort
                                  Driver
                                  IOReq
                                  Device
                                  Timer
                                  ErrorText
                                  HLInt
                                  ScreenGroup
                                  Screen
                                  Bitmap
                                  VDL
                                  DisplayInfo
                                  Overlay
                                  FileSystem
                                  File
                                  Alias
                                  Locale
                                  Template
                                  Instrument
                                  Knob
                                  Sample
                                  Cue
                                  Envelope
                                  Attachment
                                  Tuning
                                  Probe

    -owner <task name>          Requests that only items owned by the
                                supplied task be displayed.

    -full                       Requests that any extra information
                                available on the items being listed
                                be displayed.

  Implementation

    Command implemented in V20.

  Location

    $c/items
##src/app/shell/autodocs.c::tpg/shell/killkprintf##
killkprintf - disable kernel kprintf screen output

  Format

    killkprintf

  Description

    This command disables kernel kprintf screen output.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.
##src/app/shell/autodocs.c::tpg/shell/killtask##
killtask - remove an executing task or thread from the system.

  Format

    killtask <task name | task item number>

  Description

    This command removes a task or thread from the system. When
    removing a task, all resources used by the task are also
    returned to the system.

  Arguments

    <task name | task item num> This specifies the name or item number
                                of the task to remove. The item
                                number can be in decimal, or in
                                hexadecimal starting with 0x or $.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    kill

  See Also

    showtask
##src/filesystem/lmadm.c::tpg/shell/lmadm##
lmadm - linked Memory Filesystem Administration Utility

  Format

    lmadm -acdmtuvyz dev_name unit offset mount_dir

  Description

    This utility performs administrative tasks on a Linked Memory
    filesystems. lmadm is designed to perform a variety of tasks.
    It checks and repairs (-c), defragments (-d), mounts (-m),
    unmounts (-u), and auto-maintains (-a) the filesystem.


  Options

    -a		 Auto-maintain the filesystem. This option unmounts
		 the filesystem, checks/repairs, defragments,
		 and remounts the filesystem. In case of a failure in
		 the consistency check/repair or defragmentation
		 process, the filesystem is formatted. This option
		 is mainly used at system startup. This option is
		 mutually exclusive with all other options except
		 for -v and -y. This option implies -y.

    -c		 Consistency check and repair. Consistency
		 check is performed in multiple passes and all
		 repairs are reported. This option is mutually
		 exclusive with -a, -m and -u.

    -d		 Defragment the filesystem. As a result of adding
		 and deleting files, filesystems become fragmented
		 and free extents become scattered. Defragmentation
		 process gathers all scattered free extents and
		 combines them into a single contiguous extent.
		 This process not only improves system performance,
 			 but it also enables the filesystem to succeed in
		 allocating storage for larger files. This option is
		 mutually exclusive with -a, -m and -u.

    -m		 Mount the filesystem. It only mounts the filesystem
		 on the specified device, if the filesystem is not
		 already mounted. This option is mutually exclusive
		 with all other options except for -v and -y.

    -t		 Display output on the TV monitor as well

    -u		 Unmount the filesystem. It only unmounts the
		 filesystem, if the filesystem is mounted. This
		 option is mutually exclusive with all other
		 options except for -v and -y.

    -v		 Verbose.

    -y		 Perform all major/minor repairs needed to bring the
		 filesystem to a consistent state.

    -z		 Remove all zero-sized files. This is performed
		 during the defragmentation process, therefore it
		 is to be used in conjunction with -a or -d options.


  Arguments

    dev_name      Name of the device the filesystem residing on.

    unit          Device unit number.

    0ffset        Offset within the device where the filesystem
		  resides.

    mount_dir     Name of the directory the filesystem is
		  mounted on.

  Examples

    The following line maintains the nvram filesystem for operation,
    this is mainly invoked at system startup:
		  $boot/system/Programs/lmadm -a ram 3 0 nvram

    The following line performs consistency check and an
    automatic repair:
		  $c/lmadm -cy ram 3 0 nvram

    The following line verbosely performs a defragmentation process
    on the nvram filesystem:
		  $c/lmadm -dv ram 3 0 nvram

    The following line mounts the nvram filesystem
		  $c/lmadm -m ram 3 0 nvram

  Caveats

    Defragmentation process SHALL ONLY be run on a clean filesystem.
    Always check/repair the filesystem first, before the
    defragmentation process is started. If both -d and -c are
    selected, the filesystem is first check/repaired and then
    defragmented. The result of defragmenting a corrupted filesystem
    is unpredictable.

    When -a option is sellected and the check/repair process
    fails, the filesystem is automatically formatted. This means
    that all existing data on the filesystem is cleared.

  Implementation

    Command implemented in V21.

  Location

    $c/lmadm

  See Also

    format, lmdump, lmfs

##src/filesystem/lmdf.c::tpg/shell/lmdf##
lmdf - Report free space for Linked Memory Filesystem

  Synopsis

    lmdf [-k]

  Description

    lmdf displays the amount of disk space occupied on
    nvram, the amount of used and available space, and how
    much of the filesystem's total capacity has been used
    and fragmented. lmdf produces an output similar to
    the following:


	    Device  Bytes  used  avail  capacity  fragment  Mounted on
	    ram.3.0 32768 16408  16040       50%       27%  /nvram


    Note: used+avail is less than the amount of space in the
    filesystem (Bytes|Kbytes); this is due to filesystem overhead.
    Furthermore, the amount of space available in the filesystem
    may not be allocated all to a single file due to fragmentation.
    If the filesystem is fragmented, use lmadm to defragment
    the filesystem. However, if there is no fragmentation
    (fragment reports 0%), then the available space in its
    entirely can be allocated to a single file.

    If nvram is not mounted, no data is reported.

  Options

    -k		 All ouput data is rounded to 1024 bytes.

  Implementation

    Command implemented in V21.

  Location

    $c/lmdf

  See Also

    lmadm, format, lmdump, lmfs

##src/audio/examples/patchdemo.c::tpg/shell/patchdemo##
patchdemo - tool to experiment with DSP patch construction

  Format

    patchdemo <patch file>

  Description

    This program interprets a text file containing a description of a patch
    made out of DSP instruments, samples, delay lines, etc. It then provides you
    with a set of faders for adjusting knobs in the patch's instruments. The patch
    language is a very simple command oriented language that closely resembles
    audio folio function names. Therefore, patchdemo can be used to quickly construct
    DSP patches that you later plan to implement in C. Also, with only a few
    restrictions, patchdemo patches can be imported directly into ARIA.

    patchdemo also has a built-in oscilloscope for capturing and viewing output
    audio signal.

    Controls (faders mode):

        A                       Toggle between Start and Release of instrument.

        LShift + A              Stop instrument.

        B                       Start instrument when pressed, Release instrument
                                when released (like a key on a MIDI keyboard).

        C                       Display faders for next instrument in patch.

        LShift + C              Display faders for previous instrument in patch.

        X                       Quit

        Up or Down              Select a fader by moving up or down.

        Left or Right           Adjust current fader (coarse).

        LShift + Left or Right  Adjust current fader (fine).

        RShift                  Switch to scope mode.

    Controls (scope mode):

        A                       Acquire signal as long as A button is held down.
                                Hold last acquired signal when released.

        C                       Switch to faders mode.

        X                       Quit

        Up or Down              Increase or decrease vertical scaling.

        Left or Right           Pan left or right.

        LShift or RShift        Decrease or increase horizontal scaling.

  Arguments

    <patch file>                Name of patch file to load.

  Implementation

    Released as an example in V21.

    Implemented as a command in V24 (source code no longer distributed).

  Location

    $c/patchdemo

  See Also

    3DO cookbook for Sound Designers - more complete documentation of patchdemo
    features, operation, and language.

    Examples/Audio/PatchDemo - examples patches.

    ARIA - tool to build custom DSP instruments.

    dspfaders - demo a single DSP instrument.

##src/audio/examples/playmf.c::tpg/shell/playmf##
playmf - Plays a standard MIDI file.

  Synopsis

    playmf <MIDI file> <PIMap file> [<num repeats>]

  Description

    Loads a standard MIDI format file, loads instruments and AIFF samples
    described in a PIMap file, and plays the MIDI file the specified number of
    times. Demonstrates use of the Juggler and the score playing routines.

    This program is implemented as both a shell program (in $c) and as an
    example.

  Arguments

    MIDI file                    Path and file name of a Format 0 or Format 1
                                 MIDI file.

    PIMap file                   Path and file name of a PIMap (Program-
                                 Instrument Map) text file. This file is
                                 parsed at run-time to associate MIDI program
                                 numbers with AIFF samples.

    num repeats                  Number of times to play the MIDI file.
                                 Defaults to 1.

  Implementation

    Released as an example in V20.

    Also implemented as a command in V24.

  Location

    $c/playmf examples/Audio

##src/examples/Audio/playmf.c::tpg/shell/playmf##
playmf - Plays a standard MIDI file.

  Synopsis

    playmf <MIDI file> <PIMap file> [<num repeats>]

  Description

    Loads a standard MIDI format file, loads instruments and AIFF samples
    described in a PIMap file, and plays the MIDI file the specified number of
    times. Demonstrates use of the Juggler and the score playing routines.

    This program is implemented as both a shell program (in $c) and as an
    example.

  Arguments

    MIDI file                    Path and file name of a Format 0 or Format 1
                                 MIDI file.

    PIMap file                   Path and file name of a PIMap (Program-
                                 Instrument Map) text file. This file is
                                 parsed at run-time to associate MIDI program
                                 numbers with AIFF samples.

    num repeats                  Number of times to play the MIDI file.
                                 Defaults to 1.

  Implementation

    Released as an example in V20.

    Also implemented as a command in V24.

  Location

    $c/playmf examples/Audio

##src/app/shell/autodocs.c::tpg/shell/setalias##
setalias - set a file path alias

  Format

    setalias  <str>

  Description

    This command lets you create a filesystem path alias. Once
    created, the alias can be referenced from anywhere in the system.

  Arguments

                    The name of the alias to create.

    <str>                       The string that should be substituted
                                whenever the alias is encountered
                                when parsing directory and file names.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.
##src/app/shell/autodocs.c::tpg/shell/setbg##
setbg - set the shell's default behavior to background execution mode.

  Format

    setbg

  Description

    This command sets the shell's default execution mode to
    background. This prevents the shell from waiting for tasks
    to complete when they are executed. The shell returns
    immediately and is ready to accept more commands.

    If the shell is currently in foreground mode and you wish to
    to execute only a single program in background mode, you can
    append a '&' at the end of the command-line.

    You can display the current execution mode by using the
    showshellvars command.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    bg

  See Also

    setfg, showshellvars
##src/app/shell/autodocs.c::tpg/shell/setcd##
setcd - set the shell's current directory

  Format

    setcd [directory name]

  Description

    The shell maintains the concept of a current directory.
    Files within the current directory can be referenced without
    a full path specification, in a relative manner.

    This command lets you specify the name of a directory that
    should become the current directory.

    The current directory of the shell can be displayed using the
    the showcd command, or by executing setcd with no arguments.

  Arguments

    [directory name]            The name of the directory that should
                                become the new current directory. If
                                this argument is not supplied, then
                                the name of the current directory
                                is displayed, and is not changed.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    cd

  See Also

    showcd
##src/app/shell/autodocs.c::tpg/shell/setfg##
setfg - set the shell's default behavior to foreground execution mode.

  Format

    setfg

  Description

    This command sets the shell's default execution mode to
    foreground. This forces the shell to wait for tasks to
    complete when they are executed. The shell will not accept
    new commands until the current task completes.

    If the shell is currently in background mode and you wish to
    to execute only a single program in foreground mode, you can
    append a '#' at the end of the command-line.

    You can display the current execution mode by using the
    showshellvars command.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    fg

  See Also

    setbg, showshellvars
##src/app/shell/autodocs.c::tpg/shell/setmaxmem##
setmaxmem - set the amount of memory available in the system to
            the maximum amount possible.

  Format

    setmaxmem

  Description

    This command causes the shell to adjust the amount of
    memory available in the system to be the maximum supported by
    the hardware. This effectively undoes a previous use of the
    setminmem command.

    The showshellvars command can be used to display whether
    setminmem is currently active.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    maxmem

  See Also

    setminmem, showshellvars
##src/app/shell/autodocs.c::tpg/shell/setminmem##
setminmem - set the amount of memory available in the system to
            the minimum amount of memory guaranteed to be available
            in a production environment.

  Format

    setminmem

  Description

    This command causes the shell to adjust the amount of
    memory available in the system to match the minimum amount
    a memory a title must be able to run in.

    The setmaxmem command can be used to restore the amount of
    memory to the maximum available in the current system.

    The showshellvars command can be used to display whether
    setminmem is currently active.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    minmem

  See Also

    setmaxmem, showshellvars
##src/app/shell/autodocs.c::tpg/shell/setpri##
setpri - set the shell's priority

  Format

    setpri <priority>

  Description

    This command sets the priority of the shell's task. It is
    sometimes desirable to boost the shell's priority to a high
    number. This lets commands such as showtask or memmap work
    with more accuracy.

    The current priority of the shell can be displayed using the
    the showshellvars command.

  Arguments

    <priority>                  The new shell priority. This value
                                must be in the range 10..199

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    shellpri

  See Also

    showshellvars
##src/app/shell/autodocs.c::tpg/shell/setverbose##
setverbose - control the shell's verbosity mode

  Format

    setverbose <on | off>

  Description

    This command lets you turn the shell's verbosity mode on or
    off. When in verbose mode, the shell displays some extra
    information when performing its work. This extra information
    can sometimes be useful when debugging programs.

    You can display the current verbosity mode by using the
    showshellvars command.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    verbose

  See Also

    showshellvars
##src/app/shell/autodocs.c::tpg/shell/showavailmem##
showavailmem - display information about the amount of memory
               currently available in the system.

  Format

    showavailmem

  Description

    This command displays information about the amount of memory
    installed in the system, and the amount of memory currently
    free.

    This command also displays the amount of memory currently consumed
    by supervisor-mode code.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    availmem

  See Also

    showmemmap, showmemlist
##src/app/shell/autodocs.c::tpg/shell/showcd##
showcd - show the name of the current directory

  Format

    showcd

  Description

    This command displays the name of the current directory
    to the debugging terminal.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    pcd

  See Also

    setcd
##src/app/shell/autodocs.c::tpg/shell/showerror##
showerror - display an error string associated with a system error
            code

  Format

    showerr <error number>

  Description

    This command displays the error string associated with a
    numerical system error code.

  Arguments

    <error number>              The error code to display the
                                string of. This number can be in
                                decimal, or in hexadecimal starting
                                with 0x or $.

  Implementation

    Command implemented in shell V21.

  Location

    Built-in shell command.

  Synonyms

    err
##src/app/shell/autodocs.c::tpg/shell/showkernelbase##
showkernelbase - display a few fields of interest from KernelBase.

  Format

    showkernelbase

  Description

    This command displays a few fields of interest from the system's
    KernelBase data structure.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    kbprint
##src/app/shell/autodocs.c::tpg/shell/showmemlist##
showmemlist - show the contents of a memory list.

  Format

    showmemlist <memory list address>

  Description

    This command displays all the chunks of memory currently
    available in a memory list.

  Arguments

    <memory list address>       The address of the memory list to
                                display. This address is usually
                                taken from the output of another
                                shell command such as showtask or
                                showavailmem.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    memlist

  See Also

    showmemmap, showavailmem, showtask
##src/app/shell/autodocs.c::tpg/shell/showmemmap##
showmemmap - display a page map showing which pages of memory
             are used and free in the system, and which task
             owns which pages.

  Format

    showmemmap [task name | task item number]

  Description

    This command displays a page map on the debugging terminal showing
    all memory pages in the system, and which task owns each
    page.

  Arguments

    <task name | task item num> This specifies the name or item number
                                of the task to pay special attention
                                to. The item number can be in decimal,
                                or in hexadecimal starting with 0x or
                                $. When a task is specified, any
                                pages owned by that task will be marked
                                with a '*'. This makes it quicker to
                                find pages used by a specific task.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    memmap

  See Also

    showavailmem, showmemlist
##src/app/shell/autodocs.c::tpg/shell/showshellvars##
showshellvars - show the state of various shell variables

  Format

    showshellvars

  Description

    This command displays the current state of various internal shell
    variables. The information displayed includes:

      Shell Priority  (10..199)
      Execution Mode  (Background or Foreground)
      Memory Amount   (Maximum, Minimum)
      Shell Verbosity (ON or OFF)

  Implementation

    Command implemented in shell V21.

  Location

    Built-in shell command.

  See Also

    setfg, setbg, setpri, setminmem, setmaxmem, setverbose
##src/app/shell/autodocs.c::tpg/shell/showtask##
showtask - display information about task in the system.

  Format

    showtask [task name | task item number]

  Description

    This command displays information about task and threads in the
    system. It can also be given a specific task or thread name,
    in which case a more detailled output is produced describing
    the specified task exclusively.

  Arguments

    <task name | task item num> This specifies the name or item number
                                of the task to display the information
                                about. The item number can be in
                                decimal, or in hexadecimal starting
                                with 0x or $. If this argument is not
                                supplied, then general information
                                about all tasks in the system is
                                displayed.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.

  Synonyms

    ps
##src/app/shell/autodocs.c::tpg/shell/sleep##
sleep - cause the shell to pause for a number of seconds

  Format

    sleep <number of seconds>

  Description

    This command tells the shell to go to sleep for a given
    number of seconds. The shell will not accept commands while
    it is sleeping.

  Arguments

    <number of seconds>         The number of seconds to sleep for.

  Implementation

    Command implemented in shell V20.

  Location

    Built-in shell command.
##src/app/other/sysload.c::tpg/shell/sysload##
sysload - Dynamically display the system's CPU/memory load

  Format

    sysload [-top <top edge>]
            [-height <height>]
            [-rate <update rate>]
            [-barcolor <color>]
            [-bordercolor <color>]
            [-textcolor <color>]
            [-bgcolor <color>]
            [-dsp]
            [-nodsp]
            [-ram]
            [-noram]
            [-quit]

  Description

    This command creates an overlay that sits on top of any
    screen displayed on a 3DO. The overlay has a graph showing
    current CPU utilization, as well as four bar graphs showing
    the number of DRAM pages used, VRAM pages used, DSP ticks
    reserved, and DSP code used.

    The overlay hovers on top of all other displays on the 3DO system.
    The overlay is only visible if there are opened screens in the
    system. Closing all screens will close the overlay automatically,
    and it comes back magically the next time a screen opens.

    If sysload is already running in the system, and it is run
    again, any command-line options you give are passed automatically
    to the running version, which responds to them. The second version
    then exits.

  Arguments

    -top <top edge>             Lets you specify the top edge of
                                the overlay on the display. The
                                supplied number specifies the number
                                of pixels from the top of the display
                                where the overlay should start.

    -height <height>            Lets you specify the total height
                                of the overlay.

    -rate <update rate>         Lets you specify the update rate to
                                use in milliseconds. The default rate
                                is 1000 milliseconds (1 second).

    -barcolor <color>           Lets you provide a 16-bit RGB value
                                that is used to render the histograms
                                and the graph.

    -bordercolor <color>        Lets you provide a 16-bit RGB value
                                that is used to render the borders
                                around the various sections of the
                                overlay display.

    -textcolor <color>          Lets you specify a 16-bit RGB value
                                that is used to render any text on
                                the overlay display.

    -bgcolor <color>            Lets you specify a 16-bit RGB value
                                that is used to render the background
                                of the overlay display.

    -dsp                        Specifies that you want the DSP usage
                                line displayed. This is the default.

    -nodsp                      Specifies that you do not want the DSP
                                usage line displayed.

    -ram                        Specifies that you want the RAM usage
                                line displayed. This is the default.

    -noram                      Specifies that you do not want the RAM
                                usage line displayed.

    -quit                       Tells a previously started version of
                                sysload to exit.

  Implementation

    Command implemented in V22.

  Location

    $c/sysload
